(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{"+K+b":function(e,t,a){var n=a("JHRd");e.exports=function(e){var t=new e.constructor(e.byteLength);return new n(t).set(new n(e)),t}},"+iFO":function(e,t,a){var n=a("dTAl"),i=a("LcsW"),r=a("6sVZ");e.exports=function(e){return"function"!=typeof e.constructor||r(e)?{}:n(i(e))}},"1+5i":function(e,t,a){var n=a("w/wX"),i=a("sEf8"),r=a("mdPL"),s=r&&r.isSet,o=s?i(s):n;e.exports=o},"1LK5":function(e,t){e.exports=function(e,t){var a=e.length;for(e.sort(t);a--;)e[a]=e[a].value;return e}},"3WF5":function(e,t,a){var n=a("eUgh"),i=a("ut/Y"),r=a("l9OW"),s=a("Z0cm");e.exports=function(e,t){return(s(e)?n:r)(e,i(t,3))}},"5Tg0":function(e,t,a){(function(e){var n=a("Kz5y"),i=t&&!t.nodeType&&t,r=i&&"object"==typeof e&&e&&!e.nodeType&&e,s=r&&r.exports===i?n.Buffer:void 0,o=s?s.allocUnsafe:void 0;e.exports=function(e,t){if(t)return e.slice();var a=e.length,n=o?o(a):new e.constructor(a);return e.copy(n),n}}).call(this,a("YuTi")(e))},"7Ix3":function(e,t){e.exports=function(e){var t=[];if(null!=e)for(var a in Object(e))t.push(a);return t}},"88Gu":function(e,t){var a=Date.now;e.exports=function(e){var t=0,n=0;return function(){var i=a(),r=16-(i-n);if(n=i,r>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}},BE0I:function(e,t,a){"use strict";a.r(t),a.d(t,"EditorModule",function(){return Ao});var n=a("tyNb"),i=a("NUQi"),r=a("fXoL");const s=function(){return["/login"]};let o=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r.Ob({type:e,selectors:[["app-not-found"]],decls:8,vars:2,consts:[[1,"not-found-wrapper","d-flex","flex-column","align-items-center","justify-content-center"],["src","https://static-assets.pixelied.com/logos/px-logo-purple-rounded.svg","alt",""],[1,"error-message"],[1,"btn","btn-lg","btn-dark","btn-block",3,"routerLink"]],template:function(e,t){1&e&&(r.ac(0,"div",0),r.Vb(1,"img",1),r.ac(2,"h1"),r.Qc(3,"Sorry!"),r.Zb(),r.ac(4,"span",2),r.Qc(5,"Design not found"),r.Zb(),r.ac(6,"a",3),r.Qc(7,"Login"),r.Zb(),r.Zb()),2&e&&(r.Hb(6),r.uc("routerLink",r.xc(1,s)))},directives:[n.h],styles:[".not-found-wrapper[_ngcontent-%COMP%]{height:100%;width:100%;padding:30px}.not-found-wrapper[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-weight:700;font-size:50px;padding:18px}.not-found-wrapper[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:70px}.not-found-wrapper[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{font-size:18px;font-weight:500;color:#696871}.not-found-wrapper[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{max-width:20rem;margin-top:1rem;padding:12px 30px;font-size:20px;font-weight:600;border-radius:8px}"]}),e})();var c=a("mrSG"),l=a("epSk"),d=a("s0/r"),p=a("quSY"),h=a("itXk");const u=["id","groupType","locked","lockUniScaling","perPixelTargetFind","objectCaching","noScaleCache","strokeUniform","crossOrigin","originalLeft","originalTop","isCustomFont","fontFamilyCommandName","fontFileUrl","isMockup","mockupData","mockupId","mockupImageType","imageUploading","imageUploadingTimestamp"];var b=a("AytR"),g=a("J9Y1"),f=a("ohuO"),v=a("DzJC"),m=a.n(v),C=a("NCNF"),w=a("BkRI"),_=a.n(w),y=function(e){return e.DefaultProps="defaultProps",e.BasicProps="basicProps",e.GroupBasicProps="groupBasicProps",e.Layers="layers",e.ShadowProps="shadowProps",e.ChangedDesign="changedDesign",e.GroupColors="groupColors",e.GroupObjects="groupObjects",e.UngroupObjects="ungroupObjects",e.CanvasFill="canvasFill",e.ObjectsRemoved="objectsRemoved",e.ObjectAdded="objectAdded",e.MockupsCanvasStateInit="mockupsCanvasStateInit",e.MockupsCanvasStateEnd="mockupsCanvasStateEnd",e.BlendAdded="blendAdded",e.CanvasJSON="canvasJSON",e.PageChanged="pageChanged",e.PageRemoved="pageRemoved",e.PageAdded="pageAdded",e.PageDuplicated="pageDuplicated",e.PageMoved="pageMoved",e}({}),x=a("3WF5"),H=a.n(x),S=a("gtzJ"),k=a("ofXK"),O=a("3Pt+"),I=a("ahC7"),P=a("Khuc"),T=a("1kSV"),E=a("Olgc"),F=a("25W8");function A(e,t){if(1&e){const e=r.bc();r.ac(0,"div",10),r.ac(1,"span",11),r.Qc(2,"Don't have "),r.Vb(3,"br"),r.Qc(4," an account?"),r.Zb(),r.ac(5,"button",12),r.kc("click",function(){return r.Ic(e),r.oc().changeUIMode("signup")}),r.Qc(6," Sign Up "),r.Zb(),r.Zb()}}function M(e,t){if(1&e){const e=r.bc();r.ac(0,"div",10),r.ac(1,"span",11),r.Qc(2,"Already have "),r.Vb(3,"br"),r.Qc(4," an account?"),r.Zb(),r.ac(5,"button",12),r.kc("click",function(){return r.Ic(e),r.oc().changeUIMode("signin")}),r.Qc(6," Sign In "),r.Zb(),r.Zb()}}function D(e,t){1&e&&(r.ac(0,"div"),r.Qc(1," Email is required "),r.Zb())}function j(e,t){1&e&&(r.ac(0,"div"),r.Qc(1," Email is not correct "),r.Zb())}function L(e,t){if(1&e&&(r.ac(0,"div",30),r.Oc(1,D,2,0,"div",31),r.Oc(2,j,2,0,"div",31),r.Zb()),2&e){const e=r.oc(2);r.Hb(1),r.uc("ngIf",e.loginFormFields.email.errors.required),r.Hb(1),r.uc("ngIf",e.loginFormFields.email.errors.email)}}function Z(e,t){1&e&&(r.ac(0,"div"),r.Qc(1," Password is required "),r.Zb())}function R(e,t){if(1&e&&(r.ac(0,"div",30),r.Oc(1,Z,2,0,"div",31),r.Zb()),2&e){const e=r.oc(2);r.Hb(1),r.uc("ngIf",e.loginFormFields.password.errors.required)}}function z(e,t){1&e&&r.Vb(0,"span",32)}const B=function(){return["/forgot-password"]};function U(e,t){if(1&e){const e=r.bc();r.ac(0,"div",13),r.ac(1,"span",14),r.Qc(2,"Sign In"),r.Zb(),r.ac(3,"button",15),r.kc("click",function(){return r.Ic(e),r.oc().fbLogin()}),r.Vb(4,"img",16),r.Qc(5," Sign in with Facebook "),r.Zb(),r.ac(6,"button",17),r.kc("click",function(){return r.Ic(e),r.oc().googleLogin()}),r.Vb(7,"img",18),r.Qc(8," Sign in with Google "),r.Zb(),r.ac(9,"div",19),r.Vb(10,"span",20),r.ac(11,"span",21),r.Qc(12,"or"),r.Zb(),r.Vb(13,"span",20),r.Zb(),r.ac(14,"form",22),r.kc("ngSubmit",function(){return r.Ic(e),r.oc().login()}),r.ac(15,"div",23),r.Vb(16,"input",24),r.Oc(17,L,3,2,"div",25),r.Zb(),r.ac(18,"div",23),r.Vb(19,"input",26),r.Oc(20,R,2,1,"div",25),r.Zb(),r.ac(21,"button",27),r.Oc(22,z,1,0,"span",28),r.Qc(23," Sign In "),r.Zb(),r.ac(24,"a",29),r.Qc(25,"Forgot password?"),r.Zb(),r.Zb(),r.Zb()}if(2&e){const e=r.oc();r.Hb(14),r.uc("formGroup",e.loginForm),r.Hb(3),r.uc("ngIf",e.loginFormSubmitted&&e.loginFormFields.email.errors),r.Hb(3),r.uc("ngIf",e.loginFormSubmitted&&e.loginFormFields.password.errors),r.Hb(1),r.uc("disabled",e.isLoading),r.Hb(1),r.uc("ngIf",e.isLoading),r.Hb(2),r.uc("routerLink",r.xc(6,B))}}function N(e,t){1&e&&(r.ac(0,"div"),r.Qc(1," Name is required "),r.Zb())}function V(e,t){if(1&e&&(r.ac(0,"div",30),r.Oc(1,N,2,0,"div",31),r.Zb()),2&e){const e=r.oc(2);r.Hb(1),r.uc("ngIf",e.registerFormFields.fullName.errors.required)}}function W(e,t){if(1&e){const e=r.bc();r.ac(0,"div",36),r.Qc(1," Did you mean "),r.ac(2,"span",37),r.kc("click",function(){return r.Ic(e),r.oc(2).changeEmailAddressInputField()}),r.Qc(3),r.Zb(),r.Zb()}if(2&e){const e=r.oc(2);r.Hb(3),r.Sc("",e.didYouMean.email,"?")}}function G(e,t){1&e&&(r.ac(0,"div"),r.Qc(1," Email is required "),r.Zb())}function Q(e,t){1&e&&(r.ac(0,"div"),r.Qc(1," Email is not correct "),r.Zb())}function $(e,t){if(1&e&&(r.ac(0,"div",30),r.Oc(1,G,2,0,"div",31),r.Oc(2,Q,2,0,"div",31),r.Zb()),2&e){const e=r.oc(2);r.Hb(1),r.uc("ngIf",e.registerFormFields.email.errors.required),r.Hb(1),r.uc("ngIf",e.registerFormFields.email.errors.email)}}function q(e,t){1&e&&(r.ac(0,"div"),r.Qc(1," Password is required "),r.Zb())}function Y(e,t){1&e&&(r.ac(0,"div"),r.Qc(1," Password must be 8 characters long "),r.Zb())}function X(e,t){if(1&e&&(r.ac(0,"div",30),r.Oc(1,q,2,0,"div",31),r.Oc(2,Y,2,0,"div",31),r.Zb()),2&e){const e=r.oc(2);r.Hb(1),r.uc("ngIf",e.registerFormFields.password.errors.required),r.Hb(1),r.uc("ngIf",e.registerFormFields.password.errors.minlength)}}function J(e,t){1&e&&r.Vb(0,"span",32)}function K(e,t){if(1&e){const e=r.bc();r.ac(0,"div",13),r.ac(1,"span",14),r.Qc(2,"Sign Up"),r.Zb(),r.ac(3,"button",33),r.kc("click",function(){return r.Ic(e),r.oc().fbLogin()}),r.Vb(4,"img",16),r.Qc(5," Sign up with Facebook "),r.Zb(),r.ac(6,"button",33),r.kc("click",function(){return r.Ic(e),r.oc().googleLogin()}),r.Vb(7,"img",18),r.Qc(8," Sign up with Google "),r.Zb(),r.ac(9,"div",19),r.Vb(10,"span",20),r.ac(11,"span",21),r.Qc(12,"or"),r.Zb(),r.Vb(13,"span",20),r.Zb(),r.ac(14,"form",22),r.kc("ngSubmit",function(){return r.Ic(e),r.oc().registerNewUser()}),r.ac(15,"div",23),r.Vb(16,"input",34),r.Oc(17,V,2,1,"div",25),r.Zb(),r.ac(18,"div",23),r.Vb(19,"input",24),r.Oc(20,W,4,1,"div",35),r.Oc(21,$,3,2,"div",25),r.Zb(),r.ac(22,"div",23),r.Vb(23,"input",26),r.Oc(24,X,3,2,"div",25),r.Zb(),r.ac(25,"button",27),r.Oc(26,J,1,0,"span",28),r.Qc(27," Sign Up "),r.Zb(),r.Zb(),r.Zb()}if(2&e){const e=r.oc();r.Hb(14),r.uc("formGroup",e.registerForm),r.Hb(3),r.uc("ngIf",e.registerFormSubmitted&&e.registerFormFields.fullName.errors),r.Hb(3),r.uc("ngIf",""!=e.didYouMean.email),r.Hb(1),r.uc("ngIf",e.registerFormSubmitted&&e.registerFormFields.email.errors),r.Hb(3),r.uc("ngIf",e.registerFormSubmitted&&e.registerFormFields.password.errors),r.Hb(1),r.uc("disabled",e.isLoading),r.Hb(1),r.uc("ngIf",e.isLoading)}}let ee=(()=>{class e{constructor(e,t,a,n,i,r,s){this._userService=e,this._formBuilder=t,this._modalService=a,this._socialAuthService=n,this._toastService=i,this.document=r,this._gaEventsService=s,this.isLoading=!1,this.loginFormSubmitted=!1,this.registerFormSubmitted=!1,this.errorMessage="",this.uiMode="signin",this.didYouMean={email:"",firstTime:!0}}ngOnInit(){this.isLoadedScript(f.a.FACEBOOK_CONNECT_SCRIPT_URL)||this.initfbConnectScript(),this.loginForm=this._formBuilder.group({email:["",[O.t.email,O.t.required]],password:["",O.t.required]}),this.registerForm=this._formBuilder.group({fullName:["",O.t.required],email:["",[O.t.email,O.t.required]],password:["",[O.t.required,O.t.minLength(8)]]})}changeEmailAddressInputField(){this.registerFormFields.email.setValue(this.didYouMean.email),this.didYouMean.email=""}isLoadedScript(e){return this.document.querySelectorAll('[src="'+e+'"]').length>0}initfbConnectScript(){(()=>{var e=this.document,t=e.createElement("script");t.src=f.a.FACEBOOK_CONNECT_SCRIPT_URL,e.getElementsByTagName("head")[0].appendChild(t)})()}closeModal(){this._modalService.dismissAll()}changeUIMode(e){this.uiMode=e}get loginFormFields(){return this.loginForm.controls}get registerFormFields(){return this.registerForm.controls}googleLogin(){this.isLoading=!0,this._socialAuthService.signIn(I.a.PROVIDER_ID,{scope:"profile email"}).then(e=>{e&&this._userService.googleLogin(e).then(e=>{this.isLoading=!1,this._userService.setUser(e.user),this._userService.attachUserScopeToSentryLogging(e.user),this._modalService.dismissAll(),e.isNewUser?(this._gaEventsService.eventEmitter("Register","Google","Editor Page"),this.firstPromoterTrackSignUp(e.user)):this._gaEventsService.eventEmitter("Login","Google","Editor Page")}).catch(e=>{this.isLoading=!1,this._toastService.show("An error occurred while using Google login",{classname:"bg-danger text-light",delay:5e3})}).finally(()=>{})}).catch(e=>{this.isLoading=!1,"popup_closed_by_user"==e.error||this._toastService.show("An error occurred while using Google login",{classname:"bg-danger text-light",delay:5e3})})}fbLogin(){this.isLoading=!0,this._userService.fbLogin().then(e=>{this.isLoading=!1,this._userService.setUser(e.user),this._userService.attachUserScopeToSentryLogging(e.user),this._modalService.dismissAll(),e.isNewUser?(this._gaEventsService.eventEmitter("Register","Facebook","Editor Page"),this.firstPromoterTrackSignUp(e.user)):this._gaEventsService.eventEmitter("Login","Facebook","Editor Page")}).catch(e=>{this.isLoading=!1,this._toastService.show("An error occurred while using Facebook login",{classname:"bg-danger text-light",delay:5e3})}).finally(()=>{})}login(){this.loginFormSubmitted=!0,this.loginForm.invalid||(this.isLoading=!0,this._userService.loginUser(this.loginFormFields.email.value,this.loginFormFields.password.value).subscribe(e=>{this.isLoading=!1,localStorage.setItem("token",e.token),this._userService.setUser(e.user),this._userService.attachUserScopeToSentryLogging(e.user),this._modalService.dismissAll(),this._gaEventsService.eventEmitter("Login","Form","Editor Page")},e=>{this.isLoading=!1,this._toastService.show(e.error.message,{classname:"bg-danger text-light",delay:5e3})}))}registerNewUser(){this.registerFormSubmitted=!0,this.registerForm.invalid||(this.isLoading=!0,this._userService.registerNewUser({fullName:this.registerFormFields.fullName.value,email:this.registerFormFields.email.value,password:this.registerFormFields.password.value,didYouMean:this.didYouMean}).subscribe(e=>{this.isLoading=!1,localStorage.setItem("token",e.token),this._userService.setUser(e.user),this._userService.attachUserScopeToSentryLogging(e.user),this.firstPromoterTrackSignUp(e.user),this._modalService.dismissAll(),this._gaEventsService.eventEmitter("Register","Form","Editor Page")},e=>{var t;if(this.isLoading=!1,422!=e.status)throw this._toastService.show(e.error.message,{classname:"bg-danger text-light",delay:5e3}),e;(null===(t=e.error)||void 0===t?void 0:t.didYouMean)?(this.didYouMean.email=e.error.didYouMean,this.didYouMean.firstTime=!1):this._toastService.show(e.error.message,{classname:"bg-danger text-light",delay:5e3})}))}firstPromoterTrackSignUp(e){$FPROM.trackSignup({email:e.email,uid:e.stripe_customer_id},()=>{console.log("FP: callback!")})}}return e.\u0275fac=function(t){return new(t||e)(r.Ub(P.a),r.Ub(O.c),r.Ub(T.k),r.Ub(I.b),r.Ub(E.a),r.Ub(k.d),r.Ub(F.a))},e.\u0275cmp=r.Ob({type:e,selectors:[["app-login-signup-modal"]],decls:13,vars:4,consts:[[1,"px-card"],["type","button","aria-label","Close",1,"close","close-btn","text-dark",3,"click"],["aria-hidden","true"],[1,"container"],[1,"row"],[1,"col-md-4","position-relative",2,"background-color","#3c395f","border-bottom-left-radius","8px","border-top-left-radius","8px","background-image","url(assets/img/png/login-signup-popup.png)","background-repeat","no-repeat","background-position","65% 220%","background-size","455px"],["class","left-side d-flex flex-column align-items-center","style","padding-top: 5.5rem",4,"ngIf"],[1,"col-md-8",2,"background-color","#f8f8fb","border-top-right-radius","8px","border-bottom-right-radius","8px"],[1,"right-side",2,"padding","50px 40px"],["class","px-card px-card-shadow d-flex flex-column align-items-center justify-content-center","style","padding: 40px",4,"ngIf"],[1,"left-side","d-flex","flex-column","align-items-center",2,"padding-top","5.5rem"],[2,"text-align","center","color","white","font-size","18px","font-weight","500","line-height","22px"],[1,"btn","btn-white",3,"click"],[1,"px-card","px-card-shadow","d-flex","flex-column","align-items-center","justify-content-center",2,"padding","40px"],[2,"font-size","24px","font-weight","700"],[1,"btn","btn-grey","btn-fb","d-flex","align-items-center",2,"margin-top","18px",3,"click"],["src","assets/img/svg/fb-login.svg","width","15","height","15","alt","",2,"margin-right","6px"],[1,"btn","btn-grey","btn-google","d-flex","align-items-center",2,"margin-top","18px",3,"click"],["src","assets/img/svg/google-login.svg","width","15","height","15","alt","",2,"margin-right","6px"],[1,"d-flex","flex-row","align-items-center","w-100",2,"margin","14px 0px"],[2,"border-bottom","1px solid #cfcfcf","width","50%"],[2,"margin","0px 25px","color","#aaaaaa"],["role","form",1,"w-100","d-flex","flex-column",3,"formGroup","ngSubmit"],[1,"form-group"],["type","email","formControlName","email","id","email","placeholder","Email",1,"form-control","form-control-lg"],["style","display: block","class","invalid-feedback",4,"ngIf"],["type","password","formControlName","password","id","password","placeholder","Password",1,"form-control","form-control-lg"],["type","submit",1,"btn","btn-lg","btn-block","btn-primary",3,"disabled"],["class","spinner-border spinner-border-sm mr-1",4,"ngIf"],[1,"mt-3","text-center","text-primary",2,"font-size","12px","font-weight","600",3,"routerLink"],[1,"invalid-feedback",2,"display","block"],[4,"ngIf"],[1,"spinner-border","spinner-border-sm","mr-1"],[1,"btn","btn-grey","d-flex","align-items-center",2,"margin-top","18px",3,"click"],["type","text","formControlName","fullName","id","fullName","placeholder","Name",1,"form-control","form-control-lg"],["placement","top","ngbTooltip","If your email is correct, submit the form","class","did-you-mean",4,"ngIf"],["placement","top","ngbTooltip","If your email is correct, submit the form",1,"did-you-mean"],[3,"click"]],template:function(e,t){1&e&&(r.ac(0,"div",0),r.ac(1,"button",1),r.kc("click",function(){return t.closeModal()}),r.ac(2,"span",2),r.Qc(3,"\xd7"),r.Zb(),r.Zb(),r.ac(4,"div",3),r.ac(5,"div",4),r.ac(6,"div",5),r.Oc(7,A,7,0,"div",6),r.Oc(8,M,7,0,"div",6),r.Zb(),r.ac(9,"div",7),r.ac(10,"div",8),r.Oc(11,U,26,7,"div",9),r.Oc(12,K,28,7,"div",9),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb()),2&e&&(r.Hb(7),r.uc("ngIf","signin"===t.uiMode),r.Hb(1),r.uc("ngIf","signup"===t.uiMode),r.Hb(3),r.uc("ngIf","signin"===t.uiMode),r.Hb(1),r.uc("ngIf","signup"===t.uiMode))},directives:[k.m,O.u,O.j,O.e,O.b,O.i,O.d,n.h,T.q],styles:[".btn-white[_ngcontent-%COMP%]{background-color:transparent!important;border:2px solid #fff;font-weight:600;padding:6px 16px;transition:all .3s;color:#fff;margin-top:25px}.btn-white[_ngcontent-%COMP%]:hover{background-color:#fff!important;color:#000}.form-control[_ngcontent-%COMP%]{color:#495057;background-color:#fff;border:1px solid #ced4da}.form-control[_ngcontent-%COMP%]:focus{border:1px solid #5f58b7}.btn-grey[_ngcontent-%COMP%]{background-color:#fff!important;border:1px solid #bfc5da;font-weight:600;font-size:12px;border-radius:6px;padding:8px 16px;color:#595959;transition:all .3s}.btn-grey[_ngcontent-%COMP%]:hover{background-color:#eee!important}"]}),e})();var te=a("xOOu");const ae=d.e;var ne=a("sEfC"),ie=a.n(ne);class re{constructor(e,t,a){this.qualityOptions={anisotropicFiltering:!0,mipMapping:!0,linearFiltering:!0},this.glOpts={antialias:!0,depth:!1,preserveDrawingBuffer:!0},this.init=()=>Object(c.a)(this,void 0,void 0,function*(){return new Promise(e=>Object(c.a)(this,void 0,void 0,function*(){let t=0,a=0;for(let e of this.controlPoints)e.y>t&&(t=e.y);for(let e of this.controlPoints)e.x>a&&(a=e.x);this.screenCanvasElement=document.getElementById("webgl-canvas"),this.screenCanvasElement.width=a,this.screenCanvasElement.height=t,this.glOpts={antialias:!0,depth:!1,preserveDrawingBuffer:!0},this.gl=this.screenCanvasElement.getContext("webgl",this.glOpts)||this.screenCanvasElement.getContext("experimental-webgl",this.glOpts),this.gl||console.log("Your browser doesnt seem to support WebGL"),this.glResources=yield this.setupGlContext(),this.screenImgElement=new Image,this.screenImgElement.crossOrigin="",this.screenImgElement.onload=()=>Object(c.a)(this,void 0,void 0,function*(){yield this.loadScreenTexture();let t=yield this.redrawImg();return e(t)}),this.screenImgElement.src=this.placeholderImage}))}),this.setupGlContext=()=>new Promise((e,t)=>{var a={},n=["attribute vec2 aVertCoord;","uniform mat4 uTransformMatrix;","varying vec2 vTextureCoord;","void main(void) {","    vTextureCoord = aVertCoord;","    gl_Position = uTransformMatrix * vec4(aVertCoord, 0.0, 1.0);","}"].join("\n"),i=this.gl.createShader(this.gl.VERTEX_SHADER);this.gl.shaderSource(i,n),this.gl.compileShader(i),this.gl.getShaderParameter(i,this.gl.COMPILE_STATUS)||console.log("Failed to compile vertex shader:"+this.gl.getShaderInfoLog(i));var r=["precision mediump float;","varying vec2 vTextureCoord;","uniform sampler2D uSampler;","void main(void)  {","    gl_FragColor = texture2D(uSampler, vTextureCoord);","}"].join("\n"),s=this.gl.createShader(this.gl.FRAGMENT_SHADER);return this.gl.shaderSource(s,r),this.gl.compileShader(s),this.gl.getShaderParameter(s,this.gl.COMPILE_STATUS)||console.log("Failed to compile fragment shader:"+this.gl.getShaderInfoLog(s)),a.shaderProgram=this.gl.createProgram(),this.gl.attachShader(a.shaderProgram,i),this.gl.attachShader(a.shaderProgram,s),this.gl.linkProgram(a.shaderProgram),this.gl.getProgramParameter(a.shaderProgram,this.gl.LINK_STATUS)||console.log("Shader linking failed"),a.vertexBuffer=this.gl.createBuffer(),this.gl.useProgram(a.shaderProgram),a.vertAttrib=this.gl.getAttribLocation(a.shaderProgram,"aVertCoord"),a.transMatUniform=this.gl.getUniformLocation(a.shaderProgram,"uTransformMatrix"),a.samplerUniform=this.gl.getUniformLocation(a.shaderProgram,"uSampler"),a.screenTexture=this.gl.createTexture(),e(a)}),this.loadScreenTexture=()=>Object(c.a)(this,void 0,void 0,function*(){return new Promise(e=>{if(this.gl&&this.glResources){var t=this.screenImgElement,a={w:t.naturalWidth,h:t.naturalHeight};this.gl.bindTexture(this.gl.TEXTURE_2D,this.glResources.screenTexture);var n=document.createElement("canvas");if(n.width=this.nextHighestPowerOfTwo(a.w),n.height=this.nextHighestPowerOfTwo(a.h),n.getContext("2d").drawImage(t,0,0,t.width,t.height),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,this.gl.RGBA,this.gl.UNSIGNED_BYTE,n),this.qualityOptions.linearFiltering?(this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.qualityOptions.mipMapping?this.gl.LINEAR_MIPMAP_LINEAR:this.gl.LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.LINEAR)):(this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.qualityOptions.mipMapping?this.gl.NEAREST_MIPMAP_NEAREST:this.gl.LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.NEAREST)),this.anisoExt){var i=this.qualityOptions.anisotropicFiltering?this.gl.getParameter(this.anisoExt.MAX_TEXTURE_MAX_ANISOTROPY_EXT):1;this.gl.texParameterf(this.gl.TEXTURE_2D,this.anisoExt.TEXTURE_MAX_ANISOTROPY_EXT,i)}this.qualityOptions.mipMapping&&this.gl.generateMipmap(this.gl.TEXTURE_2D),this.gl.bindTexture(this.gl.TEXTURE_2D,null);var r=a.w/n.width,s=a.h/n.height;this.srcPoints=[{x:0,y:0},{x:r,y:0},{x:0,y:s},{x:r,y:s}];for(var o=[],c=0;c<this.srcPoints.length;c++)o.push(this.srcPoints[c].x),o.push(this.srcPoints[c].y);return this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.glResources.vertexBuffer),this.gl.bufferData(this.gl.ARRAY_BUFFER,new Float32Array(o),this.gl.STATIC_DRAW),e()}})}),this.isPowerOfTwo=e=>0==(e&e-1),this.nextHighestPowerOfTwo=e=>{--e;for(var t=1;t<32;t<<=1)e|=e>>t;return e+1},this.redrawImg=()=>new Promise(e=>{if(this.gl&&this.glResources&&this.srcPoints){for(var t=this.screenCanvasElement.width,a=this.screenCanvasElement.height,n=[],i=0;i<this.controlPoints.length;i++)n.push({x:2*this.controlPoints[i].x/t-1,y:-2*this.controlPoints[i].y/a+1});var r=this.transformationFromQuadCorners(this.srcPoints,n);return this.gl.clearColor(0,0,0,0),this.gl.viewport(0,0,t,a),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT),this.gl.useProgram(this.glResources.shaderProgram),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.glResources.vertexBuffer),this.gl.enableVertexAttribArray(this.glResources.vertAttrib),this.gl.vertexAttribPointer(this.glResources.vertAttrib,2,this.gl.FLOAT,!1,0,0),this.gl.uniformMatrix4fv(this.glResources.transMatUniform,!1,[r[0],r[1],0,r[2],r[3],r[4],0,r[5],0,0,0,0,r[6],r[7],0,1]),this.gl.activeTexture(this.gl.TEXTURE0),this.gl.bindTexture(this.gl.TEXTURE_2D,this.glResources.screenTexture),this.gl.uniform1i(this.glResources.samplerUniform,0),this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4),e(this.screenCanvasElement.toDataURL({format:"png",multiplier:1}))}}),this.transformationFromQuadCorners=(e,t)=>{for(var a=numeric.transpose([[t[0].x,t[0].y,t[1].x,t[1].y,t[2].x,t[2].y,t[3].x,t[3].y]]),n=[],i=0;i<e.length;i++)n.push([e[i].x,0,-t[i].x*e[i].x,e[i].y,0,-t[i].x*e[i].y,1,0]),n.push([0,e[i].x,-t[i].y*e[i].x,0,e[i].y,-t[i].y*e[i].y,0,1]);return numeric.transpose(numeric.dot(numeric.inv(n),a))[0]},this.controlPoints=e,this.placeholderImage=t,this.placeholderImageSize=a}}var se,oe=a("xweI"),ce=a.n(oe),le=new Uint8Array(16);function de(){if(!se&&!(se="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return se(le)}for(var pe=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,he=function(e){return"string"==typeof e&&pe.test(e)},ue=[],be=0;be<256;++be)ue.push((be+256).toString(16).substr(1));var ge=function(e,t,a){var n=(e=e||{}).random||(e.rng||de)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){a=a||0;for(var i=0;i<16;++i)t[a+i]=n[i];return t}return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=(ue[e[t+0]]+ue[e[t+1]]+ue[e[t+2]]+ue[e[t+3]]+"-"+ue[e[t+4]]+ue[e[t+5]]+"-"+ue[e[t+6]]+ue[e[t+7]]+"-"+ue[e[t+8]]+ue[e[t+9]]+"-"+ue[e[t+10]]+ue[e[t+11]]+ue[e[t+12]]+ue[e[t+13]]+ue[e[t+14]]+ue[e[t+15]]).toLowerCase();if(!he(a))throw TypeError("Stringified UUID is invalid");return a}(n)},fe=a("tvB8"),ve=a("HLOX"),me=a("tk/3");let Ce=(()=>{class e{constructor(e){this._http=e}getMockups(e,t,a,n,i){let r=`/api/mockups?pageNum=${e}&pageSize=${t}&category=${a}&keywordTagOrQuery=${i}&fromEditorPage=yes`;return n&&(r=`${r}&tags=${encodeURIComponent(n)}`),this._http.get(r)}getMockupById(e){return this._http.get(`/api/mockups/${e}`)}getMockupByIdAndURL(e){return this._http.get(`/api${e}`)}getUserMockupById(e){return this._http.get(`/api/mockups/user-mockups/${e}`)}getUserMockupByIdAndURL(e){return this._http.get(`/api${e}`)}updateUserMockupImage(e,t,a){return this._http.put("/api/mockups/user-mockups/update-mockup-image",{finalRenderedImageURL:e,mockupImageData:t,currentMockupId:a}).toPromise()}addMockupDesign(e,t){return this._http.post("/api/mockups",{mockup:e})}addUserMockupDesign(e,t,a){return this._http.post("/api/mockups/user-mockups",{userMockup:e,thumbnailImageData:t,user_id:a})}updateUserMockupDesign(e,t,a,n){return this._http.put(`/api/mockups/user-mockups/${n}`,{userMockup:e,thumbnailImageData:t,user_id:a})}updateMockupDesign(e,t,a,n){return this._http.put(`/api/mockups/${n}`,{mockup:e,thumbnailImageData:t,user_id:a})}}return e.\u0275fac=function(t){return new(t||e)(r.hc(me.b))},e.\u0275prov=r.Qb({token:e,factory:e.\u0275fac}),e})();var we=a("XNiG"),_e=a("2Vo4"),ye=a("3G0t");let xe=(()=>{class e{constructor(e){this._localStorageService=e,this.getStartedImage=new we.a,this.dataToSend=new we.a,this.activeSidebarItem=new _e.a({previousSidebarItemId:null,previousSidebarItemTitle:null,previousSidebarItemType:null,sidebarItemId:f.a.SIDEBAR_ITEMS.IMAGES.id,sidebarItemTitle:f.a.SIDEBAR_ITEMS.IMAGES.title,sidebarItemType:f.a.SIDEBAR_ITEM_TYPES.DefaultSidebarItem}),this.userUploadingInProgress=[],this.addUploadsToCanvas=new we.a,this.readAssetFiles=new we.a,this.isDarkTheme=new _e.a(JSON.parse(this._localStorageService.getItem("isDarkTheme")))}toggleEditorTheme(e){this.isDarkTheme.next(e),this._localStorageService.setItem("isDarkTheme",JSON.stringify(e))}getDarkThemeValue(){return this.isDarkTheme.getValue()}sendGetStartedImageData(e){this.getStartedImage.next(e)}sendActiveSidebarItem(e){this.activeSidebarItem.next(e)}sendDataToSend(e){this.dataToSend.next(e)}setLocalStorageItem(e,t){localStorage.setItem(e,t)}sendAddUploadsToCanvas(e){this.addUploadsToCanvas.next(e)}sendReadAssetFiles(e){this.readAssetFiles.next(e)}}return e.\u0275fac=function(t){return new(t||e)(r.hc(ye.a))},e.\u0275prov=r.Qb({token:e,factory:e.\u0275fac}),e})();var He=a("xu8E"),Se=function(e){return e.CanvasBG="canvasBG",e.Flip="flip",e.FillOrBorder="fillOrBorder",e.GroupColors="groupColors",e.EditMockupContents="editMockupContents",e.Border="border",e.Opacity="opacity",e.Shadow="shadow",e.Alignment="alignment",e.Layers="layers",e.TextProps="textProps",e.ImageEffectProps="imageEffectProps",e}({}),ke=(()=>{class e{constructor(e,t,a,n,i,r,s,o,p,h,u){this._userService=e,this._editorService=t,this._templateService=a,this._mockupService=n,this._utilsService=i,this._gaEventsService=r,this._helpersService=s,this._toastService=o,this._modalService=p,this._localStorageService=h,this._location=u,this.init=e=>{this.canvas=new Ie,this.canvasDefaultBackground=e.canvasDefaultBackground,this.canvasClipPath=null,this.mockupCanvasClipPath=e.mockupCanvasClipPath,this.mockupCanvasInitialized=!1,this.imageFilters=l.fabric.Image.filters,this.size=new Oe(1e3,1e3),this.drawableAreaCanvasSize=new Oe(1e3,1e3),this.mockupCanvasSize=new Oe(1e3,1e3),this.mockupDrawableAreaCanvasSize=new Oe(1e3,1e3),this.previousdrawableAreaCanvasSize=new Oe(1e3,1e3),this.docUnits="px",this.objectPropertiesToInclude=e.objectPropertiesToInclude,this.objectType="Canvas",this.elementProps=new d.b,this.currentCanvasId=e.currentCanvasId,this.isMainCanvas=!0,this.isDesignLoading=!1,this.isDarkTheme=null!=this._utilsService.getDarkThemeValue()&&this._utilsService.getDarkThemeValue(),this.selected=null,this._clipboard=e._clipboard,this.zoomOptions={level:1,percentage:"100%"},this.canvasOffset={left:0,top:0},this.isGuidelines=!0,this.panState=e.panState,this.isSpaceKeyPressed=!1,this.lockedObjects=!1,this.mainCanvasDivRef=e.mainCanvasDivRef,this.allFontsList={googleFontsList:[],userFontsList:[]}},this.initHandler=(e=null)=>{this.imageHandler=new class{constructor(e,t,a,n,i){this.getSelectedImageFilter=()=>{var e=this.fabricCanvasHandler.getCurrentFabricCanvas().getActiveObject();e&&(null==e?void 0:e.filters.length)>0&&(this.fabricCanvasHandler.selectedImageFilter=e.filters[0])},this.getImageEffects=()=>{this.fabricCanvasHandler.elementProps.imageEffects=new d.c;let e=this.fabricCanvasHandler.getCurrentFabricCanvas().getActiveObject();for(let t=0;t<e.filters.length;t++){let a=e.filters[t];"HueRotation"===(null==a?void 0:a.type)||"Pixelate"===(null==a?void 0:a.type)||"Convolute"===(null==a?void 0:a.type)||"Vignette"===(null==a?void 0:a.type)?"HueRotation"===a.type?this.fabricCanvasHandler.elementProps.imageEffects.hue=a.rotation||0:"Pixelate"===a.type?this.fabricCanvasHandler.elementProps.imageEffects.pixelate=a.blocksize||0:"Convolute"===a.type?a.matrix.toString()==f.a.SHARPEN_MATRIX_VALUES[.5].toString()?this.fabricCanvasHandler.elementProps.imageEffects.sharpen=.5:a.matrix.toString()==f.a.SHARPEN_MATRIX_VALUES[1].toString()?this.fabricCanvasHandler.elementProps.imageEffects.sharpen=1:a.matrix.toString()==f.a.EMBOSS_MATRIX_VALUES[.5].toString()?this.fabricCanvasHandler.elementProps.imageEffects.emboss=.5:a.matrix.toString()==f.a.EMBOSS_MATRIX_VALUES[1].toString()&&(this.fabricCanvasHandler.elementProps.imageEffects.emboss=1):"Vignette"===a.type&&(this.fabricCanvasHandler.elementProps.imageEffects.vignette=a.options):a&&(this.fabricCanvasHandler.elementProps.imageEffects[a.type.toLowerCase()]=a[a.type.toLowerCase()]||0)}},this.applyImageFilter=e=>{this.fabricCanvasHandler.getCurrentFabricCanvas().trigger("before:canvas:state:changed",{});var t=this.fabricCanvasHandler.getCurrentFabricCanvas().getActiveObject();if("normal"==e){if(t.filters.length<0)return;t.filters[0]=!1}"grayscale"==e?t.filters[0]=new this.fabricCanvasHandler.imageFilters.Grayscale({type:"Grayscale"}):"sepia"==e?t.filters[0]=new this.fabricCanvasHandler.imageFilters.Sepia({type:"Sepia"}):"blackwhite"==e?t.filters[0]=new this.fabricCanvasHandler.imageFilters.BlackWhite({type:"BlackWhite"}):"brownie"==e?t.filters[0]=new this.fabricCanvasHandler.imageFilters.Brownie({type:"Brownie"}):"vintage"==e?t.filters[0]=new this.fabricCanvasHandler.imageFilters.Vintage({type:"Vintage"}):"kodachrome"==e?t.filters[0]=new this.fabricCanvasHandler.imageFilters.Kodachrome({type:"Kodachrome"}):"technicolor"==e?t.filters[0]=new this.fabricCanvasHandler.imageFilters.Technicolor({type:"Technicolor"}):"polaroid"==e?t.filters[0]=new this.fabricCanvasHandler.imageFilters.Polaroid({type:"Polaroid"}):"invert"==e?t.filters[0]=new this.fabricCanvasHandler.imageFilters.Invert({type:"Invert"}):"redify"==e?t.filters[0]=new this.fabricCanvasHandler.imageFilters.Redify({type:"Redify",threshold:100}):"bluify"==e?t.filters[0]=new this.fabricCanvasHandler.imageFilters.Bluify({type:"Bluify"}):"greenify"==e?t.filters[0]=new this.fabricCanvasHandler.imageFilters.Greenify({type:"Greenify"}):"vignette"==e&&(t.filters[0]=new this.fabricCanvasHandler.imageFilters.Vignette({type:"Vignette",options:{size:this.fabricCanvasHandler.elementProps.imageEffects.vignette.size,amount:this.fabricCanvasHandler.elementProps.imageEffects.vignette.amount}})),this.fabricCanvasHandler.selectedImageFilter=t.filters[0],t.applyFilters(),this.fabricCanvasHandler.getCurrentFabricCanvas().renderAll(),this.fabricCanvasHandler.getCurrentFabricCanvas().trigger("after:canvas:state:changed",{}),this._gaEventsService.eventEmitter("Image tool","Image filter applied",`filter=${e}`)},this.applyImageEffect=e=>{var t;this.fabricCanvasHandler.getCurrentFabricCanvas().trigger("before:canvas:state:changed",{});var a=this.fabricCanvasHandler.getCurrentFabricCanvas().getActiveObject();if(a){let n;"brightness"==e?n=new this.fabricCanvasHandler.imageFilters.Brightness({type:"Brightness",brightness:this.fabricCanvasHandler.elementProps.imageEffects.brightness}):"blur"==e?n=new this.fabricCanvasHandler.imageFilters.Blur({type:"Blur",blur:this.fabricCanvasHandler.elementProps.imageEffects.blur}):"contrast"==e?n=new this.fabricCanvasHandler.imageFilters.Contrast({type:"Contrast",contrast:this.fabricCanvasHandler.elementProps.imageEffects.contrast}):"saturation"==e?n=new this.fabricCanvasHandler.imageFilters.Saturation({type:"Saturation",saturation:this.fabricCanvasHandler.elementProps.imageEffects.saturation}):"vibrance"==e?n=new this.fabricCanvasHandler.imageFilters.Vibrance({type:"Vibrance",vibrance:this.fabricCanvasHandler.elementProps.imageEffects.vibrance}):"hue"==e?n=new this.fabricCanvasHandler.imageFilters.HueRotation({type:"HueRotation",rotation:this.fabricCanvasHandler.elementProps.imageEffects.hue}):"noise"==e?n=new this.fabricCanvasHandler.imageFilters.Noise({type:"Noise",noise:this.fabricCanvasHandler.elementProps.imageEffects.noise}):"pixelate"==e?n=0!=this.fabricCanvasHandler.elementProps.imageEffects.pixelate&&new this.fabricCanvasHandler.imageFilters.Pixelate({type:"Pixelate",blocksize:this.fabricCanvasHandler.elementProps.imageEffects.pixelate}):"sharpen"==e?0==this.fabricCanvasHandler.elementProps.imageEffects.sharpen?n=!1:(this.fabricCanvasHandler.elementProps.imageEffects.sharpen<.5&&(this.fabricCanvasHandler.elementProps.imageEffects.sharpen=.5),this.fabricCanvasHandler.elementProps.imageEffects.sharpen>.5&&(this.fabricCanvasHandler.elementProps.imageEffects.sharpen=1),n=new this.fabricCanvasHandler.imageFilters.Convolute({type:"Convolute",matrix:f.a.SHARPEN_MATRIX_VALUES[this.fabricCanvasHandler.elementProps.imageEffects.sharpen]})):"emboss"==e?0==this.fabricCanvasHandler.elementProps.imageEffects.emboss?n=!1:(this.fabricCanvasHandler.elementProps.imageEffects.emboss<.5&&(this.fabricCanvasHandler.elementProps.imageEffects.emboss=.5),this.fabricCanvasHandler.elementProps.imageEffects.emboss>.5&&(this.fabricCanvasHandler.elementProps.imageEffects.emboss=1),n=new this.fabricCanvasHandler.imageFilters.Convolute({type:"Convolute",matrix:f.a.EMBOSS_MATRIX_VALUES[this.fabricCanvasHandler.elementProps.imageEffects.emboss]})):"blendcolor"==e&&(n=new this.fabricCanvasHandler.imageFilters.BlendColor({type:"BlendColor",mode:"tint",color:this.fabricCanvasHandler.elementProps.imageEffects.tintColor,alpha:this.fabricCanvasHandler.elementProps.imageEffects.tintAlpha}));let i=!1;for(let r in a.filters){let s=a.filters[r];(e==(null===(t=s.type)||void 0===t?void 0:t.toLowerCase())||"hue"==e&&"HueRotation"==(null==s?void 0:s.type)||"sharpen"==e&&"Convolute"==(null==s?void 0:s.type)||"emboss"==e&&"Convolute"==(null==s?void 0:s.type))&&(i=!0,a.filters[r]=n)}i||(a.filters[a.filters.length]=n),a.applyFilters(),this.fabricCanvasHandler.getCurrentFabricCanvas().renderAll(),this.fabricCanvasHandler.getCurrentFabricCanvas().trigger("after:canvas:state:changed",{}),this.throttleGAEvent(e)}},this.getImageBlendMode=()=>{let e=this.fabricCanvasHandler.getCurrentFabricCanvas().getActiveObject();e&&(this.fabricCanvasHandler.elementProps.imageBlendMode=e.globalCompositeOperation)},this.setImageBlendMode=e=>{let t=this.fabricCanvasHandler.getCurrentFabricCanvas().getActiveObject();t&&(this.fabricCanvasHandler.getCurrentFabricCanvas().trigger("before:canvas:state:changed",{}),"normal"==e.toLowerCase()&&(e="source-over"),this.fabricCanvasHandler.elementProps.imageBlendMode=e.toLowerCase().replace(" ","-"),t.globalCompositeOperation=e.toLowerCase().replace(" ","-"),this.fabricCanvasHandler.getCurrentFabricCanvas().renderAll(),this.fabricCanvasHandler.getCurrentFabricCanvas().trigger("after:canvas:state:changed",{}),this._gaEventsService.eventEmitter("Image tool","Image blend mode applied",`blend=${e}`))},this.throttleGAEvent=m()(e=>{this._gaEventsService.eventEmitter("Image tool","Image effect applied",`effect=${e}`)},1500,{leading:!0,trailing:!1}),this.addImage=(e,t=null)=>{e.includes("?ts")&&(e=String(e).split("?ts")[0]),String(e).includes("cdn.pixelied.com")&&(e=`${e}?ts=${Date.now()}`),e=encodeURI(e),l.fabric.Image.fromURL(e,a=>{if(!a._element)return;a.set(f.a.IMAGE_DEFAULT_PROPS),a.src=e,this.fabricCanvasHandler.basicToolsHandler.scaleWidthOfImageOrVectorAccordingToCanvasSize(a,1),a.id=this.fabricCanvasHandler.basicToolsHandler.randomId();let n=this.fabricCanvasHandler.basicToolsHandler.getCurrentCanvasSize().width,i=this.fabricCanvasHandler.basicToolsHandler.getCurrentCanvasSize().height;a.left=n/2-a.getScaledWidth()/2,a.top=i/2-a.getScaledHeight()/2,a.setCoords(),t&&(t.imageObjectToBeHandled=a,a.imageUploading=!0,a.imageUploadingTimestamp=Date.now()),this.fabricCanvasHandler.getCurrentFabricCanvas().add(a),a.filters[0]=new this.fabricCanvasHandler.imageFilters.Brightness({type:"Brightness",brightness:1e-4}),a.applyFilters(),this.fabricCanvasHandler.getCurrentFabricCanvas().renderAll(),this.fabricCanvasHandler.getCurrentFabricCanvas().trigger("object:added:by:user",{target:a}),this.fabricCanvasHandler.basicToolsHandler.selectItemAfterAdded(a)},{crossOrigin:"anonymous"})},this.uploadBase64Image=e=>{var t,a,n,i;if(!this.fabricCanvasHandler.user)return;let r=this.fabricCanvasHandler.basicToolsHandler.getObjectById(e.id,!1)[0];r.imageUploading?(console.log("imageObj2"),console.log(r.imageUploading),this.fabricCanvasHandler.basicToolsHandler.intendedTimePassed(r.imageUploadingTimestamp,f.a.ONE_HOUR)?console.log("one hour not passed"):(console.log("one hour passed"),r.imageUploadingTimestamp=Date.now(),this._editorService.uploadBase64Image(e.id,e.src,null===(n=this.fabricCanvasHandler.user)||void 0===n?void 0:n._id,null===(i=this.fabricCanvasHandler.currentWorkspace)||void 0===i?void 0:i._id,null).then(e=>Object(c.a)(this,void 0,void 0,function*(){let t=this.fabricCanvasHandler.basicToolsHandler.getObjectById(e.imageObjId,!1)[0];yield this.changeImageSrcToCDN(e.asset.original_asset_details.url,t,this.fabricCanvasHandler.currentCanvasId),delete t.imageUploading,delete t.imageUploadingTimestamp,this.fabricCanvasHandler.canvasEventListenersHandler.triggersWhenCanvasUpdated()})).catch(e=>{delete r.imageUploading,delete r.imageUploadingTimestamp}))):(r.imageUploading=!0,r.imageUploadingTimestamp=Date.now(),console.log("imageObj1"),console.log(r.imageUploading),console.log(r.imageUploadingTimestamp),this._editorService.uploadBase64Image(e.id,e.src,null===(t=this.fabricCanvasHandler.user)||void 0===t?void 0:t._id,null===(a=this.fabricCanvasHandler.currentWorkspace)||void 0===a?void 0:a._id,null).then(e=>Object(c.a)(this,void 0,void 0,function*(){let t=this.fabricCanvasHandler.basicToolsHandler.getObjectById(e.imageObjId,!1)[0];yield this.changeImageSrcToCDN(e.asset.original_asset_details.url,t,this.fabricCanvasHandler.currentCanvasId),delete t.imageUploading,delete t.imageUploadingTimestamp,this.fabricCanvasHandler.canvasEventListenersHandler.triggersWhenCanvasUpdated()})).catch(e=>{delete r.imageUploading,delete r.imageUploadingTimestamp}))},this.removeImageBackground=(e,t,a)=>{let n=this.fabricCanvasHandler.getCurrentFabricCanvas().getActiveObject();if(n){this.imageInBgRemoveProcess=!0,this.imageToRemoveBackground=n;let i=this.imageToRemoveBackground.getSrc();this.fabricCanvasHandler.getCurrentFabricCanvas().renderAll(),this._editorService.removeImageBackgroundUsingImageURL(i,t,e.getCurrentUserWorkspaceId()).subscribe(e=>Object(c.a)(this,void 0,void 0,function*(){this.imageInBgRemoveProcess=!1,yield this.changeImageSrcToCDN(e.output_image,this.imageToRemoveBackground,this.fabricCanvasHandler.currentCanvasId),this.fabricCanvasHandler.canvasEventListenersHandler.triggersWhenCanvasUpdated(),this._gaEventsService.eventEmitter("BG Remover Tool","Editor BG Remove feature","Editor BG Remove feature")}),e=>{if(this.imageInBgRemoveProcess=!1,402===e.status)e.error.proAccess?(a.open(C.a,{size:"lg",centered:!0,modalDialogClass:"modal-buy-ltd-individual"}).componentInstance.selectedFeatureId="remove-bg",this._gaEventsService.eventEmitter("ltd-popup","popup-view","BG Remove feature"),this._toastService.show(e.error.message,{classname:"bg-danger text-light",delay:5e3})):this._toastService.show(e.error.message,{classname:"bg-danger text-light",delay:5e3});else if(500===e.status)throw this._toastService.show(e.error.message,{classname:"bg-danger text-light",delay:5e3}),e})}},this.fitImageToCanvas=()=>{let e=this.fabricCanvasHandler.getCurrentFabricCanvas().getActiveObject();if(!e)return;this.fabricCanvasHandler.getCurrentFabricCanvas().trigger("before:canvas:state:changed",{});const t=this.fabricCanvasHandler.basicToolsHandler.getCurrentCanvasSize();e.lockUniScaling||e.isMockup?e.width/e.height<t.width/t.height?e.scaleToWidth(t.width,!0):e.scaleToHeight(t.height,!0):e.set({width:t.width,height:t.height,scaleX:1,scaleY:1}),e.setPositionByOrigin(new l.fabric.Point(t.width/2,t.height/2),"center","center"),e.setCoords(),this.fabricCanvasHandler.getCurrentFabricCanvas().requestRenderAll(),this.fabricCanvasHandler.getCurrentFabricCanvas().trigger("after:canvas:state:changed",{})},this.fabricCanvasHandler=e,this._gaEventsService=t,this._utilsService=a,this._toastService=n,this._editorService=i,this.imageToRemoveBackground=null,this.imageInBgRemoveProcess=!1}changeImageSrcToCDN(e,t,a){return Object(c.a)(this,void 0,void 0,function*(){return new Promise(n=>Object(c.a)(this,void 0,void 0,function*(){var i=t.scaleX,r=t.scaleY,s=t.width,o=t.height,c=t.left,l=t.top;t.setSrc(e,e=>(e.left=c,e.top=l,e.scaleX=i,e.scaleY=r,e.width=s,e.height=o,e.setCoords(),this.fabricCanvasHandler.canvas[a].requestRenderAll(),n()),{width:t.width,height:t.height,crossOrigin:"anonymous"})}))})}}(this,this._gaEventsService,this._utilsService,this._toastService,this._editorService),this.alignElementHandler=new class{constructor(e){this.alignElement=e=>{let t=this.fabricCanvasHandler.getCurrentFabricCanvas().getActiveObject();if(!t)return;let a=_()(this.fabricCanvasHandler.getCurrentFabricCanvas().getActiveObjects());if("activeSelection"==t.type){t.setCoords();const a=t.getBoundingRect(!0,!0).width,n=t.getBoundingRect(!0,!0).height,i=t.scaleX;t.forEachObject(t=>{const r=t.getBoundingRect(!0).width*i,s=t.getBoundingRect(!0).height*i,o=t.getPointByOrigin("center","center");"top"===e?(o.y=-n/2+s/2,t.setPositionByOrigin(o,"center","center")):"left"===e?(o.x=-a/2+r/2,t.setPositionByOrigin(o,"center","center")):"bottom"===e?(o.y=n/2-s/2,t.setPositionByOrigin(o,"center","center")):"right"===e?(o.x=a/2-r/2,t.setPositionByOrigin(o,"center","center")):"centerHorizontal"===e?(o.x=0,t.setPositionByOrigin(o,"center","center")):"centerVertical"===e&&(o.y=0,t.setPositionByOrigin(o,"center","center"))}),t.forEachObject(e=>{e.setCoords(),t.removeWithUpdate(e).addWithUpdate(e)}),t.setCoords(),this.fabricCanvasHandler.getCurrentFabricCanvas().requestRenderAll()}else if(t){const a=t.getPointByOrigin("center","center");let n=t.getBoundingRect(!0,!0).left,i=t.getBoundingRect(!0,!0).top,r=t.getBoundingRect(!0,!0).width,s=t.getBoundingRect(!0,!0).height,o=this.fabricCanvasHandler.basicToolsHandler.getCurrentCanvasSize().width,c=this.fabricCanvasHandler.basicToolsHandler.getCurrentCanvasSize().height;"top"===e?t.set({top:t.top-i}):"left"===e?t.set({left:t.left-n}):"bottom"===e?(a.y=c-s/2,t.setPositionByOrigin(a,"center","center"),t.setCoords()):"right"===e?(a.x=o-r/2,t.setPositionByOrigin(a,"center","center"),t.setCoords()):"centerHorizontal"===e?(a.x=o/2,t.setPositionByOrigin(a,"center","center")):"centerVertical"===e&&(a.y=c/2,t.setPositionByOrigin(a,"center","center")),t.setCoords(),this.fabricCanvasHandler.getCurrentFabricCanvas().requestRenderAll()}let n=_()(this.fabricCanvasHandler.getCurrentFabricCanvas().getActiveObjects());this.fabricCanvasHandler.historyHandlerV.debouncedHistory(a,n,["id","left","top","originalLeft","originalTop"],null,y.BasicProps)},this.fabricCanvasHandler=e}}(this),this.guidelinesHanlder=new class{constructor(e){this.onObjectMoving=e=>{},this.onBeforeRender=e=>{},this.onAfterBackgroundRender=e=>{},this.onBeforeOverlayRender=e=>{},this.onAfterRender=e=>{},this.onMouseUp=e=>{},this.initAligningGuidelines=e=>{var t,a=e.getSelectionContext(),n=1;function i(e){r(e.x1>e.x2?e.x2:e.x1,e.y+.5,e.x2>e.x1?e.x2:e.x1,e.y+.5)}function r(e,i,r,s){a.save(),a.lineWidth=.9,a.strokeStyle="#ff0d0d",a.setLineDash([5,5]),a.beginPath(),a.moveTo(e*n+t[4],i*n+t[5]),a.lineTo(r*n+t[4],s*n+t[5]),a.stroke(),a.restore()}function s(e,t){e=Math.round(e),t=Math.round(t);for(var a=e-4,n=e+4;a<=n;a++)if(a===t)return!0;return!1}var o=[],c=[];e.on("mouse:down",function(){t=e.viewportTransform,n=e.getZoom()}),e.on("object:moving",a=>{if(this.fabricCanvasHandler.isGuidelines){var n=a.target,i=e.getObjects(),r=n.getCenterPoint(),d=r.x,p=r.y,h=n.getBoundingRect(),u=h.height/t[3],b=h.width/t[0],g=!1,f=!1;if(e._currentTransform){for(var v=i.length;v--;)if(i[v]!==n){var m=i[v].getCenterPoint(),C=m.x,w=m.y,_=i[v].getBoundingRect(),y=_.height/t[3],x=_.width/t[0];s(C,d)&&(f=!0,o.push({x:C,y1:w<p?w-y/2-5:w+y/2+5,y2:p>w?p+u/2+5:p-u/2-5}),n.setPositionByOrigin(new l.fabric.Point(C,p),"center","center")),s(C-x/2,d-b/2)&&(f=!0,o.push({x:C-x/2,y1:w<p?w-y/2-5:w+y/2+5,y2:p>w?p+u/2+5:p-u/2-5}),n.setPositionByOrigin(new l.fabric.Point(C-x/2+b/2,p),"center","center")),s(C+x/2,d+b/2)&&(f=!0,o.push({x:C+x/2,y1:w<p?w-y/2-5:w+y/2+5,y2:p>w?p+u/2+5:p-u/2-5}),n.setPositionByOrigin(new l.fabric.Point(C+x/2-b/2,p),"center","center")),s(w,p)&&(g=!0,c.push({y:w,x1:C<d?C-x/2-5:C+x/2+5,x2:d>C?d+b/2+5:d-b/2-5}),n.setPositionByOrigin(new l.fabric.Point(d,w),"center","center")),s(w-y/2,p-u/2)&&(g=!0,c.push({y:w-y/2,x1:C<d?C-x/2-5:C+x/2+5,x2:d>C?d+b/2+5:d-b/2-5}),n.setPositionByOrigin(new l.fabric.Point(d,w-y/2+u/2),"center","center")),s(w+y/2,p+u/2)&&(g=!0,c.push({y:w+y/2,x1:C<d?C-x/2-5:C+x/2+5,x2:d>C?d+b/2+5:d-b/2-5}),n.setPositionByOrigin(new l.fabric.Point(d,w+y/2-u/2),"center","center"))}g||(c.length=0),f||(o.length=0)}}}),e.on("before:render",function(){null!=e.contextTop&&e.clearContext(e.contextTop)}),e.on("after:render",()=>{if(this.fabricCanvasHandler.isGuidelines){for(var e=o.length;e--;)r((t=o[e]).x+.5,t.y1>t.y2?t.y2:t.y1,t.x+.5,t.y2>t.y1?t.y2:t.y1);var t;for(e=c.length;e--;)i(c[e]);o.length=c.length=0}}),e.on("mouse:up",function(){o.length=c.length=0,e.renderAll()})},this.initCenteringGuidelines=(e,t)=>{for(var a,n=this.fabricCanvasHandler.drawableAreaCanvasSize.width,i=this.fabricCanvasHandler.drawableAreaCanvasSize.height,r=n/2,s=i/2,o={},c={},d=e.getSelectionContext(),p=1,h=r-4,u=r+4;h<=u;h++)o[Math.round(h)]=!0;for(h=s-4,u=s+4;h<=u;h++)c[Math.round(h)]=!0;function b(e,t,n,i){d.save(),d.strokeStyle="rgb(30,137,251)",d.lineWidth=1.5,d.beginPath(),d.moveTo(e*p+a[4],t*p+a[5]),d.lineTo(n*p+a[4],i*p+a[5]),d.stroke(),d.restore()}var g,f;e.on("mouse:down",()=>{this.fabricCanvasHandler.mockupsHandler.editingMockupContentsMode?(n=this.fabricCanvasHandler.mockupDrawableAreaCanvasSize.width,i=this.fabricCanvasHandler.mockupDrawableAreaCanvasSize.height):(n=this.fabricCanvasHandler.drawableAreaCanvasSize.width,i=this.fabricCanvasHandler.drawableAreaCanvasSize.height),s=i/2,o={},c={};for(var t=(r=n/2)-4,l=r+4;t<=l;t++)o[Math.round(t)]=!0;for(t=s-4,l=s+4;t<=l;t++)c[Math.round(t)]=!0;a=e.viewportTransform,p=e.getZoom()}),e.on("object:moving",t=>{if(this.fabricCanvasHandler.isGuidelines){var a=t.target,n=a.getCenterPoint();e._currentTransform&&(g=Math.round(n.x)in o,((f=Math.round(n.y)in c)||g)&&a.setPositionByOrigin(new l.fabric.Point(g?r:n.x,f?s:n.y),"center","center"))}}),e.on("before:render",function(){null!=e.contextTop&&e.clearContext(e.contextTop)}),e.on("after:render",()=>{this.fabricCanvasHandler.isGuidelines&&(g&&b(r+.5,0,r+.5,i),f&&b(0,s+.5,n,s+.5))}),e.on("mouse:up",function(){g=f=null,e.renderAll()})},this.fabricCanvasHandler=e}}(this),this.zoomPanHandler=new class{constructor(e){this.zoomByInputRange=()=>{this.fabricCanvasHandler.zoomOptions.percentage=Number(100*this.fabricCanvasHandler.zoomOptions.level).toFixed(0)+"%",this.fabricCanvasHandler.getCurrentFabricCanvas().zoomToPoint(new l.fabric.Point(this.fabricCanvasHandler.size.width/2,this.fabricCanvasHandler.size.height/2),this.fabricCanvasHandler.zoomOptions.level),this.fabricCanvasHandler.getCurrentFabricCanvas().requestRenderAll()},this.zoomByEvent=e=>{let t;e.deltaY&&e.offsetY?t=this.fabricCanvasHandler.zoomOptions.level-e.deltaY/(100/this.fabricCanvasHandler.zoomOptions.level):e.deltaScale&&(t=this.fabricCanvasHandler.zoomOptions.level+e.deltaScale*this.fabricCanvasHandler.zoomOptions.level),void 0!==t&&(t=Math.max(.1,Math.min(t,20)),this.fabricCanvasHandler.getCurrentFabricCanvas().zoomToPoint(new l.fabric.Point(Math.ceil(e.offsetX),Math.ceil(e.offsetY)),t),this.fabricCanvasHandler.zoomOptions.level=t,this.fabricCanvasHandler.zoomOptions.percentage=Number(100*t).toFixed(0)+"%"),this.fabricCanvasHandler.getCurrentFabricCanvas().requestRenderAll()},this.panCanvas=(e,t=!1)=>{const a=this.fabricCanvasHandler.getCurrentFabricCanvas().getZoom(),n=this.fabricCanvasHandler.getCurrentFabricCanvas(),i=e.e.deltaY?-e.e.deltaY:e.e.movementY;let r,s;r=n.vptCoords.tl.x*a-(e.e.deltaX?-e.e.deltaX:e.e.movementX),s=n.vptCoords.tl.y*a-i,t&&(r=n.vptCoords.tl.x*a-i,s=n.vptCoords.tl.y*a),this.fabricCanvasHandler.getCurrentFabricCanvas().absolutePan({x:r,y:s}),this.fabricCanvasHandler.getCurrentFabricCanvas().requestRenderAll()},this.fabricCanvasHandler=e}setZoom(e){let t=.2;t=this.fabricCanvasHandler.zoomOptions.level>=6?1.6:this.fabricCanvasHandler.zoomOptions.level>=3?.8:.2,"zoomIn"==e&&this.fabricCanvasHandler.zoomOptions.level<=20?this.fabricCanvasHandler.zoomOptions.level+=t:"zoomOut"==e&&this.fabricCanvasHandler.zoomOptions.level>=.1&&(this.fabricCanvasHandler.zoomOptions.level-=t),this.fabricCanvasHandler.zoomOptions.level<=.1&&(this.fabricCanvasHandler.zoomOptions.level=.1),this.fabricCanvasHandler.zoomOptions.percentage=Number(100*this.fabricCanvasHandler.zoomOptions.level).toFixed(0)+"%",this.fabricCanvasHandler.getCurrentFabricCanvas().zoomToPoint(new l.fabric.Point(this.fabricCanvasHandler.size.width/2,this.fabricCanvasHandler.size.height/2),this.fabricCanvasHandler.zoomOptions.level),this.fabricCanvasHandler.getCurrentFabricCanvas().renderAll()}fitCanvasToScreen(){this.fabricCanvasHandler.currentCanvasId===f.a.MAIN_CANVAS?this.fabricCanvasHandler.pagesHandler.pagesPanelShown||this.fabricCanvasHandler.mockupsHandler.editingMockupContentsMode?(this.fabricCanvasHandler.workAreaHandler.setCanvasSize(f.a.CANVAS_WIDTH_OFFSET_WHEN_RESIZING,!0),this.updateViewport(f.a.CANVAS_WIDTH_OFFSET_WHEN_RESIZING)):(this.fabricCanvasHandler.workAreaHandler.setCanvasSize(null,!0),this.updateViewport()):(this.fabricCanvasHandler.workAreaHandler.setMockupCanvasSize(f.a.CANVAS_WIDTH_OFFSET_WHEN_RESIZING,!0),this.updateMockupCanvasViewport())}updateViewport(e=0,t=!0){let a;t?(a=Math.min((this.fabricCanvasHandler.mainCanvasDivRef.nativeElement.clientWidth-e-120)/this.fabricCanvasHandler.drawableAreaCanvasSize.width,(this.fabricCanvasHandler.mainCanvasDivRef.nativeElement.clientHeight-120)/this.fabricCanvasHandler.drawableAreaCanvasSize.height),a=Math.min(a,1.5)):a=this.fabricCanvasHandler.zoomOptions.level;const n={x:-this.fabricCanvasHandler.getCurrentFabricCanvas().getCenter().left+this.fabricCanvasHandler.drawableAreaCanvasSize.width/2*a,y:-this.fabricCanvasHandler.getCurrentFabricCanvas().getCenter().top+this.fabricCanvasHandler.drawableAreaCanvasSize.height/2*a};this.fabricCanvasHandler.getCurrentFabricCanvas().setZoom(a),this.fabricCanvasHandler.getCurrentFabricCanvas().absolutePan(n),this.fabricCanvasHandler.zoomOptions.level=a,this.fabricCanvasHandler.zoomOptions.percentage=Number(100*a).toFixed(0)+"%",this.fabricCanvasHandler.getCurrentFabricCanvas().renderAll()}updateMockupCanvasViewport(e=!0){let t;e?(t=Math.min((this.fabricCanvasHandler.mainCanvasDivRef.nativeElement.clientWidth-f.a.CANVAS_WIDTH_OFFSET_WHEN_RESIZING-120)/this.fabricCanvasHandler.mockupDrawableAreaCanvasSize.width,(this.fabricCanvasHandler.mainCanvasDivRef.nativeElement.clientHeight-120)/this.fabricCanvasHandler.mockupDrawableAreaCanvasSize.height),t=Math.min(t,1.5)):t=this.fabricCanvasHandler.zoomOptions.level;const a={x:-this.fabricCanvasHandler.getCurrentFabricCanvas().getCenter().left+this.fabricCanvasHandler.mockupDrawableAreaCanvasSize.width/2*t,y:-this.fabricCanvasHandler.getCurrentFabricCanvas().getCenter().top+this.fabricCanvasHandler.mockupDrawableAreaCanvasSize.height/2*t};this.fabricCanvasHandler.getCurrentFabricCanvas().setZoom(t),this.fabricCanvasHandler.getCurrentFabricCanvas().absolutePan(a),this.fabricCanvasHandler.zoomOptions.level=t,this.fabricCanvasHandler.zoomOptions.percentage=Number(100*t).toFixed(0)+"%",this.fabricCanvasHandler.getCurrentFabricCanvas().renderAll()}}(this),this.basicToolsHandler=new class{constructor(e,t,a){this.getElementFill=()=>{this.fabricCanvasHandler.elementProps.fillType="fill",this.fabricCanvasHandler.elementProps.gradientFills=[];let e=this.getActiveStyle("fill",null);this.fabricCanvasHandler.elementProps.fillType=void 0!==e.colorStops?"gradient":"fill","fill"==this.fabricCanvasHandler.elementProps.fillType?(this.fabricCanvasHandler.elementProps.fill=this.getActiveStyle("fill",null)||null,this.fabricCanvasHandler.elementProps.isFill=null!=this.fabricCanvasHandler.elementProps.fill):"gradient"==this.fabricCanvasHandler.elementProps.fillType&&(e.colorStops.sort((e,t)=>e.offset>t.offset?1:-1),e.colorStops.forEach((e,t)=>{this.fabricCanvasHandler.elementProps.gradientFills.push({index:t,colorValue:e.color})}))},this.setElementFill=(e=null,t=!1)=>{let a;if(t||(a=_()(this.fabricCanvasHandler.getCurrentFabricCanvas().getActiveObjects())),this.fabricCanvasHandler.getCurrentFabricCanvas().getActiveObjects().forEach(t=>{"textbox"===t.type?this.fabricCanvasHandler.textElementHandler.setSelectionStyles("fill",e||this.fabricCanvasHandler.elementProps.fill,null):t.set("fill",e||this.fabricCanvasHandler.elementProps.fill),t.setCoords()}),this.fabricCanvasHandler.getCurrentFabricCanvas().requestRenderAll(),!t){let e=_()(this.fabricCanvasHandler.getCurrentFabricCanvas().getActiveObjects());this.fabricCanvasHandler.historyHandlerV.debouncedHistory(a,e,["id","fill"],null,y.BasicProps)}},this.getOpacity=()=>{this.fabricCanvasHandler.elementProps.opacity=100*this.getActiveStyle("opacity",null)},this.setOpacity=()=>{try{if("group"===this.fabricCanvasHandler.getCurrentFabricCanvas().getActiveObject().type)this.fabricCanvasHandler.getCurrentFabricCanvas().trigger("before:canvas:state:changed",{}),this.fabricCanvasHandler.getCurrentFabricCanvas().getActiveObject().getObjects().forEach(e=>{e.set("opacity",this.fabricCanvasHandler.elementProps.opacity/100),e.setCoords()}),this.fabricCanvasHandler.getCurrentFabricCanvas().requestRenderAll(),this.fabricCanvasHandler.getCurrentFabricCanvas().trigger("after:canvas:state:changed",{});else{let e=_()(this.fabricCanvasHandler.getCurrentFabricCanvas().getActiveObjects());this.fabricCanvasHandler.getCurrentFabricCanvas().getActiveObjects().forEach(e=>{e.set("opacity",this.fabricCanvasHandler.elementProps.opacity/100),e.setCoords()}),this.fabricCanvasHandler.getCurrentFabricCanvas().requestRenderAll();let t=_()(this.fabricCanvasHandler.getCurrentFabricCanvas().getActiveObjects());this.fabricCanvasHandler.historyHandlerV.debouncedHistory(e,t,["id","opacity"],null,y.BasicProps)}}catch(e){S.c(t=>{t.setExtra("functionCalled","setOpacity"),t.setExtra("fabricObject",this.fabricCanvasHandler.selected||{object:null}),S.a(e)})}},this.getStroke=()=>{this.fabricCanvasHandler.elementProps.strokeColor=this.getActiveStyle("stroke",null)||"#000",this.fabricCanvasHandler.elementProps.strokeWidth=this.getActiveStyle("strokeWidth",null),this.getActiveStyle("stroke",null)?this.fabricCanvasHandler.elementProps.isStroke=!0:(this.fabricCanvasHandler.elementProps.isStroke=!1,this.fabricCanvasHandler.elementProps.strokeWidth=null)},this.setStrokeWidth=()=>{if("group"===this.fabricCanvasHandler.getCurrentFabricCanvas().getActiveObject().type)this.fabricCanvasHandler.elementProps.isStroke||(this.fabricCanvasHandler.elementProps.isStroke=!0),this.fabricCanvasHandler.getCurrentFabricCanvas().trigger("before:canvas:state:changed",{}),this.fabricCanvasHandler.getCurrentFabricCanvas().getActiveObject().getObjects().forEach(e=>{e.set("strokeWidth",Number(this.fabricCanvasHandler.elementProps.strokeWidth)),e.set("stroke",this.fabricCanvasHandler.elementProps.strokeColor),e.setCoords()}),this.fabricCanvasHandler.getCurrentFabricCanvas().requestRenderAll(),this.fabricCanvasHandler.getCurrentFabricCanvas().trigger("after:canvas:state:changed",{});else{this.fabricCanvasHandler.elementProps.isStroke||(this.fabricCanvasHandler.elementProps.isStroke=!0);let e=_()(this.fabricCanvasHandler.getCurrentFabricCanvas().getActiveObjects());this.fabricCanvasHandler.getCurrentFabricCanvas().getActiveObjects().forEach(e=>{e.set("strokeWidth",Number(this.fabricCanvasHandler.elementProps.strokeWidth)),e.set("stroke",this.fabricCanvasHandler.elementProps.strokeColor),e.setCoords()}),this.fabricCanvasHandler.getCurrentFabricCanvas().requestRenderAll();let t=_()(this.fabricCanvasHandler.getCurrentFabricCanvas().getActiveObjects());this.fabricCanvasHandler.historyHandlerV.debouncedHistory(e,t,["id","strokeWidth","stroke"],null,y.BasicProps)}},this.setStrokeColor=(e=null,t=!1)=>{if("group"===this.fabricCanvasHandler.getCurrentFabricCanvas().getActiveObject().type)t||this.fabricCanvasHandler.getCurrentFabricCanvas().trigger("before:canvas:state:changed",{}),this.fabricCanvasHandler.getCurrentFabricCanvas().getActiveObject().getObjects().forEach(t=>{t.set("stroke",e||this.fabricCanvasHandler.elementProps.strokeColor),t.setCoords()}),this.fabricCanvasHandler.getCurrentFabricCanvas().requestRenderAll(),t||this.fabricCanvasHandler.getCurrentFabricCanvas().trigger("after:canvas:state:changed",{});else{let a;if(t||(a=_()(this.fabricCanvasHandler.getCurrentFabricCanvas().getActiveObjects())),this.fabricCanvasHandler.getCurrentFabricCanvas().getActiveObjects().forEach(t=>{t.set("stroke",e||this.fabricCanvasHandler.elementProps.strokeColor),t.setCoords()}),this.fabricCanvasHandler.getCurrentFabricCanvas().requestRenderAll(),!t){let e=_()(this.fabricCanvasHandler.getCurrentFabricCanvas().getActiveObjects());this.fabricCanvasHandler.historyHandlerV.debouncedHistory(a,e,["id","strokeWidth","stroke"],null,y.BasicProps)}}},this.toggleStroke=()=>{if(1==this.fabricCanvasHandler.elementProps.isStroke?(this.fabricCanvasHandler.elementProps.strokeColor="black",this.fabricCanvasHandler.elementProps.strokeWidth=5):(this.fabricCanvasHandler.elementProps.strokeColor=null,this.fabricCanvasHandler.elementProps.strokeWidth=null),"group"===this.fabricCanvasHandler.getCurrentFabricCanvas().getActiveObject().type)this.fabricCanvasHandler.getCurrentFabricCanvas().trigger("before:canvas:state:changed",{}),this.fabricCanvasHandler.getCurrentFabricCanvas().getActiveObject().getObjects().forEach(e=>{e.set("stroke",this.fabricCanvasHandler.elementProps.strokeColor),e.set("strokeWidth",this.fabricCanvasHandler.elementProps.strokeWidth),e.setCoords()}),this.fabricCanvasHandler.getCurrentFabricCanvas().requestRenderAll(),this.fabricCanvasHandler.getCurrentFabricCanvas().trigger("after:canvas:state:changed",{});else{let e=_()(this.fabricCanvasHandler.getCurrentFabricCanvas().getActiveObjects());this.fabricCanvasHandler.getCurrentFabricCanvas().getActiveObjects().forEach(e=>{e.set("stroke",this.fabricCanvasHandler.elementProps.strokeColor),e.set("strokeWidth",this.fabricCanvasHandler.elementProps.strokeWidth),e.setCoords()}),this.fabricCanvasHandler.getCurrentFabricCanvas().requestRenderAll();let t=_()(this.fabricCanvasHandler.getCurrentFabricCanvas().getActiveObjects());this.fabricCanvasHandler.historyHandlerV.debouncedHistory(e,t,["id","strokeWidth","stroke"],null,y.BasicProps)}this.fabricCanvasHandler.elementProps.isStroke&&this._gaEventsService.eventEmitter("Editor tool","Border tool used","Border tool used",null)},this.getShadowProperties=()=>{if(null==this.fabricCanvasHandler.getCurrentFabricCanvas().getActiveObject().shadow||null==this.fabricCanvasHandler.getCurrentFabricCanvas().getActiveObject().shadow.color)return this.fabricCanvasHandler.elementProps.shadow.color=null,this.fabricCanvasHandler.elementProps.shadow.opacity=null,this.fabricCanvasHandler.elementProps.shadow.blur=null,this.fabricCanvasHandler.elementProps.shadow.offsetX=null,this.fabricCanvasHandler.elementProps.shadow.offsetY=null,void(this.fabricCanvasHandler.elementProps.isShadow=!1);this.fabricCanvasHandler.elementProps.isShadow=!0,this.fabricCanvasHandler.elementProps.shadow.color=this.fabricCanvasHandler.getCurrentFabricCanvas().getActiveObject().shadow.color,this.fabricCanvasHandler.elementProps.shadow.opacity=this.fabricCanvasHandler.getCurrentFabricCanvas().getActiveObject().shadow.opacity,this.fabricCanvasHandler.elementProps.shadow.blur=this.fabricCanvasHandler.getCurrentFabricCanvas().getActiveObject().shadow.blur,this.fabricCanvasHandler.elementProps.shadow.offsetX=this.fabricCanvasHandler.getCurrentFabricCanvas().getActiveObject().shadow.offsetX,this.fabricCanvasHandler.elementProps.shadow.offsetY=this.fabricCanvasHandler.getCurrentFabricCanvas().getActiveObject().shadow.offsetY},this.setShadowProperties=()=>{if("group"===this.fabricCanvasHandler.getCurrentFabricCanvas().getActiveObject().type)this.fabricCanvasHandler.elementProps.isShadow||(this.fabricCanvasHandler.elementProps.isShadow=!0),this.fabricCanvasHandler.getCurrentFabricCanvas().trigger("before:canvas:state:changed",{}),this.fabricCanvasHandler.getCurrentFabricCanvas().getActiveObject().getObjects().forEach(e=>{e.setShadow({color:this.fabricCanvasHandler.elementProps.shadow.color||"#000",blur:null==this.fabricCanvasHandler.elementProps.shadow.blur?10:this.fabricCanvasHandler.elementProps.shadow.blur,offsetX:null==this.fabricCanvasHandler.elementProps.shadow.offsetX?10:this.fabricCanvasHandler.elementProps.shadow.offsetX,offsetY:null==this.fabricCanvasHandler.elementProps.shadow.offsetY?10:this.fabricCanvasHandler.elementProps.shadow.offsetY}),e.setCoords()}),this.fabricCanvasHandler.getCurrentFabricCanvas().requestRenderAll(),this.fabricCanvasHandler.getCurrentFabricCanvas().trigger("after:canvas:state:changed",{});else{this.fabricCanvasHandler.elementProps.isShadow||(this.fabricCanvasHandler.elementProps.isShadow=!0);let e=_()(this.fabricCanvasHandler.getCurrentFabricCanvas().getActiveObjects());this.fabricCanvasHandler.getCurrentFabricCanvas().getActiveObjects().forEach(e=>{e.setShadow({color:this.fabricCanvasHandler.elementProps.shadow.color||"#000",blur:null==this.fabricCanvasHandler.elementProps.shadow.blur?10:this.fabricCanvasHandler.elementProps.shadow.blur,offsetX:null==this.fabricCanvasHandler.elementProps.shadow.offsetX?10:this.fabricCanvasHandler.elementProps.shadow.offsetX,offsetY:null==this.fabricCanvasHandler.elementProps.shadow.offsetY?10:this.fabricCanvasHandler.elementProps.shadow.offsetY}),e.setCoords()}),this.fabricCanvasHandler.getCurrentFabricCanvas().requestRenderAll();let t=_()(this.fabricCanvasHandler.getCurrentFabricCanvas().getActiveObjects());this.fabricCanvasHandler.historyHandlerV.debouncedHistory(e,t,["id","shadow"],null,y.ShadowProps)}},this.toggleShadow=()=>{this.fabricCanvasHandler.elementProps.shadow.color=this.fabricCanvasHandler.elementProps.isShadow?"#000":null,this.fabricCanvasHandler.elementProps.shadow.offsetX=this.fabricCanvasHandler.elementProps.isShadow?10:null,this.fabricCanvasHandler.elementProps.shadow.offsetY=this.fabricCanvasHandler.elementProps.isShadow?10:null,this.fabricCanvasHandler.elementProps.shadow.blur=this.fabricCanvasHandler.elementProps.isShadow?10:null;try{if("group"===this.fabricCanvasHandler.getCurrentFabricCanvas().getActiveObject().type)this.fabricCanvasHandler.getCurrentFabricCanvas().trigger("before:canvas:state:changed",{}),this.fabricCanvasHandler.getCurrentFabricCanvas().getActiveObject().getObjects().forEach(e=>{e.setShadow({color:this.fabricCanvasHandler.elementProps.shadow.color,blur:null==this.fabricCanvasHandler.elementProps.shadow.blur?10:this.fabricCanvasHandler.elementProps.shadow.blur,offsetX:null==this.fabricCanvasHandler.elementProps.shadow.offsetX?10:this.fabricCanvasHandler.elementProps.shadow.offsetX,offsetY:null==this.fabricCanvasHandler.elementProps.shadow.offsetY?10:this.fabricCanvasHandler.elementProps.shadow.offsetY}),e.setCoords()}),this.fabricCanvasHandler.getCurrentFabricCanvas().requestRenderAll(),this.fabricCanvasHandler.getCurrentFabricCanvas().trigger("after:canvas:state:changed",{});else{let e=_()(this.fabricCanvasHandler.getCurrentFabricCanvas().getActiveObjects());this.fabricCanvasHandler.getCurrentFabricCanvas().getActiveObjects().forEach(e=>{e.setShadow({color:this.fabricCanvasHandler.elementProps.shadow.color,blur:null==this.fabricCanvasHandler.elementProps.shadow.blur?10:this.fabricCanvasHandler.elementProps.shadow.blur,offsetX:null==this.fabricCanvasHandler.elementProps.shadow.offsetX?10:this.fabricCanvasHandler.elementProps.shadow.offsetX,offsetY:null==this.fabricCanvasHandler.elementProps.shadow.offsetY?10:this.fabricCanvasHandler.elementProps.shadow.offsetY}),e.setCoords()}),this.fabricCanvasHandler.getCurrentFabricCanvas().requestRenderAll();let t=_()(this.fabricCanvasHandler.getCurrentFabricCanvas().getActiveObjects());this.fabricCanvasHandler.historyHandlerV.debouncedHistory(e,t,["id","shadow"],null,y.ShadowProps)}this.fabricCanvasHandler.elementProps.isShadow&&this._gaEventsService.eventEmitter("Editor tool","Shadow tool used","Shadow tool used",null)}catch(e){S.c(t=>{t.setExtra("functionCalled","toggleShadow"),t.setExtra("fabricObject",this.fabricCanvasHandler.selected||{object:null}),S.a(e)})}},this.copyObjectsFromCanvas=()=>{this.fabricCanvasHandler.getCurrentFabricCanvas().getActiveObject().clone(e=>{this.fabricCanvasHandler._clipboard=e,localStorage.setItem("cp",JSON.stringify(e.toObject(this.fabricCanvasHandler.objectPropertiesToInclude)))},this.fabricCanvasHandler.objectPropertiesToInclude)},this.pasteObjectsOntoCanvas=()=>{let e;this.returnClipboardOrLocalStorageForPasting(t=>{e=t,null!=e&&(this.fabricCanvasHandler.getCurrentFabricCanvas().discardActiveObject(),e.clone(e=>{var t;e.isMockup&&(null===(t=e.mockupData)||void 0===t||delete t.final_rendered_image_url),e.set({left:e.left+20,top:e.top+20,evented:!0}),"activeSelection"===e.type?(e.canvas=this.fabricCanvasHandler.getCurrentFabricCanvas(),e.getObjects().forEach(e=>{var t;e.id=this.randomId(),e.isMockup&&(null===(t=e.mockupData)||void 0===t||delete t.final_rendered_image_url),this.fabricCanvasHandler.getCurrentFabricCanvas().add(e)}),e.setCoords()):(e.id=this.randomId(),this.fabricCanvasHandler.getCurrentFabricCanvas().add(e)),this.fabricCanvasHandler._clipboard=e,localStorage.setItem("cp",JSON.stringify(e.toObject(this.fabricCanvasHandler.objectPropertiesToInclude))),this.selectItemAfterAdded(e)},this.fabricCanvasHandler.objectPropertiesToInclude))})},this.getCurrentCanvasSize=()=>{let e=this.fabricCanvasHandler.currentCanvasId===f.a.MAIN_CANVAS?this.fabricCanvasHandler.drawableAreaCanvasSize.height:this.fabricCanvasHandler.mockupDrawableAreaCanvasSize.height;return{width:Number(this.fabricCanvasHandler.currentCanvasId===f.a.MAIN_CANVAS?this.fabricCanvasHandler.drawableAreaCanvasSize.width:this.fabricCanvasHandler.mockupDrawableAreaCanvasSize.width),height:Number(e)}},this.intendedTimePassed=(e,t)=>e>Date.now()-t,this.fabricCanvasHandler=e,this._helpersService=t,this._gaEventsService=a}toggleFill(){this.fabricCanvasHandler.elementProps.fill=1==this.fabricCanvasHandler.elementProps.isFill?"black":null,this.fabricCanvasHandler.getCurrentFabricCanvas().getActiveObject().set("fill",this.fabricCanvasHandler.elementProps.fill),this.fabricCanvasHandler.getCurrentFabricCanvas().requestRenderAll()}restoreObjectFill(){this.fabricCanvasHandler.getCurrentFabricCanvas().getActiveObjects().forEach(e=>{e.set("fill",this.fabricCanvasHandler.elementProps.fill),e.setCoords()}),this.fabricCanvasHandler.getCurrentFabricCanvas().requestRenderAll()}setGradientFill(e,t){let a=this.fabricCanvasHandler.getCurrentFabricCanvas().getActiveObject(),n=this.getActiveStyle("fill",null);n.colorStops[t].color=e;let i={};n.colorStops.forEach(function(e){i[e.offset]=e.color}),a.setGradient("fill",{type:n.type,colorStops:i,x1:n.coords.x1,x2:n.coords.x2,y1:n.coords.y1,y2:n.coords.y2,gradientTransform:n.gradientTransform,gradientUnits:n.gradientUnits}),this.fabricCanvasHandler.getCurrentFabricCanvas().requestRenderAll()}getSVGColors(){this.fabricCanvasHandler.elementProps.fillType="svg";let e=this.fabricCanvasHandler.getCurrentFabricCanvas().getActiveObject().getObjects(),t={};e.forEach((e,a)=>{let n=[];"string"==typeof e.fill&&""!=e.fill.trim()&&null!=e.fill&&(t[e.fill]?t[e.fill].paths.push(a):(n.push(a),t[e.fill]={colorValue:e.fill,colorType:"fill",selected:!1,paths:n})),n=[],"string"==typeof e.stroke&&""!=e.stroke.trim()&&null!=e.stroke&&(t[e.stroke]?t[e.stroke].paths.push(a):(n.push(a),t[e.stroke]={colorValue:e.stroke,colorType:"stroke",selected:!1,paths:n}))}),this.fabricCanvasHandler.elementProps.groupColors=H()(t)}getObjectById(e,t=!0){if(t){var a=[];return this.traverseObjects(this.fabricCanvasHandler.getCurrentFabricCanvas().getObjects(),e,a),a}return this.fabricCanvasHandler.getCurrentFabricCanvas().getObjects().filter(function(t){return t.id==e})}traverseObjects(e,t,a){for(let n of e)"group"==n.type?this.traverseObjects(n.getObjects(),t,a):n.id==t&&a.push(n)}setSVGGroupPathFill(e,t){this.fabricCanvasHandler.getCurrentFabricCanvas().trigger("before:canvas:state:changed",{});let a=this.fabricCanvasHandler.getCurrentFabricCanvas().getActiveObject().getObjects();e.paths.forEach((n,i)=>{let r=a[e.paths[i]];"fill"===e.colorType?r.set("fill",t):"stroke"===e.colorType&&r.set("stroke",t)}),this.fabricCanvasHandler.getCurrentFabricCanvas().requestRenderAll(),this.fabricCanvasHandler.getCurrentFabricCanvas().trigger("after:canvas:state:changed",{})}setSVGGroupPathToOneFill(e){let t=this.fabricCanvasHandler.getCurrentFabricCanvas().getActiveObject().getObjects(),a=[],n=[];t.forEach((t,i)=>{a.push(_()(t)),t.set("fill",e),n.push(t)}),this.fabricCanvasHandler.historyHandlerV.debouncedHistory(a,n,["id","fill"],null,y.GroupColors),this.fabricCanvasHandler.getCurrentFabricCanvas().requestRenderAll()}restoreObjectsStrokeColor(){this.fabricCanvasHandler.getCurrentFabricCanvas().getActiveObjects().forEach(e=>{e.set("stroke",this.fabricCanvasHandler.elementProps.strokeColor),e.setCoords()}),this.fabricCanvasHandler.getCurrentFabricCanvas().requestRenderAll()}getLeft(){this.fabricCanvasHandler.elementProps.left=Number(this.getActiveStyle("left")),this.fabricCanvasHandler.getCurrentFabricCanvas().getActiveObject().originalLeft=this.fabricCanvasHandler.elementProps.left}setLeft(e=null,t=null){let a=this.fabricCanvasHandler.getCurrentFabricCanvas().getActiveObject();if("movement"==t&&(this.fabricCanvasHandler.elementProps.left=Number(a.left)),e=e||Number(this.fabricCanvasHandler.elementProps.left),a)if("activeSelection"==a.type){let i=_()(this.fabricCanvasHandler.getCurrentFabricCanvas().getActiveObjects());a.left=e,a.originalLeft=e;let r=a.getObjects();this.fabricCanvasHandler.getCurrentFabricCanvas().discardActiveObject(),r.forEach(e=>{e.originalLeft=e.left,e.setCoords()});var n=new l.fabric.ActiveSelection(r,{canvas:this.fabricCanvasHandler.getCurrentFabricCanvas()});if(this.fabricCanvasHandler.getCurrentFabricCanvas().setActiveObject(n),this.fabricCanvasHandler.getCurrentFabricCanvas().requestRenderAll(),"movement"!=t){let e=_()(this.fabricCanvasHandler.getCurrentFabricCanvas().getActiveObjects());this.fabricCanvasHandler.historyHandlerV.debouncedHistory(i,e,["id","left","top","originalLeft","originalTop"],null,y.BasicProps)}}else{let n=_()(this.fabricCanvasHandler.getCurrentFabricCanvas().getActiveObjects());if(a.left=e,a.originalLeft=e,a.setCoords(),this.fabricCanvasHandler.getCurrentFabricCanvas().requestRenderAll(),"movement"!=t){let e=_()(this.fabricCanvasHandler.getCurrentFabricCanvas().getActiveObjects());this.fabricCanvasHandler.historyHandlerV.debouncedHistory(n,e,["id","left","top","originalLeft","originalTop"],null,y.BasicProps)}}}getTop(){this.fabricCanvasHandler.elementProps.top=Number(this.getActiveStyle("top")),this.fabricCanvasHandler.getCurrentFabricCanvas().getActiveObject().originalTop=this.fabricCanvasHandler.elementProps.top}setTop(e=null,t=null){let a=this.fabricCanvasHandler.getCurrentFabricCanvas().getActiveObject();if(a&&("movement"==t&&(this.fabricCanvasHandler.elementProps.top=Number(a.top)),e=e||Number(this.fabricCanvasHandler.elementProps.top),a))if("activeSelection"==a.type){let i=_()(this.fabricCanvasHandler.getCurrentFabricCanvas().getActiveObjects());a.top=e,a.originalTop=e;let r=a.getObjects();this.fabricCanvasHandler.getCurrentFabricCanvas().discardActiveObject(),r.forEach(e=>{e.originalTop=e.top,e.setCoords()});var n=new l.fabric.ActiveSelection(r,{canvas:this.fabricCanvasHandler.getCurrentFabricCanvas()});if(this.fabricCanvasHandler.getCurrentFabricCanvas().setActiveObject(n),this.fabricCanvasHandler.getCurrentFabricCanvas().requestRenderAll(),"movement"!=t){let e=_()(this.fabricCanvasHandler.getCurrentFabricCanvas().getActiveObjects());this.fabricCanvasHandler.historyHandlerV.debouncedHistory(i,e,["id","left","top","originalLeft","originalTop"],null,y.BasicProps)}}else{let n=_()(this.fabricCanvasHandler.getCurrentFabricCanvas().getActiveObjects());if(a.top=e,a.originalTop=e,a.setCoords(),this.fabricCanvasHandler.getCurrentFabricCanvas().requestRenderAll(),"movement"!=t){let e=_()(this.fabricCanvasHandler.getCurrentFabricCanvas().getActiveObjects());this.fabricCanvasHandler.historyHandlerV.debouncedHistory(n,e,["id","left","top","originalLeft","originalTop"],null,y.BasicProps)}}}getElementWidth(){this.fabricCanvasHandler.elementProps.scaleX=this.getActiveStyle("scaleX",null),this.fabricCanvasHandler.elementProps.originalWidth=Number(this.getActiveStyle("width",null)),this.fabricCanvasHandler.elementProps.scaledWidth=Number(this.fabricCanvasHandler.getCurrentFabricCanvas().getActiveObject().getScaledWidth().toFixed(0))}setElementWidth(e="input"){if(this.fabricCanvasHandler.getCurrentFabricCanvas().getActiveObject())if("movement"==e)this.fabricCanvasHandler.elementProps.scaledWidth=Number(this.fabricCanvasHandler.getCurrentFabricCanvas().getActiveObject().getScaledWidth().toFixed(0));else{let e=this.fabricCanvasHandler.getCurrentFabricCanvas().getActiveObject();if("group"==e.type){if(this.fabricCanvasHandler.getCurrentFabricCanvas().trigger("before:canvas:state:changed",{}),"pathsGroup"==e.groupType){let t=this.fabricCanvasHandler.elementProps.scaledWidth/e.width;e.set("scaleX",t),e.set("scaleY",t),e.setCoords()}else{e.forEachObject(e=>{if("textbox"==e.type)e.set("width",this.fabricCanvasHandler.elementProps.scaledWidth);else{let t=this.fabricCanvasHandler.elementProps.scaledWidth/e.width;e.set("scaleX",t),"image"!=e.type&&"path"!=e.type||(e.scaleY=t)}e.setCoords()});for(let t of e.getObjects())t.setCoords(),e.removeWithUpdate(t).addWithUpdate(t)}this.getElementHeight(),this.fabricCanvasHandler.getCurrentFabricCanvas().requestRenderAll(),this.fabricCanvasHandler.getCurrentFabricCanvas().trigger("after:canvas:state:changed",{})}else{let t=_()(this.fabricCanvasHandler.getCurrentFabricCanvas().getActiveObjects());if("activeSelection"==e.type){this.fabricCanvasHandler.getCurrentFabricCanvas().getActiveObjects().forEach(e=>{if("textbox"==e.type)e.set("width",this.fabricCanvasHandler.elementProps.scaledWidth);else{let t=this.fabricCanvasHandler.elementProps.scaledWidth/e.width;e.set("scaleX",t),"image"!=e.type&&"path"!=e.type||(e.scaleY=t)}e.setCoords()});for(let t of this.fabricCanvasHandler.getCurrentFabricCanvas().getActiveObjects())t.setCoords(),e.removeWithUpdate(t).addWithUpdate(t)}else this.fabricCanvasHandler.getCurrentFabricCanvas().getActiveObjects().forEach(e=>{if("textbox"==e.type)e.set("width",this.fabricCanvasHandler.elementProps.scaledWidth);else{let t=this.fabricCanvasHandler.elementProps.scaledWidth/e.width;e.set("scaleX",t),"image"==e.type&&(e.scaleY=t)}e.setCoords()});this.getElementHeight(),this.fabricCanvasHandler.getCurrentFabricCanvas().requestRenderAll();let a=_()(this.fabricCanvasHandler.getCurrentFabricCanvas().getActiveObjects());this.fabricCanvasHandler.historyHandlerV.debouncedHistory(t,a,["id","width","height","scaleX","scaleY"],null,y.BasicProps)}}}getElementHeight(){this.fabricCanvasHandler.elementProps.scaleY=this.getActiveStyle("scaleY",null),this.fabricCanvasHandler.elementProps.originalHeight=this.getActiveStyle("height",null),this.fabricCanvasHandler.elementProps.scaledHeight=Number(this.fabricCanvasHandler.getCurrentFabricCanvas().getActiveObject().getScaledHeight().toFixed(0))}setElementHeight(e="input"){if(this.fabricCanvasHandler.getCurrentFabricCanvas().getActiveObject())if("movement"==e)this.fabricCanvasHandler.elementProps.scaledHeight=Number(this.fabricCanvasHandler.getCurrentFabricCanvas().getActiveObject().getScaledHeight().toFixed(0));else{let e=this.fabricCanvasHandler.getCurrentFabricCanvas().getActiveObject();if("group"==e.type){if(this.fabricCanvasHandler.getCurrentFabricCanvas().trigger("before:canvas:state:changed",{}),"pathsGroup"==e.groupType){let t=this.fabricCanvasHandler.elementProps.scaledHeight/e.height;e.set("scaleX",t),e.set("scaleY",t),e.setCoords()}else{e.forEachObject(e=>{if("textbox"!=e.type){let t=this.fabricCanvasHandler.elementProps.scaledHeight/e.height;e.set("scaleY",t),"image"!=e.type&&"path"!=e.type||(e.scaleX=t),e.setCoords()}});for(let t of e.getObjects())t.setCoords(),e.removeWithUpdate(t).addWithUpdate(t)}this.getElementWidth(),this.fabricCanvasHandler.getCurrentFabricCanvas().requestRenderAll(),this.fabricCanvasHandler.getCurrentFabricCanvas().trigger("after:canvas:state:changed",{})}else{let t=_()(this.fabricCanvasHandler.getCurrentFabricCanvas().getActiveObjects());if("activeSelection"==e.type){this.fabricCanvasHandler.getCurrentFabricCanvas().getActiveObjects().forEach(e=>{if("textbox"!=e.type){let t=this.fabricCanvasHandler.elementProps.scaledHeight/e.height;e.set("scaleY",t),"image"!=e.type&&"path"!=e.type||(e.scaleX=t),e.setCoords()}});for(let t of this.fabricCanvasHandler.getCurrentFabricCanvas().getActiveObjects())t.setCoords(),e.removeWithUpdate(t).addWithUpdate(t)}else this.fabricCanvasHandler.getCurrentFabricCanvas().getActiveObjects().forEach(e=>{let t=this.fabricCanvasHandler.elementProps.scaledHeight/e.height;e.set("scaleY",t),"image"!=e.type&&"textbox"!=e.type||(e.scaleX=t),e.setCoords()});this.getElementWidth(),this.fabricCanvasHandler.getCurrentFabricCanvas().requestRenderAll();let a=_()(this.fabricCanvasHandler.getCurrentFabricCanvas().getActiveObjects());this.fabricCanvasHandler.historyHandlerV.debouncedHistory(t,a,["id","width","height","scaleX","scaleY"],null,y.BasicProps)}}}bringToFront(){var e=this.fabricCanvasHandler.getCurrentFabricCanvas().getActiveObject();if(e&&this.fabricCanvasHandler.getCurrentFabricCanvas().getObjects().length-1!=this.fabricCanvasHandler.getCurrentFabricCanvas().getObjects().indexOf(e)){let t=this.fabricCanvasHandler.getCurrentFabricCanvas().getObjects().indexOf(e);this.fabricCanvasHandler.getCurrentFabricCanvas().bringToFront(e);let a={index:t,id:e.id},n={index:this.fabricCanvasHandler.getCurrentFabricCanvas().getObjects().length,id:e.id};this.fabricCanvasHandler.historyHandlerV.debouncedHistory([],[],[],{oldStageProps:a,newStageProps:n},y.Layers),this.fabricCanvasHandler.getCurrentFabricCanvas().renderAll()}}sendToBack(){var e=this.fabricCanvasHandler.getCurrentFabricCanvas().getActiveObject();if(e&&0!=this.fabricCanvasHandler.getCurrentFabricCanvas().getObjects().indexOf(e)){let t=this.fabricCanvasHandler.getCurrentFabricCanvas().getObjects().indexOf(e);this.fabricCanvasHandler.getCurrentFabricCanvas().sendToBack(e),this.fabricCanvasHandler.historyHandlerV.debouncedHistory([],[],[],{oldStageProps:{index:t,id:e.id},newStageProps:{index:0,id:e.id}},y.Layers),this.fabricCanvasHandler.getCurrentFabricCanvas().renderAll()}}bringForward(){var e=this.fabricCanvasHandler.getCurrentFabricCanvas().getActiveObject();if(e&&this.fabricCanvasHandler.getCurrentFabricCanvas().getObjects().length-1!=this.fabricCanvasHandler.getCurrentFabricCanvas().getObjects().indexOf(e)){let t=this.fabricCanvasHandler.getCurrentFabricCanvas().getObjects().indexOf(e);this.fabricCanvasHandler.getCurrentFabricCanvas().bringForward(e),this.fabricCanvasHandler.historyHandlerV.debouncedHistory([],[],[],{oldStageProps:{index:t,id:e.id},newStageProps:{index:t+1,id:e.id}},y.Layers),this.fabricCanvasHandler.getCurrentFabricCanvas().renderAll()}}sendBackward(){var e=this.fabricCanvasHandler.getCurrentFabricCanvas().getActiveObject();if(e&&0!=this.fabricCanvasHandler.getCurrentFabricCanvas().getObjects().indexOf(e)){let t=this.fabricCanvasHandler.getCurrentFabricCanvas().getObjects().indexOf(e);this.fabricCanvasHandler.getCurrentFabricCanvas().sendBackwards(e),this.fabricCanvasHandler.historyHandlerV.debouncedHistory([],[],[],{oldStageProps:{index:t,id:e.id},newStageProps:{index:t-1,id:e.id}},y.Layers),this.fabricCanvasHandler.getCurrentFabricCanvas().renderAll()}}flipVertical(){let e=_()(this.fabricCanvasHandler.getCurrentFabricCanvas().getActiveObjects());this.fabricCanvasHandler.getCurrentFabricCanvas().getActiveObjects().forEach(e=>{e.set("flipY",!e.flipY),e.setCoords()}),this.fabricCanvasHandler.getCurrentFabricCanvas().requestRenderAll();let t=_()(this.fabricCanvasHandler.getCurrentFabricCanvas().getActiveObjects());this.fabricCanvasHandler.historyHandlerV.debouncedHistory(e,t,["id","flipY"],null,y.BasicProps)}flipHorizontal(){let e=_()(this.fabricCanvasHandler.getCurrentFabricCanvas().getActiveObjects());this.fabricCanvasHandler.getCurrentFabricCanvas().getActiveObjects().forEach(e=>{e.set("flipX",!e.flipX),e.setCoords()}),this.fabricCanvasHandler.getCurrentFabricCanvas().requestRenderAll();let t=_()(this.fabricCanvasHandler.getCurrentFabricCanvas().getActiveObjects());this.fabricCanvasHandler.historyHandlerV.debouncedHistory(e,t,["id","flipX"],null,y.BasicProps)}cloneElement(e=null,t=!1){e=e||this.fabricCanvasHandler.getCurrentFabricCanvas().getActiveObject(),this.fabricCanvasHandler.getCurrentFabricCanvas().discardActiveObject(),e.clone(e=>{var a;e.set({left:t?e.left:e.left+20,top:t?e.top:e.top+20}),e.isMockup&&(null===(a=e.mockupData)||void 0===a||delete a.final_rendered_image_url),"activeSelection"===e.type?(e.canvas=this.fabricCanvasHandler.getCurrentFabricCanvas(),e.forEachObject(e=>{var t;e.id=this.randomId(),e.isMockup&&(null===(t=e.mockupData)||void 0===t||delete t.final_rendered_image_url),this.fabricCanvasHandler.getCurrentFabricCanvas().add(e)}),e.setCoords()):(e.id=this.randomId(),this.fabricCanvasHandler.getCurrentFabricCanvas().add(e),this.fabricCanvasHandler.getCurrentFabricCanvas().calcOffset()),this.selectItemAfterAdded(e),this.fabricCanvasHandler.getCurrentFabricCanvas().trigger("object:added:by:user",{target:e})},this.fabricCanvasHandler.objectPropertiesToInclude)}returnClipboardOrLocalStorageForPasting(e){let t;return null!=this.fabricCanvasHandler._clipboard?e(this.fabricCanvasHandler._clipboard):localStorage.getItem("cp")?void l.fabric.util.enlivenObjects([JSON.parse(localStorage.getItem("cp"))],a=>(t=a[0],e(t)),null):e(null)}deleteElement(){let e=this.fabricCanvasHandler.getCurrentFabricCanvas().getActiveObject();if(e){if("activeSelection"===e.type)for(let t of e.getObjects())this.fabricCanvasHandler.getCurrentFabricCanvas().remove(t);else this.fabricCanvasHandler.getCurrentFabricCanvas().remove(e);this.fabricCanvasHandler.getCurrentFabricCanvas().discardActiveObject().requestRenderAll(),this.fabricCanvasHandler.getCurrentFabricCanvas().trigger("object:removed:by:user",{target:e})}}lockElement(){if(this.fabricCanvasHandler.getCurrentFabricCanvas().getActiveObjects().length>0){let e=_()(this.fabricCanvasHandler.getCurrentFabricCanvas().getActiveObjects());this.fabricCanvasHandler.getCurrentFabricCanvas().getActiveObjects().forEach(e=>{e.locked=!0,e.selectable=!1,e.evented=!1,e.setCoords()}),this.fabricCanvasHandler.lockedObjects=!0;let t=_()(this.fabricCanvasHandler.getCurrentFabricCanvas().getActiveObjects());this.fabricCanvasHandler.historyHandlerV.debouncedHistory(e,t,["id","locked","selectable","evented"],null,y.BasicProps),this.fabricCanvasHandler.getCurrentFabricCanvas().discardActiveObject(),this.fabricCanvasHandler.getCurrentFabricCanvas().requestRenderAll()}}unlockAllElements(){const e=this.fabricCanvasHandler.getCurrentFabricCanvas().getObjects().filter(e=>!0===e.locked);if(e.length>0){let t=_()(e);e.forEach(e=>{e.locked=!1,e.selectable=!0,e.evented=!0,e.setCoords()}),this.fabricCanvasHandler.lockedObjects=!1;let a=_()(e);if(this.fabricCanvasHandler.historyHandlerV.debouncedHistory(t,a,["id","locked","selectable","evented"],null,y.BasicProps),e.length>1){const t=new l.fabric.ActiveSelection(e,{canvas:this.fabricCanvasHandler.getCurrentFabricCanvas()});this.fabricCanvasHandler.getCurrentFabricCanvas().setActiveObject(t).requestRenderAll(),this.fabricCanvasHandler.getCurrentFabricCanvas().getActiveObject().setCoords()}else 1===e.length&&(this.fabricCanvasHandler.getCurrentFabricCanvas().setActiveObject(e[0]),this.fabricCanvasHandler.getCurrentFabricCanvas().requestRenderAll())}}groupElements(e=null,t=!0){if("activeSelection"!=(e=e||this.fabricCanvasHandler.getCurrentFabricCanvas().getActiveObject()).type)return;let a=!1;for(let r of e.getObjects())"textbox"===r.type&&(a=!0);let n=this.fabricCanvasHandler.basicToolsHandler.removeAbnormalValuesFromJSON(this.fabricCanvasHandler.getCurrentFabricCanvas().toDatalessJSON(this.fabricCanvasHandler.objectPropertiesToInclude));const i=e.toGroup();if(i.perPixelTargetFind=!0,i.objectCaching=!1,i.id=this.randomId(),i.lockUniScaling=!!a,this.fabricCanvasHandler.getCurrentFabricCanvas().discardActiveObject(),this.fabricCanvasHandler.getCurrentFabricCanvas().setActiveObject(i),this.fabricCanvasHandler.getCurrentFabricCanvas().requestRenderAll(),t){let e=this.fabricCanvasHandler.basicToolsHandler.removeAbnormalValuesFromJSON(this.fabricCanvasHandler.getCurrentFabricCanvas().toDatalessJSON(this.fabricCanvasHandler.objectPropertiesToInclude));this.fabricCanvasHandler.historyHandlerV.debouncedHistory([],[],[],{oldCanvas:{oldCanvasJSON:n},newCanvas:{newCanvasJSON:e}},y.CanvasJSON)}}unGroupElements(e=null,t=!0){if("group"!=(e=e||this.fabricCanvasHandler.getCurrentFabricCanvas().getActiveObject()).type)return;let a=this.fabricCanvasHandler.basicToolsHandler.removeAbnormalValuesFromJSON(this.fabricCanvasHandler.getCurrentFabricCanvas().toDatalessJSON(this.fabricCanvasHandler.objectPropertiesToInclude));var n=e.getObjects();e._restoreObjectsState(),this.fabricCanvasHandler.getCurrentFabricCanvas().remove(e);for(var i=0;i<n.length;i++)void 0!==n[i].id&&null!=n[i].id&&n[i].id||(n[i].id=this.randomId()),n[i].perPixelTargetFind=!("textbox"==n[i].type||"i-text"==n[i].type||"group"==n[i].type&&n[i].getObjects().length>10),this.fabricCanvasHandler.getCurrentFabricCanvas().add(n[i]);this.fabricCanvasHandler.getCurrentFabricCanvas().discardActiveObject();var r=new l.fabric.ActiveSelection(n,{canvas:this.fabricCanvasHandler.getCurrentFabricCanvas()});if(this.fabricCanvasHandler.getCurrentFabricCanvas().setActiveObject(r),t){let e=this.fabricCanvasHandler.basicToolsHandler.removeAbnormalValuesFromJSON(this.fabricCanvasHandler.getCurrentFabricCanvas().toDatalessJSON(this.fabricCanvasHandler.objectPropertiesToInclude));this.fabricCanvasHandler.historyHandlerV.debouncedHistory([],[],[],{oldCanvas:{oldCanvasJSON:a},newCanvas:{newCanvasJSON:e}},y.CanvasJSON)}this.fabricCanvasHandler.getCurrentFabricCanvas().requestRenderAll(),this.fabricCanvasHandler.basicToolsHandler.setTop(null,"movement"),this.fabricCanvasHandler.basicToolsHandler.setLeft(null,"movement")}setCanvasFill(){let e=this.fabricCanvasHandler.getCurrentFabricCanvas().backgroundColor;this.fabricCanvasHandler.getCurrentFabricCanvas().backgroundColor=this.fabricCanvasHandler.elementProps.canvasFill,this.fabricCanvasHandler.getCurrentFabricCanvas().requestRenderAll();let t={oldCanvasFill:e,newCanvasFill:this.fabricCanvasHandler.getCurrentFabricCanvas().backgroundColor};this.fabricCanvasHandler.historyHandlerV.debouncedHistory([],[],[],t,y.CanvasFill)}getActiveStyle(e,t=null){return(t=t||this.fabricCanvasHandler.getCurrentFabricCanvas().getActiveObject())?t.getSelectionStyles&&t.isEditing?t.getSelectionStyles(0,t.text.length,!0)[e]||"":t[e]||"":""}setActiveStyle(e,t,a=null){if(a=a||this.fabricCanvasHandler.getCurrentFabricCanvas().getActiveObject()){if(a.setSelectionStyles&&a.isEditing){var n={};n[e]=t,a.setSelectionStyles(n),a.setCoords()}else a.set(e,t);a.setCoords(),this.fabricCanvasHandler.getCurrentFabricCanvas().renderAll()}}getActiveProp(e){var t=this.fabricCanvasHandler.getCurrentFabricCanvas().getActiveObject();return t&&t[e]||""}setActiveProp(e,t){var a=this.fabricCanvasHandler.getCurrentFabricCanvas().getActiveObject();a&&(a.set(e,t).setCoords(),this.fabricCanvasHandler.getCurrentFabricCanvas().renderAll())}selectItemAfterAdded(e){this.fabricCanvasHandler.getCurrentFabricCanvas().discardActiveObject(),this.fabricCanvasHandler.getCurrentFabricCanvas().setActiveObject(e),this.fabricCanvasHandler.getCurrentFabricCanvas().renderAll()}updateObjectsScaleAndGeometryWhenResizing(e){if("rect"==e.type||"triangle"==e.type);else if("circle"==e.type);else if("i-text"==e.type||"textbox"==e.type)e.fontSize*=e.scaleX,e.width*=e.scaleX,e.height*=e.scaleY,e.fontSize=Math.round(e.fontSize),this.fabricCanvasHandler.elementProps.fontSize=e.fontSize,e.scaleX=1,e.scaleY=1,e._clearCache();else if("activeSelection"==e.type){let a=e.getObjects();this.fabricCanvasHandler.getCurrentFabricCanvas().discardActiveObject(),a.forEach(e=>{"rect"==e.type||"triangle"==e.type||"circle"==e.type||"i-text"!=e.type&&"textbox"!=e.type||(e.fontSize*=e.scaleX,e.width*=e.scaleX,e.height*=e.scaleY,e.fontSize=Math.round(e.fontSize),this.fabricCanvasHandler.elementProps.fontSize=e.fontSize,e.scaleX=1,e.scaleY=1),e.setCoords()});var t=new l.fabric.ActiveSelection(a,{canvas:this.fabricCanvasHandler.getCurrentFabricCanvas()});this.fabricCanvasHandler.getCurrentFabricCanvas().setActiveObject(t)}e.setCoords(),this.fabricCanvasHandler.getCurrentFabricCanvas().requestRenderAll()}removeAbnormalValuesFromJSON(e){var t,a;let n=e;delete n.clipPath;for(let i=n.objects.length-1;i>=0;i--){let e=n.objects[i];if("image"===e.type&&e.src.includes("base64")&&this.fabricCanvasHandler.imageHandler.uploadBase64Image(e),"group"==e.type&&e.isMockup)for(let n=0;n<e.objects.length;n++)e.objects[n].src.includes("base64")&&(e.objects[n].src=null===(a=null===(t=e.mockupData)||void 0===t?void 0:t.base_mockup_props)||void 0===a?void 0:a.url)}return this.fabricCanvasHandler.currentCanvasId==f.a.MAIN_CANVAS&&this.fabricCanvasHandler.mockupsHandler.uploadBase64MockupImage(),n}getDesignThumbnailFromCanvas(){return this.fabricCanvasHandler.getCurrentFabricCanvas().toDataURL({multiplier:1,top:this.fabricCanvasHandler.canvasOffset.top,left:this.fabricCanvasHandler.canvasOffset.left,format:"jpeg",quality:1,height:this.fabricCanvasHandler.drawableAreaCanvasSize.height,width:this.fabricCanvasHandler.drawableAreaCanvasSize.width})}getImageFromMockupCanvas(e,t){let a={multiplier:e||.4,top:this.fabricCanvasHandler.canvasOffset.top,left:this.fabricCanvasHandler.canvasOffset.left,format:"png",height:this.fabricCanvasHandler.mockupDrawableAreaCanvasSize.height,width:this.fabricCanvasHandler.mockupDrawableAreaCanvasSize.width};return"jpeg"===t&&(a.format=t,a.quality=1),this.fabricCanvasHandler.getCurrentFabricCanvas().toDataURL(a)}scaleWidthOfImageOrVectorAccordingToCanvasSize(e,t=.7,a=!1){let n=e.width,i=e.height,r=this.fabricCanvasHandler.basicToolsHandler.getCurrentCanvasSize().width,s=this.fabricCanvasHandler.basicToolsHandler.getCurrentCanvasSize().height;n/i<=r/s?i>s?e.scaleToHeight(s*t):a&&(e.scaleX=s/i/1.1,e.scaleY=s/i/1.1):n>r?e.scaleToWidth(r*t):a&&(e.scaleX=r/n/1.1,e.scaleY=r/n/1.1),e.setCoords()}randomId(){return Math.floor(999999*Math.random())+1}turnOffGuidelines(){this.fabricCanvasHandler.isGuidelines=!1}turnOnGuidelines(){this.fabricCanvasHandler.isGuidelines=!0}disableMiddleTopAndBottomControls(e){e.setControlVisible("mb",!1),e.setControlVisible("mt",!1)}disableAllObjectsWhenInPanMode(){this.fabricCanvasHandler.getCurrentFabricCanvas().getObjects().forEach(e=>{e.evented=!1,e.selectable=!1})}enableAllObjectsAfterPan(){this.fabricCanvasHandler.getCurrentFabricCanvas().getObjects().filter(e=>!1===e.locked||!e.locked||null===e.locked).forEach(e=>{e.evented=!0,e.selectable=!0}),this.fabricCanvasHandler.getCurrentFabricCanvas().renderAll()}getId(){this.fabricCanvasHandler.elementProps.id=this.fabricCanvasHandler.getCurrentFabricCanvas().getActiveObject().toObject().id}changeImageSrcToCDN(e,t,a){var n=t.scaleX,i=t.scaleY,r=t.width,s=t.height,o=t.left,c=t.top;t.setSrc(e,e=>{e.left=o,e.top=c,e.scaleX=n,e.scaleY=i,e.width=r,e.height=s,e.setCoords(),this.fabricCanvasHandler.getCurrentFabricCanvas().renderAll()},{width:t.width,height:t.height,crossOrigin:"anonymous"})}removeEmptySrcImagesFromJSON(e){for(var t=0;t<e.objects.length;t++){let n=e.objects[t];if("group"==n.type)for(var a=0;a<n.objects.length;a++){let e=n.objects[a];"image"==e.type&&""==e.src&&n.objects.splice(a,1)}}}updateCanvasBackgroundColor(e){this.fabricCanvasHandler.elementProps.canvasFill=e||this.fabricCanvasHandler.canvasDefaultBackground}}(this,this._helpersService,this._gaEventsService),this.keyboardEventHandler=new class{constructor(e){this.onKeyUp=e=>{"Space"===e.code&&(this.fabricCanvasHandler.isSpaceKeyPressed=!1,this.fabricCanvasHandler.basicToolsHandler.enableAllObjectsAfterPan(),this.fabricCanvasHandler.getCurrentFabricCanvas().upperCanvasEl.style.cursor="default",this.fabricCanvasHandler.getCurrentFabricCanvas().defaultCursor="default",this.fabricCanvasHandler.getCurrentFabricCanvas().requestRenderAll())},this.onKeyDown=e=>{var t;let a=e.target&&["INPUT","TEXTAREA"].includes(e.target.nodeName);(e.ctrlKey||e.metaKey)&&"Equal"==e.code?(e.preventDefault(),this.fabricCanvasHandler.zoomPanHandler.setZoom("zoomIn")):(e.ctrlKey||e.metaKey)&&"Minus"==e.code&&(e.preventDefault(),this.fabricCanvasHandler.zoomPanHandler.setZoom("zoomOut")),e.shiftKey&&"Digit1"===e.code&&(this.fabricCanvasHandler.currentCanvasId===f.a.MAIN_CANVAS?this.fabricCanvasHandler.zoomPanHandler.updateViewport():this.fabricCanvasHandler.zoomPanHandler.updateMockupCanvasViewport());let n=this.fabricCanvasHandler.getCurrentFabricCanvas().getActiveObject();if(n&&("textbox"!==n.type&&"i-text"!==n.type||((e.ctrlKey||e.metaKey)&&"KeyB"===e.code?(e.preventDefault(),this.fabricCanvasHandler.textElementHandler.setTextAttributes("bold")):(e.ctrlKey||e.metaKey)&&"KeyI"===e.code?(e.preventDefault(),this.fabricCanvasHandler.textElementHandler.setTextAttributes("italic")):(e.ctrlKey||e.metaKey)&&"KeyU"===e.code&&(e.preventDefault(),this.fabricCanvasHandler.textElementHandler.setTextAttributes("underline")))),!a)if("ArrowUp"==e.key){if(n){e.preventDefault();let t=n.top;t-=e.shiftKey?10:1,this.fabricCanvasHandler.basicToolsHandler.setTop(t)}}else if("ArrowDown"==e.key){if(n){e.preventDefault();let t=n.top;t+=e.shiftKey?10:1,this.fabricCanvasHandler.basicToolsHandler.setTop(t)}}else if("ArrowLeft"==e.key){if(n){e.preventDefault();let t=n.left;t-=e.shiftKey?10:1,this.fabricCanvasHandler.basicToolsHandler.setLeft(t)}}else if("ArrowRight"==e.key){if(n){e.preventDefault();let t=n.left;t+=e.shiftKey?10:1,this.fabricCanvasHandler.basicToolsHandler.setLeft(t)}}else if("Delete"==e.key||"Backspace"==e.key){if(n){if("textbox"==n.type&&n.isEditing)return;e.preventDefault(),this.fabricCanvasHandler.basicToolsHandler.deleteElement()}}else if((e.ctrlKey||e.metaKey)&&"d"==e.key)n&&(e.preventDefault(),this.fabricCanvasHandler.basicToolsHandler.cloneElement());else if(!e.ctrlKey&&!e.metaKey||e.shiftKey||"BracketLeft"!=e.code)if(!e.ctrlKey&&!e.metaKey||e.shiftKey||"BracketRight"!=e.code)if((e.ctrlKey||e.metaKey)&&e.shiftKey&&"BracketLeft"==e.code)n&&(e.preventDefault(),this.fabricCanvasHandler.basicToolsHandler.sendToBack());else if((e.ctrlKey||e.metaKey)&&e.shiftKey&&"BracketRight"==e.code)n&&(e.preventDefault(),this.fabricCanvasHandler.basicToolsHandler.bringToFront());else if((e.ctrlKey||e.metaKey)&&"a"==e.key){if(e.preventDefault(),this.fabricCanvasHandler.getCurrentFabricCanvas().discardActiveObject(),0==this.fabricCanvasHandler.getCurrentFabricCanvas().getObjects().length)return;const t=this.fabricCanvasHandler.getCurrentFabricCanvas().getObjects().filter(e=>!1===e.locked||!e.locked||null===e.locked);if(t.length>0)if(t.length>1){var i=new l.fabric.ActiveSelection(t,{canvas:this.fabricCanvasHandler.getCurrentFabricCanvas()});this.fabricCanvasHandler.getCurrentFabricCanvas().setActiveObject(i).requestRenderAll(),this.fabricCanvasHandler.getCurrentFabricCanvas().getActiveObject().setCoords()}else this.fabricCanvasHandler.getCurrentFabricCanvas().setActiveObject(t[0]);this.fabricCanvasHandler.getCurrentFabricCanvas().requestRenderAll()}else if((e.ctrlKey||e.metaKey)&&"c"==e.key){if(n){if("textbox"==n.type&&n.isEditing)return;e.preventDefault(),this.fabricCanvasHandler.basicToolsHandler.copyObjectsFromCanvas()}}else if((e.ctrlKey||e.metaKey)&&"v"==e.key){if(n&&"textbox"==n.type&&n.isEditing)return void(l.fabric.copiedTextStyle=null);e.preventDefault(),this.fabricCanvasHandler.basicToolsHandler.pasteObjectsOntoCanvas()}else!e.ctrlKey&&!e.metaKey||e.shiftKey||"KeyG"!=e.code?(e.ctrlKey||e.metaKey)&&e.shiftKey&&"KeyG"==e.code?(n&&(e.preventDefault(),this.fabricCanvasHandler.basicToolsHandler.unGroupElements()),e.preventDefault()):(e.ctrlKey||e.metaKey)&&e.shiftKey&&"Digit2"==e.code?(e.preventDefault(),this.fabricCanvasHandler.basicToolsHandler.unlockAllElements()):(e.ctrlKey||e.metaKey)&&"Digit2"==e.code?(e.preventDefault(),this.fabricCanvasHandler.basicToolsHandler.lockElement()):(e.ctrlKey||e.metaKey)&&"KeyF"==e.code||(!e.ctrlKey&&!e.metaKey||e.shiftKey||"z"!=e.key?(e.ctrlKey||e.metaKey)&&"y"==e.key.toLowerCase()||(e.ctrlKey||e.metaKey)&&e.shiftKey&&"z"==e.key.toLowerCase()?(e.preventDefault(),n&&n.isEditing||this.fabricCanvasHandler.historyHandlerV.redoWork()):"Space"==e.code?(e.preventDefault(),this.fabricCanvasHandler.getCurrentFabricCanvas().defaultCursor="grabbing",this.fabricCanvasHandler.isSpaceKeyPressed=!0,this.fabricCanvasHandler.basicToolsHandler.disableAllObjectsWhenInPanMode(),this.fabricCanvasHandler.getCurrentFabricCanvas().requestRenderAll()):"Escape"==e.code?(e.preventDefault(),this.fabricCanvasHandler.getCurrentFabricCanvas().defaultCursor="default",this.fabricCanvasHandler.getCurrentFabricCanvas().upperCanvasEl.style.cursor="default",this.fabricCanvasHandler.getCurrentFabricCanvas().discardActiveObject(),this.fabricCanvasHandler.eyeDropperHandler.resetEyeDropper(),this.fabricCanvasHandler.imageCropHandler.isCrop&&this.fabricCanvasHandler.imageCropHandler.cancelCrop(),this.fabricCanvasHandler.getCurrentFabricCanvas().requestRenderAll()):e.ctrlKey&&"KeyS"==e.code?(e.preventDefault(),"admin_designer"===(null===(t=this.fabricCanvasHandler.user)||void 0===t?void 0:t.role)&&this.fabricCanvasHandler.dbEventsHandler.debouncedSaveUserDesign()):(e.ctrlKey||e.metaKey)&&e.shiftKey&&"o"==e.key.toLowerCase()&&(e.preventDefault(),this.fabricCanvasHandler.sidebarItemClicked({previousSidebarItemId:null,previousSidebarItemTitle:null,previousSidebarItemType:null,sidebarItemId:"ai-copy",sidebarItemTitle:"AI Copy",sidebarItemType:f.a.SIDEBAR_ITEM_TYPES.DefaultSidebarItem}),this.fabricCanvasHandler.toolSelected=null):(e.target&&["INPUT","TEXTAREA"].includes(e.target.nodeName)||e.preventDefault(),n&&n.isEditing||this.fabricCanvasHandler.historyHandlerV.undoWork())):(n&&this.fabricCanvasHandler.getCurrentFabricCanvas().getObjects().length>1&&(e.preventDefault(),this.fabricCanvasHandler.basicToolsHandler.groupElements()),e.preventDefault());else n&&(e.preventDefault(),this.fabricCanvasHandler.basicToolsHandler.bringForward());else n&&(e.preventDefault(),this.fabricCanvasHandler.basicToolsHandler.sendBackward())},this.fabricCanvasHandler=e}}(this),this.textElementHandler=new class{constructor(e,t){this.loadFontsUsingWebfontloader=(e,t)=>new Promise((a,n)=>{let i=[],r=[],s=[];for(let t of e)i.push(t.webFontLoaderCommandName);for(let e of t)r.push(e.font_name),s.push(`${b.a.apiUrl}/api/fonts/document-fonts/fonts.css?fontName=${encodeURIComponent(e.font_name)}&fontFileUrl=${encodeURIComponent(e.font_file_url)}`);let o={active:()=>{a(!0)},inactive:()=>{n(!1)}};0!==i.length&&(o.google={families:i}),0!==r.length&&(o.custom={families:r,urls:s}),g.load(o)}),this.toTitleCase=function(e){return e.replace(/\w\S*/g,function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()})},this.fabricCanvasHandler=e,this._gaEventsService=t}addTextHeadline(e,t=null){let a;a=new l.fabric.Textbox("Add Headline",{fontFamily:"Lato",fill:"#000000",lineHeight:.9,scaleX:1,scaleY:1,textAlign:"center",fontStyle:"normal",objectCaching:!1,perPixelTargetFind:!1}),"headline"==e?(a.fontSize=Math.round(this.fabricCanvasHandler.drawableAreaCanvasSize.width/8),a.fontWeight="bold",a.width=this.fabricCanvasHandler.drawableAreaCanvasSize.width/1.1):"subheadline"==e?(a.text="Add Subheadline",a.fontSize=Math.round(this.fabricCanvasHandler.drawableAreaCanvasSize.width/14),a.fontWeight="bold",a.width=this.fabricCanvasHandler.drawableAreaCanvasSize.width/1.6):"bodytext"==e&&(a.text=t||"Add Body Text",a.width=this.fabricCanvasHandler.drawableAreaCanvasSize.width/1.8,a.fontSize=Math.round(this.fabricCanvasHandler.drawableAreaCanvasSize.width/26),a.fontWeight="normal",t||(a.width=this.fabricCanvasHandler.drawableAreaCanvasSize.width/2,a.fontSize=Math.round(this.fabricCanvasHandler.drawableAreaCanvasSize.width/18)));let n=this.fabricCanvasHandler.basicToolsHandler.getCurrentCanvasSize().width,i=this.fabricCanvasHandler.basicToolsHandler.getCurrentCanvasSize().height;a.left=n/2-a.getScaledWidth()/2,a.top=i/2-a.getScaledHeight()/2,a.id=this.fabricCanvasHandler.basicToolsHandler.randomId(),a.fontFamilyCommandName="Lato:regular,italic,bold,bolditalic",a.setCoords(),this.fabricCanvasHandler.getCurrentFabricCanvas().add(a),this.fabricCanvasHandler.getCurrentFabricCanvas().trigger("object:added:by:user",{target:a}),this.fabricCanvasHandler.basicToolsHandler.selectItemAfterAdded(a),this.fabricCanvasHandler.getCurrentFabricCanvas().requestRenderAll(),a.enterEditing(),a.selectAll()}getLineHeight(){this.fabricCanvasHandler.elementProps.lineHeight=this.fabricCanvasHandler.basicToolsHandler.getActiveStyle("lineHeight",null)}setLineHeight(){let e=this.fabricCanvasHandler.getCurrentFabricCanvas().getActiveObject();if(e){let t=_()(this.fabricCanvasHandler.getCurrentFabricCanvas().getActiveObjects());e.set("lineHeight",this.fabricCanvasHandler.elementProps.lineHeight);let a=_()(this.fabricCanvasHandler.getCurrentFabricCanvas().getActiveObjects());this.fabricCanvasHandler.historyHandlerV.debouncedHistory(t,a,["id","lineHeight"],null,y.BasicProps),this.fabricCanvasHandler.getCurrentFabricCanvas().requestRenderAll()}}getCharSpacing(){this.fabricCanvasHandler.elementProps.charSpacing=this.fabricCanvasHandler.basicToolsHandler.getActiveStyle("charSpacing",null)||0}setCharSpacing(){let e=this.fabricCanvasHandler.getCurrentFabricCanvas().getActiveObject();if(e){let t=_()(this.fabricCanvasHandler.getCurrentFabricCanvas().getActiveObjects());e.set("charSpacing",this.fabricCanvasHandler.elementProps.charSpacing);let a=_()(this.fabricCanvasHandler.getCurrentFabricCanvas().getActiveObjects());this.fabricCanvasHandler.historyHandlerV.debouncedHistory(t,a,["id","charSpacing"],null,y.BasicProps),this.fabricCanvasHandler.getCurrentFabricCanvas().requestRenderAll()}}getFontSize(){this.fabricCanvasHandler.elementProps.fontSize=Math.round(this.fabricCanvasHandler.basicToolsHandler.getActiveStyle("fontSize",null)*this.fabricCanvasHandler.basicToolsHandler.getActiveStyle("scaleX",null))}setFontSize(e=null){let t=_()(this.fabricCanvasHandler.getCurrentFabricCanvas().getActiveObjects()),a=this.fabricCanvasHandler.getCurrentFabricCanvas().getActiveObject();if(a){a.removeStyle("fontSize"),a.set({fontSize:Math.round(this.fabricCanvasHandler.elementProps.fontSize),width:a.scaleX*a.width,scaleX:1,scaleY:1}),a.setCoords(),this.fabricCanvasHandler.getCurrentFabricCanvas().renderAll();let e=_()(this.fabricCanvasHandler.getCurrentFabricCanvas().getActiveObjects());this.fabricCanvasHandler.historyHandlerV.debouncedHistory(t,e,["id","fontSize","width","height","scaleX","scaleY"],null,y.BasicProps)}}setFontSizeFromDropdown(e){let t=_()(this.fabricCanvasHandler.getCurrentFabricCanvas().getActiveObjects()),a=this.fabricCanvasHandler.getCurrentFabricCanvas().getActiveObject();if(a){this.fabricCanvasHandler.elementProps.fontSize=e,a.removeStyle("fontSize"),a.set({fontSize:Math.round(this.fabricCanvasHandler.elementProps.fontSize),width:a.scaleX*a.width,scaleX:1,scaleY:1}),a.setCoords(),this.fabricCanvasHandler.getCurrentFabricCanvas().renderAll();let n=_()(this.fabricCanvasHandler.getCurrentFabricCanvas().getActiveObjects());this.fabricCanvasHandler.historyHandlerV.debouncedHistory(t,n,["id","fontSize","width","height","scaleX","scaleY"],null,y.BasicProps)}}getTextCharFill(e=null){this.fabricCanvasHandler.elementProps.fill=e||this.fabricCanvasHandler.basicToolsHandler.getActiveStyle("fill",null)}getBold(e=null){this.fabricCanvasHandler.elementProps.fontWeight=e||this.fabricCanvasHandler.basicToolsHandler.getActiveStyle("fontWeight",null)}getFontStyle(e=null){this.fabricCanvasHandler.elementProps.fontStyle=e||this.fabricCanvasHandler.basicToolsHandler.getActiveStyle("fontStyle",null)}getTextAttributes(e=null,t=null){this.fabricCanvasHandler.elementProps.underline=e||this.fabricCanvasHandler.basicToolsHandler.getActiveStyle("underline",null),this.fabricCanvasHandler.elementProps.linethrough=t||this.fabricCanvasHandler.basicToolsHandler.getActiveStyle("linethrough",null)}setTextAttributes(e){let t=this.fabricCanvasHandler.getCurrentFabricCanvas().getActiveObject();if(t){let a=_()(this.fabricCanvasHandler.getCurrentFabricCanvas().getActiveObjects());if("uppercase"==e)this.fabricCanvasHandler.basicToolsHandler.setActiveStyle("text",String(t.text).toUpperCase());else if("lowercase"==e);else if("titlecase"==e)t.set("text",this.toTitleCase(t.text)),this.fabricCanvasHandler.getCurrentFabricCanvas().renderAll();else if("bold"==e){if(!this.fabricCanvasHandler.elementProps.isBold)return;let e="normal";"normal"==this.fabricCanvasHandler.elementProps.fontWeight&&(e="bold"),this.fabricCanvasHandler.elementProps.fontWeight=e,this.setSelectionStyles("fontWeight",this.fabricCanvasHandler.elementProps.fontWeight,t),this.fabricCanvasHandler.getCurrentFabricCanvas().renderAll(),this._gaEventsService.eventEmitter("Text props feature","Bold property set","Bold property set")}else if("italic"==e){let e="normal";"normal"==this.fabricCanvasHandler.elementProps.fontStyle&&(e="italic"),this.fabricCanvasHandler.elementProps.fontStyle=e,this.setSelectionStyles("fontStyle",this.fabricCanvasHandler.elementProps.fontStyle,t),this.fabricCanvasHandler.getCurrentFabricCanvas().renderAll(),this._gaEventsService.eventEmitter("Text props feature","Italic property set","Italic property set")}else"underline"==e?(this.fabricCanvasHandler.elementProps.underline=!this.fabricCanvasHandler.elementProps.underline,this.setSelectionStyles("underline",this.fabricCanvasHandler.elementProps.underline,t),this.fabricCanvasHandler.getCurrentFabricCanvas().renderAll(),this._gaEventsService.eventEmitter("Text props feature","Underline property set","Underline property set")):"linethrough"==e&&(this.fabricCanvasHandler.elementProps.linethrough=!this.fabricCanvasHandler.elementProps.linethrough,this.setSelectionStyles("linethrough",this.fabricCanvasHandler.elementProps.linethrough,t),this.fabricCanvasHandler.getCurrentFabricCanvas().renderAll(),this._gaEventsService.eventEmitter("Text props feature","Linethrough property set","Linethrough property set"));let n=_()(this.fabricCanvasHandler.getCurrentFabricCanvas().getActiveObjects());this.fabricCanvasHandler.historyHandlerV.debouncedHistory(a,n,["id","fontWeight","fontStyle","underline","linethrough"],null,y.BasicProps)}}getSelectionStyles(e,t,a,n){let i=t||e.selectionStart,r=a||e.selectionEnd;if(t-a==0)return[];e.isEditing||(i=0,r=e.text.length);const s=i-(i-r==0?1:0);let o=e.getSelectionStyles(s,r===s?s+1:r,n||"true");return 0===o.length&&(o=[{fontWeight:e.fontWeight,fontStyle:e.fontStyle,fontFamily:e.fontFamily,fontSize:e.fontSize,fill:e.fill,underline:e.underline,linethrough:e.linethrough}]),o}setSelectionStyles(e,t,a=null){(a=a||this.fabricCanvasHandler.getCurrentFabricCanvas().getActiveObject()).getSelectionStyles(0,a.text.length,!0);const n=a.isEditing?a.selectionStart-a.selectionEnd:0;if(n&&Math.abs(n)<a.text.length){let n={};n[e]=t,a.setSelectionStyles(n)}else a.removeStyle(e),a.set(e,t).setCoords()}getTextAlign(){this.fabricCanvasHandler.elementProps.textAlign=this.fabricCanvasHandler.basicToolsHandler.getActiveProp("textAlign")}setTextAlign(e){let t=_()(this.fabricCanvasHandler.getCurrentFabricCanvas().getActiveObjects());this.fabricCanvasHandler.elementProps.textAlign=e,this.fabricCanvasHandler.basicToolsHandler.setActiveProp("textAlign",this.fabricCanvasHandler.elementProps.textAlign);let a=_()(this.fabricCanvasHandler.getCurrentFabricCanvas().getActiveObjects());this.fabricCanvasHandler.historyHandlerV.debouncedHistory(t,a,["id","textAlign"],null,y.BasicProps),this._gaEventsService.eventEmitter("Text props feature","Text align selected",`text-alignment=${this.fabricCanvasHandler.elementProps.textAlign}`)}getFontFamily(){this.fabricCanvasHandler.elementProps.fontFamily=this.fabricCanvasHandler.basicToolsHandler.getActiveProp("fontFamily"),this.setIsBold()}setFontFamily(e,t=!1){e.isCustomFont?this.loadFontsUsingWebfontloader([],[e]).then(()=>{this.whenFontsActiveCallback(e,t)}).catch(e=>{console.error(e)}).finally(()=>{}):this.loadFontsUsingWebfontloader([e],[]).then(()=>{this.whenFontsActiveCallback(e,t)}).catch(e=>{console.error(e)}).finally(()=>{})}whenFontsActiveCallback(e,t=!1){let a=this.fabricCanvasHandler.getCurrentFabricCanvas().getActiveObject();if(a){let n=_()(this.fabricCanvasHandler.getCurrentFabricCanvas().getActiveObjects());if(t||(this.fabricCanvasHandler.elementProps.fontFamily=e.font_name),a.fontFamilyCommandName=e.isCustomFont?e.font_name:e.webFontLoaderCommandName,a.isCustomFont=e.isCustomFont,e.isCustomFont&&(a.fontFileUrl=e.font_file_url),a.set("fontFamily",t?e.font_name:this.fabricCanvasHandler.elementProps.fontFamily),a.set("fontWeight","normal"),this.fabricCanvasHandler.getCurrentFabricCanvas().renderAll(),this.setIsBold(),this.fabricCanvasHandler.elementProps.isBold&&this.fabricCanvasHandler.basicToolsHandler.setActiveProp("fontWeight","bold"),!t){let e=_()(this.fabricCanvasHandler.getCurrentFabricCanvas().getActiveObjects());this.fabricCanvasHandler.historyHandlerV.debouncedHistory(n,e,["id","fontFamily","fontWeight","fontStyle"],null,y.BasicProps)}}e.isCustomFont?this._gaEventsService.eventEmitter("Fonts feature","Custom font selected","Custom font selected"):this._gaEventsService.eventEmitter("Fonts feature","Google font selected",`${e.font_name}`)}addFontToDocumentFonts(e){}whenFontsInactiveCallback(e,t){}restoreFontFamily(e){this.fabricCanvasHandler.getCurrentFabricCanvas().getActiveObject()&&this.fabricCanvasHandler.basicToolsHandler.setActiveProp("fontFamily",this.fabricCanvasHandler.elementProps.fontFamily)}setIsBold(e=null){let t=e||this.fabricCanvasHandler.getCurrentFabricCanvas().getActiveObject();if(t){let e=t.fontFamilyCommandName.toLowerCase();this.fabricCanvasHandler.elementProps.isBold=!!(e.includes("700")||e.includes("800")||e.includes("bold"))}}}(this,this._gaEventsService),this.imageCropHandler=new class{constructor(e,t){this.rotateSelection=(e,t,a)=>{this.fabricCanvasHandler.getCurrentFabricCanvas().discardActiveObject();var n=new l.fabric.ActiveSelection([e,t],{canvas:this.fabricCanvasHandler.getCurrentFabricCanvas()});this.fabricCanvasHandler.getCurrentFabricCanvas().setActiveObject(n),n.rotate(a),this.fabricCanvasHandler.getCurrentFabricCanvas().requestRenderAll(),this.fabricCanvasHandler.getCurrentFabricCanvas().discardActiveObject(),this.fabricCanvasHandler.getCurrentFabricCanvas().requestRenderAll()},this.fabricCanvasHandler=e,this._gaEventsService=t,this.cropOverlayRect=null,this.imageToCrop=null,this.isCrop=!1,this.cropRect=null,this.lastAngle=null,this.lastFlipX=null,this.lastFlipY=null,this.lastIndex=null}disableAllObjects(e){this.fabricCanvasHandler.getCurrentFabricCanvas().getObjects().forEach(t=>{t.evented=!1,t.selectable=!1,t==e&&(this.lastIndex=this.fabricCanvasHandler.getCurrentFabricCanvas().getObjects().indexOf(t),this.fabricCanvasHandler.getCurrentFabricCanvas().moveTo(t,this.fabricCanvasHandler.getCurrentFabricCanvas().getObjects().length))})}enableAllObjects(){this.fabricCanvasHandler.getCurrentFabricCanvas().getObjects().forEach(e=>{e.evented=!0,e.selectable=!0,e.visible=!0}),this.fabricCanvasHandler.getCurrentFabricCanvas().renderAll()}addOverlayColor(){this.cropOverlayRect=new l.fabric.Rect({width:this.fabricCanvasHandler.drawableAreaCanvasSize.width,height:this.fabricCanvasHandler.drawableAreaCanvasSize.height,left:0,top:0,angle:0,evented:!1,selectable:!1,excludeFromExport:!0,fill:"rgb(255,255,255,0.5)"}),this.fabricCanvasHandler.getCurrentFabricCanvas().add(this.cropOverlayRect),this.fabricCanvasHandler.getCurrentFabricCanvas().renderAll()}initCrop(){this.fabricCanvasHandler.getCurrentFabricCanvas().trigger("before:canvas:state:changed",{}),this.fabricCanvasHandler.basicToolsHandler.turnOffGuidelines(),this.imageToCrop=this.fabricCanvasHandler.getCurrentFabricCanvas().getActiveObject(),this.addOverlayColor(),this.disableAllObjects(this.imageToCrop),this.lastAngle=this.imageToCrop.angle,this.lastFlipX=this.imageToCrop.flipX,this.lastFlipY=this.imageToCrop.flipY,this.imageToCrop.flipX=!1,this.imageToCrop.flipY=!1,this.isCrop=!0,this.cropRect=new l.fabric.Rect({fill:"rgb(255,255,255,0.3)",width:this.imageToCrop.width,height:this.imageToCrop.height,scaleX:this.imageToCrop.scaleX,scaleY:this.imageToCrop.scaleY,angle:this.imageToCrop.angle,left:this.imageToCrop.left,top:this.imageToCrop.top,hasRotatingPoint:!1,cornerStyle:"rect",cornerSize:8,selectionBackgroundColor:null,padding:0,borderDashArray:[4,4],excludeFromExport:!0});try{if(this.imageToCrop.cropX||this.imageToCrop.cropY){var e=this.cropRect.angle,t=this.cropRect.left,a=this.cropRect.top;this.rotateSelection(this.imageToCrop,this.cropRect,360-e),this.imageToCrop.cropX&&(this.imageToCrop.left=this.cropRect.left-this.imageToCrop.cropX*this.imageToCrop.scaleX),this.imageToCrop.cropY&&(this.imageToCrop.top=this.cropRect.top-this.imageToCrop.cropY*this.imageToCrop.scaleY),this.imageToCrop.width=this.imageToCrop._element.width,this.imageToCrop.height=this.imageToCrop._element.height,this.imageToCrop.cropX=0,this.imageToCrop.cropY=0,this.rotateSelection(this.imageToCrop,this.cropRect,e),this.imageToCrop.left-=this.cropRect.left-t,this.imageToCrop.top-=this.cropRect.top-a,this.imageToCrop.setCoords(),this.cropRect.left=t,this.cropRect.top=a,this.cropRect.setCoords()}}catch(n){S.c(e=>{e.setExtra("functionCalled","initCrop"),e.setExtra("fabricObject",this.fabricCanvasHandler.selected||{object:null}),S.a(n)})}this.fabricCanvasHandler.getCurrentFabricCanvas().add(this.cropRect),this.fabricCanvasHandler.basicToolsHandler.selectItemAfterAdded(this.cropRect),this._gaEventsService.eventEmitter("Image tool","Image crop","Image crop")}finishCrop(){this.imageToCrop.oldScaleX=this.imageToCrop.scaleX,this.imageToCrop.oldScaleY=this.imageToCrop.scaleY;let e=this.cropRect.angle,t=this.cropRect.left,a=this.cropRect.top;this.rotateSelection(this.imageToCrop,this.cropRect,360-e),this.imageToCrop.cropX=(this.cropRect.left-this.imageToCrop.left)/this.imageToCrop.scaleX,this.imageToCrop.cropY=(this.cropRect.top-this.imageToCrop.top)/this.imageToCrop.scaleY,this.imageToCrop.width=this.cropRect.width*this.cropRect.scaleX/this.imageToCrop.scaleX,this.imageToCrop.height=this.cropRect.height*this.cropRect.scaleY/this.imageToCrop.scaleY,this.imageToCrop.left=this.cropRect.left,this.imageToCrop.top=this.cropRect.top,this.rotateSelection(this.imageToCrop,this.cropRect,e),this.imageToCrop.left=t,this.imageToCrop.top=a,this.imageToCrop.flipX=this.lastFlipX,this.imageToCrop.flipY=this.lastFlipY,this.imageToCrop.setCoords();let n=this.imageToCrop;this.fabricCanvasHandler.getCurrentFabricCanvas().renderAll(),this.restoreCrop(),this.removeOverlayColor(),this.fabricCanvasHandler.basicToolsHandler.turnOnGuidelines(),this.enableAllObjects(),this.fabricCanvasHandler.getCurrentFabricCanvas().moveTo(n,this.lastIndex),this.fabricCanvasHandler.basicToolsHandler.selectItemAfterAdded(n),this.fabricCanvasHandler.getCurrentFabricCanvas().trigger("after:canvas:state:changed",{})}cancelCrop(){this.restoreCrop(),this.removeOverlayColor(),this.fabricCanvasHandler.basicToolsHandler.turnOnGuidelines(),this.enableAllObjects()}restoreCrop(){this.imageToCrop.flipX=this.lastFlipX,this.imageToCrop.flipY=this.lastFlipY,this.imageToCrop.rotate(this.lastAngle).setCoords(),this.fabricCanvasHandler.getCurrentFabricCanvas().moveTo(this.imageToCrop,this.lastIndex),this.imageToCrop=null,this.fabricCanvasHandler.getCurrentFabricCanvas().remove(this.cropRect),this.fabricCanvasHandler.getCurrentFabricCanvas().discardActiveObject().renderAll(),this.cropRect=null,this.isCrop=!1,this.lastAngle=null,this.lastFlipX=null,this.lastFlipY=null}removeOverlayColor(){var e=this.cropOverlayRect;e&&(this.fabricCanvasHandler.getCurrentFabricCanvas().remove(e),this.fabricCanvasHandler.getCurrentFabricCanvas().discardActiveObject().renderAll()),this.cropOverlayRect=null}}(this,this._gaEventsService),this.historyHandlerV=new class{constructor(e){this.undoStack=[],this.redoStack=[],this.oldObjects=[],this.newObjects=[],this.defaultProps=[],this.maxCount=100,this.undoWork=()=>Object(c.a)(this,void 0,void 0,function*(){if(!(this.inProcess||this.fabricCanvasHandler.isDesignLoading||this.fabricCanvasHandler.mockupsHandler.isSaving)&&this.undoStack.length){this.inProcess=!0;let e=this.undoStack.pop();e.type===y.BasicProps?yield this.undoBasicProps(e):e.type===y.GroupObjects?yield this.undoGroupingOfObjects(e):e.type===y.UngroupObjects?yield this.undoUngroupingOfObjects(e):e.type===y.CanvasFill?yield this.undoCanvasFill(e):e.type===y.ObjectsRemoved?yield this.undoObjectsRemoved(e):e.type===y.ObjectAdded?yield this.undoObjectAdded(e):e.type===y.GroupColors?yield this.undoGroupColors(e):e.type===y.ChangedDesign?yield this.undoDesignChange(e):e.type===y.MockupsCanvasStateInit?yield this.undoMockupsCanvasStateInit(e):e.type===y.MockupsCanvasStateEnd?yield this.undoMockupsCanvasStateEnd(e):e.type===y.BlendAdded?yield this.undoBlendAdded(e):e.type===y.ShadowProps?yield this.undoShadowProps(e):e.type===y.CanvasJSON?yield this.undoChangesUsingJSON(e):e.type===y.Layers?yield this.undoLayering(e):e.type===y.PageChanged?yield this.undoPageChange(e):e.type===y.PageRemoved?yield this.undoPageRemoval(e):e.type===y.PageAdded?yield this.undoPageAdded(e):e.type===y.PageDuplicated?yield this.undoPageDuplicated(e):e.type===y.PageMoved&&(yield this.undoPageMoved(e)),this.redoStack.push(_()(e)),this.inProcess=!1,e.type==y.PageChanged?this.fabricCanvasHandler.canvasEventListenersHandler.triggersWhenCanvasUpdated(!1):this.fabricCanvasHandler.canvasEventListenersHandler.triggersWhenCanvasUpdated(),this.fabricCanvasHandler.getCurrentFabricCanvas().getActiveObject()&&this.fabricCanvasHandler.objectSelection(this.fabricCanvasHandler.getCurrentFabricCanvas().getActiveObject())}}),this.redoWork=()=>Object(c.a)(this,void 0,void 0,function*(){if(!(this.inProcess||this.fabricCanvasHandler.isDesignLoading||this.fabricCanvasHandler.mockupsHandler.isSaving)&&this.redoStack.length){this.inProcess=!0;let e=this.redoStack.pop();e.type===y.BasicProps?yield this.redoBasicProps(e):e.type===y.GroupObjects?yield this.redoGroupingOfObjects(e):e.type===y.UngroupObjects?yield this.redoUngroupingOfObjects(e):e.type===y.CanvasFill?yield this.redoCanvasFill(e):e.type===y.ObjectsRemoved?yield this.redoObjectsRemoved(e):e.type===y.ObjectAdded?yield this.redoObjectAdded(e):e.type===y.GroupColors?yield this.redoGroupColors(e):e.type===y.ChangedDesign?yield this.redoDesignChange(e):e.type===y.MockupsCanvasStateInit?yield this.redoMockupsCanvasStateInit(e):e.type===y.MockupsCanvasStateEnd?yield this.redoMockupsCanvasStateEnd(e):e.type===y.BlendAdded?yield this.redoBlendAdded(e):e.type===y.ShadowProps?yield this.redoShadowProps(e):e.type===y.CanvasJSON?yield this.redoChangesUsingJSON(e):e.type===y.Layers?yield this.redoLayering(e):e.type===y.PageChanged?yield this.redoPageChange(e):e.type===y.PageRemoved?yield this.redoPageRemoval(e):e.type===y.PageAdded?yield this.redoPageAdded(e):e.type===y.PageDuplicated?yield this.redoPageDuplicated(e):e.type===y.PageMoved&&(yield this.redoPageMoved(e)),this.undoStack.push(_()(e)),this.inProcess=!1,e.type==y.PageChanged?this.fabricCanvasHandler.canvasEventListenersHandler.triggersWhenCanvasUpdated(!1):this.fabricCanvasHandler.canvasEventListenersHandler.triggersWhenCanvasUpdated(),this.fabricCanvasHandler.getCurrentFabricCanvas().getActiveObject()&&this.fabricCanvasHandler.objectSelection(this.fabricCanvasHandler.getCurrentFabricCanvas().getActiveObject())}}),this.undoPageMoved=e=>Object(c.a)(this,void 0,void 0,function*(){return new Promise(t=>Object(c.a)(this,void 0,void 0,function*(){let{oldIndex:a,newIndex:n}=e.oldStage,i=this.fabricCanvasHandler.dbEventsHandler.userDesign.pages[a];this.fabricCanvasHandler.dbEventsHandler.userDesign.pages[a]=this.fabricCanvasHandler.dbEventsHandler.userDesign.pages[n],this.fabricCanvasHandler.dbEventsHandler.userDesign.pages[n]=i,t()}))}),this.redoPageMoved=e=>Object(c.a)(this,void 0,void 0,function*(){return new Promise(t=>Object(c.a)(this,void 0,void 0,function*(){let{oldIndex:a,newIndex:n}=e.oldStage,i=this.fabricCanvasHandler.dbEventsHandler.userDesign.pages[n];this.fabricCanvasHandler.dbEventsHandler.userDesign.pages[n]=this.fabricCanvasHandler.dbEventsHandler.userDesign.pages[a],this.fabricCanvasHandler.dbEventsHandler.userDesign.pages[a]=i,t()}))}),this.undoPageDuplicated=e=>Object(c.a)(this,void 0,void 0,function*(){return new Promise(t=>Object(c.a)(this,void 0,void 0,function*(){let{duplicatedPage:a,oldCurrentPageId:n}=e.oldStage,i=this.fabricCanvasHandler.dbEventsHandler.userDesign.pages.findIndex(e=>e.page_id===a.page_id);this.fabricCanvasHandler.dbEventsHandler.userDesign.pages.splice(i,1),this.fabricCanvasHandler.currentPageId=n;let r=this.fabricCanvasHandler.getPageById(n).page_editor_json;yield this.fabricCanvasHandler.pagesHandler.clearCanvasAndLoadJSON(r),t()}))}),this.redoPageDuplicated=e=>Object(c.a)(this,void 0,void 0,function*(){return new Promise(t=>Object(c.a)(this,void 0,void 0,function*(){let{duplicatedPage:a,newDuplicatedPageIndex:n}=e.oldStage;this.fabricCanvasHandler.dbEventsHandler.userDesign.pages.splice(n,0,a),this.fabricCanvasHandler.currentPageId=a.page_id,yield this.fabricCanvasHandler.pagesHandler.clearCanvasAndLoadJSON(a.page_editor_json),t()}))}),this.undoPageAdded=e=>Object(c.a)(this,void 0,void 0,function*(){return new Promise(t=>Object(c.a)(this,void 0,void 0,function*(){let{newPage:a,oldCurrentPageId:n}=e.oldStage,i=this.fabricCanvasHandler.dbEventsHandler.userDesign.pages.findIndex(e=>e.page_id===a.page_id);this.fabricCanvasHandler.dbEventsHandler.userDesign.pages.splice(i,1),this.fabricCanvasHandler.currentPageId=n;let r=this.fabricCanvasHandler.getPageById(n).page_editor_json;yield this.fabricCanvasHandler.pagesHandler.clearCanvasAndLoadJSON(r),t()}))}),this.redoPageAdded=e=>new Promise(t=>{let{newPage:a}=e.oldStage;this.fabricCanvasHandler.dbEventsHandler.userDesign.pages.push(a),this.fabricCanvasHandler.currentPageId=a.page_id,this.fabricCanvasHandler.getCurrentFabricCanvas().clear(),this.fabricCanvasHandler.getCurrentFabricCanvas().backgroundColor="#fff",this.fabricCanvasHandler.getCurrentFabricCanvas().renderAll(),t()}),this.undoPageRemoval=e=>Object(c.a)(this,void 0,void 0,function*(){return new Promise(t=>Object(c.a)(this,void 0,void 0,function*(){let{removedPage:a,removedPageIndex:n,isPageToRemoveCurrentPage:i}=e.oldStage;this.fabricCanvasHandler.dbEventsHandler.userDesign.pages.splice(n,0,a),i&&(this.fabricCanvasHandler.currentPageId=a.page_id,yield this.fabricCanvasHandler.pagesHandler.clearCanvasAndLoadJSON(a.page_editor_json)),t()}))}),this.redoPageRemoval=e=>Object(c.a)(this,void 0,void 0,function*(){return new Promise(t=>Object(c.a)(this,void 0,void 0,function*(){let{removedPage:a}=e.oldStage,n=this.fabricCanvasHandler.dbEventsHandler.userDesign.pages.findIndex(e=>e.page_id===a.page_id);if(this.fabricCanvasHandler.dbEventsHandler.userDesign.pages.splice(n,1),a.page_id==this.fabricCanvasHandler.currentPageId){let e=this.fabricCanvasHandler.dbEventsHandler.userDesign.pages[0];this.fabricCanvasHandler.currentPageId=e.page_id,yield this.fabricCanvasHandler.pagesHandler.clearCanvasAndLoadJSON(e.page_editor_json)}t()}))}),this.undoPageChange=e=>Object(c.a)(this,void 0,void 0,function*(){return new Promise(t=>Object(c.a)(this,void 0,void 0,function*(){this.fabricCanvasHandler.currentPageId=e.oldStage.pageId,this.fabricCanvasHandler.getCurrentFabricCanvas().clear(),this.fabricCanvasHandler.getCurrentFabricCanvas().backgroundColor=this.fabricCanvasHandler.getCurrentPage().page_editor_json.background,this.fabricCanvasHandler.basicToolsHandler.updateCanvasBackgroundColor(this.fabricCanvasHandler.getCurrentPage().page_editor_json.background),yield this.updateCanvasJSON(this.fabricCanvasHandler.getCurrentPage().page_editor_json),t()}))}),this.redoPageChange=e=>Object(c.a)(this,void 0,void 0,function*(){return new Promise(t=>Object(c.a)(this,void 0,void 0,function*(){this.fabricCanvasHandler.currentPageId=e.newStage.pageId,this.fabricCanvasHandler.getCurrentFabricCanvas().clear(),this.fabricCanvasHandler.getCurrentFabricCanvas().backgroundColor=this.fabricCanvasHandler.getCurrentPage().page_editor_json.background,this.fabricCanvasHandler.basicToolsHandler.updateCanvasBackgroundColor(this.fabricCanvasHandler.getCurrentPage().page_editor_json.background),yield this.updateCanvasJSON(this.fabricCanvasHandler.getCurrentPage().page_editor_json),t()}))}),this.undoLayering=e=>{let t=this.fabricCanvasHandler.basicToolsHandler.getObjectById(e.oldStage.id,!1);return t.length&&(this.fabricCanvasHandler.getCurrentFabricCanvas().moveTo(t[0],e.oldStage.index),this.fabricCanvasHandler.getCurrentFabricCanvas().renderAll()),new Promise(e=>e())},this.redoLayering=e=>{let t=this.fabricCanvasHandler.basicToolsHandler.getObjectById(e.newStage.id,!1);return t.length&&(this.fabricCanvasHandler.getCurrentFabricCanvas().moveTo(t[0],e.newStage.index),this.fabricCanvasHandler.getCurrentFabricCanvas().renderAll()),new Promise(e=>e())},this.undoShadowProps=e=>{let t=e.oldStage;for(let a of t){let e=this.fabricCanvasHandler.basicToolsHandler.getObjectById(a.id,!1);e.length&&(e[0].setShadow(a.shadow),this.fabricCanvasHandler.getCurrentFabricCanvas().renderAll())}return new Promise(e=>e())},this.redoShadowProps=e=>{let t=e.newStage;for(let a of t){let e=this.fabricCanvasHandler.basicToolsHandler.getObjectById(a.id,!1);e.length&&(e[0].setShadow(a.shadow),this.fabricCanvasHandler.getCurrentFabricCanvas().renderAll())}return new Promise(e=>e())},this.undoBlendAdded=e=>{if(this.fabricCanvasHandler.getCurrentFabricCanvas().backgroundColor=e.oldStage.bg,e.oldStage.head.length>0){var t=this.fabricCanvasHandler.basicToolsHandler.getObjectById(e.oldStage.head[0].id);if(t.length)for(var a in e.oldStage.head[0])t[0].set(a,e.oldStage.head[0][a]),t[0].setCoords()}return e.oldStage.sub.forEach(e=>{var t=this.fabricCanvasHandler.basicToolsHandler.getObjectById(e.id);if(t.length)for(var a in e)t[0].set(a,e[a]),t[0].setCoords()}),e.oldStage.svg.forEach(e=>{var t=this.fabricCanvasHandler.basicToolsHandler.getObjectById(e.id);if(t.length)for(var a in e)t[0].set(a,e[a]),t[0].setCoords()}),this.fabricCanvasHandler.getCurrentFabricCanvas().renderAll(),new Promise(e=>e())},this.redoBlendAdded=e=>{if(this.fabricCanvasHandler.getCurrentFabricCanvas().backgroundColor=e.newStage.bg,e.newStage.head.length>0){var t=this.fabricCanvasHandler.basicToolsHandler.getObjectById(e.newStage.head[0].id);if(t.length)for(var a in e.newStage.head[0])t[0].set(a,e.newStage.head[0][a]),t[0].setCoords()}return e.newStage.sub.forEach(e=>{var t=this.fabricCanvasHandler.basicToolsHandler.getObjectById(e.id);if(t.length)for(var a in e)t[0].set(a,e[a]),t[0].setCoords()}),e.newStage.svg.forEach(e=>{var t=this.fabricCanvasHandler.basicToolsHandler.getObjectById(e.id);if(t.length)for(var a in e)t[0].set(a,e[a]),t[0].setCoords()}),this.fabricCanvasHandler.getCurrentFabricCanvas().renderAll(),new Promise(e=>e())},this.undoMockupsCanvasStateInit=e=>(this.fabricCanvasHandler.mockupsHandler.changeFromMockupCanvasToMainCanvas(!1),new Promise(e=>e())),this.redoMockupsCanvasStateInit=e=>new Promise(e=>e()),this.undoMockupsCanvasStateEnd=e=>new Promise(e=>e()),this.redoMockupsCanvasStateEnd=e=>(this.fabricCanvasHandler.mockupsHandler.changeFromMockupCanvasToMainCanvas(!1),new Promise(e=>e())),this.undoChangesUsingJSON=e=>Object(c.a)(this,void 0,void 0,function*(){return new Promise(t=>Object(c.a)(this,void 0,void 0,function*(){let a=e.oldStage;this.fabricCanvasHandler.getCurrentFabricCanvas().clear(),this.fabricCanvasHandler.getCurrentFabricCanvas().backgroundColor=a.oldCanvasJSON.background,this.fabricCanvasHandler.basicToolsHandler.updateCanvasBackgroundColor(a.oldCanvasJSON.background),yield this.updateCanvasJSON(a.oldCanvasJSON),t()}))}),this.redoChangesUsingJSON=e=>Object(c.a)(this,void 0,void 0,function*(){return new Promise(t=>Object(c.a)(this,void 0,void 0,function*(){let a=e.newStage;this.fabricCanvasHandler.getCurrentFabricCanvas().clear(),this.fabricCanvasHandler.getCurrentFabricCanvas().backgroundColor=a.newCanvasJSON.background,this.fabricCanvasHandler.basicToolsHandler.updateCanvasBackgroundColor(a.newCanvasJSON.background),yield this.updateCanvasJSON(a.newCanvasJSON),t()}))}),this.undoDesignChange=e=>Object(c.a)(this,void 0,void 0,function*(){return new Promise(t=>Object(c.a)(this,void 0,void 0,function*(){let{designData:a,pageId:n}=e.oldStage;n=n||a.pages[0].page_id;let i=a.pages.findIndex(e=>e.page_id===n);this.fabricCanvasHandler.getCurrentFabricCanvas().clear(),this.fabricCanvasHandler.getCurrentFabricCanvas().backgroundColor=a.pages[i].page_editor_json.background,this.fabricCanvasHandler.basicToolsHandler.updateCanvasBackgroundColor(a.pages[i].page_editor_json.background);let r=a.canvas_doc_json.doc_width,s=a.canvas_doc_json.doc_height;this.fabricCanvasHandler.setDrawableAreaCanvasSize(r,s),this.fabricCanvasHandler.setPreviousDrawableAreaCanvasSize(r,s),this.fabricCanvasHandler.workAreaHandler.setCanvasSize(null,!0),this.fabricCanvasHandler.dbEventsHandler.setFormatCategoryId(a.format_category),this.fabricCanvasHandler.docUnits=a.canvas_doc_json.doc_units,this.fabricCanvasHandler.dbEventsHandler.isProTemplate=a.is_pro,this.fabricCanvasHandler.dbEventsHandler.userDesign.setUserDesignData(a),this.fabricCanvasHandler.pagesHandler.generatePageThumbnails(),this.fabricCanvasHandler.dbEventsHandler.userDesign.is_pro=a.is_pro,this.fabricCanvasHandler.zoomPanHandler.fitCanvasToScreen(),this.fabricCanvasHandler.getCurrentFabricCanvas().calcOffset(),this.fabricCanvasHandler.currentPageId=n,yield this.updateCanvasJSON(a.pages[i].page_editor_json),t()}))}),this.redoDesignChange=e=>Object(c.a)(this,void 0,void 0,function*(){return new Promise(t=>Object(c.a)(this,void 0,void 0,function*(){let{designData:a,pageId:n}=e.newStage;n=n||a.pages[0].page_id;let i=a.pages.findIndex(e=>e.page_id===n);this.fabricCanvasHandler.getCurrentFabricCanvas().clear(),this.fabricCanvasHandler.getCurrentFabricCanvas().backgroundColor=a.pages[i].page_editor_json.background,this.fabricCanvasHandler.basicToolsHandler.updateCanvasBackgroundColor(a.pages[i].page_editor_json.background);let r=a.canvas_doc_json.doc_width,s=a.canvas_doc_json.doc_height;this.fabricCanvasHandler.setDrawableAreaCanvasSize(r,s),this.fabricCanvasHandler.setPreviousDrawableAreaCanvasSize(r,s),this.fabricCanvasHandler.workAreaHandler.setCanvasSize(null,!0),this.fabricCanvasHandler.dbEventsHandler.setFormatCategoryId(a.format_category),this.fabricCanvasHandler.docUnits=a.canvas_doc_json.doc_units,this.fabricCanvasHandler.dbEventsHandler.isProTemplate=a.is_pro,this.fabricCanvasHandler.dbEventsHandler.userDesign.setUserDesignData(a),this.fabricCanvasHandler.pagesHandler.generatePageThumbnails(),this.fabricCanvasHandler.dbEventsHandler.userDesign.is_pro=a.is_pro,this.fabricCanvasHandler.zoomPanHandler.fitCanvasToScreen(),this.fabricCanvasHandler.getCurrentFabricCanvas().calcOffset(),this.fabricCanvasHandler.currentPageId=n,yield this.updateCanvasJSON(a.pages[i].page_editor_json),t()}))}),this.updateCanvasJSON=e=>Object(c.a)(this,void 0,void 0,function*(){return new Promise(t=>{this.fabricCanvasHandler.enlivenAndAddObjectsToCanvas(JSON.parse(JSON.stringify(e)),!1,()=>{t()})})}),this.addUndoAndRedoStack=(e,t,a,n,i)=>Object(c.a)(this,void 0,void 0,function*(){return new Promise(r=>{if(this.undoStack.length===this.maxCount&&this.undoStack.shift(),n)i===y.CanvasFill?this.undoStack.push({type:i,oldStage:n.oldCanvasFill,newStage:n.newCanvasFill}):i===y.ObjectsRemoved||i===y.ObjectAdded?this.undoStack.push({type:i,oldStage:_()(n.object),newStage:_()(n.object)}):i===y.ChangedDesign?this.undoStack.push({type:i,oldStage:n.oldDesignData,newStage:n.newDesignData}):i===y.MockupsCanvasStateInit||i===y.MockupsCanvasStateEnd?this.undoStack.push({type:i,oldStage:null,newStage:null}):i===y.BlendAdded||i===y.Layers?this.undoStack.push({type:i,oldStage:n.oldStageProps,newStage:n.newStageProps}):i===y.CanvasJSON?this.undoStack.push({type:i,oldStage:n.oldCanvas,newStage:n.newCanvas}):i===y.PageChanged?this.undoStack.push({type:i,oldStage:n.oldPage,newStage:n.newPage}):i!==y.PageRemoved&&i!==y.PageAdded&&i!==y.PageDuplicated&&i!==y.PageMoved||this.undoStack.push({type:i,oldStage:n,newStage:null});else{let n=[],r=[];e="activeSelection"===e.type?e.objects:e,t="activeSelection"===t.type?t.objects:t;for(let t of e){let e={};for(let n of a)e[n]="left"==n||"originalLeft"==n?t.aCoords.tl.x:"top"==n||"originalTop"==n?t.aCoords.tl.y:t[n];n.push(e)}for(let e of t){let t={};for(let n of a)t[n]="left"==n||"originalLeft"==n?e.aCoords.tl.x:"top"==n||"originalTop"==n?e.aCoords.tl.y:e[n];r.push(t)}this.undoStack.push({type:i,oldStage:n,newStage:r})}this.redoStack=[],i==y.PageChanged?this.fabricCanvasHandler.canvasEventListenersHandler.triggersWhenCanvasUpdated(!1):this.fabricCanvasHandler.canvasEventListenersHandler.triggersWhenCanvasUpdated(),r()})}),this.setObjectDefaultProps=(e,t=["id","width","height","skewX","skewY","scaleX","scaleY","left","top","originalLeft","originalTop","angle"])=>{this.defaultProps=[];for(let a of e){let e={};for(let n of t)e[n]=a[n];"textbox"===a.type&&(e.fontSize=a.fontSize,e.textLines=a.textLines),this.defaultProps.push(e)}},this.debouncedHistory=m()((e,t,a,n,i)=>{this.addUndoAndRedoStack(e,t,a,n,i)},700,{leading:!0,trailing:!0}),this.fabricCanvasHandler=e,this.inProcess=!1}undoGroupColors(e){return Object(c.a)(this,void 0,void 0,function*(){return new Promise(t=>{let a=e.oldStage;for(let e of a){let t=this.fabricCanvasHandler.basicToolsHandler.getObjectById(e.id,!0);if(t.length){for(let a in e)t[0].set(a,e[a]),t[0].setCoords();this.fabricCanvasHandler.getCurrentFabricCanvas().renderAll()}}t()})})}redoGroupColors(e){return Object(c.a)(this,void 0,void 0,function*(){return new Promise(t=>{let a=e.newStage;for(let e of a){let t=this.fabricCanvasHandler.basicToolsHandler.getObjectById(e.id,!0);if(t.length){for(let a in e)t[0].set(a,e[a]),t[0].setCoords();this.fabricCanvasHandler.getCurrentFabricCanvas().renderAll()}}t()})})}undoObjectAdded(e){return Object(c.a)(this,void 0,void 0,function*(){return new Promise(t=>{let a=e.oldStage;this.fabricCanvasHandler.getCurrentFabricCanvas().discardActiveObject();let n=this.fabricCanvasHandler.basicToolsHandler.getObjectById(a.id,!1);n.length&&(this.fabricCanvasHandler.getCurrentFabricCanvas().remove(n[0]),this.fabricCanvasHandler.getCurrentFabricCanvas().requestRenderAll()),t()})})}redoObjectAdded(e){return Object(c.a)(this,void 0,void 0,function*(){return new Promise(t=>{let a=e.newStage;if(a){if(this.fabricCanvasHandler.getCurrentFabricCanvas().add(a),"group"===a.type)for(let e of a.getObjects())e.setCoords(),a.removeWithUpdate(e).addWithUpdate(e);a.setCoords(),this.fabricCanvasHandler.basicToolsHandler.selectItemAfterAdded(a),this.fabricCanvasHandler.getCurrentFabricCanvas().requestRenderAll()}t()})})}undoObjectsRemoved(e){return Object(c.a)(this,void 0,void 0,function*(){return new Promise(t=>{let a=e.oldStage;if("activeSelection"!==a.type){if(this.fabricCanvasHandler.getCurrentFabricCanvas().add(a),"group"===a.type)for(let e of a.getObjects())e.setCoords(),a.removeWithUpdate(e).addWithUpdate(e);this.fabricCanvasHandler.basicToolsHandler.selectItemAfterAdded(a),a.setCoords()}else for(let e of a.getObjects())this.fabricCanvasHandler.getCurrentFabricCanvas().add(e),e.setCoords();this.fabricCanvasHandler.getCurrentFabricCanvas().requestRenderAll(),t()})})}redoObjectsRemoved(e){return Object(c.a)(this,void 0,void 0,function*(){return new Promise(t=>{this.fabricCanvasHandler.getCurrentFabricCanvas().discardActiveObject();let a=e.newStage;if("activeSelection"===a.type)for(let e of a.getObjects()){let t=this.fabricCanvasHandler.basicToolsHandler.getObjectById(e.id,!1);t.length&&this.fabricCanvasHandler.getCurrentFabricCanvas().remove(t[0]),this.fabricCanvasHandler.getCurrentFabricCanvas().requestRenderAll()}else{let e=this.fabricCanvasHandler.basicToolsHandler.getObjectById(a.id,!1);e.length&&(this.fabricCanvasHandler.getCurrentFabricCanvas().remove(e[0]),this.fabricCanvasHandler.getCurrentFabricCanvas().requestRenderAll())}t()})})}undoCanvasFill(e){return Object(c.a)(this,void 0,void 0,function*(){let t=e.oldStage;return this.fabricCanvasHandler.elementProps.canvasFill=t,this.fabricCanvasHandler.getCurrentFabricCanvas().backgroundColor=t,this.fabricCanvasHandler.getCurrentFabricCanvas().renderAll(),new Promise(e=>e())})}redoCanvasFill(e){return Object(c.a)(this,void 0,void 0,function*(){let t=e.newStage;return this.fabricCanvasHandler.elementProps.canvasFill=t,this.fabricCanvasHandler.getCurrentFabricCanvas().backgroundColor=t,this.fabricCanvasHandler.getCurrentFabricCanvas().renderAll(),new Promise(e=>e())})}undoUngroupingOfObjects(e){return Object(c.a)(this,void 0,void 0,function*(){return new Promise(t=>{let a=e.newStage,n=[];for(let e of a){let t=this.fabricCanvasHandler.basicToolsHandler.getObjectById(e.id,!1);t.length&&n.push(t[0])}var i=new l.fabric.ActiveSelection(n,{canvas:this.fabricCanvasHandler.getCurrentFabricCanvas()});i.top=e.oldStage[0].originalTop,i.left=e.oldStage[0].originalLeft;const r=i.toGroup();r.perPixelTargetFind=!0,r.objectCaching=!1,r.id=e.oldStage[0].id||this.fabricCanvasHandler.basicToolsHandler.randomId();for(let e of r.getObjects())e.setCoords(),r.removeWithUpdate(e).addWithUpdate(e);this.fabricCanvasHandler.getCurrentFabricCanvas().discardActiveObject(),this.fabricCanvasHandler.getCurrentFabricCanvas().setActiveObject(r),this.fabricCanvasHandler.getCurrentFabricCanvas().renderAll(),t()})})}redoUngroupingOfObjects(e){return Object(c.a)(this,void 0,void 0,function*(){return new Promise(t=>{let a=this.fabricCanvasHandler.basicToolsHandler.getObjectById(e.oldStage[0].id,!1);a.length&&a[0].toActiveSelection(),this.fabricCanvasHandler.getCurrentFabricCanvas().discardActiveObject(),this.fabricCanvasHandler.getCurrentFabricCanvas().renderAll(),t()})})}undoGroupingOfObjects(e){return Object(c.a)(this,void 0,void 0,function*(){return new Promise(t=>{let a=this.fabricCanvasHandler.basicToolsHandler.getObjectById(e.newStage[0].id,!1);a.length&&a[0].toActiveSelection(),this.fabricCanvasHandler.getCurrentFabricCanvas().discardActiveObject(),this.fabricCanvasHandler.getCurrentFabricCanvas().renderAll(),t()})})}redoGroupingOfObjects(e){return Object(c.a)(this,void 0,void 0,function*(){return new Promise(t=>{let a=e.oldStage,n=[];for(let e of a){let t=this.fabricCanvasHandler.basicToolsHandler.getObjectById(e.id,!1);t.length&&n.push(t[0])}var i=new l.fabric.ActiveSelection(n,{canvas:this.fabricCanvasHandler.getCurrentFabricCanvas()});i.top=e.newStage[0].originalTop,i.left=e.newStage[0].originalLeft;const r=i.toGroup();r.perPixelTargetFind=!0,r.objectCaching=!1,r.id=e.newStage[0].id||this.fabricCanvasHandler.basicToolsHandler.randomId();for(let e of r.getObjects())e.setCoords(),r.removeWithUpdate(e).addWithUpdate(e);this.fabricCanvasHandler.getCurrentFabricCanvas().discardActiveObject(),this.fabricCanvasHandler.getCurrentFabricCanvas().setActiveObject(r),this.fabricCanvasHandler.getCurrentFabricCanvas().renderAll(),t()})})}redoBasicProps(e){return Object(c.a)(this,void 0,void 0,function*(){return new Promise(t=>{let a=e.newStage,n=this.fabricCanvasHandler.getCurrentFabricCanvas().getActiveObject()?this.fabricCanvasHandler.getCurrentFabricCanvas().getActiveObject().type:null;(a.length>1||"activeSelection"===n)&&this.fabricCanvasHandler.getCurrentFabricCanvas().discardActiveObject();let i=[];for(let e of a){let t=this.fabricCanvasHandler.basicToolsHandler.getObjectById(e.id,!1);if(t.length){i.push(t[0]);for(let a in e)"left"===a?t[0].set("left",e.originalLeft):"top"===a?t[0].set("top",e.originalTop):t[0].set(a,e[a]),t[0].setCoords();this.fabricCanvasHandler.getCurrentFabricCanvas().renderAll()}}if(a.length>1){let e=new l.fabric.ActiveSelection(i,{canvas:this.fabricCanvasHandler.getCurrentFabricCanvas()});this.fabricCanvasHandler.getCurrentFabricCanvas().setActiveObject(e),this.fabricCanvasHandler.getCurrentFabricCanvas().renderAll()}t()})})}undoBasicProps(e){return Object(c.a)(this,void 0,void 0,function*(){return new Promise(t=>{let a=e.oldStage,n=this.fabricCanvasHandler.getCurrentFabricCanvas().getActiveObject()?this.fabricCanvasHandler.getCurrentFabricCanvas().getActiveObject().type:null;(a.length>1||"activeSelection"===n)&&this.fabricCanvasHandler.getCurrentFabricCanvas().discardActiveObject();let i=[];for(let e of a){let t=this.fabricCanvasHandler.basicToolsHandler.getObjectById(e.id,!1);if(t.length){i.push(t[0]);for(let a in e)"left"===a?t[0].set("left",e.originalLeft):"top"===a?t[0].set("top",e.originalTop):t[0].set(a,e[a]),t[0].setCoords();this.fabricCanvasHandler.getCurrentFabricCanvas().renderAll()}}if(a.length>1){let e=new l.fabric.ActiveSelection(i,{canvas:this.fabricCanvasHandler.getCurrentFabricCanvas()});this.fabricCanvasHandler.getCurrentFabricCanvas().setActiveObject(e),this.fabricCanvasHandler.getCurrentFabricCanvas().renderAll()}t()})})}updateHistoryStack(e,t=["id","width","height","skewX","skewY","scaleX","scaleY","left","top","originalLeft","originalTop","angle"]){return Object(c.a)(this,void 0,void 0,function*(){return new Promise(a=>{this.undoStack.length===this.maxCount&&this.undoStack.shift();let n=this.defaultProps,i=[];for(let r of e){let e={};for(let a of t)e[a]=r[a];"textbox"===r.type&&(e.fontSize=r.fontSize,e.textLines=r.textLines),i.push(e)}this.undoStack.push({type:y.BasicProps,oldStage:n,newStage:i}),this.redoStack=[],this.fabricCanvasHandler.canvasEventListenersHandler.triggersWhenCanvasUpdated(),a()})})}}(this),this.workAreaHandler=new class{constructor(e){this.fabricCanvasHandler=e}canvasClip(){}mockupCanvasClip(){}setCanvasSize(e,t){var a,n,i,r,s,o;this.fabricCanvasHandler.size.height=null===(n=null===(a=this.fabricCanvasHandler.mainCanvasDivRef)||void 0===a?void 0:a.nativeElement)||void 0===n?void 0:n.clientHeight,this.fabricCanvasHandler.size.width=e?(null===(r=null===(i=this.fabricCanvasHandler.mainCanvasDivRef)||void 0===i?void 0:i.nativeElement)||void 0===r?void 0:r.clientWidth)-e:null===(o=null===(s=this.fabricCanvasHandler.mainCanvasDivRef)||void 0===s?void 0:s.nativeElement)||void 0===o?void 0:o.clientWidth,t?this.fabricCanvasHandler.getCurrentFabricCanvas().setDimensions({width:this.fabricCanvasHandler.size.width,height:this.fabricCanvasHandler.size.height},{cssOnly:!1}):(this.fabricCanvasHandler.getCurrentFabricCanvas().setWidth(this.fabricCanvasHandler.size.width),this.fabricCanvasHandler.getCurrentFabricCanvas().setHeight(this.fabricCanvasHandler.size.height))}setMockupCanvasSize(e,t){this.fabricCanvasHandler.mockupCanvasSize.height=this.fabricCanvasHandler.mainCanvasDivRef.nativeElement.clientHeight,this.fabricCanvasHandler.mockupCanvasSize.width=e?this.fabricCanvasHandler.mainCanvasDivRef.nativeElement.clientWidth-e:this.fabricCanvasHandler.mainCanvasDivRef.nativeElement.clientWidth,t?this.fabricCanvasHandler.getCurrentFabricCanvas().setDimensions({width:this.fabricCanvasHandler.mockupCanvasSize.width,height:this.fabricCanvasHandler.mockupCanvasSize.height},{cssOnly:!1}):(this.fabricCanvasHandler.getCurrentFabricCanvas().setWidth(this.fabricCanvasHandler.mockupCanvasSize.width),this.fabricCanvasHandler.getCurrentFabricCanvas().setHeight(this.fabricCanvasHandler.mockupCanvasSize.height))}setCanvasOffset(){this.fabricCanvasHandler.canvasOffset.top=0,this.fabricCanvasHandler.canvasOffset.left=0}setMockupCanvasOffset(){this.fabricCanvasHandler.canvasOffset.top=0,this.fabricCanvasHandler.canvasOffset.left=0}}(this),this.templateResizeHandler=new class{constructor(e){this.fabricCanvasHandler=e}changeCanvasSizeAndResize(){let e={width:Number(this.fabricCanvasHandler.previousdrawableAreaCanvasSize.width),height:Number(this.fabricCanvasHandler.previousdrawableAreaCanvasSize.height)},t={width:Number(this.fabricCanvasHandler.drawableAreaCanvasSize.width),height:Number(this.fabricCanvasHandler.drawableAreaCanvasSize.height)};if(this.fabricCanvasHandler.previousdrawableAreaCanvasSize.width=t.width,this.fabricCanvasHandler.previousdrawableAreaCanvasSize.height=t.height,e.width==t.width&&e.height==t.height)return;this.fabricCanvasHandler.workAreaHandler.setCanvasSize(null,!0),this.fabricCanvasHandler.workAreaHandler.canvasClip();let a={x:Number(t.width/e.width),y:Number(t.height/e.height)};this.resizeAndScaleObjectsAccordingToCanvasSize(null,a,e,t),this.fabricCanvasHandler.zoomPanHandler.updateViewport()}resizeAndScaleObjectsAccordingToCanvasSize(e,t,a,n){return Object(c.a)(this,void 0,void 0,function*(){return new Promise(a=>{let n=1;return n=t.x<t.y?t.x:t.y,e.page_editor_json.objects.forEach(e=>{e.scaleX=e.scaleX*n,e.scaleY=e.scaleY*n,e.left=e.left*n+0,e.top=e.top*n+0}),a()})})}}(this),this.downloadHandler=new class{constructor(e,t,a,n,i){this.downloadLimits="no_limit",this.getFontsDataFromPages=e=>Object(c.a)(this,void 0,void 0,function*(){let t=[],a=this.fabricCanvasHandler.getPageById(e);for(let e of a.page_editor_json.objects)"textbox"==e.type&&t.push({isCustomFont:e.isCustomFont||!1,fontFileUrl:e.fontFileUrl||null,fontFamily:e.fontFamily,fontWeight:e.fontWeight,fontStyle:e.fontStyle});return t}),this.downloadPDF=e=>Object(c.a)(this,void 0,void 0,function*(){let t=[];for(let e of this.fabricCanvasHandler.pagesHandler.getPagesWithExportValueTrue()){let a=yield this.generateToSVG(e,!1),n=yield this.getFontsDataFromPages(e.page_id);t.push({page_id:e.page_id,page_name:e.page_name,svgString:a,fontsToDownload:n})}this._editorService.pdfDesignExport(t,this.fabricCanvasHandler.drawableAreaCanvasSize.width,this.fabricCanvasHandler.drawableAreaCanvasSize.height,null).subscribe(t=>{const a=new Blob([t],{type:"application/pdf"}),n=URL.createObjectURL(a);let i=document.createElement("a"),r=`${e.design_name||"Untitled Design"}.pdf`;i.href=n,i.download=r,i.click(),URL.revokeObjectURL(n),this.isExporting=!1},e=>{this.isExporting=!1,this._toastService.show("An error occurred while exporting PDF, please contact support",{classname:"bg-danger text-light",delay:5e3})})}),this.downloadSVG=e=>Object(c.a)(this,void 0,void 0,function*(){let t=[];for(let e in this.fabricCanvasHandler.dbEventsHandler.userDesign.pages){let a=this.fabricCanvasHandler.dbEventsHandler.userDesign.pages[e];if(a.export){let n=yield this.generateToSVG(a,!1);t.push({page_id:a.page_id,page_no:`Page ${Number(e)+1}`,page_name:a.page_name,svgString:n})}}this._editorService.svgDesignExport(t,this.fabricCanvasHandler.drawableAreaCanvasSize.width,this.fabricCanvasHandler.drawableAreaCanvasSize.height,null).subscribe(t=>{if(1==t.length){const a=new Blob([t[0].svgString],{type:"image/svg+xml"}),n=URL.createObjectURL(a);let i=document.createElement("a"),r=`${t[0].page_name||e.design_name||"Untitled Design"}.svg`;i.href=n,i.download=r,i.click(),URL.revokeObjectURL(n),this.isExporting=!1}else{const a=new te;for(let e of t)a.file(`${e.page_name||e.page_no}.svg`,e.svgString,{});let n=document.createElement("a"),i=`${e.design_name||"Untitled Design"}.zip`;a.generateAsync({type:"blob"}).then(e=>{n.download=i,n.href=URL.createObjectURL(e),n.click(),this.isExporting=!1})}},e=>{this.isExporting=!1})}),this.downloadPNG=(e,t)=>Object(c.a)(this,void 0,void 0,function*(){if(1==this.fabricCanvasHandler.pagesHandler.getPagesWithExportValueTrue().length){let a=this.fabricCanvasHandler.pagesHandler.getPagesWithExportValueTrue()[0],n=this.fabricCanvasHandler.getIndexOfPageById(a.page_id),i=yield this.generateDataURL(a,e,{format:"png",multiplier:this.exportOptions.multiplier}),r=document.createElement("a"),s=`${a.page_name||t.design_name||`Page ${Number(n)+1}`}.png`;r.download=s,r.href=this.getCanvasBlob(i),r.click(),this.isExporting=!1}else{const a=new te;for(let t in this.fabricCanvasHandler.dbEventsHandler.userDesign.pages){let n=this.fabricCanvasHandler.dbEventsHandler.userDesign.pages[t];if(n.export){let i=yield this.generateDataURL(n,e,{format:"png",multiplier:this.exportOptions.multiplier});a.file(`${n.page_name||`Page ${Number(t)+1}`}.png`,i.split("base64,")[1],{base64:!0})}}let n=document.createElement("a"),i=`${t.design_name||"Untitled Design"}.zip`;a.generateAsync({type:"blob"}).then(e=>{n.download=i,n.href=URL.createObjectURL(e),n.click(),this.isExporting=!1})}}),this.generateDataURL=(e,t,a)=>Object(c.a)(this,void 0,void 0,function*(){return new Promise((n,i)=>{if(this.fabricCanvasHandler.currentPageId==e.page_id){let i=e.page_editor_json.background;t&&(this.fabricCanvasHandler.getCurrentFabricCanvas().backgroundColor=null);let r=this.fabricCanvasHandler.getCurrentFabricCanvas().viewportTransform;this.fabricCanvasHandler.getCurrentFabricCanvas().viewportTransform=[1,0,0,1,0,0];let s=this.fabricCanvasHandler.getCurrentFabricCanvas().toDataURL(Object.assign({top:this.fabricCanvasHandler.canvasOffset.top,left:this.fabricCanvasHandler.canvasOffset.left,height:this.fabricCanvasHandler.drawableAreaCanvasSize.height,width:this.fabricCanvasHandler.drawableAreaCanvasSize.width},a));this.fabricCanvasHandler.getCurrentFabricCanvas().viewportTransform=r,t&&(this.fabricCanvasHandler.getCurrentFabricCanvas().backgroundColor=i),n(s)}else{let i=new l.fabric.StaticCanvas("offscreen-canvas");i.setWidth(this.fabricCanvasHandler.drawableAreaCanvasSize.width),i.setHeight(this.fabricCanvasHandler.drawableAreaCanvasSize.height);let r=JSON.parse(JSON.stringify(e.page_editor_json));this.fabricCanvasHandler.objectClipPathIssueFixed(r.objects),i.loadFromJSON(r,()=>{i.backgroundColor=t?"rgba(0,0,0,0)":e.page_editor_json.background,n(i.toDataURL(a)),i.clear(),i.dispose()})}})}),this.generateToSVG=(e,t)=>Object(c.a)(this,void 0,void 0,function*(){return new Promise((a,n)=>{let i=new l.fabric.StaticCanvas("offscreen-canvas");i.setWidth(this.fabricCanvasHandler.drawableAreaCanvasSize.width),i.setHeight(this.fabricCanvasHandler.drawableAreaCanvasSize.height);let r=JSON.parse(JSON.stringify(e.page_editor_json));this.fabricCanvasHandler.objectClipPathIssueFixed(r.objects),i.loadFromJSON(r,()=>{i.backgroundColor=t?"rgba(0,0,0,0)":e.page_editor_json.background;let n=i.toSVG({suppressPreamble:!0,viewBox:{x:0,y:0,width:this.fabricCanvasHandler.drawableAreaCanvasSize.width,height:this.fabricCanvasHandler.drawableAreaCanvasSize.height},width:this.fabricCanvasHandler.drawableAreaCanvasSize.width,height:this.fabricCanvasHandler.drawableAreaCanvasSize.height});a(n),i.clear(),i.dispose()})})}),this.downloadJPEG=e=>Object(c.a)(this,void 0,void 0,function*(){if(1==this.fabricCanvasHandler.pagesHandler.getPagesWithExportValueTrue().length){let t=this.fabricCanvasHandler.pagesHandler.getPagesWithExportValueTrue()[0],a=this.fabricCanvasHandler.getIndexOfPageById(t.page_id),n=yield this.generateDataURL(t,!1,{format:"jpeg",multiplier:this.exportOptions.multiplier,quality:this.exportOptions.quality/100||.8}),i=document.createElement("a"),r=`${t.page_name||e.design_name||`Page ${Number(a)+1}`}.jpeg`;i.download=r,i.href=this.getCanvasBlob(n),i.click(),this.isExporting=!1}else{const t=new te;for(let e in this.fabricCanvasHandler.dbEventsHandler.userDesign.pages){let a=this.fabricCanvasHandler.dbEventsHandler.userDesign.pages[e];if(a.export){let n=yield this.generateDataURL(a,!1,{format:"jpeg",multiplier:this.exportOptions.multiplier,quality:this.exportOptions.quality/100||.8});t.file(`${a.page_name||`Page ${Number(e)+1}`}.jpeg`,n.split("base64,")[1],{base64:!0})}}let a=document.createElement("a"),n=`${e.design_name||"Untitled Design"}.zip`;t.generateAsync({type:"blob"}).then(e=>{a.download=n,a.href=URL.createObjectURL(e),a.click(),this.isExporting=!1})}}),this.downloadWEBP=(e=!1,t)=>Object(c.a)(this,void 0,void 0,function*(){if(1==this.fabricCanvasHandler.pagesHandler.getPagesWithExportValueTrue().length){let a=this.fabricCanvasHandler.pagesHandler.getPagesWithExportValueTrue()[0],n=this.fabricCanvasHandler.getIndexOfPageById(a.page_id),i=yield this.generateDataURL(a,e,{format:"webp",multiplier:this.exportOptions.multiplier,quality:this.exportOptions.quality/100||.8}),r=document.createElement("a"),s=`${a.page_name||t.design_name||`Page ${Number(n)+1}`}.webp`;r.download=s,r.href=this.getCanvasBlob(i),r.click(),this.isExporting=!1}else{const a=new te;for(let t in this.fabricCanvasHandler.dbEventsHandler.userDesign.pages){let n=this.fabricCanvasHandler.dbEventsHandler.userDesign.pages[t];if(n.export){let i=yield this.generateDataURL(n,e,{format:"webp",multiplier:this.exportOptions.multiplier,quality:this.exportOptions.quality/100||.8});a.file(`${n.page_name||`Page ${Number(t)+1}`}.webp`,i.split("base64,")[1],{base64:!0})}}let n=document.createElement("a"),i=`${t.design_name||"Untitled Design"}.zip`;a.generateAsync({type:"blob"}).then(e=>{n.download=i,n.href=URL.createObjectURL(e),n.click(),this.isExporting=!1})}}),this.fabricCanvasHandler=e,this._editorService=t,this._toastService=a,this._modalService=n,this._gaEventsService=i,this.exportOptions={format:"JPG",multiplier:1,quality:80},this.isExporting=!1}downloadDesign(e,t,a){let n=this.exportOptions.format;if(a.getUserId()===f.a.USER_NOT_LOGGED_IN)return t.open(ee,{size:"lg",centered:!0}).componentInstance.uiMode="signup";0!=this.fabricCanvasHandler.dbEventsHandler.userDesign.pages.filter(e=>e.export).length?(this.isExporting=!0,this.setUserDownloadsLimit().then(t=>{"PNG"==n?this.downloadPNG(!1,e):"PNG Transparent"==n?this.downloadPNG(!0,e):"WEBP"==n?this.downloadWEBP(!1,e):"WEBP Transparent"==n?this.downloadWEBP(!0,e):"JPG"==n?this.downloadJPEG(e):"PDF"==n?this.downloadPDF(e):"SVG"==n&&this.downloadSVG(e),this._gaEventsService.eventEmitter("Download feature","Design downloaded",n,null)}).catch(e=>{if(this.isExporting=!1,402===e.status)e.error.proAccess?(this._modalService.open(C.a,{size:"lg",centered:!0,modalDialogClass:"modal-buy-ltd-individual"}).componentInstance.selectedFeatureId="unlimited-downloads",this._toastService.show("Your monthly download credits have all been used up, credits are renewed every month",{classname:"bg-danger text-light",delay:5e3})):this._toastService.show(e.error.message,{classname:"bg-danger text-light",delay:5e3}),this._gaEventsService.eventEmitter("ltd-popup","popup-view","download-limit");else if(500===e.status)throw this._toastService.show(e.error.message,{classname:"bg-danger text-light",delay:5e3}),e})):this._toastService.show("Please select a page before downloading it",{classname:"bg-warning text-dark",delay:5e3})}setUserDownloadsLimit(){return new Promise((e,t)=>{var a;if(!this.fabricCanvasHandler.user)return e(!0);this._editorService.setUserDownloadsLimit(this.fabricCanvasHandler.user._id,(null===(a=this.fabricCanvasHandler.currentWorkspace)||void 0===a?void 0:a._id)||"").then(t=>("limited"===t.code&&(this.creditsRemaining=t.creditsRemaining),e(!0))).catch(e=>t(e))})}getCanvasBlob(e){var t=this.dataURLtoBlob(e);return URL.createObjectURL(t)}dataURLtoBlob(e){for(var t=e.split(","),a=t[0].match(/:(.*?);/)[1],n=atob(t[1]),i=n.length,r=new Uint8Array(i);i--;)r[i]=n.charCodeAt(i);return new Blob([r],{type:a})}}(this,this._editorService,this._toastService,this._modalService,this._gaEventsService),this.dbEventsHandler=new class{constructor(e,t,a,n,i){this.cloneDesignObjectAndRemoveProps=()=>{let e=JSON.parse(JSON.stringify(this.userDesign));for(let t of e.pages)delete t.page_thumbnail_base64,delete t.export;return e},this.cloneTemplateObjectAndRemoveProps=()=>{let e=JSON.parse(JSON.stringify(this.templateDesign));for(let t of e.pages)delete t.page_thumbnail_base64,delete t.export;return e},this.debouncedSaveUserDesign=m()(()=>{this.saveState==f.a.DESIGN_SAVING||this.fabricCanvasHandler.currentCanvasId===f.a.MOCKUP_CANVAS||this.fabricCanvasHandler.isDesignLoading||this.fabricCanvasHandler.historyHandlerV.inProcess||this.saveState==f.a.DESIGN_UNSAVED&&this.saveUserDesign()},1500,{leading:!1,trailing:!0}),this.fabricCanvasHandler=e,this._userService=a,this._templateService=t,this._editorService=n,this._location=i,this.isProTemplate=!1,this.formatsList=[],this.isSaving=!1,this.saveState="Saved!",this.templateCategoriesList=ae}saveDesignerTemplate(e,t,a){if(0!=this.fabricCanvasHandler.getIndexOfPageById(this.fabricCanvasHandler.currentPageId))return void alert("Please select first page to continue saving");let n=this.templateDesign.tags;if(n.length-1<7&&"custom-size"!=this.formatCategoryId)return void alert("Minimum 7 Tags should be added");this.isSaving=!0;let i=this.fabricCanvasHandler.basicToolsHandler.removeAbnormalValuesFromJSON(this.fabricCanvasHandler.getCurrentFabricCanvas().toDatalessJSON(this.fabricCanvasHandler.objectPropertiesToInclude)),r=this.fabricCanvasHandler.getCurrentFabricCanvas().viewportTransform;this.fabricCanvasHandler.getCurrentFabricCanvas().viewportTransform=[1,0,0,1,0,0];let s=this.fabricCanvasHandler.basicToolsHandler.getDesignThumbnailFromCanvas();this.fabricCanvasHandler.getCurrentFabricCanvas().viewportTransform=r,this.fabricCanvasHandler.getCurrentFabricCanvas().renderAll(),this.templateDesign.user_id=this._userService.getUserId(),this.templateDesign.format_category=this.formatCategoryId,this.templateDesign.tags=n,this.templateDesign.template_name=t.value,this.templateDesign.template_desc=a.value,this.templateDesign.type=null==this.formatCategoryObj?null:this.formatCategoryObj.type,this.templateDesign.canvas_doc_json={doc_width:this.fabricCanvasHandler.drawableAreaCanvasSize.width,doc_height:this.fabricCanvasHandler.drawableAreaCanvasSize.height,doc_units:this.fabricCanvasHandler.docUnits},this.fabricCanvasHandler.getCurrentPageFromTemplateObject().page_editor_json=i;let o=this.cloneTemplateObjectAndRemoveProps();"insert"==e?"custom-size"==this.formatCategoryId||this._templateService.addDesignerTemplate(o,s).subscribe(e=>{alert("Template added"),console.log(e),this.isSaving=!1,this.templateDesign._id=e._id,this._location.replaceState(`/editor/template/${this.templateDesign._id}`)},e=>{throw alert("An error occurred while saving template"),this.isSaving=!1,e}):(this.templateDesign.format_category=this.formatCategoryId,this.templateDesign.template_name=t.value,this.templateDesign.template_desc=a.value,"custom-size"==this.formatCategoryId?this.templateDesign.canvas_doc_json={editor_json:i}:this._templateService.updateDesignerTemplate(this.templateDesign._id,o,s).subscribe(e=>{console.log(e),this.isSaving=!1,alert("Template updated")},e=>{throw this.isSaving=!1,alert("An error occurred while saving template"),e}))}setUserDesign(){return new Promise(e=>{var t,a;let n=this.fabricCanvasHandler.basicToolsHandler.removeAbnormalValuesFromJSON(this.fabricCanvasHandler.getCurrentFabricCanvas().toDatalessJSON(this.fabricCanvasHandler.objectPropertiesToInclude));return this.fabricCanvasHandler.getCurrentPage().page_editor_json=n,"admin_designer"!==(null===(t=this.fabricCanvasHandler.user)||void 0===t?void 0:t.role)&&"template_designer"!==(null===(a=this.fabricCanvasHandler.user)||void 0===a?void 0:a.role)||(this.fabricCanvasHandler.dbEventsHandler.templateDesign.pages=JSON.parse(JSON.stringify(this.fabricCanvasHandler.dbEventsHandler.userDesign.pages))),e()})}saveUserDesign(){this.saveState="Saving...";let e,t="insert";if(this.fabricCanvasHandler.checkIfCurrentPageIsFirstPage()||!this.userDesign._id){let t=this.fabricCanvasHandler.getCurrentFabricCanvas().viewportTransform;this.fabricCanvasHandler.getCurrentFabricCanvas().viewportTransform=[1,0,0,1,0,0],e=this.fabricCanvasHandler.basicToolsHandler.getDesignThumbnailFromCanvas(),this.fabricCanvasHandler.getCurrentFabricCanvas().viewportTransform=t,this.fabricCanvasHandler.getCurrentFabricCanvas().renderAll()}void 0!==this.userDesign._id&&(t="update"),this.userDesign.user_id=this._userService.getUserId(),this.userDesign.workspace_id=this._userService.getCurrentUserWorkspaceId(),this.userDesign.format_category=this.formatCategoryId,this.userDesign.canvas_doc_json={doc_width:this.fabricCanvasHandler.drawableAreaCanvasSize.width||(null==this.formatCategoryObj?1e3:this.formatCategoryObj.dimensions.doc_width),doc_height:this.fabricCanvasHandler.drawableAreaCanvasSize.height||(null==this.formatCategoryObj?1e3:this.formatCategoryObj.dimensions.doc_height),doc_units:this.fabricCanvasHandler.docUnits||"px"};let a=this.cloneDesignObjectAndRemoveProps();"insert"==t?this._editorService.insertUserDesign(a,e).subscribe(e=>{this.saveState="Saved!",this.userDesign._id=e._id,this.userDesign.thumbnail_url=e.thumbnail_url,this._location.replaceState(`/editor/design/${this.userDesign._id}`),localStorage.setItem("design_created","true")},e=>{throw e}):this._editorService.updateUserDesign(this.userDesign._id,a,e).subscribe(e=>{this.saveState="Saved!"},e=>{throw e})}deleteDesignerTemplate(e,t,a){confirm("Are you sure you want to delete the template?")&&e.deleteDesignerTemplate(this.templateDesign._id).subscribe(e=>{t.hasOpenModals()&&t.dismissAll(),a.navigate(["/home"])},e=>{throw e})}setFormatCategoryId(e){"custom-size"==e?(this.formatCategoryObj=null,this.formatCategoryId="custom-size"):this.formatsList.forEach(t=>{t.format_category==e&&(this.formatCategoryObj=t,this.formatCategoryId=t.format_category)})}}(this,this._templateService,this._userService,this._editorService,this._location),this.eyeDropperHandler=new class{constructor(e){this.initEyeDropper=()=>{this.eyeDropperMode=!0,this.fabricCanvasHandler.getCurrentFabricCanvas().upperCanvasEl.style.cursor="crosshair",this.fabricCanvasHandler.getCurrentFabricCanvas().defaultCursor="crosshair",document.body.style.cursor="crosshair",this.fabricCanvasHandler.getCurrentFabricCanvas().requestRenderAll()},this.resetEyeDropper=()=>{this.eyeDropperMode=!1,this.fabricCanvasHandler.getCurrentFabricCanvas().upperCanvasEl.style.cursor="default",this.fabricCanvasHandler.getCurrentFabricCanvas().defaultCursor="default",document.body.style.cursor="default",this.fabricCanvasHandler.getCurrentFabricCanvas().requestRenderAll()},this.getColorFromCanvas=e=>{var t=e.layerX*window.devicePixelRatio,a=e.layerY*window.devicePixelRatio;let n=this.fabricCanvasHandler.getCurrentFabricCanvas().getContext("2d").getImageData(t,a,1,1).data;this.rgbaColor=`rgba(${n[0]}, ${n[1]}, ${n[2]}, 1)`,this.hexCode=this.rgbaToHex(this.rgbaColor)},this.applyEyeDropperColorToElementFill=()=>{this.fabricCanvasHandler.elementProps.fill=this.fabricCanvasHandler.eyeDropperHandler.rgbaColor,"svg"===this.fabricCanvasHandler.elementProps.fillType?this.fabricCanvasHandler.basicToolsHandler.setSVGGroupPathToOneFill(this.fabricCanvasHandler.elementProps.fill):this.fabricCanvasHandler.basicToolsHandler.setElementFill(),this.fabricCanvasHandler.eyeDropperHandler.resetEyeDropper()},this.applyEyeDropperColorToElementBorderColor=()=>{this.fabricCanvasHandler.elementProps.strokeColor=this.fabricCanvasHandler.eyeDropperHandler.rgbaColor,this.fabricCanvasHandler.basicToolsHandler.setStrokeColor(),this.fabricCanvasHandler.eyeDropperHandler.resetEyeDropper()},this.rgbaToHex=e=>{var t=e.substring(e.indexOf("(")).split(","),a=parseInt(this.trim(t[0].substring(1)),10),n=parseInt(this.trim(t[1]),10),i=parseInt(this.trim(t[2]),10),r=[a.toString(16),n.toString(16),i.toString(16)];return r.forEach(function(e,t){1===e.length&&(r[t]="0"+e)}),"#"+r.join("")},this.fabricCanvasHandler=e,this.rgbaColor="rgba(239,239,239,1)",this.hexCode=null,this.eyeDropperMode=!1}trim(e){return e.replace(/^\s+|\s+$/gm,"")}}(this),this.canvasEventListenersHandler=new class{constructor(e,t,a){this.detachCanvasEventListeners=()=>{this.fabricCanvasHandler.getCurrentFabricCanvas().off({"before:render":this.onBeforeRender,"after:background:render":this.onAfterBackgroundRender,"before:overlay:render":this.onBeforeOverlayRender,"after:render":this.onAfterRender,"mouse:wheel":this.onMouseWheel,"mouse:dblclick":this.onMouseDblClick,"mouse:over":this.onMouseOver,"mouse:out":this.onMouseOut,"mouse:down":this.onMouseDown,"mouse:up":this.onMouseUp,"mouse:move":this.onMouseMove,"before:canvas:state:changed":this.beforeCanvasStateChanged,"after:canvas:state:changed":this.afterCanvasStateChanged,"mockups:canvas:state:init":this.onMockupsCanvasStateInit,"mockups:canvas:state:end":this.onMockupsCanvasStateEnd,"object:added:by:user":this.onObjectAddedByUser,"object:removed:by:user":this.onObjectRemovedByUser,"object:scaling":this.onObjectScaling,"object:modified":this.onObjectModified,"selection:created":this.onSelectionCreated,"selection:updated":this.onSelectionUpdated,"selection:cleared":this.onSelectionCleared,"text:selection:changed":this.onTextSelectionChanged,"thumbnail:generation":this.onThumbnailGeneration})},this.initMockupCanvasEventListeners=()=>{this.fabricCanvasHandler.getCurrentFabricCanvas().on({"mockup:content:modified":this.onMockupContentModified,"object:added":this.onObjectAdded,"object:removed":this.onObjectRemoved})},this.detachMockupCanvasEventListeners=()=>{this.fabricCanvasHandler.getCurrentFabricCanvas().off({"mockup:content:modified":this.onMockupContentModified,"object:added":this.onObjectAdded,"object:removed":this.onObjectRemoved})},this.onBeforeOverlayRender=()=>{let e=this.fabricCanvasHandler.getCurrentFabricCanvas().getContext();const t=this.fabricCanvasHandler.getCurrentFabricCanvas().getZoom(),a=new l.fabric.Point(-this.fabricCanvasHandler.getCurrentFabricCanvas().vptCoords.tl.x*t,-this.fabricCanvasHandler.getCurrentFabricCanvas().vptCoords.tl.y*t);let n=this.fabricCanvasHandler.isDarkTheme?f.a.COLORS.artboardDarkBGColor:f.a.COLORS.artboardLightBGColor;this.fabricCanvasHandler.imageCropHandler.isCrop&&(n=this.fabricCanvasHandler.isDarkTheme?f.a.COLORS.artboardDarkBGColorOpacity:f.a.COLORS.artboardLightBGColorOpacity);const i=this.fabricCanvasHandler.getCurrentFabricCanvas().getWidth(),r=this.fabricCanvasHandler.getCurrentFabricCanvas().getHeight();e.save(),e.fillStyle=n,e.beginPath(),e.rect(0,0,i,r),e.rect(a.x,a.y,this.fabricCanvasHandler.basicToolsHandler.getCurrentCanvasSize().width*t,this.fabricCanvasHandler.basicToolsHandler.getCurrentCanvasSize().height*t),e.fill("evenodd"),e.closePath();let s=this.fabricCanvasHandler.isDarkTheme?f.a.COLORS.artboardDarkStrokeColor:f.a.COLORS.artboardLightStrokeColor;e.beginPath(),e.strokeStyle=s,e.lineWidth=.7;const o=e.lineWidth/2;e.rect(a.x-o,a.y-o,this.fabricCanvasHandler.basicToolsHandler.getCurrentCanvasSize().width*t,this.fabricCanvasHandler.basicToolsHandler.getCurrentCanvasSize().height*t),e.stroke(),e.closePath()},this.onAfterBackgroundRender=()=>{let e=this.fabricCanvasHandler.getCurrentFabricCanvas().getContext();const t=this.fabricCanvasHandler.getCurrentFabricCanvas().getZoom(),a=new l.fabric.Point(-this.fabricCanvasHandler.getCurrentFabricCanvas().vptCoords.tl.x*t,-this.fabricCanvasHandler.getCurrentFabricCanvas().vptCoords.tl.y*t),n=this.fabricCanvasHandler.getCurrentFabricCanvas().getWidth(),i=this.fabricCanvasHandler.getCurrentFabricCanvas().getHeight();e.fillStyle=this.fabricCanvasHandler.isDarkTheme?f.a.COLORS.artboardDarkBGColor:f.a.COLORS.artboardLightBGColor,e.beginPath(),e.rect(0,0,n,i),e.rect(a.x,a.y,this.fabricCanvasHandler.basicToolsHandler.getCurrentCanvasSize().width*t,this.fabricCanvasHandler.basicToolsHandler.getCurrentCanvasSize().height*t),e.fill("evenodd"),e.closePath()},this.onTextSelectionChanged=e=>{let t=e.target;if(t)try{if(t.text.length>0){const{fontWeight:e,fontStyle:a,underline:n,linethrough:i,fill:r}=this.fabricCanvasHandler.textElementHandler.getSelectionStyles(t,0,t.text.length,!0)[0];this.fabricCanvasHandler.textElementHandler.getTextCharFill(r),this.fabricCanvasHandler.textElementHandler.getBold(e),this.fabricCanvasHandler.textElementHandler.getFontStyle(a),this.fabricCanvasHandler.textElementHandler.getTextAttributes(n,i)}}catch(a){S.c(e=>{e.setExtra("functionCalled","onTextSelectionChanged"),e.setExtra("fabricObject",this.fabricCanvasHandler.selected||{object:null}),S.a(a)})}},this.onPaste=e=>{console.log("window paste 1"),console.log(e.clipboardData.getData("text/plain"))},this.triggersWhenCanvasUpdated=(e=!0)=>Object(c.a)(this,void 0,void 0,function*(){this.fabricCanvasHandler.dbEventsHandler.saveState=f.a.DESIGN_UNSAVED,e&&this.fabricCanvasHandler.canvasEventListenersHandler.triggerThumbnailGenerationWhenCanvasUpdated(),this.fabricCanvasHandler.canvasEventListenersHandler.triggerMockupContentModified(),yield this.fabricCanvasHandler.dbEventsHandler.setUserDesign(),this.fabricCanvasHandler.canvasEventListenersHandler.triggerSaveUserDesignToDB()}),this.triggerSaveUserDesignToDB=()=>{var e;"user"===(null===(e=this.fabricCanvasHandler.user)||void 0===e?void 0:e.role)&&this.fabricCanvasHandler.dbEventsHandler.debouncedSaveUserDesign()},this.onMockupContentModified=()=>{this.fabricCanvasHandler.mockupsHandler.isRendering||this.fabricCanvasHandler.imageCropHandler.isCrop||this.fabricCanvasHandler.mockupsHandler.debouncedRenderMockupImage()},this.triggerMockupContentModified=()=>{this.fabricCanvasHandler.currentCanvasId===f.a.MOCKUP_CANVAS&&this.fabricCanvasHandler.getCurrentFabricCanvas().trigger("mockup:content:modified",{})},this.onThumbnailGeneration=()=>{this.fabricCanvasHandler.pagesHandler.isThumbnailGenerating||this.fabricCanvasHandler.imageCropHandler.isCrop||this.fabricCanvasHandler.pagesHandler.debouncedRenderThumbnailImage()},this.triggerThumbnailGenerationWhenCanvasUpdated=()=>{this.fabricCanvasHandler.currentCanvasId===f.a.MAIN_CANVAS&&this.fabricCanvasHandler.getCurrentFabricCanvas().trigger("thumbnail:generation",{})},this.onMockupsCanvasStateInit=e=>{this.fabricCanvasHandler.historyHandlerV.debouncedHistory([],[],[],{},y.MockupsCanvasStateInit)},this.onMockupsCanvasStateEnd=e=>{this.fabricCanvasHandler.historyHandlerV.debouncedHistory([],[],[],{},y.MockupsCanvasStateEnd)},this.onObjectAdded=e=>{this.triggerMockupContentModified()},this.onObjectRemoved=e=>{this.triggerMockupContentModified()},this.onObjectRemovedByUser=e=>{let t=e.target;null!=t&&this.fabricCanvasHandler.historyHandlerV.debouncedHistory([],[],[],{object:t},y.ObjectsRemoved)},this.onObjectAddedByUser=e=>{let t=e.target;null!=t&&this.fabricCanvasHandler.historyHandlerV.debouncedHistory([],[],[],{object:t},y.ObjectAdded)},this.onBeforeRender=e=>{},this.onAfterRender=e=>{},this.onMouseWheel=e=>{e.e.metaKey||e.e.ctrlKey?(e.e.preventDefault(),this.fabricCanvasHandler.zoomPanHandler.zoomByEvent(e.e)):this.fabricCanvasHandler.zoomPanHandler.panCanvas(e,e.e.shiftKey)},this.onMouseMove=e=>{"panning"===this.fabricCanvasHandler.panState&&this.fabricCanvasHandler.isSpaceKeyPressed&&(this.fabricCanvasHandler.basicToolsHandler.disableAllObjectsWhenInPanMode(),this.fabricCanvasHandler.zoomPanHandler.panCanvas(e))},this.onMouseDblClick=e=>{let t=e.target;null!=t&&("image"!==t.type||t.isMockup||this.fabricCanvasHandler.imageCropHandler.initCrop())},this.onMouseOver=e=>{if(e.target){if(this.fabricCanvasHandler.getCurrentFabricCanvas().getActiveObject()&&this.fabricCanvasHandler.getCurrentFabricCanvas().getActiveObject()==e.target)return;e.target._renderControls(this.fabricCanvasHandler.getCurrentFabricCanvas().contextContainer,{hasControls:!1,borderColor:"#5F58B7"})}},this.onMouseOut=e=>{this.fabricCanvasHandler.getCurrentFabricCanvas().renderAll()},this.onMouseDown=e=>{this.fabricCanvasHandler.panState="panning";let t=e.target;if(t||!this.fabricCanvasHandler.imageCropHandler.isCrop){if(t){if(this.fabricCanvasHandler.imageCropHandler.isCrop)return;this.fabricCanvasHandler.historyHandlerV.setObjectDefaultProps(this.fabricCanvasHandler.getCurrentFabricCanvas().getActiveObjects()),"group"===t.type&&this.fabricCanvasHandler.getCurrentFabricCanvas().trigger("before:canvas:state:changed",{})}}else this.fabricCanvasHandler.imageCropHandler.finishCrop()},this.onMouseUp=e=>{this.fabricCanvasHandler.panState=null},this.onObjectScaling=e=>{this.fabricCanvasHandler.basicToolsHandler.setElementHeight("movement"),this.fabricCanvasHandler.basicToolsHandler.setElementWidth("movement")},this.onObjectModified=e=>{let t=e.target;this.fabricCanvasHandler.basicToolsHandler.updateObjectsScaleAndGeometryWhenResizing(t),this.fabricCanvasHandler.basicToolsHandler.setTop(null,"movement"),this.fabricCanvasHandler.basicToolsHandler.setLeft(null,"movement"),this.fabricCanvasHandler.imageCropHandler.isCrop||("group"===t.type?this.fabricCanvasHandler.getCurrentFabricCanvas().trigger("after:canvas:state:changed",{}):this.fabricCanvasHandler.historyHandlerV.updateHistoryStack(this.fabricCanvasHandler.getCurrentFabricCanvas().getActiveObjects()))},this.beforeCanvasStateChanged=e=>{this.fabricCanvasHandler.historyHandlerV.oldCanvasJSON=this.fabricCanvasHandler.basicToolsHandler.removeAbnormalValuesFromJSON(this.fabricCanvasHandler.getCurrentFabricCanvas().toDatalessJSON(this.fabricCanvasHandler.objectPropertiesToInclude))},this.afterCanvasStateChanged=e=>{if(!this.fabricCanvasHandler.historyHandlerV.inProcess){let e=this.fabricCanvasHandler.historyHandlerV.oldCanvasJSON,t=this.fabricCanvasHandler.basicToolsHandler.removeAbnormalValuesFromJSON(this.fabricCanvasHandler.getCurrentFabricCanvas().toDatalessJSON(this.fabricCanvasHandler.objectPropertiesToInclude));this.fabricCanvasHandler.historyHandlerV.debouncedHistory([],[],[],{oldCanvas:{oldCanvasJSON:e},newCanvas:{newCanvasJSON:t}},y.CanvasJSON)}},this.onSelectionCreated=e=>{this.fabricCanvasHandler.basicToolsHandler.getLeft(),this.fabricCanvasHandler.basicToolsHandler.getTop(),this.fabricCanvasHandler.objectSelection(e.target),this._helpersService.setSentrySelectedFabricObjectDetails(e.target)},this.onSelectionUpdated=e=>{this.fabricCanvasHandler.objectSelection(e.target),this._helpersService.setSentrySelectedFabricObjectDetails(e.target)},this.onSelectionCleared=e=>{this.fabricCanvasHandler.objectType="Canvas",this.fabricCanvasHandler.selected=null,this.fabricCanvasHandler.toolSelected=null,this._helpersService.removeSentrySelectedFabricObjectDetails();const t=this._utilsService.activeSidebarItem.value;(null==t?void 0:t.sidebarItemType)===f.a.SIDEBAR_ITEM_TYPES.ObjectEditingSidebarItem&&this.fabricCanvasHandler.sidebarItemClicked({previousSidebarItemId:f.a.SIDEBAR_ITEMS.TEMPLATES.id,previousSidebarItemTitle:f.a.SIDEBAR_ITEMS.TEMPLATES.title,previousSidebarItemType:f.a.SIDEBAR_ITEMS.TEMPLATES.type,sidebarItemId:(null==t?void 0:t.previousSidebarItemId)||f.a.SIDEBAR_ITEMS.TEMPLATES.id,sidebarItemTitle:(null==t?void 0:t.previousSidebarItemTitle)||f.a.SIDEBAR_ITEMS.TEMPLATES.title,sidebarItemType:f.a.SIDEBAR_ITEM_TYPES.DefaultSidebarItem})},this.fabricCanvasHandler=e,this._utilsService=t,this._helpersService=a}initCanvasEventListeners(){this.fabricCanvasHandler.getCurrentFabricCanvas().on({"before:render":this.onBeforeRender,"after:background:render":this.onAfterBackgroundRender,"before:overlay:render":this.onBeforeOverlayRender,"after:render":this.onAfterRender,"mouse:wheel":this.onMouseWheel,"mouse:dblclick":this.onMouseDblClick,"mouse:over":this.onMouseOver,"mouse:out":this.onMouseOut,"mouse:down":this.onMouseDown,"mouse:up":this.onMouseUp,"mouse:move":this.onMouseMove,"before:canvas:state:changed":this.beforeCanvasStateChanged,"after:canvas:state:changed":this.afterCanvasStateChanged,"mockups:canvas:state:init":this.onMockupsCanvasStateInit,"mockups:canvas:state:end":this.onMockupsCanvasStateEnd,"object:added:by:user":this.onObjectAddedByUser,"object:removed:by:user":this.onObjectRemovedByUser,"object:scaling":this.onObjectScaling,"object:modified":this.onObjectModified,"selection:created":this.onSelectionCreated,"selection:updated":this.onSelectionUpdated,"selection:cleared":this.onSelectionCleared,"text:selection:changed":this.onTextSelectionChanged,"thumbnail:generation":this.onThumbnailGeneration})}}(this,this._utilsService,this._helpersService),this.mockupsHandler=new class{constructor(e,t,a,n){this.currentMockupGroup=null,this.firstTimeRender=!0,this.addMockupImageToCanvas=e=>{this.fabricCanvasHandler.getCurrentFabricCanvas().trigger("before:canvas:state:changed",{}),l.fabric.Image.fromURL(e.base_mockup_props.url,t=>{var a;l.fabric.Image.fromURL(null===(a=e.base_shadow_props)||void 0===a?void 0:a.url,a=>{var n;t.set({angle:0,lockUniScaling:!0,objectCaching:!1,noScaleCache:!1}),a.set({angle:0,lockUniScaling:!0,objectCaching:!1,noScaleCache:!1}).setCoords(),t.id=this.fabricCanvasHandler.basicToolsHandler.randomId(),t.mockupImageType="base-image",t.src=e.base_mockup_props.url,a.id=this.fabricCanvasHandler.basicToolsHandler.randomId(),a.mockupImageType="shadow-image",a.src=(null===(n=e.base_shadow_props)||void 0===n?void 0:n.url)||"";var i=new l.fabric.Group([a,t],{});i.isMockup=!0,i.mockupId=`/mockups/${e._id}`,i.mockupData=JSON.parse(JSON.stringify(e)),this.deletePropsFromMockupData(i),this.fabricCanvasHandler.basicToolsHandler.scaleWidthOfImageOrVectorAccordingToCanvasSize(i,1),i.id=this.fabricCanvasHandler.basicToolsHandler.randomId();let r=this.fabricCanvasHandler.basicToolsHandler.getCurrentCanvasSize().width,s=this.fabricCanvasHandler.basicToolsHandler.getCurrentCanvasSize().height;i.left=r/2-i.getScaledWidth()/2,i.top=s/2-i.getScaledHeight()/2,i.setCoords(),this.fabricCanvasHandler.getCurrentFabricCanvas().add(i),this.fabricCanvasHandler.getCurrentFabricCanvas().renderAll(),this.fabricCanvasHandler.basicToolsHandler.selectItemAfterAdded(i),this.mockupGroupId=i.id,this.mockupBaseImageId=t.id,this.currentMockup=e,this.currentMockupImage=t,this.currentMockupGroup=i,this.fabricCanvasHandler.getCurrentFabricCanvas().trigger("after:canvas:state:changed",{})},{crossOrigin:"anonymous"})},{crossOrigin:"anonymous"})},this.editMockupContents=(e,t,a=!0)=>{this.fabricCanvasHandler.getCurrentFabricCanvas().discardActiveObject(),this.fabricCanvasHandler.getCurrentFabricCanvas().requestRenderAll(),this.fabricCanvasHandler.isMainCanvas=!1,this.editingMockupContentsMode=!0,this.fabricCanvasHandler.currentCanvasId=f.a.MOCKUP_CANVAS,this.currentSectionIndex=t,this.initMockupCanvas(e),a&&this.fabricCanvasHandler.getCurrentFabricCanvas().trigger("mockups:canvas:state:init",{})},this.initMockupCanvas=e=>{this.fabricCanvasHandler.isDesignLoading=!0,this.fabricCanvasHandler.mockupCanvasInitialized?(this.fabricCanvasHandler.getCurrentFabricCanvas().renderAll(),this.setUpMockupCanvas(),this.initSizeOfMockupCanvas(e)):(this.fabricCanvasHandler.mockupCanvasInitialized=!0,this.fabricCanvasHandler.canvas[f.a.MOCKUP_CANVAS]=new l.fabric.Canvas("mockup-canvas",f.a.DEFAULT_CANVAS_OPTIONS),this.fabricCanvasHandler.getCurrentFabricCanvas().renderAll(),this.setUpMockupCanvas(),this.initSizeOfMockupCanvas(e))},this.removeMockupCanvas=()=>{this.fabricCanvasHandler.canvasEventListenersHandler.detachCanvasEventListeners(),this.fabricCanvasHandler.canvasEventListenersHandler.detachMockupCanvasEventListeners(),this.fabricCanvasHandler.getCurrentFabricCanvas().clear()},this.setUpMockupCanvas=()=>{this.fabricCanvasHandler.setMockupDrawableAreaCanvasSize(1e3,1e3),this.fabricCanvasHandler.workAreaHandler.setMockupCanvasSize(f.a.CANVAS_WIDTH_OFFSET_WHEN_RESIZING,!0),this.fabricCanvasHandler.workAreaHandler.setMockupCanvasOffset(),this.fabricCanvasHandler.workAreaHandler.mockupCanvasClip(),this.fabricCanvasHandler.getCurrentFabricCanvas().backgroundColor=this.fabricCanvasHandler.canvasDefaultBackground,this.fabricCanvasHandler.zoomPanHandler.updateMockupCanvasViewport(),this.fabricCanvasHandler.canvasEventListenersHandler.initCanvasEventListeners(),this.fabricCanvasHandler.canvasEventListenersHandler.initMockupCanvasEventListeners()},this.initSizeOfMockupCanvas=e=>{this.fabricCanvasHandler.setMockupDrawableAreaCanvasSize(this.currentMockup.sections[this.currentSectionIndex].placeholder_image_props.width,this.currentMockup.sections[this.currentSectionIndex].placeholder_image_props.height),this.fabricCanvasHandler.workAreaHandler.setMockupCanvasSize(f.a.CANVAS_WIDTH_OFFSET_WHEN_RESIZING,!0),this.fabricCanvasHandler.workAreaHandler.setMockupCanvasOffset(),this.fabricCanvasHandler.workAreaHandler.mockupCanvasClip(),this.fabricCanvasHandler.zoomPanHandler.updateMockupCanvasViewport(),this.fabricCanvasHandler.getCurrentFabricCanvas().backgroundColor=this.fabricCanvasHandler.canvasDefaultBackground,this.fabricCanvasHandler.guidelinesHanlder.initAligningGuidelines(this.fabricCanvasHandler.getCurrentFabricCanvas()),this.fabricCanvasHandler.guidelinesHanlder.initCenteringGuidelines(this.fabricCanvasHandler.getCurrentFabricCanvas(),e.nativeElement),this.fabricCanvasHandler.elementProps.canvasFill=this.currentMockup.sections[this.currentSectionIndex].placeholder_image_props.canvas_contents.background,this.fabricCanvasHandler.loadFontsAndThenJSONToCanvas(null,this.currentMockup.sections[this.currentSectionIndex].placeholder_image_props.canvas_contents,!1,!0,()=>{this.fabricCanvasHandler.isDesignLoading=!1})},this.cancelEditingMockupContents=()=>{this.changeFromMockupCanvasToMainCanvas(),this.resetValues()},this.getMockupSectionCanvasDataURL=()=>{const e=this.fabricCanvasHandler.getCurrentFabricCanvas().viewportTransform;this.fabricCanvasHandler.getCurrentFabricCanvas().viewportTransform=[1,0,0,1,0,0];let t=this.fabricCanvasHandler.getCurrentFabricCanvas().toDataURL({format:"png",multiplier:1});return this.fabricCanvasHandler.getCurrentFabricCanvas().viewportTransform=e,this.fabricCanvasHandler.getCurrentFabricCanvas().renderAll(),t},this.doneEditingMockupContents=e=>Object(c.a)(this,void 0,void 0,function*(){this.isSaving=!0,this.fabricCanvasHandler.imageCropHandler.isCrop=!1;let e=yield this.loopMockupSections(!1);console.log("after final renderedImage"),this.isRendering=!1,this.isSaving=!1,yield this.fabricCanvasHandler.imageHandler.changeImageSrcToCDN(e,this.currentMockupImage,f.a.MAIN_CANVAS),this.currentMockupImage.src=e,this.currentMockupGroup.imageUploading=!0;let t=this.fabricCanvasHandler.basicToolsHandler.removeAbnormalValuesFromJSON(this.fabricCanvasHandler.getCurrentFabricCanvas().toDatalessJSON(this.fabricCanvasHandler.objectPropertiesToInclude));this.currentMockupGroup.mockupData.sections[this.currentSectionIndex].placeholder_image_props.canvas_contents=t,this.fabricCanvasHandler.getCurrentFabricCanvas().renderAll(),this.changeFromMockupCanvasToMainCanvas(),this.resetValues(),setTimeout(()=>{this.fabricCanvasHandler.canvasEventListenersHandler.triggersWhenCanvasUpdated()},1e3)}),this.resetValues=()=>{for(let e of this.currentMockup.sections)delete e.warpedPlaceholderImageDataURL;this.currentMockup=null,this.currentMockupImage=null,this.currentMockupGroup=null,this.firstTimeRender=!0,this.finalRenderedImageSrc=null,this.fabricCanvasHandler.elementProps.isMockup=!1},this.debouncedRenderMockupImage=ie()(()=>Object(c.a)(this,void 0,void 0,function*(){this.isRendering||(this.finalRenderedImageSrc=yield this.loopMockupSections(!0)),this.isRendering=!1}),500,{leading:!1,trailing:!0}),this.loopMockupSections=e=>Object(c.a)(this,void 0,void 0,function*(){return new Promise((t,a)=>Object(c.a)(this,void 0,void 0,function*(){this.isRendering=!0;for(let t in this.currentMockup.sections)if(this.firstTimeRender){console.log("firstTimeRender");let a=this.currentMockup.sections[t],n=Number(t)==this.currentSectionIndex,i=yield this.generatePlaceholderImage(a,n),r=yield this.generateWarpedImage(i,a),s=yield this.generateFinalPlaceholderImageWithProps(r||i,a,e);a.warpedPlaceholderImageDataURL=s}else if(!this.firstTimeRender&&Number(t)==this.currentSectionIndex){console.log("!firstTimeRender");let a=this.currentMockup.sections[t],n=Number(t)==this.currentSectionIndex,i=yield this.generatePlaceholderImage(a,n),r=yield this.generateWarpedImage(i,a),s=yield this.generateFinalPlaceholderImageWithProps(r||i,a,e);a.warpedPlaceholderImageDataURL=s}let a=new l.fabric.StaticCanvas("mockup-preview-canvas");a.setWidth(this.currentMockup.base_mockup_props.width),a.setHeight(this.currentMockup.base_mockup_props.height),a.backgroundColor="rgba(0,0,0,0)",l.fabric.Image.fromURL(this.currentMockup.base_mockup_props.url,n=>Object(c.a)(this,void 0,void 0,function*(){n.set({left:this.currentMockup.base_mockup_props.left,top:this.currentMockup.base_mockup_props.top,width:this.currentMockup.base_mockup_props.width,height:this.currentMockup.base_mockup_props.height}),n.setCoords(),n.src=this.currentMockup.base_mockup_props.url,a.add(n);for(let e in this.currentMockup.sections){let t=this.currentMockup.sections[e];yield this.loadImageFromURL(a,t)}a.renderAll();let i=a.toDataURL({multiplier:e?.3:1,format:"png"});a.clear(),a.dispose(),this.firstTimeRender&&(this.firstTimeRender=!1),t(i)}),{crossOrigin:"anonymous"})}))}),this.generatePlaceholderImage=(e,t)=>Object(c.a)(this,void 0,void 0,function*(){return new Promise((a,n)=>{if(t){let e=this.fabricCanvasHandler.getCurrentFabricCanvas().viewportTransform;this.fabricCanvasHandler.getCurrentFabricCanvas().viewportTransform=[1,0,0,1,0,0];let t=this.fabricCanvasHandler.basicToolsHandler.getImageFromMockupCanvas(1,"png");this.fabricCanvasHandler.getCurrentFabricCanvas().viewportTransform=e,a(t)}else{let t=new l.fabric.StaticCanvas("offscreen-canvas");const n=e.placeholder_image_props.height;t.setWidth(e.placeholder_image_props.width),t.setHeight(n),t.backgroundColor=e.placeholder_image_props.canvas_contents.background,t.loadFromJSON(e.placeholder_image_props.canvas_contents,()=>{a(t.toDataURL({format:"png",multiplier:1})),t.clear(),t.dispose()})}})}),this.generateWarpedImage=(e,t)=>Object(c.a)(this,void 0,void 0,function*(){return new Promise((a,n)=>Object(c.a)(this,void 0,void 0,function*(){if(0==t.warp_coords.length)return a(e);let n=[];for(let e of t.warp_coords)n.push({x:e[0],y:e[1]});let i=new re(n,e,{width:t.placeholder_image_props.width,height:t.placeholder_image_props.height}),r=yield i.init();return a(r)}))}),this.generateFinalPlaceholderImageWithProps=(e,t,a)=>Object(c.a)(this,void 0,void 0,function*(){return new Promise((a,n)=>{let i=new l.fabric.StaticCanvas("offscreen-canvas");i.setWidth(t.clipmask_props.canvas_width),i.setHeight(t.clipmask_props.canvas_height),l.fabric.Image.fromURL(e,n=>{n.set({left:t.placeholder_image_props.left,top:t.placeholder_image_props.top}),n.src=e,l.fabric.Image.fromURL(t.ref_props.url,e=>{e.set({left:t.ref_props.left||0,top:t.ref_props.top||0}),e.src=t.ref_props.url,e.setCoords(),n.setCoords(),l.fabric.Image.fromURL(t.clipmask_props.url,t=>{t.set({left:0,top:0,absolutePositioned:!0}),n.clipPath=t,i.add(n),i.add(e),i.renderAll();let r=i.toDataURL({multiplier:1,format:"png"});i.clear(),i.dispose(),a(r)},{crossOrigin:"anonymous"})},{crossOrigin:"anonymous"})},{crossOrigin:"anonymous"})})}),this.loadImageFromURL=(e,t)=>Object(c.a)(this,void 0,void 0,function*(){return new Promise((a,n)=>{l.fabric.Image.fromURL(t.warpedPlaceholderImageDataURL,n=>{n.set({left:t.clipmask_props.left,top:t.clipmask_props.top}),n.setCoords(),n.src=t.warpedPlaceholderImageDataURL,e.add(n),a(n)})})}),this.fabricCanvasHandler=e,this._gaEventsService=n,this._mockupService=t,this._utilsService=a,this.currentMockupImage=null,this.isSaving=!1,this.isRendering=!1,this.editingMockupContentsMode=!1,this.finalRenderedImageSrc=null}deletePropsFromMockupData(e){delete e.mockupData.name,delete e.mockupData.is_pro,delete e.mockupData.is_published,delete e.mockupData.thumbnail,delete e.mockupData.created_at}uploadBase64MockupImage(){if(this.mockupGroupId&&this.fabricCanvasHandler.user){let e,t=this.fabricCanvasHandler.basicToolsHandler.getObjectById(this.mockupGroupId,!1)[0];t&&(e=t.getObjects().filter(e=>"base-image"===e.mockupImageType)[0]),(null==e?void 0:e.src.includes("base64"))&&t.imageUploading&&(t.set("imageUploading",!1),console.log("in image"),this._mockupService.updateUserMockupImage(t.mockupData.final_rendered_image_url||"",e.src,this.mockupGroupId).then(a=>Object(c.a)(this,void 0,void 0,function*(){console.log("after api call"),yield this.fabricCanvasHandler.imageHandler.changeImageSrcToCDN(a.final_rendered_image_url,e,f.a.MAIN_CANVAS),t.mockupData.final_rendered_image_url=a.final_rendered_image_url,e.src=a.final_rendered_image_url,e.setCoords(),this.fabricCanvasHandler.canvasEventListenersHandler.triggersWhenCanvasUpdated()})))}}changeFromMockupCanvasToMainCanvas(e=!0){this.fabricCanvasHandler.mockupsHandler.removeMockupCanvas(),this.fabricCanvasHandler.currentCanvasId=f.a.MAIN_CANVAS,this.fabricCanvasHandler.isMainCanvas=!0,this.fabricCanvasHandler.mockupsHandler.editingMockupContentsMode=!1,this.fabricCanvasHandler.workAreaHandler.setCanvasSize(null,!0),this.fabricCanvasHandler.zoomPanHandler.updateViewport(),e&&this.fabricCanvasHandler.getCurrentFabricCanvas().trigger("mockups:canvas:state:end",{})}updateMockup(e,t){this.isSaving=!0}}(this,this._mockupService,this._utilsService,this._gaEventsService),this.blendsHandler=new class{constructor(e){this.setBlend=(e,t=!1)=>{let a,n;this.setPreviousBlend(),t&&(this.previousBlend={bg:this.fabricCanvasHandler.getCurrentFabricCanvas().backgroundColor,head:[],sub:[],svg:[]}),t||(a={bg:this.fabricCanvasHandler.getCurrentFabricCanvas().backgroundColor,head:[],sub:[],svg:[]},n={bg:e.bg,head:[],sub:[],svg:[]}),this.fabricCanvasHandler.getCurrentFabricCanvas().backgroundColor=e.bg,this.fabricCanvasHandler.elementProps.canvasFill=e.bg;let i=[];this.fabricCanvasHandler.getCurrentFabricCanvas().getObjects().forEach(e=>{"textbox"===e.type&&i.push(e)});for(var r=ce()(i,e=>e.fontSize),s=0;s<r.length;s++)s==r.length-1?(t&&this.previousBlend.head.push({fill:r[s].fill,id:r[s].id}),t||(a.head.push({fill:r[s].fill,id:r[s].id}),n.head.push({fill:e.head,id:r[s].id})),r[s].fill=e.head):(t&&this.previousBlend.sub.push({fill:r[s].fill,id:r[s].id}),t||(a.sub.push({fill:r[s].fill,id:r[s].id}),n.sub.push({fill:e.sub,id:r[s].id})),r[s].fill=e.sub);this.fabricCanvasHandler.getCurrentFabricCanvas().getObjects().forEach(i=>{"path"!==i.type&&"rect"!==i.type&&"circle"!==i.type&&"polygon"!==i.type||(i.fill?(t&&this.previousBlend.svg.push({fill:i.fill,id:i.id}),t||(a.svg.push({fill:i.fill,id:i.id}),n.svg.push({fill:e.svg,id:i.id})),i.fill=e.svg):(t&&this.previousBlend.svg.push({stroke:i.stroke,id:i.id}),t||(a.svg.push({stroke:i.stroke,id:i.id}),n.svg.push({stroke:e.svg,id:i.id})),i.stroke=e.svg))}),this.fabricCanvasHandler.getCurrentFabricCanvas().renderAll(),t||this.fabricCanvasHandler.historyHandlerV.debouncedHistory([],[],[],{oldStageProps:a,newStageProps:n},y.BlendAdded)},this.setPreviousBlend=()=>{if(this.previousBlend){if(this.fabricCanvasHandler.getCurrentFabricCanvas().backgroundColor=this.previousBlend.bg,this.previousBlend.head.length>0){var e=this.fabricCanvasHandler.basicToolsHandler.getObjectById(this.previousBlend.head[0].id);if(e.length)for(var t in this.previousBlend.head[0])e[0].set(t,this.previousBlend.head[0][t]),e[0].setCoords()}this.previousBlend.sub.forEach(e=>{var t=this.fabricCanvasHandler.basicToolsHandler.getObjectById(e.id);if(t.length)for(var a in e)t[0].set(a,e[a]),t[0].setCoords()}),this.previousBlend.svg.forEach(e=>{var t=this.fabricCanvasHandler.basicToolsHandler.getObjectById(e.id);if(t.length)for(var a in e)t[0].set(a,e[a]),t[0].setCoords()}),this.fabricCanvasHandler.getCurrentFabricCanvas().renderAll(),this.previousBlend=null}},this.fabricCanvasHandler=e,this.previousBlend=null}}(this),this.brandPresetHandler=new class{constructor(e){this.applyBrandPresetToCanvas=(e,t)=>{this.fabricCanvasHandler.getCurrentFabricCanvas().trigger("before:canvas:state:changed",{}),this.fabricCanvasHandler.getCurrentFabricCanvas().discardActiveObject(),this.loadFontFamilies(e.preset_fonts).then(()=>{this.applyFontFamiliesAndBlendColors(e.preset_fonts,e.blend).then(a=>this.addLogo(e.logo,t)).then(e=>{this.fabricCanvasHandler.getCurrentFabricCanvas().trigger("after:canvas:state:changed",{})}).catch(e=>{throw e}).finally(()=>{})}).catch(()=>{this.applyFontFamiliesAndBlendColors(e.preset_fonts,e.blend).then(a=>this.addLogo(e.logo,t)).then(e=>{}).catch(e=>{throw e}).finally(()=>{})}).finally(()=>{})},this.loadFontFamilies=e=>new Promise((t,a)=>{let n=[],i=[],r=null==e?void 0:e.headline_font.font_name,s=null==e?void 0:e.text_font.webFontLoaderCommandName,o=null==e?void 0:e.text_font.font_name,c=null==e?void 0:e.text_font.font_file_url;e&&!(null==e?void 0:e.headline_font.font_file_url)?-1==n.indexOf(null==e?void 0:e.headline_font.webFontLoaderCommandName)&&n.push(e.headline_font):-1==i.indexOf(r)&&i.push(e.headline_font),e&&!c?-1==n.indexOf(s)&&n.push(e.text_font):-1==i.indexOf(o)&&i.push(e.text_font),this.fabricCanvasHandler.textElementHandler.loadFontsUsingWebfontloader(n,i).then(()=>{t(!0)}).catch(()=>{a(!0)}).finally(()=>{})}),this.addSvgImage=(e,t,a,n)=>{t.downloadSVGFileFromS3(e.logo_url).subscribe(t=>{l.fabric.loadSVGFromString(t,(t,i)=>{this.handleSVGWhenAdded(a,n,e,t,i)})},e=>{throw n("Error retreiving svg url"),e})},this.addPngOrJpgImage=(e,t,a)=>{l.fabric.Image.fromURL(e.logo_url,a=>{a.set(f.a.IMAGE_DEFAULT_PROPS),a.src=e.logo_url,a.id=this.fabricCanvasHandler.basicToolsHandler.randomId(),this.setLogoPlacement(a,e.logo_placement),this.fabricCanvasHandler.getCurrentFabricCanvas().add(a),this.fabricCanvasHandler.getCurrentFabricCanvas().renderAll(),this.fabricCanvasHandler.basicToolsHandler.selectItemAfterAdded(a),t(a)},{crossOrigin:"anonymous"})},this.setLogoPlacement=(e,t)=>{let a=this.fabricCanvasHandler.basicToolsHandler.getCurrentCanvasSize().width,n=this.fabricCanvasHandler.basicToolsHandler.getCurrentCanvasSize().height,i=a/n;a>=n?(i=a/n,e.scaleToWidth(a/(5*i))):(i=n/a,e.scaleToHeight(n/(5*i)));const r=n-e.getScaledHeight()-40,s=a-e.getScaledWidth()-40,o=a/2-e.getScaledWidth()/2,c=n/2-e.getScaledHeight()/2;"top-left"===t?(e.top=40,e.left=40):"top-right"===t?(e.top=40,e.left=s):"bottom-left"===t?(e.left=40,e.top=r):"bottom-right"===t?(e.top=r,e.left=s):"center"===t?(e.top=c,e.left=o):"top-center"===t?(e.top=40,e.left=o):"bottom-center"===t&&(e.top=r,e.left=o),e.setCoords()},this.fabricCanvasHandler=e}applyFontFamiliesAndBlendColors(e,t){return new Promise((a,n)=>{this.fabricCanvasHandler.getCurrentFabricCanvas().backgroundColor=t.bg;let i=[];this.fabricCanvasHandler.getCurrentFabricCanvas().getObjects().forEach(e=>{"textbox"===e.type&&i.push(e)});let r=ce()(i,e=>e.fontSize);for(var s=0;s<r.length;s++){let a=r[s];s==r.length-1?(a.fill=t.head,e.headline_font.font_file_url?(a.fontFamilyCommandName=e.headline_font.font_name,a.isCustomFont=!0,a.fontFileUrl=e.headline_font.font_file_url):(a.fontFamilyCommandName=e.headline_font.webFontLoaderCommandName,a.isCustomFont=!1),a.set("fontFamily",e.headline_font.font_name).set("fontWeight",null).setCoords()):(a.fill=t.sub,e.text_font.font_file_url?(a.fontFamilyCommandName=e.text_font.font_name,a.isCustomFont=!0,a.fontFileUrl=e.text_font.font_file_url):(a.fontFamilyCommandName=e.text_font.webFontLoaderCommandName,a.isCustomFont=!1),a.set("fontFamily",e.text_font.font_name).set("fontWeight",null).setCoords())}this.fabricCanvasHandler.getCurrentFabricCanvas().getObjects().forEach(e=>{"path"!==e.type&&"rect"!==e.type&&"circle"!==e.type&&"polygon"!==e.type||(e.fill?e.fill=t.svg:e.stroke=t.svg)}),this.fabricCanvasHandler.getCurrentFabricCanvas().renderAll(),a(!0)})}applyBlendColors(e){this.fabricCanvasHandler.blendsHandler.setBlend(e,!1)}addLogo(e,t){return new Promise((a,n)=>{if(!e.logo_url)return a(null);"image/svg+xml"===e.logo_mime_type?this.addSvgImage(e,t,a,n):this.addPngOrJpgImage(e,a,n)})}handleSVGWhenAdded(e,t,a,n,i){var r=l.fabric.util.groupSVGElements(n,i);if(1==n.length&&null!==a.logo_url)String(a.logo_url).includes("?ts")&&(a.logo_url=String(a.logo_url).split("?ts")[0]),r.sourcePath=a.logo_url+"?ts="+Date.now();else for(let s of n)s.id=this.fabricCanvasHandler.basicToolsHandler.randomId();r.perPixelTargetFind=!1,n.length>100&&(r.objectCaching=!0,r.noScaleCache=!0),n.length>1&&(r.groupType="pathsGroup"),r.strokeUniform=!0,r.id=this.fabricCanvasHandler.basicToolsHandler.randomId(),this.setLogoPlacement(r,a.logo_placement),this.fabricCanvasHandler.getCurrentFabricCanvas().add(r),this.fabricCanvasHandler.getCurrentFabricCanvas().requestRenderAll(),this.fabricCanvasHandler.basicToolsHandler.selectItemAfterAdded(r),e(r)}}(this),this.vectorHandler=new class{constructor(e){this.loadSVGFromString=(e,t,a=.7,n="grouped",i=!1)=>{l.fabric.loadSVGFromString(e,(e,r)=>{if("grouped"===n){let n=l.fabric.util.groupSVGElements(e,r);if(1==e.length&&null!==t)for(let t of e)t.id=this.fabricCanvasHandler.basicToolsHandler.randomId();this.setGroupedSVGObjectDefaultProps(e,n),this.handleGroupedSVGWhenAdding(n,a,i)}else this.handleUngroupedSVGObjectsWhenAdding(e,r)})},this.handleUngroupedSVGObjectsWhenAdding=(e,t)=>{e.forEach(e=>{e.id=this.fabricCanvasHandler.basicToolsHandler.randomId()}),this.fabricCanvasHandler.getCurrentFabricCanvas().renderOnAddRemove=!1,this.fabricCanvasHandler.getCurrentFabricCanvas().add.apply(this.fabricCanvasHandler.getCurrentFabricCanvas(),e),this.fabricCanvasHandler.getCurrentFabricCanvas().renderOnAddRemove=!0,this.fabricCanvasHandler.getCurrentFabricCanvas().renderAll()},this.handleGroupedSVGWhenAdding=(e,t=.7,a=!1)=>{e.id=this.fabricCanvasHandler.basicToolsHandler.randomId(),this.fabricCanvasHandler.basicToolsHandler.scaleWidthOfImageOrVectorAccordingToCanvasSize(e,t,a);let n=this.fabricCanvasHandler.basicToolsHandler.getCurrentCanvasSize().width,i=this.fabricCanvasHandler.basicToolsHandler.getCurrentCanvasSize().height;e.left=n/2-e.getScaledWidth()/2,e.top=i/2-e.getScaledHeight()/2,this.fabricCanvasHandler.getCurrentFabricCanvas().add(e),e.setCoords(),this.fabricCanvasHandler.basicToolsHandler.selectItemAfterAdded(e),this.fabricCanvasHandler.getCurrentFabricCanvas().requestRenderAll(),this.fabricCanvasHandler.getCurrentFabricCanvas().trigger("object:added:by:user",{target:e})},this.setGroupedSVGObjectDefaultProps=(e,t)=>{t.perPixelTargetFind=!1,e.length>100&&(t.objectCaching=!0,t.noScaleCache=!0),e.length>1&&(t.groupType="pathsGroup"),t.strokeUniform=!0},this.loadSVGFromURL=(e,t="grouped")=>{l.fabric.loadSVGFromURL(e,(a,n)=>{if("grouped"===t){let t=l.fabric.util.groupSVGElements(a,n);if(1==a.length&&null!==e)String(e).includes("?ts")&&(e=String(e).split("?ts")[0]),t.sourcePath=e+"?ts="+Date.now();else for(let e of a)e.id=this.fabricCanvasHandler.basicToolsHandler.randomId();this.setGroupedSVGObjectDefaultProps(a,t),this.handleGroupedSVGWhenAdding(t)}else this.handleUngroupedSVGObjectsWhenAdding(a,n)},null,{crossOrigin:"anonymous"})},this.isSVGString=e=>e.includes('xmlns="http://www.w3.org/2000/svg"')||e.includes("xmlns='http://www.w3.org/2000/svg'"),this.fabricCanvasHandler=e}}(this),this.pagesHandler=new class{constructor(e,t){this.maxPagesAllowed=50,this.pagesPanelShown=!1,this.addPage=()=>Object(c.a)(this,void 0,void 0,function*(){if(this.fabricCanvasHandler.dbEventsHandler.userDesign.pages.length==this.maxPagesAllowed)return;let e=ge(),t=new d.d({page_id:e,page_editor_json:new d.a});this.fabricCanvasHandler.dbEventsHandler.userDesign.pages.push(t);let a=this.fabricCanvasHandler.currentPageId;this.fabricCanvasHandler.currentPageId=e;let n={newPage:JSON.parse(JSON.stringify(t)),oldCurrentPageId:a};this.fabricCanvasHandler.getCurrentFabricCanvas().clear(),this.fabricCanvasHandler.getCurrentFabricCanvas().backgroundColor="#fff",this.fabricCanvasHandler.getCurrentFabricCanvas().renderAll(),this.fabricCanvasHandler.basicToolsHandler.updateCanvasBackgroundColor("#fff"),this.fabricCanvasHandler.historyHandlerV.debouncedHistory([],[],[],n,y.PageAdded);let i=yield this.generateThumbnail(t);t.page_thumbnail_base64=i,this._gaEventsService.eventEmitter("Pages feature","Add New Page","Add New Page")}),this.removePage=e=>Object(c.a)(this,void 0,void 0,function*(){if(1==this.fabricCanvasHandler.dbEventsHandler.userDesign.pages.length)return;let t=this.fabricCanvasHandler.dbEventsHandler.userDesign.pages.findIndex(t=>t.page_id===e.page_id);this.fabricCanvasHandler.dbEventsHandler.userDesign.pages.splice(t,1);let a=!1;if(e.page_id==this.fabricCanvasHandler.currentPageId){let e=this.fabricCanvasHandler.dbEventsHandler.userDesign.pages[0];this.fabricCanvasHandler.currentPageId=e.page_id,yield this.clearCanvasAndLoadJSON(e.page_editor_json),a=!0}let n={removedPage:JSON.parse(JSON.stringify(e)),removedPageIndex:t,isPageToRemoveCurrentPage:a};this.fabricCanvasHandler.historyHandlerV.debouncedHistory([],[],[],n,y.PageRemoved)}),this.duplicatePage=e=>Object(c.a)(this,void 0,void 0,function*(){if(this.fabricCanvasHandler.dbEventsHandler.userDesign.pages.length==this.maxPagesAllowed)return;let t=this.fabricCanvasHandler.dbEventsHandler.userDesign.pages.findIndex(t=>t.page_id===e.page_id)+1,a=JSON.parse(JSON.stringify(e));a.page_id=ge(),this.fabricCanvasHandler.dbEventsHandler.userDesign.pages.splice(t,0,a);let n=this.fabricCanvasHandler.currentPageId;this.fabricCanvasHandler.currentPageId=a.page_id,yield this.clearCanvasAndLoadJSON(a.page_editor_json);let i={duplicatedPage:JSON.parse(JSON.stringify(a)),newDuplicatedPageIndex:t,oldCurrentPageId:n};this.fabricCanvasHandler.historyHandlerV.debouncedHistory([],[],[],i,y.PageDuplicated)}),this.setPageName=(e,t)=>{e.length>100||""==e.trim()||(t.page_name=e,this.fabricCanvasHandler.canvasEventListenersHandler.triggersWhenCanvasUpdated(!1))},this.selectPage=e=>Object(c.a)(this,void 0,void 0,function*(){if(this.fabricCanvasHandler.currentPageId===e.page_id)return;let t=this.fabricCanvasHandler.currentPageId;this.fabricCanvasHandler.currentPageId=e.page_id,yield this.clearCanvasAndLoadJSON(JSON.parse(JSON.stringify(e.page_editor_json))),this.fabricCanvasHandler.historyHandlerV.debouncedHistory([],[],[],{oldPage:{pageId:t},newPage:{pageId:this.fabricCanvasHandler.currentPageId}},y.PageChanged)}),this.clearCanvasAndLoadJSON=e=>Object(c.a)(this,void 0,void 0,function*(){return new Promise(t=>{this.fabricCanvasHandler.getCurrentFabricCanvas().clear(),this.fabricCanvasHandler.getCurrentFabricCanvas().backgroundColor="#fff",this.fabricCanvasHandler.getCurrentFabricCanvas().backgroundColor=e.background,this.fabricCanvasHandler.basicToolsHandler.updateCanvasBackgroundColor(e.background),this.fabricCanvasHandler.enlivenAndAddObjectsToCanvas(e,!1,()=>{t()})})}),this.selectPageOption=(e,t)=>{"move-up"==t?this.movePage(e,"up"):"move-down"==t?this.movePage(e,"down"):"duplicate-page"==t?this.duplicatePage(e):"remove-page"==t&&this.removePage(e)},this.movePage=(e,t)=>{let a,n=this.fabricCanvasHandler.dbEventsHandler.userDesign.pages.findIndex(t=>t.page_id===e.page_id);if(0==n&&"up"==t)return;if(n==this.fabricCanvasHandler.dbEventsHandler.userDesign.pages.length-1&&"down"==t)return;a="up"==t?n-1:n+1;let i=this.fabricCanvasHandler.dbEventsHandler.userDesign.pages[a];this.fabricCanvasHandler.dbEventsHandler.userDesign.pages[a]=this.fabricCanvasHandler.dbEventsHandler.userDesign.pages[n],this.fabricCanvasHandler.dbEventsHandler.userDesign.pages[n]=i,this.fabricCanvasHandler.historyHandlerV.debouncedHistory([],[],[],{pageMovedId:e.page_id,oldIndex:n,newIndex:a},y.PageMoved)},this.generatePageThumbnails=()=>Object(c.a)(this,void 0,void 0,function*(){for(let e of this.fabricCanvasHandler.dbEventsHandler.userDesign.pages){let t=yield this.generateThumbnail(e);e.page_thumbnail_base64=t,e.export=!0}}),this.setExportValueOfPage=(e,t)=>{e.export=t},this.getPagesWithExportValueTrue=()=>this.fabricCanvasHandler.dbEventsHandler.userDesign.pages.filter(e=>1==e.export),this.pagesPanelToggle=()=>{this.pagesPanelShown=!this.pagesPanelShown,this.fabricCanvasHandler.zoomPanHandler.fitCanvasToScreen()},this.generateThumbnail=e=>Object(c.a)(this,void 0,void 0,function*(){return new Promise((t,a)=>{let n=new l.fabric.StaticCanvas("offscreen-canvas");const i=200/this.fabricCanvasHandler.dbEventsHandler.userDesign.canvas_doc_json.doc_height,r=Math.ceil(this.fabricCanvasHandler.dbEventsHandler.userDesign.canvas_doc_json.doc_width*i);n.setWidth(r),n.setHeight(200),n.setZoom(i),n.backgroundColor=e.page_editor_json.background,n.loadFromJSON(e.page_editor_json,()=>{t(n.toDataURL({format:"png",multiplier:1})),n.clear(),n.dispose()})})}),this.debouncedRenderThumbnailImage=ie()(()=>Object(c.a)(this,void 0,void 0,function*(){let e=yield this.renderThumbnail();this.fabricCanvasHandler.getCurrentPage().page_thumbnail_base64=e}),200,{leading:!1,trailing:!0}),this.renderThumbnail=()=>Object(c.a)(this,void 0,void 0,function*(){if(this.isThumbnailGenerating)return;this.isThumbnailGenerating=!0;const e=200/this.fabricCanvasHandler.dbEventsHandler.userDesign.canvas_doc_json.doc_height,t=Math.ceil(this.fabricCanvasHandler.dbEventsHandler.userDesign.canvas_doc_json.doc_width*e),a=this.fabricCanvasHandler.getCurrentFabricCanvas().width,n=this.fabricCanvasHandler.getCurrentFabricCanvas().height,i=this.fabricCanvasHandler.getCurrentFabricCanvas().viewportTransform;this.fabricCanvasHandler.getCurrentFabricCanvas().set({width:t,height:200}),this.fabricCanvasHandler.getCurrentFabricCanvas().viewportTransform=[e,0,0,e,0,0];let r=this.fabricCanvasHandler.getCurrentFabricCanvas().toDataURL({format:"png",multiplier:1});return this.fabricCanvasHandler.getCurrentFabricCanvas().set({width:a,height:n}),this.fabricCanvasHandler.getCurrentFabricCanvas().viewportTransform=i,this.fabricCanvasHandler.getCurrentFabricCanvas().renderAll(),this.isThumbnailGenerating=!1,r}),this.fabricCanvasHandler=e,this._gaEventsService=t,this.isThumbnailGenerating=!1}}(this,this._gaEventsService)},this.panMouseMoveHandler=e=>{if("panning"===this.panState&&this.isSpaceKeyPressed&&e&&e.e){let t=new l.fabric.Point(e.e.movementX,e.e.movementY);this.getCurrentFabricCanvas().relativePan(t)}},this.getCurrentFabricCanvas=()=>this.canvas[this.currentCanvasId],this.getCurrentPage=()=>this.dbEventsHandler.userDesign.pages.filter(e=>e.page_id==this.currentPageId)[0],this.getCurrentPageFromTemplateObject=()=>this.dbEventsHandler.templateDesign.pages.filter(e=>e.page_id==this.currentPageId)[0],this.getPageById=e=>{let t=this.dbEventsHandler.userDesign.pages.filter(t=>t.page_id==e);if(t.length)return t[0]},this.getIndexOfPageById=e=>this.dbEventsHandler.userDesign.pages.findIndex(t=>t.page_id==e),this.checkIfCurrentPageIsFirstPage=()=>this.getCurrentPage().page_id==this.dbEventsHandler.userDesign.pages[0].page_id,this.generateThumbnail=()=>Object(c.a)(this,void 0,void 0,function*(){return new Promise(e=>{let t=this.getCurrentFabricCanvas().viewportTransform;this.getCurrentFabricCanvas().viewportTransform=[1,0,0,1,0,0];let a=this.basicToolsHandler.getDesignThumbnailFromCanvas();return this.getCurrentFabricCanvas().viewportTransform=t,e(a)})}),this.getFontFamiliesFromJSON=(e,t,a,n)=>{for(let i of e)"group"===i.type?this.getFontFamiliesFromJSON(i.objects,t,a,n):"textbox"===i.type&&(i.isCustomFont?i.hasOwnProperty("fontFamilyCommandName")&&(a.push(i.fontFamilyCommandName),i.fontFileUrl&&n.push(`${b.a.apiUrl}/api/fonts/document-fonts/fonts.css?fontName=${i.fontFamily}&fontFileUrl=${i.fontFileUrl}`)):i.hasOwnProperty("fontFamilyCommandName")&&-1==t.indexOf(i.fontFamilyCommandName)&&t.push(i.fontFamilyCommandName))},this.objectClipPathIssueFixed=e=>{for(let t of e)"group"===t.type?this.objectClipPathIssueFixed(t.objects):"path"===t.type&&t.clipPath&&l.fabric.util.enlivenObjects([t.clipPath],e=>{t.clipPath=e[0]},null)},this.loadJSONToCanvas=(e,t,a)=>{if(null!=e){for(var n of(this.basicToolsHandler.removeEmptySrcImagesFromJSON(e),this.getCurrentFabricCanvas().backgroundColor=e.background,this.basicToolsHandler.updateCanvasBackgroundColor(e.background),e.objects))"image"==n.type&&(String(n.src).includes("?ts")&&(n.src=String(n.src).split("?ts")[0]),String(n.src).includes("cdn.pixelied.com")&&(n.src=n.src+"?ts="+Date.now())),"path"===n.type&&n.sourcePath&&null!=n.sourcePath&&(String(n.sourcePath).includes("?ts")&&(n.sourcePath=String(n.sourcePath).split("?ts")[0]),n.sourcePath=`${n.sourcePath}?ts=${Date.now()}`,n.sourcePath.includes("null")&&(console.log(n.sourcePath),e.objects=e.objects.filter(function(e){return e!==n})));this.enlivenAndAddObjectsToCanvas(e,t,a)}},this.addTextTemplateToCanvas=(e,t)=>{null!=e&&(this.getCurrentFabricCanvas().trigger("before:canvas:state:changed",{}),l.fabric.util.enlivenObjects(e.objects,e=>{e.forEach(e=>{"i-text"!=e.type&&"textbox"!=e.type||(null==e.stroke&&(e.strokeWidth=0),e.id=this.basicToolsHandler.randomId(),this.getCurrentFabricCanvas().add(e))}),this.getCurrentFabricCanvas().discardActiveObject();var a=new l.fabric.ActiveSelection(e,{canvas:this.getCurrentFabricCanvas()});let n=this.basicToolsHandler.getCurrentCanvasSize().width,i=this.basicToolsHandler.getCurrentCanvasSize().height;a.left=n/2-a.getScaledWidth()/2,a.top=i/2-a.getScaledHeight()/2,a.setCoords(),this.getCurrentFabricCanvas().setActiveObject(a),this.getCurrentFabricCanvas().requestRenderAll(),this.getCurrentFabricCanvas().trigger("after:canvas:state:changed",{}),t()},null))}}setDrawableAreaCanvasSize(e,t){this.drawableAreaCanvasSize.width=e,this.drawableAreaCanvasSize.height=t}setMockupDrawableAreaCanvasSize(e,t){this.mockupDrawableAreaCanvasSize.width=e,this.mockupDrawableAreaCanvasSize.height=t}setPreviousDrawableAreaCanvasSize(e,t){this.previousdrawableAreaCanvasSize.width=e,this.previousdrawableAreaCanvasSize.height=t}toolSelectedFromTopToolbar(e){this.toolSelected=this.toolSelected==e?null:e}setObjectEditingModeAndToggleSidebar(e,t){this.toolSelectedFromTopToolbar(e);const a=this._utilsService.activeSidebarItem.value;this.sidebarItemClicked(a?this._utilsService.activeSidebarItem.value.sidebarItemId===e?{previousSidebarItemId:a.previousSidebarItemId,previousSidebarItemTitle:a.previousSidebarItemTitle,previousSidebarItemType:a.previousSidebarItemType,sidebarItemId:a.previousSidebarItemId,sidebarItemTitle:a.previousSidebarItemTitle,sidebarItemType:f.a.SIDEBAR_ITEM_TYPES.DefaultSidebarItem}:{previousSidebarItemId:a.sidebarItemType===f.a.SIDEBAR_ITEM_TYPES.ObjectEditingSidebarItem?a.previousSidebarItemId:a.sidebarItemId,previousSidebarItemTitle:a.sidebarItemType===f.a.SIDEBAR_ITEM_TYPES.ObjectEditingSidebarItem?a.previousSidebarItemTitle:a.sidebarItemTitle,previousSidebarItemType:a.sidebarItemType===f.a.SIDEBAR_ITEM_TYPES.ObjectEditingSidebarItem?a.previousSidebarItemType:a.sidebarItemType,sidebarItemId:e,sidebarItemTitle:t,sidebarItemType:f.a.SIDEBAR_ITEM_TYPES.ObjectEditingSidebarItem}:{previousSidebarItemId:null,previousSidebarItemTitle:null,previousSidebarItemType:null,sidebarItemId:e,sidebarItemTitle:t,sidebarItemType:f.a.SIDEBAR_ITEM_TYPES.ObjectEditingSidebarItem})}objectSelection(e){let t=e;if(this.selected=t,this.imageCropHandler.isCrop)return void(this.objectType="image");const a=this._utilsService.activeSidebarItem.value;if(a&&(a.sidebarItemType===f.a.SIDEBAR_ITEM_TYPES.ObjectEditingSidebarItem?("textbox"!==t.type&&a.sidebarItemId===Se.TextProps||"image"!==t.type&&a.sidebarItemId===Se.ImageEffectProps||("group"===t.type||"image"===t.type||"activeSelection"===t.type)&&a.sidebarItemId===Se.FillOrBorder)&&(this.toolSelected=null,this.sidebarItemClicked({previousSidebarItemId:a.previousSidebarItemId,previousSidebarItemTitle:a.previousSidebarItemTitle,previousSidebarItemType:a.previousSidebarItemType,sidebarItemId:a.previousSidebarItemId,sidebarItemTitle:a.previousSidebarItemTitle,sidebarItemType:f.a.SIDEBAR_ITEM_TYPES.DefaultSidebarItem})):"textbox"===t.type&&(null==a?void 0:a.sidebarItemId)!==Se.TextProps&&(this.toolSelected=Se.TextProps,this.sidebarItemClicked({previousSidebarItemId:a.sidebarItemId,previousSidebarItemTitle:a.sidebarItemTitle,previousSidebarItemType:a.sidebarItemType,sidebarItemId:Se.TextProps,sidebarItemTitle:"Text Properties",sidebarItemType:f.a.SIDEBAR_ITEM_TYPES.ObjectEditingSidebarItem}))),this.basicToolsHandler.getId(),this.basicToolsHandler.getOpacity(),this.basicToolsHandler.getLeft(),this.basicToolsHandler.getTop(),this.basicToolsHandler.getElementHeight(),this.basicToolsHandler.getElementWidth(),this.basicToolsHandler.getStroke(),this.basicToolsHandler.getShadowProperties(),"group"!==t.type&&"activeSelection"!==t.type&&t)switch(this.elementProps.groupButton=!1,this.elementProps.unGroupButton=!1,t.type){case"path":this.objectType="Path",this.basicToolsHandler.getElementFill();break;case"polygon":this.objectType="Polygon",this.basicToolsHandler.getElementFill();break;case"rect":case"circle":case"triangle":this.objectType="Shape",this.basicToolsHandler.getElementFill();break;case"textbox":this.objectType="Text",this.textElementHandler.getLineHeight(),this.textElementHandler.getTextAttributes(),this.textElementHandler.getCharSpacing(),this.textElementHandler.getBold(),this.textElementHandler.getFontStyle(),this.basicToolsHandler.getElementFill(),this.textElementHandler.getTextAlign(),this.textElementHandler.getFontFamily(),this.textElementHandler.getFontSize(),this.basicToolsHandler.disableMiddleTopAndBottomControls(t);break;case"image":this.objectType="Image",this.imageHandler.getSelectedImageFilter(),this.imageHandler.getImageEffects(),this.imageHandler.getImageBlendMode()}else"group"==t.type&&t?(this.objectType="Group",this.elementProps.groupButton=!1,this.elementProps.unGroupButton=!0,this.basicToolsHandler.getSVGColors(),t.mockupId&&(2==t.getObjects().length?(this.mockupsHandler.currentMockupImage=t.getObjects()[1],this.mockupsHandler.mockupBaseImageId=t.getObjects()[1].id):(this.mockupsHandler.currentMockupImage=t.getObjects()[0],this.mockupsHandler.mockupBaseImageId=t.getObjects()[0].id),this.mockupsHandler.currentMockup=t.mockupData,this.mockupsHandler.currentMockupGroup=t,this.mockupsHandler.mockupGroupId=t.id,this.elementProps.mockupData=t.mockupData,this.elementProps.isMockup=!0)):"activeSelection"==t.type&&(this.objectType="ActiveSelection",this.elementProps.groupButton=!0,this.elementProps.unGroupButton=!1,t.lockUniScaling=!0)}sidebarItemClicked(e){this._utilsService.sendActiveSidebarItem(e)}webFontLoadFonts(e,t,a){return new Promise(n=>{let i={active:()=>n(),inactive:()=>(console.error("Inactive fonts"),n())};if(0!==e.length&&(i.google={families:e}),0!==t.length&&(i.custom={families:t,urls:a}),0==e.length&&0==t.length)return n();setTimeout(()=>{g.load(i)},500)})}loadFontsAndThenJSONToCanvas(e,t,a,n=!0,i){return Object(c.a)(this,void 0,void 0,function*(){let r=[],s=[],o=[];if(e)for(let t of e)this.getFontFamiliesFromJSON(t.page_editor_json.objects,r,s,o);else this.getFontFamiliesFromJSON(t.objects,r,s,o);yield this.webFontLoadFonts(r,s,o),a?this.addTextTemplateToCanvas(t,i):this.loadJSONToCanvas(t,n,i)})}enlivenAndAddObjectsToCanvas(e,t,a){this.lockedObjects=!1,this.objectClipPathIssueFixed(e.objects),l.fabric.util.enlivenObjects(e.objects,e=>{e.forEach(e=>{if(e.locked&&(this.lockedObjects=!0,e.selectable=!1,e.evented=!1),null==e.stroke&&(e.strokeWidth=0),t&&(e.id=this.basicToolsHandler.randomId()),"group"==e.type&&(e.getObjects().forEach(e=>{t&&(e.id=this.basicToolsHandler.randomId())}),e.getObjects().length>10&&(e.perPixelTargetFind=!1)),"i-text"!=e.type&&"textbox"!=e.type||(e.padding=0),"image"==e.type)if(e.perPixelTargetFind=!0,""==e.src)console.log("empty src image2");else if(b.a.production)if(e.src.includes("https://vl-graphics-bucket-s3.s3.amazonaws.com/")){let t=e.src.replace("https://vl-graphics-bucket-s3.s3.amazonaws.com/","https://cdn.pixelied.com/");this.basicToolsHandler.changeImageSrcToCDN(t,e,null),e.src=t,this.getCurrentFabricCanvas().add(e)}else if(e.src.includes("http://vl-graphics-bucket-s3.s3.amazonaws.com/")){let t=e.src.replace("http://vl-graphics-bucket-s3.s3.amazonaws.com/","https://cdn.pixelied.com/");this.basicToolsHandler.changeImageSrcToCDN(t,e,null),e.src=t,this.getCurrentFabricCanvas().add(e)}else this.getCurrentFabricCanvas().add(e);else this.getCurrentFabricCanvas().add(e);else this.getCurrentFabricCanvas().add(e)}),this.getCurrentFabricCanvas().renderAll(),a()},null)}initializeNewFilter(){}}return e.\u0275fac=function(t){return new(t||e)(r.hc(P.a),r.hc(fe.a),r.hc(ve.a),r.hc(Ce),r.hc(xe),r.hc(F.a),r.hc(He.a),r.hc(E.a),r.hc(T.k),r.hc(ye.a),r.hc(k.i))},e.\u0275prov=r.Qb({token:e,factory:e.\u0275fac}),e})();class Oe{constructor(e,t){this.width=1e3,this.height=1e3,this.width=Number(e),this.height=Number(t)}}class Ie{}var Pe=a("R5/Y");const Te={"border-tool":{intro:'<span class="title">Border Tool</span><span class="sub-text">Customize border colors and weight from here</span>'},"shadow-tool":{intro:'<span class="title">Shadow Tool</span><span class="sub-text">Customize shadow color and distance from here</span>'},"flip-tool":{intro:'<span class="title">Flip Tool</span><span class="sub-text">Flip your image vertically or horizontally from here</span>'},"opacity-tool":{intro:'<span class="title">Opacity Tool</span><span class="sub-text">Increase or decrease the transparency of image from here</span>'},"crop-tool":{intro:'<span class="title">Crop Tool</span><span class="sub-text">Use this tool to crop your images</span>'},"zoom-tool":{intro:'<span class="title">Zoom Tool</span><span class="sub-text">Use this tool to zoom in or out your images</span>'},"resize-design-tool":{intro:'<span class="title">Resize Image</span><span class="sub-text">Use the resize tool to change the dimensions of your image</span>'},"remove-image-background-tool":{intro:'<span class="title">Remove Image Background</span><span class="sub-text">Use this tool to remove the background of your image</span>'},"image-filters-effects":{intro:'<span class="title">Image Filters & Effects</span><span class="sub-text">Choose from a wide variety of filters & effects to create eye-catching images</span>'},"mockup-tool":{intro:'<span class="title">Edit Mockup</span><span class="sub-text">Quick mockup <a style="color: white; font-weight: 700; text-decoration: underline;" href="https://www.loom.com/share/5e8e6c229645405789ad8492d18d06ed" target="_blank" rel="noopener">tutorial</a></span>'}};var Ee=a("E+oP"),Fe=a.n(Ee);const Ae=()=>{l.fabric.Image.filters.Vibrance=l.fabric.util.createClass(l.fabric.Image.filters.BaseFilter,{type:"Vibrance",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uVibrance;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nfloat max = max(color.r, max(color.g, color.b));\nfloat avg = (color.r + color.g + color.b) / 3.0;\nfloat amt = (abs(max - avg) * 2.0) * uVibrance;\ncolor.r += max != color.r ? (max - color.r) * amt : 0.00;\ncolor.g += max != color.g ? (max - color.g) * amt : 0.00;\ncolor.b += max != color.b ? (max - color.b) * amt : 0.00;\ngl_FragColor = color;\n}",vibrance:0,mainParameter:"vibrance",applyTo2d:function(e){if(0!==this.vibrance){var t,a,n,i=e.imageData.data,r=i.length,s=-this.vibrance;for(t=0;t<r;t+=4)a=Math.max(i[t],i[t+1],i[t+2]),n=2*Math.abs(a-(i[t]+i[t+1]+i[t+2])/3)/255*s,i[t]+=a!==i[t]?(a-i[t])*n:0,i[t+1]+=a!==i[t+1]?(a-i[t+1])*n:0,i[t+2]+=a!==i[t+2]?(a-i[t+2])*n:0}},getUniformLocations:function(e,t){return{uVibrance:e.getUniformLocation(t,"uVibrance")}},sendUniformData:function(e,t){e.uniform1f(t.uVibrance,-this.vibrance)}}),l.fabric.Image.filters.Vibrance.fromObject=l.fabric.Image.filters.BaseFilter.fromObject},Me=()=>{l.fabric.Image.filters.Redify=l.fabric.util.createClass(l.fabric.Image.filters.BaseFilter,{type:"Redify",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uThreshold;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ncolor.g = 0.0;\ncolor.b = 0.0;\ngl_FragColor = color;\n}",threshold:.5,mainParameter:"threshold",applyTo2d:function(e){var t=e.imageData.data,a=255-this.threshold;for(let n=0;n<t.length;n+=4)t[n]<a&&t[n+1]<a&&t[n+2]<a&&(t[n+1]=0,t[n+2]=0)},getUniformLocations:function(e,t){return{uThreshold:e.getUniformLocation(t,"uThreshold")}},sendUniformData:function(e,t){e.uniform1f(t.uThreshold,this.threshold)}}),l.fabric.Image.filters.Redify.fromObject=l.fabric.Image.filters.BaseFilter.fromObject,l.fabric.Image.filters.Bluify=l.fabric.util.createClass(l.fabric.Image.filters.BaseFilter,{type:"Bluify",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ncolor.r = 0.0;\ncolor.g = 0.0;\ngl_FragColor = color;\n}",applyTo2d:function(e){var t=e.imageData.data;for(let a=0;a<t.length;a+=4)t[a]=0,t[a+1]=0}}),l.fabric.Image.filters.Bluify.fromObject=l.fabric.Image.filters.BaseFilter.fromObject,l.fabric.Image.filters.Greenify=l.fabric.util.createClass(l.fabric.Image.filters.BaseFilter,{type:"Greenify",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ncolor.r = 0.0;\ncolor.b = 0.0;\ngl_FragColor = color;\n}",applyTo2d:function(e){var t=e.imageData.data;for(let a=0;a<t.length;a+=4)t[a]=0,t[a+2]=0}}),l.fabric.Image.filters.Greenify.fromObject=l.fabric.Image.filters.BaseFilter.fromObject,l.fabric.Image.filters.Vignette=l.fabric.util.createClass(l.fabric.Image.filters.BaseFilter,{type:"Vignette",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float size;\nuniform float amount;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nfloat dist = distance(vTexCoord, vec2(0.5, 0.5));\ncolor.rgb *= smoothstep(0.8, size * 0.799, dist * (amount + size));\ngl_FragColor = color;\n}",options:{size:1,amount:1},mainParameter:"options",getUniformLocations:function(e,t){return{size:e.getUniformLocation(t,"size"),amount:e.getUniformLocation(t,"amount")}},sendUniformData:function(e,t){e.uniform1f(t.size,this.options.size),e.uniform1f(t.amount,this.options.amount)}}),l.fabric.Image.filters.Vignette.fromObject=l.fabric.Image.filters.BaseFilter.fromObject};var De=a("mJee"),je=a("iSS8"),Le=a("NFeN"),Ze=a("wf0l"),Re=a("VAjR");function ze(e,t){if(1&e){const e=r.bc();r.ac(0,"div",4),r.kc("click",function(){return r.Ic(e),r.oc().selectSidebarNavItem("Recent Files")}),r.Vb(1,"img",43),r.Vb(2,"img",44),r.ac(3,"span"),r.Qc(4,"Recent Files"),r.Zb(),r.Zb()}if(2&e){const e=r.oc();r.Mb("active","Recent Files"==e.selectedSidebarNavItem),r.Hb(1),r.uc("hidden","Recent Files"==e.selectedSidebarNavItem),r.Hb(1),r.uc("hidden","Recent Files"!=e.selectedSidebarNavItem)}}function Be(e,t){if(1&e){const e=r.bc();r.ac(0,"div",45),r.ac(1,"h2",46),r.kc("click",function(){return r.Ic(e),r.oc().selectMainAreaNavItem("Upload Image")}),r.Qc(2," Upload Image "),r.Zb(),r.ac(3,"div",46),r.kc("click",function(){return r.Ic(e),r.oc().selectMainAreaNavItem("Templates")}),r.Qc(4," Templates "),r.Zb(),r.Zb()}if(2&e){const e=r.oc();r.Hb(1),r.Mb("active","Upload Image"==e.selectedMainAreaNavItem),r.Hb(2),r.Mb("active","Templates"==e.selectedMainAreaNavItem)}}function Ue(e,t){1&e&&(r.ac(0,"div",47),r.ac(1,"div",48),r.Qc(2,"Recent Files"),r.Zb(),r.Zb())}function Ne(e,t){if(1&e){const e=r.bc();r.ac(0,"div",49),r.kc("click",function(){r.Ic(e);const a=t.$implicit;return r.oc().changeFormat(a)}),r.ac(1,"span",50),r.Qc(2),r.Zb(),r.Zb()}if(2&e){const e=t.$implicit;r.Hb(2),r.Rc(e.title)}}function Ve(e,t){if(1&e){const e=r.bc();r.ac(0,"div",51),r.kc("click",function(){r.Ic(e);const a=t.$implicit;return r.oc().selectTag(a)}),r.ac(1,"span"),r.Qc(2),r.Zb(),r.Zb()}if(2&e){const e=t.$implicit,a=r.oc();r.Mb("active",e==a.selectedTag),r.Hb(2),r.Rc(e)}}function We(e,t){if(1&e&&(r.ac(0,"div",52),r.ac(1,"div",53),r.ac(2,"a",54),r.Vb(3,"img",55),r.ac(4,"span",56),r.Qc(5,"Blank design"),r.Zb(),r.Zb(),r.Zb(),r.Zb()),2&e){const e=r.oc();r.Nc("width",(null==e.templates.list[0]?null:e.templates.list[0].thumbnail_height)<310?270:162,"px"),r.Hb(1),r.Nc("padding-bottom",(null==e.templates.list[0]||null==e.templates.list[0].canvas_doc_json?null:e.templates.list[0].canvas_doc_json.doc_height)/(null==e.templates.list[0]||null==e.templates.list[0].canvas_doc_json?null:e.templates.list[0].canvas_doc_json.doc_width)*100,"%"),r.Hb(1),r.vc("href","/editor?width="+(null==e.selectedFormatObj||null==e.selectedFormatObj.dimensions?null:e.selectedFormatObj.dimensions.doc_width)+"&height="+(null==e.selectedFormatObj||null==e.selectedFormatObj.dimensions?null:e.selectedFormatObj.dimensions.doc_height)+"&format_category="+(null==e.selectedFormatObj?null:e.selectedFormatObj.format_category),r.Lc)}}function Ge(e,t){if(1&e){const e=r.bc();r.ac(0,"div",57),r.kc("click",function(){r.Ic(e);const a=t.$implicit;return r.oc().addTemplateToCanvas(a)}),r.ac(1,"div",53),r.ac(2,"div",58),r.Vb(3,"img",59),r.Zb(),r.Zb(),r.Zb()}if(2&e){const e=t.$implicit;r.Nc("width",e.thumbnail_height<310?270:162,"px"),r.Hb(1),r.Nc("padding-bottom",(null==e.canvas_doc_json?null:e.canvas_doc_json.doc_height)/(null==e.canvas_doc_json?null:e.canvas_doc_json.doc_width)*100,"%"),r.Hb(2),r.uc("lazyLoad",e.thumbnail_url)}}function Qe(e,t){1&e&&(r.ac(0,"div",60),r.Vb(1,"div",61),r.Zb())}function $e(e,t){1&e&&(r.ac(0,"div",60),r.Vb(1,"div",61),r.Zb())}function qe(e,t){if(1&e){const e=r.bc();r.ac(0,"div",62),r.Vb(1,"img",63),r.ac(2,"span",64),r.Qc(3,"No files yet"),r.Zb(),r.ac(4,"span",65),r.Qc(5,"Start by uploading your first image"),r.Zb(),r.ac(6,"button",66),r.kc("click",function(){return r.Ic(e),r.oc().showUploadFileArea()}),r.Vb(7,"img",19),r.Qc(8," Upload Image "),r.Zb(),r.Zb()}}function Ye(e,t){if(1&e){const e=r.bc();r.ac(0,"div",67),r.kc("click",function(){r.Ic(e);const a=t.$implicit;return r.oc().addUserUploadToCanvas(a)}),r.ac(1,"div",58),r.Vb(2,"img",68),r.Zb(),r.Zb()}if(2&e){const e=t.$implicit;r.Hb(2),r.uc("src",e.thumbnail_details.url,r.Lc)}}function Xe(e,t){1&e&&(r.ac(0,"div",60),r.Vb(1,"div",61),r.Zb())}function Je(e,t){1&e&&(r.ac(0,"div",62),r.Vb(1,"img",63),r.ac(2,"span",64),r.Qc(3,"No files yet"),r.Zb(),r.ac(4,"span",65),r.Qc(5,"Start by uploading your first image"),r.Zb(),r.ac(6,"button",18),r.Vb(7,"img",19),r.Qc(8," Upload Image "),r.Zb(),r.Zb())}function Ke(e,t){if(1&e&&(r.ac(0,"div",69),r.ac(1,"a",70),r.ac(2,"div",58),r.Vb(3,"img",68),r.Zb(),r.ac(4,"div",71),r.ac(5,"h5",72),r.Qc(6),r.Zb(),r.ac(7,"p",73),r.Qc(8),r.pc(9,"uppercase"),r.pc(10,"extractNameFromUrl"),r.Zb(),r.Zb(),r.Zb(),r.Zb()),2&e){const e=t.$implicit;r.Hb(1),r.vc("href","/editor/design/"+e._id,r.Lc),r.Hb(2),r.uc("src",e.thumbnail_url,r.Lc),r.Hb(3),r.Sc(" ",e.design_name," "),r.Hb(2),r.Vc(" ",r.qc(9,7,r.qc(10,9,e.format_category))," ",e.canvas_doc_json.doc_width," x ",e.canvas_doc_json.doc_height," ",e.canvas_doc_json.doc_units," ")}}let et=(()=>{class e{constructor(e,t,a,n,i,r,s,o,c){this._templatesService=e,this._editorService=t,this._designsService=a,this.fabricCanvasHandler=n,this._gaEventsService=i,this._utilsService=r,this._modalService=s,this._helpersService=o,this._toastService=c,this.selectedSidebarNavItem="New Design",this.selectedMainAreaNavItem="Upload Image",this.selectedTag="All Templates",this.tags=[],this.uploads={loading:!1,noDataToShow:!1,loaded:!1,list:[]},this.designs={loading:!1,noDataToShow:!1,loaded:!1,list:[]},this.templates={loading:!1,noDataToShow:!1,loaded:!1,list:[]},this.tagSuggestions=["All Templates","Food","Birthday","Education","Real Estate","Business","Hiring","Sale","Health","Fashion","Travel","Fitness"]}ngOnInit(){this.selectedFormatObj=this.fabricCanvasHandler.dbEventsHandler.formatsList[0]}changeFormat(e){this.selectedFormatObj=e;let t=this.selectedTag;"All Templates"==t&&(t=""),this.getTemplatesByTagsAndCategory(1,50,t,"",this.selectedFormatObj.format_category)}selectTag(e){this.selectedTag=e,"All Templates"==e&&(e=""),this.getTemplatesByTagsAndCategory(1,50,e,"",this.selectedFormatObj.format_category)}selectSidebarNavItem(e){this.selectedSidebarNavItem=e,this.uploads.loaded||"Recent Files"!=this.selectedSidebarNavItem||this.getUserUploads(),this.designs.loaded||"Recent Files"!=this.selectedSidebarNavItem||this.getUserDesigns()}selectMainAreaNavItem(e){this.selectedMainAreaNavItem=e;let t=this.selectedTag;"All Templates"==t&&(t=""),this.templates.loaded||this.getTemplatesByTagsAndCategory(1,50,t,"",this.selectedFormatObj.format_category)}showUploadFileArea(){this.selectedSidebarNavItem="New Design",this.selectedMainAreaNavItem="Upload Image"}getTemplatesByTagsAndCategory(e,t,a,n,i){this.templates.loading=!0,this.templates.list=[],this._templatesService.getTemplatesByTagsAndCategoryFromTemplatesPage(e,t,a,n,i,"yes").subscribe(e=>{this.templates.loading=!1,this.templates.loaded=!0,this.templates.list=e.templates},e=>{throw this.templates.loading=!1,e})}getUserUploads(){var e;this.uploads.loading=!0,this._editorService.getUserUploadsByUserId(1,5,this.fabricCanvasHandler.user._id,(null===(e=this.fabricCanvasHandler.currentWorkspace)||void 0===e?void 0:e._id)||null,null).subscribe(e=>{if(0==e.length)return this.uploads.noDataToShow=!0,void(this.uploads.loading=!1);this.uploads.loading=!1,this.uploads.loaded=!0,this.uploads.list=e},e=>{throw this.uploads.loading=!1,e})}getUserDesigns(){var e;this.designs.loading=!0,this._designsService.getAllUserDesigns(this.fabricCanvasHandler.user._id,(null===(e=this.fabricCanvasHandler.currentWorkspace)||void 0===e?void 0:e._id)||null,null,1,5,"Last viewed - Newest").subscribe(e=>{if(0==e.length)return this.designs.noDataToShow=!0,void(this.designs.loading=!1);this.designs.loading=!1,this.designs.loaded=!0,this.designs.list=e},e=>{throw this.designs.loading=!1,e})}addTemplateToCanvas(e){this.fabricCanvasHandler.currentCanvasId!==f.a.MOCKUP_CANVAS&&(this._utilsService.sendDataToSend({type:"add-template",objectData:e._id}),this._modalService.dismissAll(),this._gaEventsService.eventEmitter("Image Upload Modal","Template Selected",`format: ${e.format_category}`))}addUserUploadToCanvas(e){var t,a;"image/svg+xml"===e.mime_type?this._editorService.downloadSVGFileFromS3(e.original_asset_details.url).subscribe(t=>{var a,n;this._utilsService.sendGetStartedImageData({src:t||"",isVectorImage:!0,width:(null===(a=e.original_asset_details)||void 0===a?void 0:a.width)||1e3,height:(null===(n=e.original_asset_details)||void 0===n?void 0:n.height)||1e3}),this._modalService.dismissAll()},e=>{throw e}):(this._utilsService.sendGetStartedImageData({src:e.original_asset_details.url||"",isVectorImage:!1,width:(null===(t=e.original_asset_details)||void 0===t?void 0:t.width)||1e3,height:(null===(a=e.original_asset_details)||void 0===a?void 0:a.height)||1e3}),this._modalService.dismissAll())}closeModal(){this._modalService.dismissAll()}fileDrop(e){this.readImageFile(e)}readImageFile(e){if(e&&e.length>0){const t=e[0];if(!this._helpersService.ifFileIsOfImageType(t))return void this._toastService.show("Only SVG, PNG and JPG files are allowed",{classname:"bg-danger text-light",delay:5e3});if(!this._helpersService.checkFileSize(t))return void this._toastService.show(`File size cannot be more than ${f.a.MAX_IMAGE_FILE_UPLOAD} MB`,{classname:"bg-danger text-light",delay:5e3});let a=t.type;if(-1!==["image/png","image/jpg","image/jpeg","image/webp"].indexOf(a)){const e=new FileReader;e.readAsDataURL(t),e.onload=()=>{var t=new Image;t.src=e.result,t.onload=()=>{let e=t.width,n=t.height;console.log(e),console.log(n),e>n&&e>f.a.MAX_IMAGE_UPLOAD_WIDTH?(n*=f.a.MAX_IMAGE_UPLOAD_WIDTH/e,e=f.a.MAX_IMAGE_UPLOAD_WIDTH):n>e&&n>f.a.MAX_IMAGE_UPLOAD_HEIGHT&&(e*=f.a.MAX_IMAGE_UPLOAD_HEIGHT/n,n=f.a.MAX_IMAGE_UPLOAD_HEIGHT),console.log(e),console.log(n),this._utilsService.sendGetStartedImageData({src:t.src||"",isVectorImage:!1,width:e||1e3,height:n||1e3}),this._modalService.dismissAll(),this._gaEventsService.eventEmitter("Image Upload Modal","Image Uploaded",`type: ${a}`)},t.onerror=()=>{this._toastService.show("Upload Error: Image file may be corrupted",{classname:"bg-danger text-light",delay:5e3})}}}else if("image/svg+xml"==a){const e=new FileReader;e.readAsText(t),e.onload=e=>{var t=new Image;let n=e.target.result;t.src=n,this._helpersService.isSVGString(n)?(this._utilsService.sendGetStartedImageData({src:n,isVectorImage:!0,width:t.width||1e3,height:t.height||1e3}),this._modalService.dismissAll(),this._gaEventsService.eventEmitter("Image Upload Modal","Image Uploaded",`type: ${a}`)):this._toastService.show("Upload Error: SVG file may be corrupted",{classname:"bg-danger text-light",delay:5e3})}}}}}return e.\u0275fac=function(t){return new(t||e)(r.Ub(ve.a),r.Ub(fe.a),r.Ub(De.a),r.Ub(ke),r.Ub(F.a),r.Ub(xe),r.Ub(T.k),r.Ub(He.a),r.Ub(E.a))},e.\u0275cmp=r.Ob({type:e,selectors:[["app-get-started"]],decls:55,vars:22,consts:[[1,"get-started-wrapper","grid"],[1,"sidebar"],[1,"get-started-txt"],[1,"nav","d-flex","flex-column","align-items-start"],[1,"nav-item","w-100",3,"click"],["src","https://static-assets.pixelied.com/images/new-design-default.svg","alt","",3,"hidden"],["src","https://static-assets.pixelied.com/images/new-design-active.svg","alt","",3,"hidden"],["class","nav-item w-100",3,"active","click",4,"ngIf"],[1,"right-panel","overflow-hidden"],["class","nav nav-new-design d-flex align-items-center justify-content-center",4,"ngIf"],["class","nav nav-recent-files",4,"ngIf"],[1,"bottom-line"],[1,"main-area","w-100"],[1,"upload-box-wrapper",3,"hidden"],[1,"files-upload-box","position-relative","d-flex","flex-column","align-items-center","justify-content-center",3,"uploadImageModalCreate"],["tooltipClass","tooltip-primary","placement","right","openDelay","0","ngbTooltip","JPEG, JPG, PNG, WEBP or SVG upto 25 MB","src","https://static-assets.pixelied.com/images/help-q-mark.svg","alt","",1,"help-upload","position-absolute"],["type","file","accept","image/*",1,"file-input",3,"change"],["src","https://static-assets.pixelied.com/onboarding/images/image-upload-graphic.svg","alt",""],[1,"upload-btn","btn","btn-primary"],["src","https://static-assets.pixelied.com/onboarding/images/upload-sign.svg","alt","",2,"width","18px","height","18px","margin-right","4px"],[1,"drag-text"],[1,"templates-wrapper",3,"hidden"],[1,"formats-tags","d-flex","align-items-center"],["ngbDropdown","",1,"formats-list-dropdown"],["ngbDropdownToggle","",1,"btn","btn-block","d-flex","flex-row","align-items-center","justify-content-center","no-caret-dropdown"],[1,"flex-grow-1"],["svgIcon","arrow_down",1,"arrow-down-icon",2,"width","20px","height","20px"],["ngbDropdownMenu","","aria-labelledby","formatsDropdown",1,"w-100","mt-2"],["ngbDropdownItem","","class","dropdown-item d-flex align-items-center",3,"click",4,"ngFor","ngForOf"],[1,"tags-wrapper","position-relative"],["class","suggestion",3,"active","click",4,"ngFor","ngForOf"],[1,"templates-list","d-flex","flex-row","flex-wrap","mt-4"],["class","blank-design-wrapper",3,"width",4,"ngIf"],[3,"width","click",4,"ngFor","ngForOf"],["class","text-center w-100 p-3",4,"ngIf"],[1,"recent-files-wrapper",3,"hidden"],[1,"d-flex","flex-column"],[1,"title"],["class","no-files-wrapper d-flex flex-column align-items-center",4,"ngIf"],[1,"uploads-list","list"],["class","card",3,"click",4,"ngFor","ngForOf"],[1,"designs-list","list"],["class","card",4,"ngFor","ngForOf"],["src","https://static-assets.pixelied.com/images/recent-default.svg","alt","",3,"hidden"],["src","https://static-assets.pixelied.com/images/recent-active.svg","alt","",3,"hidden"],[1,"nav","nav-new-design","d-flex","align-items-center","justify-content-center"],[1,"nav-item",3,"click"],[1,"nav","nav-recent-files"],[1,"nav-item"],["ngbDropdownItem","",1,"dropdown-item","d-flex","align-items-center",3,"click"],[1,"item-text","text-truncate","flex-grow-1","ml-2"],[1,"suggestion",3,"click"],[1,"blank-design-wrapper"],[2,"position","relative","margin-bottom","8px","margin-right","8px"],[1,"position-absolute","box","d-flex","flex-column","justify-content-center","align-items-center","w-100","h-100",3,"href"],["src","https://static-assets.pixelied.com/images/plus-circle.svg","alt",""],[1,"mt-2","text-center"],[3,"click"],[1,"img-container"],["alt","",1,"img-opacity-fadein","img-thumb",3,"lazyLoad"],[1,"text-center","w-100","p-3"],[1,"data-loader"],[1,"no-files-wrapper","d-flex","flex-column","align-items-center"],["src","https://static-assets.pixelied.com/images/no-files.svg","alt","",2,"width","100px","height","100px"],[1,"no-files-txt"],[1,"upload-txt"],[1,"upload-btn","btn","btn-primary",3,"click"],[1,"card",3,"click"],["alt","",3,"src"],[1,"card"],[3,"href"],[1,"card-body"],[1,"card-title","text-center"],[1,"card-text","text-center"]],template:function(e,t){1&e&&(r.ac(0,"div",0),r.ac(1,"div",1),r.ac(2,"span",2),r.Qc(3,"Get Started"),r.Zb(),r.ac(4,"div",3),r.ac(5,"div",4),r.kc("click",function(){return t.selectSidebarNavItem("New Design")}),r.Vb(6,"img",5),r.Vb(7,"img",6),r.ac(8,"span"),r.Qc(9,"New Design"),r.Zb(),r.Zb(),r.Oc(10,ze,5,4,"div",7),r.Zb(),r.Zb(),r.ac(11,"div",8),r.Oc(12,Be,5,4,"div",9),r.Oc(13,Ue,3,0,"div",10),r.Vb(14,"div",11),r.ac(15,"div",12),r.ac(16,"div",13),r.ac(17,"div",14),r.kc("uploadImageModalCreate",function(e){return t.fileDrop(e)}),r.Vb(18,"img",15),r.ac(19,"input",16),r.kc("change",function(e){return t.readImageFile(e.target.files)}),r.Zb(),r.Vb(20,"img",17),r.ac(21,"button",18),r.Vb(22,"img",19),r.Qc(23," Upload Image "),r.Zb(),r.ac(24,"span",20),r.Qc(25,"or drop your image here"),r.Zb(),r.Zb(),r.Zb(),r.ac(26,"div",21),r.ac(27,"div",22),r.ac(28,"div",23),r.ac(29,"button",24),r.ac(30,"span",25),r.Qc(31),r.Zb(),r.Vb(32,"mat-icon",26),r.Zb(),r.ac(33,"div",27),r.Oc(34,Ne,3,1,"div",28),r.Zb(),r.Zb(),r.ac(35,"div",29),r.Oc(36,Ve,3,3,"div",30),r.Zb(),r.Zb(),r.ac(37,"div",31),r.Oc(38,We,6,5,"div",32),r.Oc(39,Ge,4,5,"div",33),r.Oc(40,Qe,2,0,"div",34),r.Zb(),r.Zb(),r.ac(41,"div",35),r.ac(42,"div",36),r.ac(43,"span",37),r.Qc(44,"Recent Uploads"),r.Zb(),r.Oc(45,$e,2,0,"div",34),r.Oc(46,qe,9,0,"div",38),r.ac(47,"div",39),r.Oc(48,Ye,3,1,"div",40),r.Zb(),r.ac(49,"span",37),r.Qc(50,"Recent Designs"),r.Zb(),r.Oc(51,Xe,2,0,"div",34),r.Oc(52,Je,9,0,"div",38),r.ac(53,"div",41),r.Oc(54,Ke,11,11,"div",42),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb()),2&e&&(r.Hb(5),r.Mb("active","New Design"==t.selectedSidebarNavItem),r.Hb(1),r.uc("hidden","New Design"==t.selectedSidebarNavItem),r.Hb(1),r.uc("hidden","New Design"!=t.selectedSidebarNavItem),r.Hb(3),r.uc("ngIf",t.fabricCanvasHandler.user),r.Hb(2),r.uc("ngIf","Recent Files"!=t.selectedSidebarNavItem),r.Hb(1),r.uc("ngIf","Recent Files"==t.selectedSidebarNavItem),r.Hb(3),r.uc("hidden","Upload Image"!=t.selectedMainAreaNavItem||"Recent Files"==t.selectedSidebarNavItem),r.Hb(10),r.uc("hidden","Templates"!=t.selectedMainAreaNavItem||"Recent Files"==t.selectedSidebarNavItem),r.Hb(5),r.Rc(t.selectedFormatObj.title),r.Hb(3),r.uc("ngForOf",t.fabricCanvasHandler.dbEventsHandler.formatsList),r.Hb(2),r.uc("ngForOf",t.tagSuggestions),r.Hb(2),r.uc("ngIf",!t.templates.loading&&t.templates.list.length>0),r.Hb(1),r.uc("ngForOf",t.templates.list),r.Hb(1),r.uc("ngIf",t.templates.loading),r.Hb(1),r.uc("hidden","Recent Files"!=t.selectedSidebarNavItem),r.Hb(4),r.uc("ngIf",t.uploads.loading),r.Hb(1),r.uc("ngIf",!t.uploads.loading&&0==t.uploads.list.length),r.Hb(2),r.uc("ngForOf",t.uploads.list),r.Hb(3),r.uc("ngIf",t.designs.loading),r.Hb(1),r.uc("ngIf",!t.designs.loading&&0==t.designs.list.length),r.Hb(2),r.uc("ngForOf",t.designs.list))},directives:[k.m,je.a,T.q,T.f,T.j,Le.a,T.h,k.l,T.g,Ze.a],pipes:[k.u,Re.a],styles:['.get-started-wrapper[_ngcontent-%COMP%]{display:grid;grid-template-columns:233px 1fr;grid-template-rows:1fr auto;padding-left:0;min-height:650px;max-height:650px}@media (max-width:1199px){.get-started-wrapper[_ngcontent-%COMP%]{min-height:550px;max-height:550px}}.get-started-wrapper[_ngcontent-%COMP%]   .sidebar[_ngcontent-%COMP%]{background:rgba(238,240,246,.3);padding:130px 40px 40px}.get-started-wrapper[_ngcontent-%COMP%]   .sidebar[_ngcontent-%COMP%]   .get-started-txt[_ngcontent-%COMP%]{font-weight:600;font-size:18px;line-height:22px}.get-started-wrapper[_ngcontent-%COMP%]   .sidebar[_ngcontent-%COMP%]   .nav[_ngcontent-%COMP%]{margin-top:24px}.get-started-wrapper[_ngcontent-%COMP%]   .sidebar[_ngcontent-%COMP%]   .nav[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]{padding:6px;border-radius:6px;color:#626570;cursor:pointer;height:49px;display:flex;align-items:center;justify-content:center}.get-started-wrapper[_ngcontent-%COMP%]   .sidebar[_ngcontent-%COMP%]   .nav[_ngcontent-%COMP%]   .nav-item.active[_ngcontent-%COMP%]{background:rgba(238,240,246,.5);font-weight:500;color:#000}.get-started-wrapper[_ngcontent-%COMP%]   .sidebar[_ngcontent-%COMP%]   .nav[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]:hover{font-weight:500;color:#000}.get-started-wrapper[_ngcontent-%COMP%]   .sidebar[_ngcontent-%COMP%]   .nav[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:500;font-size:14px;line-height:20px;margin-left:12px}.get-started-wrapper[_ngcontent-%COMP%]   .right-panel[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:14px}.get-started-wrapper[_ngcontent-%COMP%]   .right-panel[_ngcontent-%COMP%]   .nav-new-design[_ngcontent-%COMP%]{height:80px}.get-started-wrapper[_ngcontent-%COMP%]   .right-panel[_ngcontent-%COMP%]   .nav-new-design[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]{cursor:pointer;color:#626570;font-weight:500;position:relative;height:80px;align-items:flex-end;justify-content:center;display:flex;padding:15px 20px}.get-started-wrapper[_ngcontent-%COMP%]   .right-panel[_ngcontent-%COMP%]   .nav-new-design[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]:hover{color:#000}.get-started-wrapper[_ngcontent-%COMP%]   .right-panel[_ngcontent-%COMP%]   .nav-new-design[_ngcontent-%COMP%]   .nav-item.active[_ngcontent-%COMP%]{color:#5f58b7}.get-started-wrapper[_ngcontent-%COMP%]   .right-panel[_ngcontent-%COMP%]   .nav-new-design[_ngcontent-%COMP%]   .nav-item.active[_ngcontent-%COMP%]:after{content:"";left:-50%;transform:translate(50%);bottom:-1px;position:absolute;width:100%;text-align:center;border-bottom:2px solid #5f58b7}.get-started-wrapper[_ngcontent-%COMP%]   .right-panel[_ngcontent-%COMP%]   .nav-recent-files[_ngcontent-%COMP%]{height:80px}.get-started-wrapper[_ngcontent-%COMP%]   .right-panel[_ngcontent-%COMP%]   .nav-recent-files[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]{font-weight:600;font-size:16px;color:#000;position:relative;height:80px;align-items:flex-end;justify-content:center;display:flex;padding:15px 40px}.get-started-wrapper[_ngcontent-%COMP%]   .right-panel[_ngcontent-%COMP%]   .bottom-line[_ngcontent-%COMP%]{border-bottom:1px solid #eef0f6}.get-started-wrapper[_ngcontent-%COMP%]   .right-panel[_ngcontent-%COMP%]   .main-area[_ngcontent-%COMP%]   .upload-box-wrapper[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;padding-top:86px}.get-started-wrapper[_ngcontent-%COMP%]   .right-panel[_ngcontent-%COMP%]   .main-area[_ngcontent-%COMP%]   .upload-box-wrapper[_ngcontent-%COMP%]   .help-upload[_ngcontent-%COMP%]{top:12px;right:12px;z-index:10;cursor:pointer}.get-started-wrapper[_ngcontent-%COMP%]   .right-panel[_ngcontent-%COMP%]   .main-area[_ngcontent-%COMP%]   .upload-box-wrapper[_ngcontent-%COMP%]   .files-upload-box[_ngcontent-%COMP%]{height:300px;width:600px;border:2px dashed #a6acbe;border-radius:8px}.get-started-wrapper[_ngcontent-%COMP%]   .right-panel[_ngcontent-%COMP%]   .main-area[_ngcontent-%COMP%]   .upload-box-wrapper[_ngcontent-%COMP%]   .files-upload-box.drop-zone-active[_ngcontent-%COMP%], .get-started-wrapper[_ngcontent-%COMP%]   .right-panel[_ngcontent-%COMP%]   .main-area[_ngcontent-%COMP%]   .upload-box-wrapper[_ngcontent-%COMP%]   .files-upload-box[_ngcontent-%COMP%]:hover{border:2px dashed #958eee}@media (max-width:1199px){.get-started-wrapper[_ngcontent-%COMP%]   .right-panel[_ngcontent-%COMP%]   .main-area[_ngcontent-%COMP%]   .upload-box-wrapper[_ngcontent-%COMP%]   .files-upload-box[_ngcontent-%COMP%]{width:400px}}.get-started-wrapper[_ngcontent-%COMP%]   .right-panel[_ngcontent-%COMP%]   .main-area[_ngcontent-%COMP%]   .upload-box-wrapper[_ngcontent-%COMP%]   .files-upload-box[_ngcontent-%COMP%]   .file-input[_ngcontent-%COMP%]{opacity:0;position:absolute;top:0;left:0;z-index:2;width:100%;height:100%;cursor:pointer}.get-started-wrapper[_ngcontent-%COMP%]   .right-panel[_ngcontent-%COMP%]   .main-area[_ngcontent-%COMP%]   .upload-box-wrapper[_ngcontent-%COMP%]   .files-upload-box[_ngcontent-%COMP%]   .upload-btn[_ngcontent-%COMP%]{font-size:18px;line-height:27px;font-weight:600;padding:9px 24px;margin:30px 0}.get-started-wrapper[_ngcontent-%COMP%]   .right-panel[_ngcontent-%COMP%]   .main-area[_ngcontent-%COMP%]   .upload-box-wrapper[_ngcontent-%COMP%]   .files-upload-box[_ngcontent-%COMP%]   .drag-text[_ngcontent-%COMP%]{font-weight:500;font-size:16px;line-height:19px;color:#696871}.get-started-wrapper[_ngcontent-%COMP%]   .right-panel[_ngcontent-%COMP%]   .main-area[_ngcontent-%COMP%]   .recent-files-wrapper[_ngcontent-%COMP%]{padding:40px;overflow-y:auto;max-height:540px}.get-started-wrapper[_ngcontent-%COMP%]   .right-panel[_ngcontent-%COMP%]   .main-area[_ngcontent-%COMP%]   .recent-files-wrapper[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-weight:500;font-size:12px;color:#626570}.get-started-wrapper[_ngcontent-%COMP%]   .right-panel[_ngcontent-%COMP%]   .main-area[_ngcontent-%COMP%]   .recent-files-wrapper[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]{padding-top:18px;padding-bottom:40px;display:grid;grid-template-columns:repeat(auto-fill,minmax(140px,1fr));gap:12px}.get-started-wrapper[_ngcontent-%COMP%]   .right-panel[_ngcontent-%COMP%]   .main-area[_ngcontent-%COMP%]   .recent-files-wrapper[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{height:160px;border-radius:12px;background-color:rgba(238,240,246,.5);border:1px solid transparent;transition:all .3s;cursor:pointer}.get-started-wrapper[_ngcontent-%COMP%]   .right-panel[_ngcontent-%COMP%]   .main-area[_ngcontent-%COMP%]   .recent-files-wrapper[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .img-container[_ngcontent-%COMP%]{height:12rem;min-height:6rem;width:100%;display:flex;align-items:center;justify-content:center;padding:12px;transition:all .3s}.get-started-wrapper[_ngcontent-%COMP%]   .right-panel[_ngcontent-%COMP%]   .main-area[_ngcontent-%COMP%]   .recent-files-wrapper[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .img-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%;width:100%;align-items:center;justify-content:center;display:flex;-o-object-fit:contain;object-fit:contain}.get-started-wrapper[_ngcontent-%COMP%]   .right-panel[_ngcontent-%COMP%]   .main-area[_ngcontent-%COMP%]   .recent-files-wrapper[_ngcontent-%COMP%]   .list.designs-list[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(250px,1fr))}.get-started-wrapper[_ngcontent-%COMP%]   .right-panel[_ngcontent-%COMP%]   .main-area[_ngcontent-%COMP%]   .recent-files-wrapper[_ngcontent-%COMP%]   .list.designs-list[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{height:auto;max-height:26rem;background-color:#fff;box-shadow:inset 0 0 0 1px rgba(0,0,0,.12)}.get-started-wrapper[_ngcontent-%COMP%]   .right-panel[_ngcontent-%COMP%]   .main-area[_ngcontent-%COMP%]   .recent-files-wrapper[_ngcontent-%COMP%]   .list.designs-list[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .img-container[_ngcontent-%COMP%]{height:16rem;min-height:12rem;padding:44px 12px 12px}.get-started-wrapper[_ngcontent-%COMP%]   .right-panel[_ngcontent-%COMP%]   .main-area[_ngcontent-%COMP%]   .recent-files-wrapper[_ngcontent-%COMP%]   .list.designs-list[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:.8rem}.get-started-wrapper[_ngcontent-%COMP%]   .right-panel[_ngcontent-%COMP%]   .main-area[_ngcontent-%COMP%]   .recent-files-wrapper[_ngcontent-%COMP%]   .list.designs-list[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%]{margin-bottom:8px;font-size:14px;color:#000}.get-started-wrapper[_ngcontent-%COMP%]   .right-panel[_ngcontent-%COMP%]   .main-area[_ngcontent-%COMP%]   .recent-files-wrapper[_ngcontent-%COMP%]   .list.designs-list[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .card-text[_ngcontent-%COMP%]{margin-bottom:0;font-size:12px}.get-started-wrapper[_ngcontent-%COMP%]   .right-panel[_ngcontent-%COMP%]   .main-area[_ngcontent-%COMP%]   .recent-files-wrapper[_ngcontent-%COMP%]   .list.designs-list[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:hover, .get-started-wrapper[_ngcontent-%COMP%]   .right-panel[_ngcontent-%COMP%]   .main-area[_ngcontent-%COMP%]   .recent-files-wrapper[_ngcontent-%COMP%]   .list.uploads-list[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:hover{background-color:#eef0f6}.get-started-wrapper[_ngcontent-%COMP%]   .right-panel[_ngcontent-%COMP%]   .main-area[_ngcontent-%COMP%]   .templates-wrapper[_ngcontent-%COMP%]{padding:36px}.get-started-wrapper[_ngcontent-%COMP%]   .right-panel[_ngcontent-%COMP%]   .main-area[_ngcontent-%COMP%]   .templates-wrapper[_ngcontent-%COMP%]   .formats-tags[_ngcontent-%COMP%]   .formats-list-dropdown.show[_ngcontent-%COMP%]   .dropdown-toggle[_ngcontent-%COMP%]{background-color:#eef0f6}.get-started-wrapper[_ngcontent-%COMP%]   .right-panel[_ngcontent-%COMP%]   .main-area[_ngcontent-%COMP%]   .templates-wrapper[_ngcontent-%COMP%]   .formats-tags[_ngcontent-%COMP%]   .formats-list-dropdown[_ngcontent-%COMP%]   .dropdown-toggle[_ngcontent-%COMP%]{border:1px solid #eef0f6;border-radius:8px;height:40px;transition:all .3s}.get-started-wrapper[_ngcontent-%COMP%]   .right-panel[_ngcontent-%COMP%]   .main-area[_ngcontent-%COMP%]   .templates-wrapper[_ngcontent-%COMP%]   .formats-tags[_ngcontent-%COMP%]   .formats-list-dropdown[_ngcontent-%COMP%]   .dropdown-toggle[_ngcontent-%COMP%]:hover{background-color:#eef0f6}.get-started-wrapper[_ngcontent-%COMP%]   .right-panel[_ngcontent-%COMP%]   .main-area[_ngcontent-%COMP%]   .templates-wrapper[_ngcontent-%COMP%]   .formats-tags[_ngcontent-%COMP%]   .formats-list-dropdown[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]{max-height:300px;overflow-y:auto;background-color:#fff;min-width:240px;border:1px solid #eef0f6}.get-started-wrapper[_ngcontent-%COMP%]   .right-panel[_ngcontent-%COMP%]   .main-area[_ngcontent-%COMP%]   .templates-wrapper[_ngcontent-%COMP%]   .formats-tags[_ngcontent-%COMP%]   .formats-list-dropdown[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]{cursor:pointer;font-size:13px;padding:8px 14px;font-weight:500}.get-started-wrapper[_ngcontent-%COMP%]   .right-panel[_ngcontent-%COMP%]   .main-area[_ngcontent-%COMP%]   .templates-wrapper[_ngcontent-%COMP%]   .formats-tags[_ngcontent-%COMP%]   .tags-wrapper[_ngcontent-%COMP%]{display:flex;padding-right:34px;width:100%;overflow-x:auto;scroll-behavior:smooth;margin-left:14px;margin-right:20px}.get-started-wrapper[_ngcontent-%COMP%]   .right-panel[_ngcontent-%COMP%]   .main-area[_ngcontent-%COMP%]   .templates-wrapper[_ngcontent-%COMP%]   .formats-tags[_ngcontent-%COMP%]   .tags-wrapper[_ngcontent-%COMP%]::-webkit-scrollbar{width:0;height:0}.get-started-wrapper[_ngcontent-%COMP%]   .right-panel[_ngcontent-%COMP%]   .main-area[_ngcontent-%COMP%]   .templates-wrapper[_ngcontent-%COMP%]   .formats-tags[_ngcontent-%COMP%]   .tags-wrapper[_ngcontent-%COMP%]   .suggestion[_ngcontent-%COMP%]{display:flex;flex-wrap:nowrap;flex:0 0 auto;align-items:center;padding:9px 17px;border-radius:30px;background-color:rgba(238,240,246,.5);font-weight:500;margin-right:12px;color:#1d1d1d;transition:all .3s;cursor:pointer}.get-started-wrapper[_ngcontent-%COMP%]   .right-panel[_ngcontent-%COMP%]   .main-area[_ngcontent-%COMP%]   .templates-wrapper[_ngcontent-%COMP%]   .formats-tags[_ngcontent-%COMP%]   .tags-wrapper[_ngcontent-%COMP%]   .suggestion.active[_ngcontent-%COMP%], .get-started-wrapper[_ngcontent-%COMP%]   .right-panel[_ngcontent-%COMP%]   .main-area[_ngcontent-%COMP%]   .templates-wrapper[_ngcontent-%COMP%]   .formats-tags[_ngcontent-%COMP%]   .tags-wrapper[_ngcontent-%COMP%]   .suggestion[_ngcontent-%COMP%]:hover{background-color:rgba(205,211,228,.5)}.get-started-wrapper[_ngcontent-%COMP%]   .right-panel[_ngcontent-%COMP%]   .main-area[_ngcontent-%COMP%]   .templates-wrapper[_ngcontent-%COMP%]   .formats-tags[_ngcontent-%COMP%]   .tags-wrapper[_ngcontent-%COMP%]   .suggestion[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{padding-right:6px}.get-started-wrapper[_ngcontent-%COMP%]   .right-panel[_ngcontent-%COMP%]   .main-area[_ngcontent-%COMP%]   .templates-wrapper[_ngcontent-%COMP%]   .templates-list[_ngcontent-%COMP%]{max-height:430px;overflow-y:auto}@media (max-width:1199px){.get-started-wrapper[_ngcontent-%COMP%]   .right-panel[_ngcontent-%COMP%]   .main-area[_ngcontent-%COMP%]   .templates-wrapper[_ngcontent-%COMP%]   .templates-list[_ngcontent-%COMP%]{max-height:330px}}.get-started-wrapper[_ngcontent-%COMP%]   .right-panel[_ngcontent-%COMP%]   .main-area[_ngcontent-%COMP%]   .templates-wrapper[_ngcontent-%COMP%]   .templates-list[_ngcontent-%COMP%]   .img-container[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%}.get-started-wrapper[_ngcontent-%COMP%]   .right-panel[_ngcontent-%COMP%]   .main-area[_ngcontent-%COMP%]   .templates-wrapper[_ngcontent-%COMP%]   .templates-list[_ngcontent-%COMP%]   .img-container[_ngcontent-%COMP%]   .img-thumb[_ngcontent-%COMP%]{transition:all .3s;background-color:#eee;width:100%;height:100%;box-shadow:0 0 0 .5px rgba(0,0,0,.1),0 0 0 0 rgba(0,0,0,.1);border-radius:6px}.get-started-wrapper[_ngcontent-%COMP%]   .right-panel[_ngcontent-%COMP%]   .main-area[_ngcontent-%COMP%]   .templates-wrapper[_ngcontent-%COMP%]   .templates-list[_ngcontent-%COMP%]   .img-container[_ngcontent-%COMP%]   .img-thumb[_ngcontent-%COMP%]:hover{cursor:pointer;box-shadow:0 0 0 1px #5f58b7,0 0 0 2px #5f58b7}.get-started-wrapper[_ngcontent-%COMP%]   .right-panel[_ngcontent-%COMP%]   .main-area[_ngcontent-%COMP%]   .templates-wrapper[_ngcontent-%COMP%]   .templates-list[_ngcontent-%COMP%]   .blank-design-wrapper[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]{border:1px solid #a6acbe;border-radius:8px;cursor:pointer;transition:all .3s}.get-started-wrapper[_ngcontent-%COMP%]   .right-panel[_ngcontent-%COMP%]   .main-area[_ngcontent-%COMP%]   .templates-wrapper[_ngcontent-%COMP%]   .templates-list[_ngcontent-%COMP%]   .blank-design-wrapper[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]:hover{background-color:rgba(238,240,246,.5)}.get-started-wrapper[_ngcontent-%COMP%]   .right-panel[_ngcontent-%COMP%]   .main-area[_ngcontent-%COMP%]   .templates-wrapper[_ngcontent-%COMP%]   .templates-list[_ngcontent-%COMP%]   .blank-design-wrapper[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:500;font-size:12px;color:#626570}.get-started-wrapper[_ngcontent-%COMP%]   .right-panel[_ngcontent-%COMP%]   .main-area[_ngcontent-%COMP%]   .no-files-wrapper[_ngcontent-%COMP%]   .no-files-txt[_ngcontent-%COMP%]{padding-top:20px;font-weight:500;font-size:18px}.get-started-wrapper[_ngcontent-%COMP%]   .right-panel[_ngcontent-%COMP%]   .main-area[_ngcontent-%COMP%]   .no-files-wrapper[_ngcontent-%COMP%]   .upload-txt[_ngcontent-%COMP%]{padding-top:12px;color:#626570}.get-started-wrapper[_ngcontent-%COMP%]   .right-panel[_ngcontent-%COMP%]   .main-area[_ngcontent-%COMP%]   .no-files-wrapper[_ngcontent-%COMP%]   .upload-btn[_ngcontent-%COMP%]{margin-top:20px;font-size:18px;line-height:27px;font-weight:600;padding:9px 24px}']}),e})(),tt=(()=>{class e{constructor(e){this.dom=e}createLink(e){const t=this.dom.getElementsByTagName("head")[0];var a=this.dom.querySelector(".custom-font-face-link")||null;null==a&&((a=this.dom.createElement("link")).setAttribute("class","custom-font-face-link"),t.appendChild(a)),a.setAttribute("type","text/css"),a.setAttribute("rel","stylesheet"),a.setAttribute("href",e)}createStyleTagAndAppendCssToIt(e){const t=this.dom.getElementsByTagName("head")[0];var a=this.dom.querySelector(".custom-font-face-style")||null;null==a&&((a=this.dom.createElement("style")).setAttribute("class","custom-font-face-style"),t.appendChild(a)),a.setAttribute("type","text/css"),a.appendChild(this.dom.createTextNode(e))}}return e.\u0275fac=function(t){return new(t||e)(r.hc(k.d))},e.\u0275prov=r.Qb({token:e,factory:e.\u0275fac}),e})(),at=(()=>{class e{constructor(e){this._http=e,this.API_URL=b.a.apiUrl,this.brandPresetsList=new _e.a(null)}setBrandPresetsList(e){this.brandPresetsList.next(e)}getWorkspaceBrandPresets(e,t){return e?this._http.get(`${this.API_URL}/api/brand-presets/users/${t}/brand-presets?workspace_id=${e}`).toPromise():this._http.get(`${this.API_URL}/api/brand-presets/users/${t}/brand-presets`).toPromise()}deleteBrandPreset(e){return this._http.delete(`/api/brand-presets/${e}`).toPromise()}}return e.\u0275fac=function(t){return new(t||e)(r.hc(me.b))},e.\u0275prov=r.Qb({token:e,factory:e.\u0275fac}),e})(),nt=(()=>{class e{constructor(e){this._http=e}getInitialImages(){return this._http.get(`${b.a.apiUrl}${b.a.apiUrl}/api/images-service`)}getImagesBySearch(e){return this._http.get(`${b.a.apiUrl}/api/images-service/search-images?searchValue=${e}`)}getMoreImagesByPagination(e,t,a){return this._http.get(`${b.a.apiUrl}/api/images-service/search-images?searchValue=${e}&pageNum=${t}&pageSize=${a}`)}getImagesFromUnsplash(e,t,a){return this._http.get(`${b.a.apiUrl}/api/images-service/unsplash/photos?query=${e}&pageNum=${t}&pageSize=${a}`)}getImagesFromPixabay(e,t,a){return this._http.get(`/api/images-service/pixabay/photos?query=${e}&pageNum=${t}&pageSize=${a}`)}uploadPixabayPhoto(e){return this._http.post("/api/images-service/pixabay/photos/upload",{imageURL:e})}triggerUnsplashDownloadPhoto(e){return this._http.post(`${b.a.apiUrl}/api/images-service/unsplash/photos/push`,{id:e})}}return e.\u0275fac=function(t){return new(t||e)(r.hc(me.b))},e.\u0275prov=r.Qb({token:e,factory:e.\u0275fac}),e})();var it=a("jhN1"),rt=a("aVoE");function st(e,t){if(1&e&&(r.ac(0,"h2"),r.Qc(1),r.pc(2,"titlecase"),r.Zb()),2&e){const e=r.oc();r.Hb(1),r.Tc(" ",r.qc(2,2,e.operation)," to ",e.destination,"s ")}}function ot(e,t){if(1&e&&(r.ac(0,"h2"),r.Qc(1),r.pc(2,"titlecase"),r.Zb()),2&e){const e=r.oc();r.Hb(1),r.Tc(" ",r.qc(2,2,e.operation)," to ",e.destination," ")}}function ct(e,t){1&e&&r.Vb(0,"span",11)}function lt(e,t){if(1&e){const e=r.bc();r.ac(0,"div",12),r.ac(1,"div",13),r.ac(2,"input",14),r.kc("click",function(){r.Ic(e);const a=t.index;return r.oc(2).setCheckbox(a)})("ngModelChange",function(e){return t.$implicit.checked=e}),r.Zb(),r.ac(3,"label",15),r.Qc(4),r.Zb(),r.Zb(),r.Vb(5,"div",16),r.Zb()}if(2&e){const e=t.$implicit,a=t.index;r.Hb(2),r.wc("id","folderCheck-",a,""),r.uc("ngModel",e.checked),r.Hb(1),r.wc("for","folderCheck-",a,""),r.Hb(1),r.Rc(e.name)}}function dt(e,t){if(1&e&&(r.ac(0,"div",8),r.Oc(1,ct,1,0,"span",9),r.Oc(2,lt,6,4,"div",10),r.Zb()),2&e){const e=r.oc();r.Hb(1),r.uc("ngIf",e.isLoading),r.Hb(1),r.uc("ngForOf",e.foldersList)}}function pt(e,t){1&e&&r.Vb(0,"span",11)}function ht(e,t){if(1&e){const e=r.bc();r.ac(0,"div",12),r.ac(1,"div",13),r.ac(2,"input",14),r.kc("click",function(){r.Ic(e);const a=t.index;return r.oc(2).setCheckbox(a)})("ngModelChange",function(e){return t.$implicit.checked=e}),r.Zb(),r.ac(3,"label",15),r.Qc(4),r.Zb(),r.Zb(),r.Vb(5,"div",16),r.Zb()}if(2&e){const e=t.$implicit,a=t.index;r.Hb(2),r.wc("id","workspaceCheck-",a,""),r.uc("ngModel",e.checked),r.Hb(1),r.wc("for","workspaceCheck-",a,""),r.Hb(1),r.Rc(e.name)}}function ut(e,t){if(1&e&&(r.ac(0,"div",8),r.Oc(1,pt,1,0,"span",9),r.Oc(2,ht,6,4,"div",10),r.Zb()),2&e){const e=r.oc();r.Hb(1),r.uc("ngIf",e.isLoading),r.Hb(1),r.uc("ngForOf",e.workspacesList)}}function bt(e,t){1&e&&r.Vb(0,"span",17)}let gt=(()=>{class e{constructor(e,t,a,n){this._editorService=e,this._userService=t,this._modalService=a,this._toastService=n,this.foldersList=[],this.workspacesList=[],this.isLoading=!1,this.inProgressOfOperation=!1}ngOnInit(){"folder"==this.destination?this.getFoldersList():this.getWorkspacesList()}closeModal(){this._modalService.dismissAll()}setCheckbox(e){"move"==this.operation&&this.clearAllCheckboxes(),"folder"==this.destination?this.foldersList[e].checked=!this.foldersList[e].checked:this.workspacesList[e].checked=!this.workspacesList[e].checked}clearAllCheckboxes(){for(let e of this.foldersList)e.checked=!1;for(let e of this.workspacesList)e.checked=!1}copyOrMoveDesign(){let e=[],t=[];return"folder"==this.destination?e=this.foldersList.filter(e=>1==e.checked).map(e=>({_id:e._id})):t=this.workspacesList.filter(e=>e.checked).map(e=>({_id:e._id})),"folder"==this.destination&&0==e.length?this._toastService.show("Please select a folder before continuing",{classname:"bg-warning text-dark",delay:5e3}):"workspace"==this.destination&&0==t.length?this._toastService.show("Please select a workspace before continuing",{classname:"bg-warning text-dark",delay:5e3}):(this.inProgressOfOperation=!0,void("copy"==this.operation&&"folder"==this.destination?this._editorService.copyDesignToFolders(this.designId,e).then(e=>{this.onDesignCopiedSuccess()}).catch(e=>{this.onError(e)}):"copy"==this.operation&&"workspace"==this.destination?this._editorService.copyDesignToWorkspaces(this.designId,t).then(e=>{this.onDesignCopiedSuccess()}).catch(e=>{this.onError(e)}):"move"==this.operation&&"folder"==this.destination?this._editorService.moveDesignToFolder(this.designId,e[0]._id).then(e=>{this.onDesignMovedSuccess()}).catch(e=>{this.onError(e)}):"move"==this.operation&&"workspace"==this.destination&&this._editorService.moveDesignToWorkspace(this.designId,t[0]._id).then(e=>{this.onDesignMovedSuccess()}).catch(e=>{this.onError(e)})))}onDesignCopiedSuccess(){this._modalService.dismissAll(),this.inProgressOfOperation=!1,this._toastService.show("Design copied successfully!",{classname:"bg-success text-light",delay:5e3})}onDesignMovedSuccess(){this._modalService.dismissAll(),this.inProgressOfOperation=!1,this._toastService.show("Design moved successfully!",{classname:"bg-success text-light",delay:5e3})}onError(e){throw this.inProgressOfOperation=!1,this._toastService.show("An error occurred, please try again",{classname:"bg-danger text-light",delay:5e3}),e}getFoldersList(){this.isLoading=!0,this._editorService.getFolders(this._userService.getUserId(),this._userService.getCurrentUserWorkspaceId(),"designs").subscribe(e=>{for(let t of e)this.foldersList.push({_id:t._id,checked:!1,name:t.folder_name});this.isLoading=!1},e=>{throw this.isLoading=!1,e})}getWorkspacesList(){this.isLoading=!0,this._userService.getUserWorkspaces(this._userService.getUserId()).subscribe(e=>{for(let t of e)this.workspacesList.push({_id:t._id,checked:!1,name:t.name});this.isLoading=!1},e=>{throw this.isLoading=!1,e})}}return e.\u0275fac=function(t){return new(t||e)(r.Ub(fe.a),r.Ub(P.a),r.Ub(T.k),r.Ub(E.a))},e.\u0275cmp=r.Ob({type:e,selectors:[["app-copy-move-design-to-folders-workspaces"]],inputs:{designId:"designId",operation:"operation",destination:"destination"},decls:13,vars:9,consts:[[1,"copy-move-wrapper"],["type","button","aria-label","Close",1,"close","close-btn",3,"click"],["aria-hidden","true"],[4,"ngIf"],["class","list",4,"ngIf"],[1,"d-flex","justify-content-end"],["type","submit",1,"btn","btn-primary",3,"disabled","click"],["class","spinner-border spinner-border-sm mr-1",4,"ngIf"],[1,"list"],["class","spinner-border spinner-border-lg mr-1",4,"ngIf"],["class","item",4,"ngFor","ngForOf"],[1,"spinner-border","spinner-border-lg","mr-1"],[1,"item"],[1,"form-group","form-check","d-flex","flex-row","align-items-center"],["type","checkbox",1,"form-check-input",3,"ngModel","id","click","ngModelChange"],[1,"name",3,"for"],[1,"hr"],[1,"spinner-border","spinner-border-sm","mr-1"]],template:function(e,t){1&e&&(r.ac(0,"div",0),r.ac(1,"button",1),r.kc("click",function(){return t.closeModal()}),r.ac(2,"span",2),r.Qc(3,"\xd7"),r.Zb(),r.Zb(),r.Oc(4,st,3,4,"h2",3),r.Oc(5,ot,3,4,"h2",3),r.Oc(6,dt,3,2,"div",4),r.Oc(7,ut,3,2,"div",4),r.ac(8,"div",5),r.ac(9,"button",6),r.kc("click",function(){return t.copyOrMoveDesign()}),r.Oc(10,bt,1,0,"span",7),r.Qc(11),r.pc(12,"titlecase"),r.Zb(),r.Zb(),r.Zb()),2&e&&(r.Hb(4),r.uc("ngIf","copy"==t.operation),r.Hb(1),r.uc("ngIf","move"==t.operation),r.Hb(1),r.uc("ngIf","folder"==t.destination),r.Hb(1),r.uc("ngIf","workspace"==t.destination),r.Hb(2),r.uc("disabled",t.inProgressOfOperation),r.Hb(1),r.uc("ngIf",t.inProgressOfOperation),r.Hb(1),r.Sc(" ",r.qc(12,7,t.operation)," "))},directives:[k.m,k.l,O.a,O.i,O.l],pipes:[k.s],styles:[".copy-move-wrapper[_ngcontent-%COMP%]{padding:20px}.copy-move-wrapper[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-weight:600;font-size:30px;line-height:36px}.copy-move-wrapper[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]{margin-top:40px;max-height:240px;overflow-y:auto;text-align:center}.copy-move-wrapper[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{margin-bottom:12px}.copy-move-wrapper[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:0}.copy-move-wrapper[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{font-weight:500;font-size:16px;line-height:24px;color:#595959;padding-left:4rem;margin-bottom:0;-webkit-user-select:none;-moz-user-select:none;user-select:none}.copy-move-wrapper[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   .hr[_ngcontent-%COMP%]{width:100%;border-top:1px solid #eee;margin-top:10px}"]}),e})();function ft(e,t){if(1&e){const e=r.bc();r.ac(0,"div",19),r.kc("click",function(){r.Ic(e);const a=t.$implicit;return r.oc().updateSelectedFormatOption(a.format_category)}),r.Vb(1,"mat-icon",20),r.ac(2,"span",21),r.Qc(3),r.Zb(),r.Zb()}if(2&e){const e=t.$implicit;r.Hb(1),r.vc("svgIcon",e.icon),r.Hb(2),r.Vc(" ",e.title," - ",e.dimensions.doc_width," x ",e.dimensions.doc_height," ",e.dimensions.units,"")}}let vt=(()=>{class e{constructor(e){this.fabricCanvasHandler=e,this.createNewFromFormatOption=1,this.customHeight=f.a.MIN_CANVAS_WIDTH,this.customWidth=f.a.MIN_CANVAS_HEIGHT,this.formatOptionValue="facebook-post"}ngOnInit(){this.updateSelectedFormatOption(this.formatOptionValue)}updateSelectedFormatOption(e){this.fabricCanvasHandler.dbEventsHandler.formatsList.forEach(t=>{t.format_category==e&&(this.formatOptionValue=t.format_category,this.formatOptionText=`${t.title} - ${t.dimensions.doc_width} x\n            ${t.dimensions.doc_height}\n            ${t.dimensions.units}`)})}createNewFromCustomDims(){null!=this.customWidth&&null!=this.customHeight?isNaN(this.customHeight)||isNaN(this.customWidth)?alert("Custom Dimensions should be numbers only"):this.customWidth<f.a.MIN_CANVAS_WIDTH||this.customHeight<f.a.MIN_CANVAS_HEIGHT?alert(`Min width & height is ${f.a.MIN_CANVAS_WIDTH} pixels`):window.open(`/editor?width=${this.customWidth}&height=${this.customHeight}&units=px&format_category=custom-size`,"custom"):alert("Custom Dimensions cannot be empty")}createNewDesign(){let e;this.fabricCanvasHandler.dbEventsHandler.formatsList.forEach(t=>{t.format_category==this.formatOptionValue&&(e=t)}),window.open(`/editor?width=${e.dimensions.doc_width}&height=${e.dimensions.doc_height}&units=${e.dimensions.units}&format_category=${e.format_category}`,"_blank","menubar=yes,location=yes,resizable=yes,scrollbars=yes,status=yes")}}return e.\u0275fac=function(t){return new(t||e)(r.Ub(ke))},e.\u0275cmp=r.Ob({type:e,selectors:[["app-create-new-design-modal"]],decls:27,vars:14,consts:[[1,"d-flex","flex-column",2,"padding","35px"],[1,"d-flex","flex-column"],[1,"form-check"],["type","radio","id","create-from-format",1,"form-check-input",3,"ngModel","value","ngModelChange"],["for","create-from-format",1,"form-check-label"],["ngbDropdown","",1,"panel-dropdown","mt-4"],["ngbDropdownToggle","",1,"btn","btn-block","btn","btn-block","d-flex","flex-row","align-items-center","no-caret-dropdown"],[1,"flex-grow-1"],["svgIcon","arrow_down",1,"arrow-down-icon"],["ngbDropdownMenu","",1,"panel-dropdown-menu","w-100",2,"min-height","18rem","max-height","22rem","overflow-y","auto"],["ngbDropdownItem","","class","dropdown-item d-flex align-items-center",3,"click",4,"ngFor","ngForOf"],[1,"btn","btn-primary","mt-3",3,"disabled","click"],[1,"form-check","mt-4"],["type","radio","id","create-from-custom-dims",1,"form-check-input",3,"ngModel","value","ngModelChange"],["for","create-from-custom-dims",1,"form-check-label"],[1,"d-flex","flex-row","align-items-center","mt-4"],["placeholder","Width (px)","type","text",1,"form-control","editor-form-control","form-control-panel",3,"ngModel","ngModelChange"],[1,"secondary-text","mx-3",2,"font-weight","900","font-size","16px"],["placeholder","Height (px)","type","text",1,"form-control","editor-form-control","form-control-panel",3,"ngModel","ngModelChange"],["ngbDropdownItem","",1,"dropdown-item","d-flex","align-items-center",3,"click"],[2,"width","16px","height","16px","font-size","10px",3,"svgIcon"],[1,"item-text","text-truncate","flex-grow-1","ml-2"]],template:function(e,t){1&e&&(r.ac(0,"div",0),r.ac(1,"div",1),r.ac(2,"div",2),r.ac(3,"input",3),r.kc("ngModelChange",function(e){return t.createNewFromFormatOption=e}),r.Zb(),r.ac(4,"label",4),r.Qc(5," Choose from available formats "),r.Zb(),r.Zb(),r.ac(6,"div",5),r.ac(7,"button",6),r.ac(8,"span",7),r.Qc(9),r.Zb(),r.Vb(10,"mat-icon",8),r.Zb(),r.ac(11,"div",9),r.Oc(12,ft,4,5,"div",10),r.Zb(),r.Zb(),r.ac(13,"button",11),r.kc("click",function(){return t.createNewDesign()}),r.Qc(14," Start Designing "),r.Zb(),r.Zb(),r.ac(15,"div",1),r.ac(16,"div",12),r.ac(17,"input",13),r.kc("ngModelChange",function(e){return t.createNewFromFormatOption=e}),r.Zb(),r.ac(18,"label",14),r.Qc(19," Create with custom dimensions "),r.Zb(),r.Zb(),r.ac(20,"div",15),r.ac(21,"input",16),r.kc("ngModelChange",function(e){return t.customWidth=e}),r.Zb(),r.ac(22,"span",17),r.Qc(23,"X"),r.Zb(),r.ac(24,"input",18),r.kc("ngModelChange",function(e){return t.customHeight=e}),r.Zb(),r.Zb(),r.ac(25,"button",11),r.kc("click",function(){return t.createNewFromCustomDims()}),r.Qc(26," Start Designing "),r.Zb(),r.Zb(),r.Zb()),2&e&&(r.Hb(1),r.Nc("opacity",1==t.createNewFromFormatOption?1:.5),r.Hb(2),r.uc("ngModel",t.createNewFromFormatOption)("value",1),r.Hb(6),r.Sc(" ",t.formatOptionText," "),r.Hb(3),r.uc("ngForOf",t.fabricCanvasHandler.dbEventsHandler.formatsList),r.Hb(1),r.uc("disabled",0==t.createNewFromFormatOption),r.Hb(2),r.Nc("opacity",0==t.createNewFromFormatOption?1:.5),r.Hb(2),r.uc("ngModel",t.createNewFromFormatOption)("value",0),r.Hb(4),r.uc("ngModel",t.customWidth),r.Hb(3),r.uc("ngModel",t.customHeight),r.Hb(1),r.uc("disabled",1==t.createNewFromFormatOption))},directives:[O.o,O.b,O.i,O.l,T.f,T.j,Le.a,T.h,k.l,T.g],styles:[".panel-dropdown[_ngcontent-%COMP%]   .btn.dropdown-toggle[_ngcontent-%COMP%], .panel-dropdown[_ngcontent-%COMP%]   button.dropdown-toggle[_ngcontent-%COMP%]{padding:12px 16px;border-radius:6px;text-align:left;font-size:12px;font-weight:500;background-color:#f0f0f3;color:#000;height:40px}.panel-dropdown[_ngcontent-%COMP%]   .btn.dropdown-toggle[_ngcontent-%COMP%]:hover, .panel-dropdown[_ngcontent-%COMP%]   button.dropdown-toggle[_ngcontent-%COMP%]:hover{background-color:#e2e2e8}.panel-dropdown[_ngcontent-%COMP%]   .arrow-down-icon[_ngcontent-%COMP%]{color:#958eee}.panel-dropdown-menu[_ngcontent-%COMP%]{border-radius:6px;background-color:#f0f0f3;min-width:0;border:none;box-shadow:0 4px 8px rgba(31,31,31,.08)}.panel-dropdown-menu[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]{padding:14px 20px;color:#000;font-weight:500}.panel-dropdown-menu[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:#e2e2e8}.form-check-label[_ngcontent-%COMP%]{color:#000;font-size:14px;font-weight:700;-webkit-user-select:none;-moz-user-select:none;user-select:none}.form-control-panel[_ngcontent-%COMP%]{border:1.5px solid #eef0f6;background-color:#f0f0f3;height:40px;font-size:12px}.form-control-panel[_ngcontent-%COMP%]::-moz-placeholder{color:#626570}.form-control-panel[_ngcontent-%COMP%]::placeholder{color:#626570}.form-control-panel[_ngcontent-%COMP%]:hover{border:1.5px solid #656d86}.form-control-panel[_ngcontent-%COMP%]:focus{border:1.5px solid #5f58b7}.form-control-panel.form-control-lg[_ngcontent-%COMP%]{font-size:14px;height:50px;padding:8px 44px;font-weight:500}"]}),e})();function mt(e,t){if(1&e){const e=r.bc();r.ac(0,"div",8),r.kc("click",function(){r.Ic(e);const a=t.$implicit;return r.oc().copyDesignClick(a.title)}),r.Vb(1,"mat-icon",23),r.ac(2,"span",10),r.Qc(3),r.Zb(),r.Zb()}if(2&e){const e=t.$implicit;r.Hb(1),r.vc("svgIcon",e.icon),r.Hb(2),r.Rc(e.title)}}function Ct(e,t){if(1&e){const e=r.bc();r.ac(0,"div",8),r.kc("click",function(){r.Ic(e);const a=t.$implicit;return r.oc().moveDesignClick(a.title)}),r.Vb(1,"mat-icon",23),r.ac(2,"span",10),r.Qc(3),r.Zb(),r.Zb()}if(2&e){const e=t.$implicit;r.Hb(1),r.vc("svgIcon",e.icon),r.Hb(2),r.Rc(e.title)}}let wt=(()=>{class e{constructor(e,t,a,n){this.fabricCanvasHandler=e,this._modalService=t,this._router=a,this._localStorage=n,this.subMenuItems=[{title:"Workspace",icon:"file-menu-workspace"},{title:"Folder",icon:"folder"}]}ngOnInit(){}onHoverDropdownToggle(e){e.toggle()}goToMyDesigns(){this._router.navigate(["/my-designs"])}copyDesignClick(e){"folder"==e.toLowerCase()?this.copyToFolder():this.copyToWorkspace()}moveDesignClick(e){"folder"==e.toLowerCase()?this.moveToFolder():this.moveToWorkspace()}copyToFolder(){let e=this._modalService.open(gt,{size:"md",centered:!0});e.componentInstance.operation="copy",e.componentInstance.destination="folder",e.componentInstance.designId=this.fabricCanvasHandler.dbEventsHandler.userDesign._id}copyToWorkspace(){let e=this._modalService.open(gt,{size:"md",centered:!0});e.componentInstance.operation="copy",e.componentInstance.destination="workspace",e.componentInstance.designId=this.fabricCanvasHandler.dbEventsHandler.userDesign._id}moveToFolder(){let e=this._modalService.open(gt,{size:"md",centered:!0});e.componentInstance.operation="move",e.componentInstance.destination="folder",e.componentInstance.designId=this.fabricCanvasHandler.dbEventsHandler.userDesign._id}moveToWorkspace(){let e=this._modalService.open(gt,{size:"md",centered:!0});e.componentInstance.operation="move",e.componentInstance.destination="workspace",e.componentInstance.designId=this.fabricCanvasHandler.dbEventsHandler.userDesign._id}rename(){this.designTitleInput.nativeElement.select()}duplicateDesign(){var e,t;let a=this.fabricCanvasHandler.dbEventsHandler.cloneDesignObjectAndRemoveProps();a.design_name=`(Copy) ${a.design_name}`;let n={design:a,originalTemplateDimensions:{width:this.fabricCanvasHandler.drawableAreaCanvasSize.width,height:this.fabricCanvasHandler.drawableAreaCanvasSize.height}};"admin_designer"!==(null===(e=this.fabricCanvasHandler.user)||void 0===e?void 0:e.role)&&"template_designer"!==(null===(t=this.fabricCanvasHandler.user)||void 0===t?void 0:t.role)||(n.templateData={templateName:this.fabricCanvasHandler.dbEventsHandler.templateDesign.template_name||"",tags:this.fabricCanvasHandler.dbEventsHandler.templateDesign.tags||[],templateDescription:this.fabricCanvasHandler.dbEventsHandler.templateDesign.template_desc||""});let i=this.fabricCanvasHandler.drawableAreaCanvasSize.width,r=this.fabricCanvasHandler.drawableAreaCanvasSize.height,s=this.fabricCanvasHandler.docUnits,o=this.fabricCanvasHandler.dbEventsHandler.formatCategoryId;this._localStorage.setItem("resizeJson",JSON.stringify(n)),window.open(`/editor?resize=true&width=${i}&height=${r}&units=${s}&format_category=${o}`,"_blank","menubar=yes,location=yes,resizable=yes,scrollbars=yes,status=yes")}createNewDesign(){this._modalService.open(vt,{size:"md",centered:!0})}}return e.\u0275fac=function(t){return new(t||e)(r.Ub(ke),r.Ub(T.k),r.Ub(n.f),r.Ub(ye.a))},e.\u0275cmp=r.Ob({type:e,selectors:[["app-file-menu"]],inputs:{designTitleInput:"designTitleInput"},decls:47,vars:6,consts:[["ngbDropdown","","display","dynamic",1,"file-menu-dropdown","ml-3"],["ngbDropdownToggle","",1,"btn","file-btn"],["ngbDropdownMenu","",1,"shadow","panel-dropdown-menu","navbar-dropdown-menu",2,"min-width","300px"],[1,"d-flex","flex-column"],[1,"d-flex","flex-column","file-header"],[1,"format-title","primary-text"],[1,"size-text","secondary-text"],[1,"hr-separator"],["ngbDropdownItem","",1,"dropdown-item","d-flex","align-items-center",3,"click"],["svgIcon","add_to_canvas",2,"width","16px","height","16px","font-size","10px","transform","rotate(180deg)"],[1,"item-text","text-truncate","flex-grow-1","ml-2"],["svgIcon","file-menu-new",2,"width","16px","height","16px","font-size","10px"],["svgIcon","file-menu-rename",2,"width","16px","height","16px","font-size","10px"],["ngbDropdown","","display","dynamic","placement","right",1,"top-level-dropdown",3,"mouseenter","mouseleave"],["copyDesignDropdown","ngbDropdown"],["ngbDropdownToggle",""],["ngbDropdownItem","",1,"dropdown-item","d-flex","align-items-center"],["svgIcon","copy",2,"width","16px","height","16px","font-size","10px"],["svgIcon","arrow_down_fill",2,"width","16px","height","16px","font-size","10px","transform","rotate(-90deg)"],["ngbDropdownItem","","class","dropdown-item d-flex align-items-center",3,"click",4,"ngFor","ngForOf"],["moveDesignDropdown","ngbDropdown"],["svgIcon","file-menu-move",2,"width","16px","height","16px","font-size","10px"],["svgIcon","file-menu-duplicate",2,"width","16px","height","16px","font-size","10px"],[2,"width","16px","height","16px","font-size","10px",3,"svgIcon"]],template:function(e,t){if(1&e){const e=r.bc();r.ac(0,"div",0),r.ac(1,"button",1),r.Qc(2,"File"),r.Zb(),r.ac(3,"div",2),r.ac(4,"div",3),r.ac(5,"div",4),r.ac(6,"span",5),r.Qc(7),r.Zb(),r.ac(8,"span",6),r.Qc(9),r.Zb(),r.Zb(),r.Vb(10,"div",7),r.ac(11,"div",8),r.kc("click",function(){return t.goToMyDesigns()}),r.Vb(12,"mat-icon",9),r.ac(13,"span",10),r.Qc(14,"Recent Files"),r.Zb(),r.Zb(),r.ac(15,"div",8),r.kc("click",function(){return t.createNewDesign()}),r.Vb(16,"mat-icon",11),r.ac(17,"span",10),r.Qc(18,"New"),r.Zb(),r.Zb(),r.ac(19,"div",8),r.kc("click",function(){return t.rename()}),r.Vb(20,"mat-icon",12),r.ac(21,"span",10),r.Qc(22,"Rename"),r.Zb(),r.Zb(),r.ac(23,"div",13,14),r.kc("mouseenter",function(){r.Ic(e);const a=r.Ec(24);return t.onHoverDropdownToggle(a)})("mouseleave",function(){r.Ic(e);const a=r.Ec(24);return t.onHoverDropdownToggle(a)}),r.ac(25,"div",15),r.ac(26,"div",16),r.Vb(27,"mat-icon",17),r.ac(28,"span",10),r.Qc(29,"Copy Design"),r.Zb(),r.Vb(30,"mat-icon",18),r.Zb(),r.Zb(),r.ac(31,"div",2),r.Oc(32,mt,4,2,"div",19),r.Zb(),r.Zb(),r.ac(33,"div",13,20),r.kc("mouseenter",function(){r.Ic(e);const a=r.Ec(34);return t.onHoverDropdownToggle(a)})("mouseleave",function(){r.Ic(e);const a=r.Ec(34);return t.onHoverDropdownToggle(a)}),r.ac(35,"div",15),r.ac(36,"div",16),r.Vb(37,"mat-icon",21),r.ac(38,"span",10),r.Qc(39,"Move Design"),r.Zb(),r.Vb(40,"mat-icon",18),r.Zb(),r.Zb(),r.ac(41,"div",2),r.Oc(42,Ct,4,2,"div",19),r.Zb(),r.Zb(),r.ac(43,"div",8),r.kc("click",function(){return t.duplicateDesign()}),r.Vb(44,"mat-icon",22),r.ac(45,"span",10),r.Qc(46,"Duplicate"),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb()}2&e&&(r.Hb(7),r.Rc((null==t.fabricCanvasHandler.dbEventsHandler||null==t.fabricCanvasHandler.dbEventsHandler.formatCategoryObj?null:t.fabricCanvasHandler.dbEventsHandler.formatCategoryObj.title)||"Custom Size"),r.Hb(2),r.Uc("",t.fabricCanvasHandler.drawableAreaCanvasSize.width,"x",t.fabricCanvasHandler.drawableAreaCanvasSize.height," ",t.fabricCanvasHandler.docUnits,""),r.Hb(23),r.uc("ngForOf",t.subMenuItems),r.Hb(10),r.uc("ngForOf",t.subMenuItems))},directives:[T.f,T.j,T.h,T.g,Le.a,k.l],styles:[""]}),e})();var _t=a("xjuu"),yt=a("/jRQ"),xt=a("t1zC");const Ht=["designTitleInput"];function St(e,t){if(1&e&&r.Vb(0,"app-file-menu",78),2&e){const e=r.oc();r.uc("designTitleInput",e.designTitleInput)}}function kt(e,t){if(1&e){const e=r.bc();r.ac(0,"div",66),r.kc("click",function(){r.Ic(e);const a=t.$implicit;return r.oc().updateSelectedFormatOption(a.format_category)}),r.Vb(1,"mat-icon",79),r.ac(2,"span",67),r.Qc(3),r.Zb(),r.Zb()}if(2&e){const e=t.$implicit;r.Hb(1),r.vc("svgIcon",e.icon),r.Hb(2),r.Vc(" ",e.title," - ",e.dimensions.doc_width," x ",e.dimensions.doc_height," ",e.dimensions.units,"")}}function Ot(e,t){1&e&&r.Vb(0,"mat-icon",80)}function It(e,t){1&e&&(r.ac(0,"span",81),r.Qc(1,"Saving..."),r.Zb())}function Pt(e,t){1&e&&r.Vb(0,"mat-icon",82)}function Tt(e,t){if(1&e){const e=r.bc();r.ac(0,"input",83,84),r.kc("blur",function(){r.Ic(e);const t=r.Ec(1);return r.oc().setDesignName(t.value)})("keyup.enter",function(){r.Ic(e);const t=r.Ec(1);return r.oc().setDesignName(t.value)}),r.Zb()}if(2&e){const e=r.oc();r.uc("value",null==e.fabricCanvasHandler.dbEventsHandler.userDesign?null:e.fabricCanvasHandler.dbEventsHandler.userDesign.design_name)}}function Et(e,t){if(1&e){const e=r.bc();r.ac(0,"button",85),r.kc("click",function(){return r.Ic(e),r.oc().getViewportTransformation()}),r.Qc(1," Preview "),r.Zb()}}function Ft(e,t){if(1&e){const e=r.bc();r.ac(0,"button",86),r.kc("click",function(){r.Ic(e);const t=r.oc(),a=r.Ec(120);return t.openDesignerSaveTemplate(a)}),r.Qc(1," Save Template "),r.Zb()}}function At(e,t){if(1&e){const e=r.bc();r.ac(0,"button",87),r.kc("click",function(){return r.Ic(e),r.oc().openBuyProModal()}),r.Qc(1," Upgrade "),r.Zb()}}function Mt(e,t){1&e&&r.Vb(0,"span",88)}function Dt(e,t){1&e&&(r.ac(0,"span",89),r.Qc(1,"DOWNLOAD"),r.Zb())}function jt(e,t){if(1&e&&(r.ac(0,"span",89),r.Qc(1,"DOWNLOAD "),r.ac(2,"span",90),r.Qc(3),r.Zb(),r.Zb()),2&e){const e=r.oc();r.Hb(3),r.Tc(" (",e.fabricCanvasHandler.downloadHandler.creditsRemaining,"/",e.fabricCanvasHandler.downloadHandler.totalDownloadCreditsPerMonth," Remaining) ")}}function Lt(e,t){if(1&e){const e=r.bc();r.ac(0,"div",91),r.ac(1,"span",92),r.Qc(2,"Quality"),r.Zb(),r.ac(3,"input",93,94),r.kc("change",function(){r.Ic(e);const t=r.Ec(4);return r.oc().updateExportOptions("quality",t.value)})("ngModelChange",function(t){return r.Ic(e),r.oc().fabricCanvasHandler.downloadHandler.exportOptions.quality=t}),r.Zb(),r.ac(5,"input",95,96),r.kc("keyup.enter",function(){r.Ic(e);const t=r.Ec(6);return r.oc().updateExportOptions("quality",t.value)})("blur",function(){r.Ic(e);const t=r.Ec(6);return r.oc().updateExportOptions("quality",t.value)})("ngModelChange",function(t){return r.Ic(e),r.oc().fabricCanvasHandler.downloadHandler.exportOptions.quality=t}),r.Zb(),r.Zb()}if(2&e){const e=r.oc();r.Hb(3),r.uc("ngModel",e.fabricCanvasHandler.downloadHandler.exportOptions.quality),r.Hb(2),r.uc("ngModel",e.fabricCanvasHandler.downloadHandler.exportOptions.quality)}}function Zt(e,t){1&e&&(r.ac(0,"span",71),r.Qc(1,"Choose Size"),r.Zb())}function Rt(e,t){if(1&e){const e=r.bc();r.ac(0,"div",66),r.kc("click",function(){r.Ic(e);const a=t.$implicit;return r.oc(2).updateExportOptions("multiplier",a)}),r.ac(1,"span",67),r.Qc(2),r.Zb(),r.Zb()}if(2&e){const e=t.$implicit;r.Hb(2),r.Sc("",e,"x")}}const zt=function(){return[1,2,3,4,5]};function Bt(e,t){if(1&e&&(r.ac(0,"div",62),r.ac(1,"button",73),r.ac(2,"span",64),r.Qc(3),r.Zb(),r.Vb(4,"mat-icon",26),r.Zb(),r.ac(5,"div",65),r.Oc(6,Rt,3,1,"div",28),r.Zb(),r.Zb()),2&e){const e=r.oc();r.Hb(3),r.Sc("",e.fabricCanvasHandler.downloadHandler.exportOptions.multiplier,"x"),r.Hb(3),r.uc("ngForOf",r.xc(2,zt))}}function Ut(e,t){1&e&&r.Vb(0,"mat-icon",98)}function Nt(e,t){if(1&e){const e=r.bc();r.ac(0,"div",66),r.kc("click",function(){r.Ic(e);const a=t.$implicit;return r.oc().setExportValueOfPage(a,!a.export)}),r.ac(1,"span",67),r.Qc(2),r.Zb(),r.Oc(3,Ut,1,0,"mat-icon",97),r.Zb()}if(2&e){const e=t.$implicit,a=t.index;r.Hb(2),r.Rc(e.page_name||"Page "+(a+1)),r.Hb(1),r.uc("ngIf",e.export)}}function Vt(e,t){1&e&&r.Vb(0,"span",88)}function Wt(e,t){if(1&e){const e=r.bc();r.ac(0,"button",99),r.kc("click",function(){return r.Ic(e),r.oc().openLoginSignupModal()}),r.Qc(1," Sign In "),r.Zb()}}function Gt(e,t){if(1&e&&(r.ac(0,"span",126),r.Qc(1),r.pc(2,"firstLetterFromName"),r.Zb()),2&e){const e=r.oc(2);r.Hb(1),r.Rc(r.qc(2,1,e.user))}}function Qt(e,t){if(1&e&&(r.ac(0,"span",127),r.Qc(1),r.pc(2,"firstLetterFromName"),r.Zb()),2&e){const e=r.oc(2);r.Hb(1),r.Rc(r.qc(2,1,e.user))}}const $t=function(){return["/account-settings"]},qt=function(){return["/billing"]};function Yt(e,t){if(1&e){const e=r.bc();r.ac(0,"div",100),r.ac(1,"a",101),r.ac(2,"span",102),r.Oc(3,Gt,3,3,"span",103),r.Zb(),r.Zb(),r.ac(4,"div",104),r.ac(5,"div",105),r.ac(6,"span",106),r.Oc(7,Qt,3,3,"span",107),r.Zb(),r.ac(8,"div",108),r.ac(9,"span",109),r.Qc(10),r.pc(11,"fullNameOfUser"),r.Zb(),r.ac(12,"span",110),r.Qc(13),r.Zb(),r.Zb(),r.Zb(),r.Vb(14,"hr",111),r.ac(15,"a",112),r.Vb(16,"mat-icon",113),r.ac(17,"span",114),r.Qc(18,"Account Settings"),r.Zb(),r.Zb(),r.Vb(19,"hr",111),r.ac(20,"span",115),r.Vb(21,"mat-icon",116),r.ac(22,"span",117),r.Qc(23,"Plan"),r.Zb(),r.ac(24,"span",118),r.Qc(25),r.pc(26,"uppercaseSpace"),r.Zb(),r.Zb(),r.ac(27,"a",112),r.Vb(28,"mat-icon",119),r.ac(29,"span",114),r.Qc(30,"Billing"),r.Zb(),r.Zb(),r.Vb(31,"hr",111),r.ac(32,"a",120),r.Vb(33,"mat-icon",121),r.ac(34,"span",114),r.Qc(35,"Join Facebook Group"),r.Zb(),r.Zb(),r.Vb(36,"hr",111),r.ac(37,"a",122),r.Vb(38,"mat-icon",123),r.ac(39,"span",114),r.Qc(40,"Help Center"),r.Zb(),r.Zb(),r.Vb(41,"hr",111),r.ac(42,"a",124),r.kc("click",function(){return r.Ic(e),r.oc().logout()}),r.Vb(43,"mat-icon",125),r.ac(44,"span",114),r.Qc(45,"Logout"),r.Zb(),r.Zb(),r.Zb(),r.Zb()}if(2&e){const e=r.oc();r.Hb(1),r.vc("title",null==e.user?null:e.user.email),r.Hb(1),r.Nc("background-image",null!=e.user&&e.user.profile_thumbnail_url?"url("+(null==e.user?null:e.user.profile_thumbnail_url)+")":"none"),r.Mb("user-profile-image",null==e.user?null:e.user.profile_thumbnail_url),r.Hb(1),r.uc("ngIf",!(null!=e.user&&e.user.profile_thumbnail_url)),r.Hb(3),r.Nc("background-image",null!=e.user&&e.user.profile_thumbnail_url?"url("+(null==e.user?null:e.user.profile_thumbnail_url)+")":"none"),r.Mb("user-profile-image",null==e.user?null:e.user.profile_thumbnail_url),r.Hb(1),r.uc("ngIf",!(null!=e.user&&e.user.profile_thumbnail_url)),r.Hb(3),r.Rc(r.qc(11,18,e.user)),r.Hb(3),r.Rc(null==e.user?null:e.user.email),r.Hb(2),r.uc("routerLink",r.xc(22,$t)),r.Hb(9),r.Mb("pro-tag","free"!==(null==e.user?null:e.user.user_subscription)),r.Hb(1),r.Rc(r.qc(26,20,null==e.user?null:e.user.user_subscription)),r.Hb(2),r.uc("routerLink",r.xc(23,qt))}}function Xt(e,t){if(1&e&&(r.ac(0,"span",159),r.ac(1,"strong"),r.Qc(2),r.Zb(),r.Zb()),2&e){const e=r.oc(2);r.Hb(2),r.Vc("Template Type: ",e.fabricCanvasHandler.dbEventsHandler.formatCategoryObj.title," - ",e.fabricCanvasHandler.dbEventsHandler.formatCategoryObj.dimensions.doc_width," x ",e.fabricCanvasHandler.dbEventsHandler.formatCategoryObj.dimensions.doc_height," ",e.fabricCanvasHandler.dbEventsHandler.formatCategoryObj.dimensions.units,"")}}function Jt(e,t){if(1&e&&(r.ac(0,"span",159),r.ac(1,"strong"),r.Qc(2),r.Zb(),r.Zb()),2&e){const e=r.oc(2);r.Hb(2),r.Uc("Template Type: Custom Size - ",e.fabricCanvasHandler.drawableAreaCanvasSize.width," x ",e.fabricCanvasHandler.drawableAreaCanvasSize.width," ",e.fabricCanvasHandler.docUnits,"")}}function Kt(e,t){if(1&e&&(r.ac(0,"option",160),r.Qc(1),r.Zb()),2&e){const e=t.$implicit;r.uc("value",e),r.Hb(1),r.Sc(" ",e," ")}}function ea(e,t){if(1&e){const e=r.bc();r.ac(0,"div",161),r.kc("click",function(){r.Ic(e);const a=t.$implicit;return r.oc(2).removeTagFromTagsList(a)}),r.ac(1,"span"),r.Qc(2),r.Zb(),r.Zb()}if(2&e){const e=t.$implicit;r.Hb(2),r.Sc("",e," x")}}function ta(e,t){1&e&&r.Vb(0,"span",88)}function aa(e,t){if(1&e){const e=r.bc();r.ac(0,"button",162),r.kc("click",function(){r.Ic(e),r.oc();const t=r.Ec(16),a=r.Ec(20);return r.oc().saveDesignerTemplate("update",t,a)}),r.Qc(1," Update Template "),r.Oc(2,ta,1,0,"span",53),r.Zb()}if(2&e){const e=r.oc(2);r.uc("disabled",e.fabricCanvasHandler.dbEventsHandler.isSaving),r.Hb(2),r.uc("ngIf",e.fabricCanvasHandler.dbEventsHandler.isSaving)}}function na(e,t){if(1&e){const e=r.bc();r.ac(0,"button",163),r.kc("click",function(){return r.Ic(e),r.oc(2).deleteDesignerTemplate()}),r.Qc(1," Delete Template "),r.Zb()}if(2&e){const e=r.oc(2);r.uc("disabled",e.fabricCanvasHandler.dbEventsHandler.isSaving)}}function ia(e,t){1&e&&r.Vb(0,"span",88)}function ra(e,t){if(1&e){const e=r.bc();r.ac(0,"div",128),r.ac(1,"h4",129),r.Qc(2,"Save Template"),r.Zb(),r.ac(3,"button",130),r.kc("click",function(){return t.$implicit.dismiss("Cross click")}),r.ac(4,"span",131),r.Qc(5,"\xd7"),r.Zb(),r.Zb(),r.Zb(),r.ac(6,"div",132),r.ac(7,"form"),r.ac(8,"div",133),r.ac(9,"div"),r.Oc(10,Xt,3,4,"span",134),r.Oc(11,Jt,3,3,"span",134),r.Zb(),r.ac(12,"div",135),r.ac(13,"label"),r.Qc(14,"Template Name"),r.Zb(),r.ac(15,"input",136,137),r.kc("ngModelChange",function(t){return r.Ic(e),r.oc().fabricCanvasHandler.dbEventsHandler.templateDesign.template_name=t}),r.Zb(),r.ac(17,"label"),r.Qc(18,"Template Description"),r.Zb(),r.ac(19,"input",138,139),r.kc("ngModelChange",function(t){return r.Ic(e),r.oc().fabricCanvasHandler.dbEventsHandler.templateDesign.template_desc=t}),r.Zb(),r.ac(21,"div",140),r.ac(22,"div",141),r.ac(23,"label"),r.Qc(24,"Tags Suggestions To Add"),r.Zb(),r.ac(25,"select",142,143),r.Oc(27,Kt,2,2,"option",144),r.Zb(),r.Zb(),r.ac(28,"div",145),r.ac(29,"button",146),r.kc("click",function(){r.Ic(e);const t=r.Ec(26);return r.oc().addSelectedCategoryToTags(t)}),r.Qc(30," Add Category To Tags "),r.Zb(),r.Zb(),r.Zb(),r.ac(31,"div",140),r.ac(32,"div",141),r.ac(33,"input",147,148),r.kc("keyup.enter",function(){r.Ic(e);const t=r.Ec(34);return r.oc().addTagToTagsList(t)}),r.Zb(),r.Zb(),r.ac(35,"div",149),r.ac(36,"button",150),r.kc("click",function(){r.Ic(e);const t=r.Ec(34);return r.oc().addTagToTagsList(t)}),r.Qc(37," Add Value To Tags "),r.Zb(),r.Zb(),r.Zb(),r.ac(38,"label",151),r.Qc(39,"Tags"),r.Zb(),r.ac(40,"div",152),r.Oc(41,ea,3,1,"div",153),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.ac(42,"div",154),r.ac(43,"button",155),r.kc("click",function(){return t.$implicit.close("Save click")}),r.Qc(44," Cancel "),r.Zb(),r.Oc(45,aa,3,2,"button",156),r.Oc(46,na,2,1,"button",157),r.ac(47,"button",158),r.kc("click",function(){r.Ic(e);const t=r.Ec(16),a=r.Ec(20);return r.oc().saveDesignerTemplate("insert",t,a)}),r.Oc(48,ia,1,0,"span",53),r.Qc(49," Save as New Template "),r.Zb(),r.Zb()}if(2&e){const e=r.oc();r.Hb(10),r.uc("ngIf","custom-size"!=e.fabricCanvasHandler.dbEventsHandler.formatCategoryId),r.Hb(1),r.uc("ngIf","custom-size"==e.fabricCanvasHandler.dbEventsHandler.formatCategoryId),r.Hb(4),r.uc("ngModel",e.fabricCanvasHandler.dbEventsHandler.templateDesign.template_name),r.Hb(4),r.uc("ngModel",e.fabricCanvasHandler.dbEventsHandler.templateDesign.template_desc),r.Hb(8),r.uc("ngForOf",e.fabricCanvasHandler.dbEventsHandler.templateCategoriesList),r.Hb(14),r.uc("ngForOf",e.fabricCanvasHandler.dbEventsHandler.templateDesign.tags),r.Hb(4),r.uc("ngIf",e.fabricCanvasHandler.dbEventsHandler.templateDesign._id&&("admin_designer"==e.user.role||e.fabricCanvasHandler.dbEventsHandler.templateDesign.user_id==e.user._id)),r.Hb(1),r.uc("ngIf",e.fabricCanvasHandler.dbEventsHandler.templateDesign._id&&"admin_designer"==e.user.role),r.Hb(1),r.uc("disabled",e.fabricCanvasHandler.dbEventsHandler.isSaving),r.Hb(1),r.uc("ngIf",e.fabricCanvasHandler.dbEventsHandler.isSaving)}}const sa=function(){return["/home"]};let oa=(()=>{class e{constructor(e,t,a,n,i,r,s){this.fabricCanvasHandler=e,this._userService=t,this._templateService=a,this._router=n,this._modalService=i,this._gaEventsService=r,this._localStorage=s,this.currentWorkspaceName=f.a.PERSONAL_WORKSPACE,this.customResizeHeight=f.a.MIN_CANVAS_WIDTH,this.customResizeWidth=f.a.MIN_CANVAS_HEIGHT,this.resizeFormatsCheckboxes=[],this.formatOptionValue="facebook-post",this.resizeToFormatOption=1}ngOnInit(){let e=JSON.parse(this._localStorage.getItem("currentWorkspace"));this.currentWorkspaceName=e?e.name:f.a.PERSONAL_WORKSPACE,this.updateSelectedFormatOption(this.formatOptionValue)}setDesignName(e){""!=e.trim()&&(this.fabricCanvasHandler.dbEventsHandler.userDesign.design_name=e,this.fabricCanvasHandler.dbEventsHandler.saveUserDesign())}setExportValueOfPage(e,t){this.fabricCanvasHandler.pagesHandler.setExportValueOfPage(e,t),this.setExportPagesLengthValue()}setExportPagesLengthValue(){let e=this.fabricCanvasHandler.dbEventsHandler.userDesign.pages.filter(e=>e.export).length;return this.exportPagesLengthValue=0==e?"Select Pages":e==this.fabricCanvasHandler.dbEventsHandler.userDesign.pages.length?`All Pages (${e})`:`Total Pages (${e})`}updateSelectedFormatOption(e){this.fabricCanvasHandler.dbEventsHandler.formatsList.forEach(t=>{t.format_category==e&&(this.formatOptionValue=t.format_category,this.formatOptionText=`${t.title} - ${t.dimensions.doc_width} x\n                ${t.dimensions.doc_height}\n                ${t.dimensions.units}`)})}openBuyProModal(){this._modalService.open(rt.a,{size:"lg",centered:!0,modalDialogClass:"modal-ltd-checkout"}),this._gaEventsService.eventEmitter("ltd-popup","popup-view","Upgrade button clicked from editor navbar")}openLoginSignupModal(){this._modalService.open(ee,{size:"lg",centered:!0})}openDesignerSaveTemplate(e){this._modalService.open(e,{size:"lg"})}addSelectedCategoryToTags(e){-1===this.fabricCanvasHandler.dbEventsHandler.templateDesign.tags.indexOf(e.value)&&this.fabricCanvasHandler.dbEventsHandler.templateDesign.tags.push(e.value)}addTagToTagsList(e){""!=e.value.trim()&&(this.fabricCanvasHandler.dbEventsHandler.templateDesign.tags.push(e.value),e.value="")}removeTagFromTagsList(e){const t=this.fabricCanvasHandler.dbEventsHandler.templateDesign.tags.indexOf(e);t>-1&&this.fabricCanvasHandler.dbEventsHandler.templateDesign.tags.splice(t,1)}saveDesignerTemplate(e,t,a){this.fabricCanvasHandler.dbEventsHandler.saveDesignerTemplate(e,t,a)}deleteDesignerTemplate(){this.fabricCanvasHandler.dbEventsHandler.deleteDesignerTemplate(this._templateService,this._modalService,this._router)}customDimResize(){var e,t;if(!this.user)return this.openLoginSignupModal();if(!this._userService.canUserAccessProFeatures())return this._modalService.open(C.a,{size:"lg",centered:!0,modalDialogClass:"modal-buy-ltd-individual"}).componentInstance.selectedFeatureId="resize";if(null==this.customResizeWidth||null==this.customResizeWidth)return void alert("Custom Dimensions cannot be empty");if(isNaN(this.customResizeHeight)||isNaN(this.customResizeWidth))return void alert("Custom Dimensions should be numbers only");if(this.customResizeWidth<f.a.MIN_CANVAS_WIDTH||this.customResizeHeight<f.a.MIN_CANVAS_HEIGHT)return void alert(`Min width & height is ${f.a.MIN_CANVAS_WIDTH} pixels`);let a=this.fabricCanvasHandler.dbEventsHandler.cloneDesignObjectAndRemoveProps(),n=(this.fabricCanvasHandler.basicToolsHandler.removeAbnormalValuesFromJSON(this.fabricCanvasHandler.getCurrentFabricCanvas().toJSON(this.fabricCanvasHandler.objectPropertiesToInclude)),{design:a,originalTemplateDimensions:{width:this.fabricCanvasHandler.drawableAreaCanvasSize.width,height:this.fabricCanvasHandler.drawableAreaCanvasSize.height}});"admin_designer"!==(null===(e=this.user)||void 0===e?void 0:e.role)&&"template_designer"!==(null===(t=this.user)||void 0===t?void 0:t.role)||(n.templateData={templateName:this.fabricCanvasHandler.dbEventsHandler.templateDesign.template_name||"",tags:this.fabricCanvasHandler.dbEventsHandler.templateDesign.tags||[],templateDescription:this.fabricCanvasHandler.dbEventsHandler.templateDesign.template_desc||""}),this._localStorage.setItem("resizeJson",JSON.stringify(n)),window.open(`/editor?resize=true&width=${this.customResizeWidth}&height=${this.customResizeHeight}&units=px&format_category=custom-size`,"custom"),this._gaEventsService.eventEmitter("Resize feature","Resize feature - custom",`width=${this.customResizeWidth}&height=${this.customResizeHeight}&units=px`,null)}openResizeTemplateInNewTab(){var e,t;if(!this.user)return this.openLoginSignupModal();if(!this._userService.canUserAccessProFeatures())return this._modalService.open(C.a,{size:"lg",centered:!0,modalDialogClass:"modal-buy-ltd-individual"}).componentInstance.selectedFeatureId="resize";let a;"default"==this.formatOptionValue?a={format_category:"default",dimensions:{doc_width:1e3,doc_height:1e3,units:"px"}}:this.fabricCanvasHandler.dbEventsHandler.formatsList.forEach(e=>{e.format_category==this.formatOptionValue&&(a=e)});let n={design:this.fabricCanvasHandler.dbEventsHandler.cloneDesignObjectAndRemoveProps(),originalTemplateDimensions:{width:this.fabricCanvasHandler.drawableAreaCanvasSize.width,height:this.fabricCanvasHandler.drawableAreaCanvasSize.height}};"admin_designer"!==(null===(e=this.user)||void 0===e?void 0:e.role)&&"template_designer"!==(null===(t=this.user)||void 0===t?void 0:t.role)||(n.templateData={templateName:this.fabricCanvasHandler.dbEventsHandler.templateDesign.template_name||"",tags:this.fabricCanvasHandler.dbEventsHandler.templateDesign.tags||[],templateDescription:this.fabricCanvasHandler.dbEventsHandler.templateDesign.template_desc||""}),this._localStorage.setItem("resizeJson",JSON.stringify(n)),window.open(`/editor?resize=true&width=${a.dimensions.doc_width}&height=${a.dimensions.doc_height}&units=${a.dimensions.units}&format_category=${a.format_category}`,"_blank","menubar=yes,location=yes,resizable=yes,scrollbars=yes,status=yes"),this._gaEventsService.eventEmitter("Resize feature","Resize feature - format category",`${a.format_category}`,null)}updateExportOptions(e,t){"quality"===e&&isNaN(t)?this.fabricCanvasHandler.downloadHandler.exportOptions.quality=80:this.fabricCanvasHandler.downloadHandler.exportOptions[e]=t}downloadDesign(e){e.close(),this.fabricCanvasHandler.downloadHandler.downloadDesign(this.fabricCanvasHandler.dbEventsHandler.userDesign,this._modalService,this._userService)}logout(){this._userService.logoutUserSession()}getViewportTransformation(){console.log(this.fabricCanvasHandler.getCurrentFabricCanvas().getActiveObject()),console.log(this.fabricCanvasHandler.getCurrentFabricCanvas().getActiveObject().imageUploading),console.log(this.fabricCanvasHandler.getCurrentFabricCanvas().getObjects())}}return e.\u0275fac=function(t){return new(t||e)(r.Ub(ke),r.Ub(P.a),r.Ub(ve.a),r.Ub(n.f),r.Ub(T.k),r.Ub(F.a),r.Ub(ye.a))},e.\u0275cmp=r.Ob({type:e,selectors:[["app-editor-navbar"]],viewQuery:function(e,t){if(1&e&&r.Wc(Ht,1),2&e){let e;r.Dc(e=r.lc())&&(t.designTitleInput=e.first)}},inputs:{user:"user",KEYBOARD_SHORTCUTS:"KEYBOARD_SHORTCUTS"},decls:121,vars:48,consts:[[1,"navbar","navbar-expand-lg","px-editor-navbar"],[1,"container-fluid"],[1,"px-navbar-contents","d-flex","flex-row","flex-grow-1"],[1,"left-side-contents","d-flex","flex-row","justify-content","align-items-center","flex-grow-1"],[1,"navbar-brand",3,"routerLink"],["width","40","height","40","viewBox","0 0 128 128","fill","none","xmlns","http://www.w3.org/2000/svg"],["id","logo-bg","d","M0 52.9655C0 27.9973 0 15.5132 7.75662 7.75662C15.5132 0 27.9973 0 52.9655 0H75.0345C100.003 0 112.487 0 120.243 7.75662C128 15.5132 128 27.9973 128 52.9655V75.0345C128 100.003 128 112.487 120.243 120.243C112.487 128 100.003 128 75.0345 128H52.9655C27.9973 128 15.5132 128 7.75662 120.243C0 112.487 0 100.003 0 75.0345V52.9655Z","fill","#1D1D1D"],["id","logo-path","d","M102.34 56.5957L81.1898 35.446L60.0401 56.5957L81.1898 77.7454L102.34 56.5957Z","fill","#E1DFFF"],["id","logo-path","d","M52.9171 35.446H36.4717V98.2262H52.9171V35.446Z","fill","#E1DFFF"],["placement","bottom",1,"user-workspace",3,"ngbTooltip"],[1,"text-truncate"],[3,"designTitleInput",4,"ngIf"],["placement","bottom","ngbTooltip","Resize template to different formats"],["ngbDropdown","","autoClose","outside","display","dynamic","placement","bottom-left",1,"ml-3"],["ngbDropdownToggle","","id","resize-design-tool",1,"btn","btn-primary","btn-navbar","btn-resize-dropdown","d-flex","flex-row","align-items-center"],["svgIcon","resize2",1,"ml-0",2,"height","14px","width","14px","font-size","6px"],[1,"ml-1"],["ngbDropdownMenu","","aria-labelledby","dropdownForm1",1,"shadow","resize-dropdown-menu","panel-dropdown-menu","navbar-dropdown-menu"],[1,"d-flex","flex-column",2,"padding","35px"],[1,"d-flex","flex-column"],[1,"form-check"],["type","radio","id","resize-format",1,"form-check-input",3,"ngModel","value","ngModelChange"],["for","resize-format",1,"form-check-label","primary-text"],["ngbDropdown","",1,"panel-dropdown","mt-4"],["ngbDropdownToggle","",1,"btn","btn-block","btn","btn-block","btn-resize-format-dropdown","d-flex","flex-row","align-items-center","no-caret-dropdown"],[1,"flex-grow-1"],["svgIcon","arrow_down",1,"arrow-down-icon"],["ngbDropdownMenu","",1,"panel-dropdown-menu","w-100",2,"min-height","18rem","max-height","22rem","overflow-y","auto"],["ngbDropdownItem","","class","dropdown-item d-flex align-items-center",3,"click",4,"ngFor","ngForOf"],[1,"btn","btn-primary","mt-3","btn-resize-format",3,"disabled","click"],[1,"form-check","mt-4"],["type","radio","id","resize-custom-dims",1,"form-check-input",3,"ngModel","value","ngModelChange"],["for","resize-custom-dims",1,"form-check-label","primary-text"],[1,"d-flex","flex-row","align-items-center","mt-4"],["placeholder","Width (px)","type","text",1,"form-control","editor-form-control","form-control-panel",3,"ngModel","ngModelChange"],[1,"secondary-text","mx-3",2,"font-weight","900","font-size","16px"],["placeholder","Height (px)","type","text",1,"form-control","editor-form-control","form-control-panel",3,"ngModel","ngModelChange"],[1,"btn","btn-primary","mt-3","btn-resize-custom",3,"disabled","click"],["placement","bottom",1,"toolbar-icon-btn","btn-undo","ml-3",3,"ngbTooltip","disabled","click"],["svgIcon","undo",1,"toolbar-icon"],["placement","bottom",1,"toolbar-icon-btn","btn-redo","active",2,"margin-left","8px",3,"ngbTooltip","disabled","click"],["svgIcon","redo",1,"toolbar-icon"],[1,"right-side-contents","d-flex","flex-row","justify-content","align-items-center"],["svgIcon","cloud_done","class","toolbar-icon saved-cloud-icon ml-2","placement","bottom","ngbTooltip","Save Design",4,"ngIf"],["class","primary-text","style","font-size: 12px; font-weight: 600",4,"ngIf"],["svgIcon","cloud_save","class","toolbar-icon primary-text unsaved-cloud-icon ml-2","placement","bottom","ngbTooltip","Save Design",4,"ngIf"],["type","text","class","form-control editor-form-control form-control-lg form-control-design-name ml-2","placement","bottom","ngbTooltip","Rename",3,"value","blur","keyup.enter",4,"ngIf"],["class","btn btn-primary ml-2",3,"click",4,"ngIf"],["class","btn btn-primary btn-navbar ml-2","title","Save Template",3,"click",4,"ngIf"],["style","margin-left: 8px","class","d-flex flex-row align-items-center btn btn-upgrade",3,"click",4,"ngIf"],["ngbDropdown","","autoClose","outside","display","dynamic","placement","bottom-right",1,"position-relative",2,"margin-left","8px"],["downloadDropdown","ngbDropdown"],["ngbDropdownToggle","","placement","bottom",1,"btn","btn-primary","btn-download","btn-navbar","d-flex","flex-row","align-items-center",3,"disabled"],["class","spinner-border spinner-border-sm mr-1",4,"ngIf"],["svgIcon","download",1,"download-icon","ml-0",2,"height","14px","width","14px","font-size","6px"],["ngbDropdownMenu","",1,"download-dropdown-menu","panel-dropdown-menu","navbar-dropdown-menu"],[1,"header","d-flex","align-items-center",2,"padding","30px 22px 23px 26px"],["svgIcon","download_black",1,"mr-3","primary-text-icon-color","ml-0",2,"height","15px","width","15px","font-size","10px"],["class","primary-text","style","font-size: 14px; font-weight: 600",4,"ngIf"],[1,"hr-separator"],[1,"options","d-flex","flex-column",2,"padding","22px"],[1,"option-header","primary-text"],["ngbDropdown","",1,"panel-dropdown"],["ngbDropdownToggle","",1,"btn","d-flex","flex-row","justify-content-center","align-items-center","btn-block","no-caret-dropdown",2,"font-weight","500","padding","6px 12px"],[1,"flex-grow-1","primary-text",2,"font-size","12px"],["ngbDropdownMenu","","aria-labelledby","exportFormatsDropdown",1,"panel-dropdown-menu","w-100","mt-2"],["ngbDropdownItem","",1,"dropdown-item","d-flex","align-items-center",3,"click"],[1,"item-text","text-truncate","flex-grow-1","ml-2"],["class","jpg-quality d-flex flex-row align-items-center mt-3",4,"ngIf"],["class","option-header primary-text mt-4",4,"ngIf"],["ngbDropdown","","class","panel-dropdown",4,"ngIf"],[1,"option-header","primary-text","mt-4"],["ngbDropdown","","display","dynamic","autoClose","outside",1,"panel-dropdown","pages-panel-dropdown"],["ngbDropdownToggle","",1,"btn","d-flex","flex-row","align-items-center","justify-content-center","btn-block","no-caret-dropdown",2,"font-weight","500","padding","6px 12px"],[1,"btn","btn-block","btn-primary","btn-download","mt-3",3,"disabled","click"],["class","btn btn-signin btn-outline-primary","style","margin-left: 8px",3,"click",4,"ngIf"],["style","margin-left: 16px","ngbDropdown","","display","dynamic","placement","bottom-right",4,"ngIf"],["templateDesignerSaveTemplateModalContent",""],[3,"designTitleInput"],[2,"width","16px","height","16px","font-size","10px",3,"svgIcon"],["svgIcon","cloud_done","placement","bottom","ngbTooltip","Save Design",1,"toolbar-icon","saved-cloud-icon","ml-2"],[1,"primary-text",2,"font-size","12px","font-weight","600"],["svgIcon","cloud_save","placement","bottom","ngbTooltip","Save Design",1,"toolbar-icon","primary-text","unsaved-cloud-icon","ml-2"],["type","text","placement","bottom","ngbTooltip","Rename",1,"form-control","editor-form-control","form-control-lg","form-control-design-name","ml-2",3,"value","blur","keyup.enter"],["designTitleInput",""],[1,"btn","btn-primary","ml-2",3,"click"],["title","Save Template",1,"btn","btn-primary","btn-navbar","ml-2",3,"click"],[1,"d-flex","flex-row","align-items-center","btn","btn-upgrade",2,"margin-left","8px",3,"click"],[1,"spinner-border","spinner-border-sm","mr-1"],[1,"primary-text",2,"font-size","14px","font-weight","600"],[1,"secondary-text",2,"font-size","10px","padding-left","2px"],[1,"jpg-quality","d-flex","flex-row","align-items-center","mt-3"],[1,"option-header","primary-text","mb-0"],["type","range",1,"px-2","custom-range",3,"ngModel","change","ngModelChange"],["qualityRangeSlider",""],["type","text",1,"form-control","editor-form-control","form-control-sm",2,"width","2.5rem","text-align","center",3,"ngModel","keyup.enter","blur","ngModelChange"],["qualityRangeInput",""],["style","width: 18px; height: 18px; font-size: 10px","svgIcon","header-check",4,"ngIf"],["svgIcon","header-check",2,"width","18px","height","18px","font-size","10px"],[1,"btn","btn-signin","btn-outline-primary",2,"margin-left","8px",3,"click"],["ngbDropdown","","display","dynamic","placement","bottom-right",2,"margin-left","16px"],["ngbDropdownToggle","","id","userDropdown","role","button",1,"dropdown-user",2,"cursor","pointer","display","flex","flex-direction","row","align-items","center",3,"title"],[1,"user-circle",2,"width","40px","height","40px"],["class","user-letter","style","font-size: 20px",4,"ngIf"],["ngbDropdownMenu","","aria-labelledby","userDropdown",1,"px-dropdown-menu"],[1,"header-area","d-flex"],[1,"user-circle"],["class","user-letter",4,"ngIf"],[1,"d-flex","flex-column",2,"width","80%","margin-left","8px"],[1,"headline","text-truncate"],[1,"subheadline","text-truncate"],[1,"divider"],["ngbDropdownItem","",1,"dropdown-item","d-flex",3,"routerLink"],["svgIcon","header-settings",1,"item-icon"],[1,"item-text"],["ngbDropdownItem","",1,"dropdown-item","d-flex"],["svgIcon","header-plan",1,"item-icon"],[1,"item-text","flex-grow-1"],[1,"tag","free-tag"],["svgIcon","header-invoice",1,"item-icon"],["ngbDropdownItem","","href","https://www.facebook.com/groups/417169315953663/","rel","noopener","target","_blank",1,"dropdown-item","d-flex"],["svgIcon","header-fb",1,"item-icon"],["ngbDropdownItem","","href","https://help.pixelied.com","target","_blank","rel","noopener",1,"dropdown-item","d-flex"],["svgIcon","header-help",1,"item-icon"],["ngbDropdownItem","","href","javascript:void(0)",1,"dropdown-item","d-flex",3,"click"],["svgIcon","header-logout",1,"item-icon"],[1,"user-letter",2,"font-size","20px"],[1,"user-letter"],[1,"modal-header"],[1,"modal-title","black-text"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"form-group"],["class","black-text",4,"ngIf"],[1,"form-group","my-4"],["name","template_name","type","text","placeholder","Template Name",1,"form-control","mb-2",3,"ngModel","ngModelChange"],["templateNameInput",""],["name","template_desc","type","text","placeholder","Template Description",1,"form-control","mb-2",3,"ngModel","ngModelChange"],["templateDescInput",""],[1,"row"],[1,"col-md-8"],[1,"form-control","mb-2"],["categoryInput",""],[3,"value",4,"ngFor","ngForOf"],[1,"col-md-4","mt-4"],["type","button",1,"btn","btn-primary","float-right",3,"click"],["id","tags-input","name","tag","type","text","placeholder","Tag (abstract,earth day,green etc)",1,"form-control",3,"keyup.enter"],["templateTagsInput",""],[1,"col-md-4"],[1,"btn","btn-primary","float-right",3,"click"],[1,"mt-3"],[1,"chips-container","d-flex","flex-row","flex-wrap"],["class","chip px-2 py-2",3,"click",4,"ngFor","ngForOf"],[1,"modal-footer"],["type","button",1,"btn","btn-sm","black-text",3,"click"],["type","button","class","btn btn-sm btn-warning",3,"disabled","click",4,"ngIf"],["type","button","class","btn btn-sm btn-danger",3,"disabled","click",4,"ngIf"],["type","button",1,"btn","btn-sm","btn-primary",3,"disabled","click"],[1,"black-text"],[3,"value"],[1,"chip","px-2","py-2",3,"click"],["type","button",1,"btn","btn-sm","btn-warning",3,"disabled","click"],["type","button",1,"btn","btn-sm","btn-danger",3,"disabled","click"]],template:function(e,t){if(1&e){const e=r.bc();r.ac(0,"nav",0),r.ac(1,"div",1),r.ac(2,"div",2),r.ac(3,"div",3),r.ac(4,"a",4),r.nc(),r.ac(5,"svg",5),r.Vb(6,"path",6),r.Vb(7,"path",7),r.Vb(8,"path",8),r.Zb(),r.Zb(),r.mc(),r.ac(9,"div",9),r.ac(10,"span",10),r.Qc(11),r.Zb(),r.Zb(),r.Oc(12,St,1,1,"app-file-menu",11),r.ac(13,"div",12),r.ac(14,"div",13),r.ac(15,"button",14),r.Vb(16,"mat-icon",15),r.ac(17,"span",16),r.Qc(18,"Resize"),r.Zb(),r.Zb(),r.ac(19,"div",17),r.ac(20,"div",18),r.ac(21,"div",19),r.ac(22,"div",20),r.ac(23,"input",21),r.kc("ngModelChange",function(e){return t.resizeToFormatOption=e}),r.Zb(),r.ac(24,"label",22),r.Qc(25," Resize to another format "),r.Zb(),r.Zb(),r.ac(26,"div",23),r.ac(27,"button",24),r.ac(28,"span",25),r.Qc(29),r.Zb(),r.Vb(30,"mat-icon",26),r.Zb(),r.ac(31,"div",27),r.Oc(32,kt,4,5,"div",28),r.Zb(),r.Zb(),r.ac(33,"button",29),r.kc("click",function(){return t.openResizeTemplateInNewTab()}),r.Qc(34," Resize "),r.Zb(),r.Zb(),r.ac(35,"div",19),r.ac(36,"div",30),r.ac(37,"input",31),r.kc("ngModelChange",function(e){return t.resizeToFormatOption=e}),r.Zb(),r.ac(38,"label",32),r.Qc(39," Resize to custom dimensions "),r.Zb(),r.Zb(),r.ac(40,"div",33),r.ac(41,"input",34),r.kc("ngModelChange",function(e){return t.customResizeWidth=e}),r.Zb(),r.ac(42,"span",35),r.Qc(43,"X"),r.Zb(),r.ac(44,"input",36),r.kc("ngModelChange",function(e){return t.customResizeHeight=e}),r.Zb(),r.Zb(),r.ac(45,"button",37),r.kc("click",function(){return t.customDimResize()}),r.Qc(46," Resize "),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.ac(47,"button",38),r.kc("click",function(){return t.fabricCanvasHandler.historyHandlerV.undoWork()}),r.Vb(48,"mat-icon",39),r.Zb(),r.ac(49,"button",40),r.kc("click",function(){return t.fabricCanvasHandler.historyHandlerV.redoWork()}),r.Vb(50,"mat-icon",41),r.Zb(),r.Zb(),r.ac(51,"div",42),r.Oc(52,Ot,1,0,"mat-icon",43),r.Oc(53,It,2,0,"span",44),r.Oc(54,Pt,1,0,"mat-icon",45),r.Oc(55,Tt,2,1,"input",46),r.Oc(56,Et,2,0,"button",47),r.Oc(57,Ft,2,0,"button",48),r.Oc(58,At,2,0,"button",49),r.ac(59,"div",50,51),r.ac(61,"button",52),r.Oc(62,Mt,1,0,"span",53),r.Vb(63,"mat-icon",54),r.ac(64,"span",16),r.Qc(65,"Download"),r.Zb(),r.Zb(),r.ac(66,"div",55),r.ac(67,"div",56),r.Vb(68,"mat-icon",57),r.Oc(69,Dt,2,0,"span",58),r.Oc(70,jt,4,2,"span",58),r.Zb(),r.Vb(71,"div",59),r.ac(72,"div",60),r.ac(73,"span",61),r.Qc(74,"Choose a format"),r.Zb(),r.ac(75,"div",62),r.ac(76,"button",63),r.ac(77,"span",64),r.Qc(78),r.Zb(),r.Vb(79,"mat-icon",26),r.Zb(),r.ac(80,"div",65),r.ac(81,"div",66),r.kc("click",function(){return t.updateExportOptions("format","JPG")}),r.ac(82,"span",67),r.Qc(83,"JPG"),r.Zb(),r.Zb(),r.ac(84,"div",66),r.kc("click",function(){return t.updateExportOptions("format","PNG")}),r.ac(85,"span",67),r.Qc(86,"PNG"),r.Zb(),r.Zb(),r.ac(87,"div",66),r.kc("click",function(){return t.updateExportOptions("format","PNG Transparent")}),r.ac(88,"span",67),r.Qc(89,"PNG Transparent"),r.Zb(),r.Zb(),r.ac(90,"div",66),r.kc("click",function(){return t.updateExportOptions("format","PDF")}),r.ac(91,"span",67),r.Qc(92,"PDF (Beta)"),r.Zb(),r.Zb(),r.ac(93,"div",66),r.kc("click",function(){return t.updateExportOptions("format","SVG")}),r.ac(94,"span",67),r.Qc(95,"SVG (Beta)"),r.Zb(),r.Zb(),r.ac(96,"div",66),r.kc("click",function(){return t.updateExportOptions("format","WEBP")}),r.ac(97,"span",67),r.Qc(98,"WEBP"),r.Zb(),r.Zb(),r.ac(99,"div",66),r.kc("click",function(){return t.updateExportOptions("format","WEBP Transparent")}),r.ac(100,"span",67),r.Qc(101,"WEBP Transparent"),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Oc(102,Lt,7,2,"div",68),r.Oc(103,Zt,2,0,"span",69),r.Oc(104,Bt,7,3,"div",70),r.ac(105,"span",71),r.Qc(106,"Select Pages"),r.Zb(),r.ac(107,"div",72),r.ac(108,"button",73),r.ac(109,"span",64),r.Qc(110),r.Zb(),r.Vb(111,"mat-icon",26),r.Zb(),r.ac(112,"div",65),r.Oc(113,Nt,4,2,"div",28),r.Zb(),r.Zb(),r.ac(114,"button",74),r.kc("click",function(){r.Ic(e);const a=r.Ec(60);return t.downloadDesign(a)}),r.Oc(115,Vt,1,0,"span",53),r.Qc(116," Download "),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Oc(117,Wt,2,0,"button",75),r.Oc(118,Yt,46,24,"div",76),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Oc(119,ra,50,10,"ng-template",null,77,r.Pc)}2&e&&(r.Hb(4),r.uc("routerLink",r.xc(47,sa)),r.Hb(5),r.vc("ngbTooltip",t.currentWorkspaceName),r.Hb(2),r.Rc(t.currentWorkspaceName),r.Hb(1),r.uc("ngIf",t.user),r.Hb(9),r.Nc("opacity",1==t.resizeToFormatOption?1:.5),r.Hb(2),r.uc("ngModel",t.resizeToFormatOption)("value",1),r.Hb(6),r.Sc(" ",t.formatOptionText," "),r.Hb(3),r.uc("ngForOf",t.fabricCanvasHandler.dbEventsHandler.formatsList),r.Hb(1),r.uc("disabled",0==t.resizeToFormatOption),r.Hb(2),r.Nc("opacity",0==t.resizeToFormatOption?1:.5),r.Hb(2),r.uc("ngModel",t.resizeToFormatOption)("value",0),r.Hb(4),r.uc("ngModel",t.customResizeWidth),r.Hb(3),r.uc("ngModel",t.customResizeHeight),r.Hb(1),r.uc("disabled",1==t.resizeToFormatOption),r.Hb(2),r.Mb("active",t.fabricCanvasHandler.historyHandlerV.undoStack.length>0),r.vc("ngbTooltip",t.KEYBOARD_SHORTCUTS.UNDO),r.uc("disabled",0===t.fabricCanvasHandler.historyHandlerV.undoStack.length),r.Hb(2),r.Mb("active",t.fabricCanvasHandler.historyHandlerV.redoStack.length>0),r.vc("ngbTooltip",t.KEYBOARD_SHORTCUTS.REDO),r.uc("disabled",0===t.fabricCanvasHandler.historyHandlerV.redoStack.length),r.Hb(3),r.uc("ngIf","Saved!"===t.fabricCanvasHandler.dbEventsHandler.saveState&&("user"===(null==t.user?null:t.user.role)||"admin_designer"===(null==t.user?null:t.user.role))),r.Hb(1),r.uc("ngIf","Saving..."===t.fabricCanvasHandler.dbEventsHandler.saveState),r.Hb(1),r.uc("ngIf",("Unsaved"===t.fabricCanvasHandler.dbEventsHandler.saveState||"Saving..."===t.fabricCanvasHandler.dbEventsHandler.saveState)&&"user"===(null==t.user?null:t.user.role)),r.Hb(1),r.uc("ngIf","user"==(null==t.user?null:t.user.role)),r.Hb(1),r.uc("ngIf","admin_designer"==(null==t.user?null:t.user.role)),r.Hb(1),r.uc("ngIf","template_designer"==(null==t.user?null:t.user.role)||"admin_designer"==(null==t.user?null:t.user.role)),r.Hb(1),r.uc("ngIf","free"===(null==t.user?null:t.user.user_subscription)),r.Hb(3),r.uc("disabled",t.fabricCanvasHandler.downloadHandler.isExporting),r.Hb(1),r.uc("ngIf",t.fabricCanvasHandler.downloadHandler.isExporting),r.Hb(7),r.uc("ngIf","free"!==(null==t.fabricCanvasHandler.user?null:t.fabricCanvasHandler.user.user_subscription)||!t.fabricCanvasHandler.user||"no_limit"===t.fabricCanvasHandler.downloadHandler.downloadLimits),r.Hb(1),r.uc("ngIf","free"===(null==t.fabricCanvasHandler.user?null:t.fabricCanvasHandler.user.user_subscription)&&"limited"===t.fabricCanvasHandler.downloadHandler.downloadLimits),r.Hb(8),r.Rc(t.fabricCanvasHandler.downloadHandler.exportOptions.format),r.Hb(24),r.uc("ngIf","JPG"===t.fabricCanvasHandler.downloadHandler.exportOptions.format||"WEBP"===t.fabricCanvasHandler.downloadHandler.exportOptions.format),r.Hb(1),r.uc("ngIf","SVG"!==t.fabricCanvasHandler.downloadHandler.exportOptions.format&&"PDF"!==t.fabricCanvasHandler.downloadHandler.exportOptions.format),r.Hb(1),r.uc("ngIf","SVG"!==t.fabricCanvasHandler.downloadHandler.exportOptions.format&&"PDF"!==t.fabricCanvasHandler.downloadHandler.exportOptions.format),r.Hb(6),r.Rc(t.exportPagesLengthValue||"All Pages ("+(null==t.fabricCanvasHandler.dbEventsHandler||null==t.fabricCanvasHandler.dbEventsHandler.userDesign?null:t.fabricCanvasHandler.dbEventsHandler.userDesign.pages.length)+")"),r.Hb(3),r.uc("ngForOf",null==t.fabricCanvasHandler.dbEventsHandler||null==t.fabricCanvasHandler.dbEventsHandler.userDesign?null:t.fabricCanvasHandler.dbEventsHandler.userDesign.pages),r.Hb(1),r.uc("disabled",t.fabricCanvasHandler.downloadHandler.isExporting),r.Hb(1),r.uc("ngIf",t.fabricCanvasHandler.downloadHandler.isExporting),r.Hb(2),r.uc("ngIf",!t.user),r.Hb(1),r.uc("ngIf",t.user))},directives:[T.m,n.h,T.q,k.m,T.f,T.j,Le.a,T.h,O.o,O.b,O.i,O.l,k.l,T.g,wt,O.p,O.u,O.j,O.k,O.m,O.v],pipes:[_t.a,yt.a,xt.a],styles:['.dropdown-user[_ngcontent-%COMP%]:after{display:block;margin-left:.555em;content:"";border-top:.4em solid #5f58b7;border-right:.4em solid transparent;border-bottom:0;border-left:.4em solid transparent}']}),e})();function ca(e,t){if(1&e){const e=r.bc();r.ac(0,"div",1),r.kc("click",function(){r.Ic(e);const a=t.$implicit;return r.oc().sidebarItemClicked(a.sidebarItemId,a.sidebarItemTitle)}),r.Vb(1,"mat-icon",2),r.ac(2,"span"),r.Qc(3),r.Zb(),r.Vb(4,"div",3),r.Zb()}if(2&e){const e=t.$implicit,a=r.oc();r.Mb("open",(null==a.activeSidebarItem?null:a.activeSidebarItem.sidebarItemId)==e.sidebarItemId),r.Hb(1),r.vc("svgIcon",e.sidebarItemIcon),r.Hb(2),r.Rc(e.sidebarItemTitle)}}let la=(()=>{class e{constructor(e,t){this._utilsService=e,this.fabricCanvasHandler=t,this.sidebarItemsList=[],this.subscriptionsList=new p.a}ngOnInit(){this.subscriptionsList.add(this._utilsService.activeSidebarItem.subscribe(e=>{this.activeSidebarItem=e}));for(let e in f.a.SIDEBAR_ITEMS)this.sidebarItemsList.push({sidebarItemId:f.a.SIDEBAR_ITEMS[e].id,sidebarItemTitle:f.a.SIDEBAR_ITEMS[e].title,sidebarItemIcon:f.a.SIDEBAR_ITEMS[e].icon,sidebarItemType:f.a.SIDEBAR_ITEMS[e].type})}ngOnDestroy(){this.subscriptionsList.unsubscribe()}sidebarItemClicked(e,t){var a;if((null===(a=this.activeSidebarItem)||void 0===a?void 0:a.sidebarItemId)===e)this.fabricCanvasHandler.sidebarItemClicked(null);else{const a=this._utilsService.activeSidebarItem.value;this.fabricCanvasHandler.sidebarItemClicked({previousSidebarItemId:a?a.sidebarItemId:null,previousSidebarItemTitle:a?a.sidebarItemTitle:null,previousSidebarItemType:a?a.sidebarItemType:null,sidebarItemId:e,sidebarItemTitle:t,sidebarItemType:f.a.SIDEBAR_ITEM_TYPES.DefaultSidebarItem})}this.fabricCanvasHandler.toolSelected=null}}return e.\u0275fac=function(t){return new(t||e)(r.Ub(xe),r.Ub(ke))},e.\u0275cmp=r.Ob({type:e,selectors:[["app-sidebar-items-list"]],decls:1,vars:1,consts:[["class","\n    position-relative\n    sidebar-section-button\n    d-flex\n    flex-column\n    justify-content-center\n    align-items-center\n  ",3,"open","click",4,"ngFor","ngForOf"],[1,"position-relative","sidebar-section-button","d-flex","flex-column","justify-content-center","align-items-center",3,"click"],[1,"toolbar-icon","active",3,"svgIcon"],[1,"active-rect","position-absolute"]],template:function(e,t){1&e&&r.Oc(0,ca,5,4,"div",0),2&e&&r.uc("ngForOf",t.sidebarItemsList)},directives:[k.l,Le.a],styles:[""]}),e})();var da=a("dlKe");function pa(e,t){if(1&e){const e=r.bc();r.ac(0,"div"),r.ac(1,"div",17),r.kc("click",function(){r.Ic(e);const a=t.$implicit;return r.oc().changeFormat(a)}),r.ac(2,"span",18),r.Qc(3),r.Zb(),r.Zb(),r.Vb(4,"div",19),r.Zb()}if(2&e){const e=t.$implicit;r.Hb(3),r.Rc(e.title)}}function ha(e,t){1&e&&(r.ac(0,"span",25),r.Qc(1,"Sorry, since it is a custom size, we couldn't find any templates for these dimensions."),r.Zb())}function ua(e,t){1&e&&(r.ac(0,"span",26),r.Qc(1,"No templates found "),r.Vb(2,"br"),r.Qc(3," for the keyword."),r.Zb())}function ba(e,t){if(1&e&&(r.ac(0,"div",20),r.ac(1,"span",21),r.Qc(2,"Oh Snap!"),r.Zb(),r.Oc(3,ha,2,0,"span",22),r.Oc(4,ua,4,0,"span",23),r.Vb(5,"mat-icon",24),r.Zb()),2&e){const e=r.oc();r.Hb(3),r.uc("ngIf",null==e.selectedFormatCategoryObj),r.Hb(1),r.uc("ngIf",null!=e.selectedFormatCategoryObj)}}function ga(e,t){if(1&e){const e=r.bc();r.ac(0,"div",27),r.kc("click",function(){r.Ic(e);const a=t.$implicit;return r.oc().addTemplateToCanvas(a)}),r.ac(1,"div",28),r.ac(2,"div",29),r.Vb(3,"img",30),r.Zb(),r.Zb(),r.Zb()}if(2&e){const e=t.$implicit;r.Nc("width",e.thumbnail_height<310?100:48,"%"),r.Hb(1),r.Nc("padding-bottom",(null==e.canvas_doc_json?null:e.canvas_doc_json.doc_height)/(null==e.canvas_doc_json?null:e.canvas_doc_json.doc_width)*100,"%"),r.Hb(2),r.uc("lazyLoad",e.thumbnail_url)}}function fa(e,t){1&e&&(r.ac(0,"div",31),r.Vb(1,"div",32),r.Zb())}let va=(()=>{class e{constructor(e,t,a,n,i){this.fabricCanvasHandler=e,this._templatesService=t,this._utilsService=a,this._userService=n,this._gaEventsService=i,this.searchQuery="",this.userSubscription="free",this.templates=[],this.isLoading=!0,this.noDataToLoad=!1,this.pageNum=1,this.pageSize=40,this.subscriptionsList=new p.a}ngOnInit(){this.userSubscription=this._userService.getUserSubscription()||"free",this.subscriptionsList.add(this._utilsService.activeSidebarItem.subscribe(e=>{if((null==e?void 0:e.sidebarItemId)===f.a.SIDEBAR_ITEMS.TEMPLATES.id){if(this.isSidebarItemActivated)return;this.isSidebarItemActivated=!0}}))}ngOnDestroy(){this.subscriptionsList.unsubscribe()}onScroll(){this.noDataToLoad||this.selectedFormatCategoryObj&&(this.isLoading=!0,this.pageNum+=1,this.getTemplatesByCategory())}changeFormat(e){this.selectedFormatCategoryObj=e,this.getTemplatesByCategoryAndTags()}ngOnChanges(e){null!=this.formatCategoryObj?this.selectedFormatCategoryObj!==this.formatCategoryObj&&(this.selectedFormatCategoryObj=this.formatCategoryObj,this.getTemplatesByCategoryAndTags()):this.isLoading=!1}getTemplatesByCategoryAndTags(){this.selectedFormatCategoryObj&&(this.templates=[],this.pageNum=1,this.noDataToLoad=!1,this.getTemplatesByCategory(),""!==this.searchQuery.trim()&&this._gaEventsService.eventEmitter("Editor Templates Sidebar Search","Search Keyword Templates",`${this.searchQuery}-${this.selectedFormatCategoryObj.format_category}`))}getTemplatesByCategory(){this.isLoading=!0,this._templatesService.getTemplatesByTagsAndCategory(this.pageNum,this.pageSize,this.searchQuery,"All",this.selectedFormatCategoryObj.format_category,"yes").subscribe(e=>{if(0==e.length)return this.noDataToLoad=!0,void(this.isLoading=!1);this.isLoading=!1,this.templates=[...this.templates,...e]},e=>{throw e})}addTemplateToCanvas(e){this.fabricCanvasHandler.currentCanvasId!==f.a.MOCKUP_CANVAS&&(this._gaEventsService.eventEmitter("Editor Sidebar","Template Selected",e.format_category,null),this._utilsService.sendDataToSend({type:"add-template",objectData:e._id}))}setImageUrl(e){return b.a.production&&(e=e.replace("https://vl-graphics-bucket-s3.s3.amazonaws.com/","https://cdn.pixelied.com/")),encodeURI(e)}}return e.\u0275fac=function(t){return new(t||e)(r.Ub(ke),r.Ub(ve.a),r.Ub(xe),r.Ub(P.a),r.Ub(F.a))},e.\u0275cmp=r.Ob({type:e,selectors:[["app-search-templates-sidebar"]],inputs:{placeholderBGColor:"placeholderBGColor",formatCategoryObj:"formatCategoryObj",formatsList:"formatsList"},features:[r.Fb],decls:20,vars:10,consts:[[1,"search-templates-wrapper","mt-3"],[1,"search-query"],[1,"search-icon",3,"click"],["svgIcon","search_icon",1,"icon"],["type","text","placeholder","Search Templates",1,"form-control","editor-form-control","form-control-panel","form-control-lg",3,"ngModel","keyup.enter","ngModelChange"],["ngbDropdown","",1,"panel-dropdown",2,"padding-top","12px"],["ngbDropdownToggle","",1,"btn","btn-block","d-flex","flex-row","align-items-baseline","no-caret-dropdown"],[1,"flex-grow-1"],["svgIcon","arrow_down",1,"arrow-down-icon"],["ngbDropdownMenu","","aria-labelledby","formatsDropdown",1,"panel-dropdown-menu","w-100","mt-2"],[4,"ngFor","ngForOf"],[1,"search-query-text"],["infiniteScroll","",1,"scrollableContainer","mousescroll",3,"scrollWindow","infiniteScrollDistance","infiniteScrollThrottle","scrolled"],["class","d-flex flex-column align-items-center text-center","style","margin-top: 50px",4,"ngIf"],[1,"d-flex","flex-row","flex-wrap","justify-content-between","mt-1"],[3,"width","click",4,"ngFor","ngForOf"],["class","text-center p-3",4,"ngIf"],["ngbDropdownItem","",1,"dropdown-item","d-flex","align-items-center",3,"click"],[1,"item-text","text-truncate","flex-grow-1","ml-2"],[1,"hr-border-bottom"],[1,"d-flex","flex-column","align-items-center","text-center",2,"margin-top","50px"],[1,"primary-text",2,"font-size","24px","font-weight","600"],["class","secondary-text","style","margin-top: 16px; font-size: 12px; max-width: 80%",4,"ngIf"],["class","secondary-text","style","margin-top: 16px; font-size: 12px",4,"ngIf"],["svgIcon","no-templates-found",2,"width","154px","height","auto","margin-top","34px","margin-bottom","12px"],[1,"secondary-text",2,"margin-top","16px","font-size","12px","max-width","80%"],[1,"secondary-text",2,"margin-top","16px","font-size","12px"],[3,"click"],[2,"position","relative","margin-bottom","12px"],[1,"img-container"],["alt","",1,"img-opacity-fadein","img-thumb",3,"lazyLoad"],[1,"text-center","p-3"],[1,"data-loader"]],template:function(e,t){1&e&&(r.ac(0,"div",0),r.ac(1,"div",1),r.ac(2,"span",2),r.kc("click",function(){return t.getTemplatesByCategoryAndTags()}),r.Vb(3,"mat-icon",3),r.Zb(),r.ac(4,"input",4),r.kc("keyup.enter",function(){return t.getTemplatesByCategoryAndTags()})("ngModelChange",function(e){return t.searchQuery=e}),r.Zb(),r.Zb(),r.ac(5,"div",5),r.ac(6,"button",6),r.ac(7,"span",7),r.Qc(8),r.Zb(),r.Vb(9,"mat-icon",8),r.Zb(),r.ac(10,"div",9),r.Oc(11,pa,5,1,"div",10),r.Zb(),r.Zb(),r.ac(12,"div",11),r.ac(13,"span"),r.Qc(14),r.Zb(),r.Zb(),r.ac(15,"div",12),r.kc("scrolled",function(){return t.onScroll()}),r.Oc(16,ba,6,2,"div",13),r.ac(17,"div",14),r.Oc(18,ga,4,5,"div",15),r.Zb(),r.Oc(19,fa,2,0,"div",16),r.Zb(),r.Zb()),2&e&&(r.Hb(4),r.uc("ngModel",t.searchQuery),r.Hb(4),r.Rc(null==t.selectedFormatCategoryObj?"Custom Size":null==t.selectedFormatCategoryObj?null:t.selectedFormatCategoryObj.title),r.Hb(3),r.uc("ngForOf",t.formatsList),r.Hb(3),r.Rc(t.searchQuery?t.searchQuery:null==t.selectedFormatCategoryObj?null:t.selectedFormatCategoryObj.title),r.Hb(1),r.uc("scrollWindow",!1)("infiniteScrollDistance",2)("infiniteScrollThrottle",50),r.Hb(1),r.uc("ngIf",!t.isLoading&&0==t.templates.length),r.Hb(2),r.uc("ngForOf",t.templates),r.Hb(1),r.uc("ngIf",t.isLoading))},directives:[Le.a,O.b,O.i,O.l,T.f,T.j,T.h,k.l,da.a,k.m,T.g,Ze.a],styles:[""]}),e})();class ma{constructor(){this.unsplashPhotosColumn1=[],this.unsplashPhotosColumn2=[],this.pixabayPhotosColumn1=[],this.pixabayPhotosColumn2=[]}}var Ca=a("mObQ");let wa=(()=>{class e{constructor(e,t,a){this.elementRef=e,this.renderer=t,this._dragDataService=a}get draggable(){return!0}onDragOver(e){e.preventDefault(),e.stopPropagation()}onDragStart(e){this.elementData.dropType="sidebar-item-drop",this._dragDataService.setData(this.elementData)}onDragEnd(e){}}return e.\u0275fac=function(t){return new(t||e)(r.Ub(r.m),r.Ub(r.K),r.Ub(Ca.a))},e.\u0275dir=r.Pb({type:e,selectors:[["","appCanvasDrag",""]],hostVars:1,hostBindings:function(e,t){1&e&&r.kc("dragover",function(e){return t.onDragOver(e)})("dragstart",function(e){return t.onDragStart(e)})("dragend",function(e){return t.onDragEnd(e)}),2&e&&r.dc("draggable",t.draggable)},inputs:{elementData:"elementData"}}),e})();function _a(e,t){1&e&&r.Vb(0,"mat-icon",23)}function ya(e,t){1&e&&r.Vb(0,"mat-icon",24)}function xa(e,t){1&e&&r.Vb(0,"mat-icon",25)}function Ha(e,t){1&e&&r.Vb(0,"mat-icon",26)}const Sa=function(e,t){return{source:"unsplash",urls:e,photoId:t,dragType:"add-image"}};function ka(e,t){if(1&e){const e=r.bc();r.ac(0,"div",1),r.ac(1,"div",27),r.kc("click",function(){r.Ic(e);const a=t.$implicit;return r.oc().addImage(a.download_sources,a.photo_id)}),r.Vb(2,"img",28),r.ac(3,"div",29),r.ac(4,"div",30),r.ac(5,"div",31),r.Vb(6,"mat-icon",32),r.Zb(),r.Zb(),r.ac(7,"div",33),r.Qc(8," by "),r.ac(9,"a",34),r.Qc(10),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb()}if(2&e){const e=t.$implicit,a=r.oc();r.Hb(1),r.uc("elementData",r.zc(5,Sa,e.download_sources,e.photo_id)),r.Hb(1),r.uc("defaultImage",a.placeholderBGColor)("lazyLoad",e.download_sources.thumb),r.Hb(7),r.vc("href",e.photographer.profile_url,r.Lc),r.Hb(1),r.Rc(e.photographer.name)}}function Oa(e,t){if(1&e){const e=r.bc();r.ac(0,"div",1),r.ac(1,"div",35),r.kc("click",function(){r.Ic(e);const a=t.$implicit;return r.oc().addImage(a.download_sources,a.photo_id)}),r.Vb(2,"img",28),r.ac(3,"div",29),r.ac(4,"div",30),r.ac(5,"div",31),r.Vb(6,"mat-icon",32),r.Zb(),r.Zb(),r.ac(7,"div",33),r.Qc(8," by "),r.ac(9,"a",34),r.Qc(10),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb()}if(2&e){const e=t.$implicit,a=r.oc();r.Hb(1),r.uc("elementData",r.zc(5,Sa,e.download_sources,e.photo_id)),r.Hb(1),r.uc("defaultImage",a.placeholderBGColor)("lazyLoad",e.download_sources.thumb),r.Hb(7),r.vc("href",e.photographer.profile_url,r.Lc),r.Hb(1),r.Rc(e.photographer.name)}}function Ia(e,t){1&e&&(r.ac(0,"div",36),r.Vb(1,"div",37),r.Zb())}const Pa=function(e,t){return{source:"pixabay",urls:e,photoId:t,dragType:"add-image"}};function Ta(e,t){if(1&e){const e=r.bc();r.ac(0,"div",1),r.ac(1,"div",35),r.kc("click",function(){r.Ic(e);const a=t.$implicit;return r.oc().addImage(a.download_sources,a.photo_id)}),r.Vb(2,"img",28),r.ac(3,"div",29),r.ac(4,"div",30),r.ac(5,"div",31),r.Vb(6,"mat-icon",32),r.Zb(),r.Zb(),r.ac(7,"div",33),r.Qc(8," by "),r.ac(9,"a",34),r.Qc(10),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb()}if(2&e){const e=t.$implicit,a=r.oc();r.Hb(1),r.uc("elementData",r.zc(5,Pa,e.download_sources,e.photo_id)),r.Hb(1),r.uc("defaultImage",a.placeholderBGColor)("lazyLoad",e.download_sources.thumb),r.Hb(7),r.vc("href",e.photographer.profile_url,r.Lc),r.Hb(1),r.Rc(e.photographer.name)}}function Ea(e,t){if(1&e){const e=r.bc();r.ac(0,"div",1),r.ac(1,"div",35),r.kc("click",function(){r.Ic(e);const a=t.$implicit;return r.oc().addImage(a.download_sources,a.photo_id)}),r.Vb(2,"img",28),r.ac(3,"div",29),r.ac(4,"div",30),r.ac(5,"div",31),r.Vb(6,"mat-icon",32),r.Zb(),r.Zb(),r.ac(7,"div",33),r.Qc(8," by "),r.ac(9,"a",34),r.Qc(10),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb()}if(2&e){const e=t.$implicit,a=r.oc();r.Hb(1),r.uc("elementData",r.zc(5,Pa,e.download_sources,e.photo_id)),r.Hb(1),r.uc("defaultImage",a.placeholderBGColor)("lazyLoad",e.download_sources.thumb),r.Hb(7),r.vc("href",e.photographer.profile_url,r.Lc),r.Hb(1),r.Rc(e.photographer.name)}}function Fa(e,t){1&e&&(r.ac(0,"div",36),r.Vb(1,"div",37),r.Zb())}let Aa=(()=>{class e{constructor(e,t,a,n){this._imagesAPIService=e,this._utilsService=t,this._gaEventsService=a,this._toastService=n,this.allPhotos=new ma,this.searchQuery="",this.unsplashPageNum=1,this.pixabayPageNum=1,this.pageSize=30,this.isLoading=!1,this.noUnsplashDataToLoad=!1,this.noPixabayDataToLoad=!1,this.subscriptionsList=new p.a,this.imagesProvider="Unsplash",this.imagesProviderLink="https://unsplash.com"}ngOnInit(){this.subscriptionsList.add(this._utilsService.activeSidebarItem.subscribe(e=>{if((null==e?void 0:e.sidebarItemId)===f.a.SIDEBAR_ITEMS.IMAGES.id){if(this.isSidebarItemActivated)return;this.isSidebarItemActivated=!0,this.isLoading=!0,this.getImagesFromUnsplash("mountains")}}))}changeImagesProvider(e){this.isLoading||(this.imagesProvider=e,"Unsplash"===this.imagesProvider?this.imagesProviderLink="https://unsplash.com":"Pixabay"===this.imagesProvider&&(this.imagesProviderLink="https://pixabay.com"))}ngOnDestroy(){this.subscriptionsList.unsubscribe()}onScroll(){if("Unsplash"===this.imagesProvider){if(this.noUnsplashDataToLoad)return;this.unsplashPageNum+=1,this.getImagesFromUnsplash(this.searchQuery)}else if("Pixabay"===this.imagesProvider){if(this.noPixabayDataToLoad)return;this.pixabayPageNum+=1,this.getImagesFromPixabay(this.searchQuery)}}addImage(e,t){"Unsplash"===this.imagesProvider?(this._utilsService.sendDataToSend({type:"add-image",objectData:{source:"unsplash",urls:e,photoId:t}}),this._gaEventsService.eventEmitter("Search Images Sidebar","Unsplash image selected","Unsplash image selected",null)):"Pixabay"===this.imagesProvider&&(this._utilsService.sendDataToSend({type:"add-image",objectData:{source:"pixabay",urls:e}}),this._gaEventsService.eventEmitter("Search Images Sidebar","Pixabay image selected","Pixabay image selected",null))}getImagesFromUnsplash(e){this.isLoading=!0,this._imagesAPIService.getImagesFromUnsplash(e,this.unsplashPageNum,this.pageSize).subscribe(e=>{if(0==e.photos.length)return this.noUnsplashDataToLoad=!0,void(this.isLoading=!1);this.isLoading=!1,this.pushNewPhotosToArrays(e.photos)},e=>{throw this.isLoading=!1,e})}getImagesFromPixabay(e){this.isLoading=!0,this._imagesAPIService.getImagesFromPixabay(e,this.pixabayPageNum,this.pageSize).subscribe(e=>{if(0==e.photos.length)return this.noPixabayDataToLoad=!0,void(this.isLoading=!1);this.isLoading=!1,this.pushNewPhotosToArrays(e.photos)},e=>{throw console.error(e.status),e.status&&429==e.status&&this._toastService.show("An unexpected error occurred, please contact support at support@profitpixar.net",{classname:"bg-danger text-light",delay:5e3}),e.status&&504==e.status&&this._toastService.show("Pixabay is currently running system maintenance. Please wait a little while",{classname:"bg-danger text-light",delay:5e3}),this.isLoading=!1,e})}searchImages(){"Unsplash"===this.imagesProvider?(this.unsplashPageNum=1,this.resetImagesColumnsList(),this.getImagesFromUnsplash(this.searchQuery),this._gaEventsService.eventEmitter("Search Images Sidebar - Query Search","Unsplash image query searched",`query=${this.searchQuery}`,null)):"Pixabay"===this.imagesProvider&&(this.pixabayPageNum=1,this.resetImagesColumnsList(),this.getImagesFromPixabay(this.searchQuery),this._gaEventsService.eventEmitter("Search Images Sidebar - Query Search","Pixabay image query searched",`query=${this.searchQuery}`,null))}resetImagesColumnsList(){"Unsplash"===this.imagesProvider?(this.allPhotos.unsplashPhotosColumn1=[],this.allPhotos.unsplashPhotosColumn2=[],this.noUnsplashDataToLoad=!1):"Pixabay"===this.imagesProvider&&(this.allPhotos.pixabayPhotosColumn1=[],this.allPhotos.pixabayPhotosColumn2=[],this.noPixabayDataToLoad=!1)}splitPhotosArrayInHalf(e){let t=Math.floor(e.length/2);"Unsplash"===this.imagesProvider?(this.allPhotos.unsplashPhotosColumn1=e.slice(0,t),this.allPhotos.unsplashPhotosColumn1=e.slice(t,e.length)):"Pixabay"===this.imagesProvider&&(this.allPhotos.pixabayPhotosColumn1=e.slice(0,t),this.allPhotos.pixabayPhotosColumn2=e.slice(t,e.length))}pushNewPhotosToArrays(e){let t=Math.floor(e.length/2),a=e.slice(0,t),n=e.slice(t,e.length);"Unsplash"===this.imagesProvider?(a.forEach(e=>this.allPhotos.unsplashPhotosColumn1.push(e)),n.forEach(e=>this.allPhotos.unsplashPhotosColumn2.push(e))):"Pixabay"===this.imagesProvider&&(a.forEach(e=>this.allPhotos.pixabayPhotosColumn1.push(e)),n.forEach(e=>this.allPhotos.pixabayPhotosColumn2.push(e)))}}return e.\u0275fac=function(t){return new(t||e)(r.Ub(nt),r.Ub(xe),r.Ub(F.a),r.Ub(E.a))},e.\u0275cmp=r.Ob({type:e,selectors:[["app-search-images"]],inputs:{placeholderBGColor:"placeholderBGColor"},decls:41,vars:29,consts:[[1,"search-images-wrapper"],[1,"d-flex","flex-column"],[1,"d-flex","flex-row"],[1,"default-integrations-provider","left-integration-wrapper","d-flex","flex-row","align-items-center","justify-content-center","w-100",3,"click"],["class","icon","svgIcon","unsplash_default",4,"ngIf"],["class","icon","svgIcon","unsplash_active",4,"ngIf"],[1,"ml-2"],[1,"default-integrations-provider","right-integration-wrapper","d-flex","flex-row","align-items-center","justify-content-center","w-100",3,"click"],["class","icon","svgIcon","pixabay_default",4,"ngIf"],["class","icon","svgIcon","pixabay_active",4,"ngIf"],[1,"search-query"],[1,"search-icon",3,"click"],["svgIcon","search_icon",1,"icon"],["type","text","placeholder","Search Images",1,"form-control","editor-form-control","form-control-panel","form-control-lg",3,"ngModel","keyup.enter","ngModelChange"],[1,"provider-text",3,"hidden"],["target","_blank","rel","noopener",1,"unsplash-provider-color",3,"href"],["target","_blank","rel","noopener",1,"pixabay-provider-color",3,"href"],["infiniteScroll","",1,"scrollableContainer","mousescroll",3,"scrollWindow","infiniteScrollDistance","infiniteScrollThrottle","hidden","scrolled"],[1,"column1",2,"width","100%","margin-right","10px"],["class","d-flex flex-column",4,"ngFor","ngForOf"],[1,"column2",2,"width","100%","margin-left","10px"],["class","text-center p-3",4,"ngIf"],["infiniteScroll","",1,"scrollableContainer",3,"scrollWindow","infiniteScrollDistance","infiniteScrollThrottle","hidden","scrolled"],["svgIcon","unsplash_default",1,"icon"],["svgIcon","unsplash_active",1,"icon"],["svgIcon","pixabay_default",1,"icon"],["svgIcon","pixabay_active",1,"icon"],["appCanvasDrag","",1,"img-container","draggable",3,"elementData","click"],["alt","",1,"img-opacity-fadein",3,"defaultImage","lazyLoad"],[1,"attribution-container"],[1,"info-icon-container"],[1,"info-icon"],["svgIcon","info",2,"width","20px","height","20px"],[1,"photo-attribution"],["target","_blank",3,"href"],["appCanvasDrag","",1,"img-container",3,"elementData","click"],[1,"text-center","p-3"],[1,"data-loader"]],template:function(e,t){1&e&&(r.ac(0,"div",0),r.ac(1,"div",1),r.ac(2,"div",2),r.ac(3,"div",3),r.kc("click",function(){return t.changeImagesProvider("Unsplash")}),r.Oc(4,_a,1,0,"mat-icon",4),r.Oc(5,ya,1,0,"mat-icon",5),r.ac(6,"span",6),r.Qc(7,"Unsplash"),r.Zb(),r.Zb(),r.ac(8,"div",7),r.kc("click",function(){return t.changeImagesProvider("Pixabay")}),r.Oc(9,xa,1,0,"mat-icon",8),r.Oc(10,Ha,1,0,"mat-icon",9),r.ac(11,"span",6),r.Qc(12,"Pixabay"),r.Zb(),r.Zb(),r.Zb(),r.ac(13,"div",10),r.ac(14,"span",11),r.kc("click",function(){return t.searchImages()}),r.Vb(15,"mat-icon",12),r.Zb(),r.ac(16,"input",13),r.kc("keyup.enter",function(){return t.searchImages()})("ngModelChange",function(e){return t.searchQuery=e}),r.Zb(),r.Zb(),r.ac(17,"div",14),r.ac(18,"span"),r.Qc(19,"Images provided by "),r.ac(20,"a",15),r.Qc(21),r.Zb(),r.Zb(),r.Zb(),r.ac(22,"div",14),r.ac(23,"span"),r.Qc(24,"Images provided by "),r.ac(25,"a",16),r.Qc(26),r.Zb(),r.Zb(),r.Zb(),r.ac(27,"div",17),r.kc("scrolled",function(){return t.onScroll()}),r.ac(28,"div",2),r.ac(29,"div",18),r.Oc(30,ka,11,8,"div",19),r.Zb(),r.ac(31,"div",20),r.Oc(32,Oa,11,8,"div",19),r.Zb(),r.Zb(),r.Oc(33,Ia,2,0,"div",21),r.Zb(),r.ac(34,"div",22),r.kc("scrolled",function(){return t.onScroll()}),r.ac(35,"div",2),r.ac(36,"div",18),r.Oc(37,Ta,11,8,"div",19),r.Zb(),r.ac(38,"div",20),r.Oc(39,Ea,11,8,"div",19),r.Zb(),r.Zb(),r.Oc(40,Fa,2,0,"div",21),r.Zb(),r.Zb(),r.Zb()),2&e&&(r.Hb(3),r.Mb("active-integrations-provider","Unsplash"===t.imagesProvider),r.Hb(1),r.uc("ngIf","Unsplash"!==t.imagesProvider),r.Hb(1),r.uc("ngIf","Unsplash"===t.imagesProvider),r.Hb(3),r.Mb("active-integrations-provider","Pixabay"===t.imagesProvider),r.Hb(1),r.uc("ngIf","Pixabay"!==t.imagesProvider),r.Hb(1),r.uc("ngIf","Pixabay"===t.imagesProvider),r.Hb(6),r.uc("ngModel",t.searchQuery),r.Hb(1),r.uc("hidden","Unsplash"!==t.imagesProvider),r.Hb(3),r.uc("href",t.imagesProviderLink,r.Lc),r.Hb(1),r.Rc(t.imagesProvider),r.Hb(1),r.uc("hidden","Pixabay"!==t.imagesProvider),r.Hb(3),r.uc("href",t.imagesProviderLink,r.Lc),r.Hb(1),r.Rc(t.imagesProvider),r.Hb(1),r.uc("scrollWindow",!1)("infiniteScrollDistance",2)("infiniteScrollThrottle",50)("hidden","Unsplash"!==t.imagesProvider),r.Hb(3),r.uc("ngForOf",null==t.allPhotos?null:t.allPhotos.unsplashPhotosColumn1),r.Hb(2),r.uc("ngForOf",null==t.allPhotos?null:t.allPhotos.unsplashPhotosColumn2),r.Hb(1),r.uc("ngIf",t.isLoading),r.Hb(1),r.uc("scrollWindow",!1)("infiniteScrollDistance",2)("infiniteScrollThrottle",50)("hidden","Pixabay"!==t.imagesProvider),r.Hb(3),r.uc("ngForOf",null==t.allPhotos?null:t.allPhotos.pixabayPhotosColumn1),r.Hb(2),r.uc("ngForOf",null==t.allPhotos?null:t.allPhotos.pixabayPhotosColumn2),r.Hb(1),r.uc("ngIf",t.isLoading))},directives:[k.m,Le.a,O.b,O.i,O.l,da.a,k.l,wa,Ze.a],styles:[""]}),e})();function Ma(e,t){if(1&e){const e=r.bc();r.ac(0,"div",11),r.ac(1,"div",12),r.ac(2,"img",13),r.kc("click",function(){r.Ic(e);const a=t.$implicit;return r.oc().addTextTemplateToCanvas(a)}),r.Zb(),r.Zb(),r.Zb()}if(2&e){const e=t.$implicit;r.Hb(2),r.uc("lazyLoad",e.thumbnail_url)}}function Da(e,t){if(1&e){const e=r.bc();r.ac(0,"div",11),r.ac(1,"div",12),r.ac(2,"img",13),r.kc("click",function(){r.Ic(e);const a=t.$implicit;return r.oc().addTextTemplateToCanvas(a)}),r.Zb(),r.Zb(),r.Zb()}if(2&e){const e=t.$implicit;r.Hb(2),r.uc("lazyLoad",e.thumbnail_url)}}const ja=function(){return{textType:"headline",dragType:"add-text"}},La=function(){return{textType:"subheadline",dragType:"add-text"}},Za=function(){return{textType:"bodytext",dragType:"add-text"}};let Ra=(()=>{class e{constructor(e,t){this._utilsService=e,this._editorService=t,this.textTemplatesColumn1=[],this.textTemplatesColumn2=[],this.pageNum=1,this.pageSize=30,this.isLoading=!1,this.isUploading=!1,this.noDataToLoad=!1,this.isSidebarItemActivated=!1,this.subscriptionsList=new p.a}ngOnInit(){this.subscriptionsList.add(this._utilsService.activeSidebarItem.subscribe(e=>{if((null==e?void 0:e.sidebarItemId)===f.a.SIDEBAR_ITEMS.TEXT.id){if(this.isSidebarItemActivated)return;this.isSidebarItemActivated=!0,this.isLoading=!0,this.getTextTemplates()}}))}getTextTemplates(){this._editorService.getTextTemplates(this.pageNum,this.pageSize,"All").subscribe(e=>{if(0==e.length)return this.noDataToLoad=!0,void(this.isLoading=!1);this.isLoading=!1,this.splitUploadsArrayInHalf(e)},e=>{this.isLoading=!1})}splitUploadsArrayInHalf(e){for(var t=0;t<e.length;t++)t%2==0?this.textTemplatesColumn1.push(e[t]):this.textTemplatesColumn2.push(e[t])}addTextToCanvas(e){this._utilsService.sendDataToSend({type:"add-text",objectData:e})}addTextTemplateToCanvas(e){this._utilsService.sendDataToSend({type:"add-text-template",objectData:e._id})}ngOnDestroy(){this.subscriptionsList.unsubscribe()}onScroll(){this.noDataToLoad||(this.isLoading=!0,this.pageNum+=1,this.getTextTemplates())}}return e.\u0275fac=function(t){return new(t||e)(r.Ub(xe),r.Ub(fe.a))},e.\u0275cmp=r.Ob({type:e,selectors:[["app-text-templates-sidebar"]],decls:16,vars:11,consts:[[1,"text-templates-sidebar-wrapper"],["infiniteScroll","",1,"scrollableContainer",3,"scrollWindow","infiniteScrollDistance","infiniteScrollThrottle","scrolled"],[1,"add-text-wrapper","d-flex","flex-column"],["appCanvasDrag","",1,"add-text-title",2,"font-size","36px","font-weight","700",3,"elementData","click"],["appCanvasDrag","",1,"add-text-title",2,"font-size","24px","font-weight","500",3,"elementData","click"],["appCanvasDrag","",1,"add-text-title",2,"font-size","16px","margin-bottom","0",3,"elementData","click"],[1,"section-heading"],[1,"text-templates-wrapper"],[1,"column",2,"margin-right","6px"],["class","d-flex flex-column",4,"ngFor","ngForOf"],[1,"column",2,"margin-left","6px"],[1,"d-flex","flex-column"],[1,"img-container",2,"margin-bottom","12px"],["src","data:image/jpg;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mN89B8AAskB44g04okAAAAASUVORK5CYII=","alt","",1,"img-opacity-fadein",3,"lazyLoad","click"]],template:function(e,t){1&e&&(r.ac(0,"div",0),r.ac(1,"div",1),r.kc("scrolled",function(){return t.onScroll()}),r.ac(2,"div",2),r.ac(3,"span",3),r.kc("click",function(){return t.addTextToCanvas("headline")}),r.Qc(4,"Add Headline"),r.Zb(),r.ac(5,"span",4),r.kc("click",function(){return t.addTextToCanvas("subheadline")}),r.Qc(6,"Add Subheadline"),r.Zb(),r.ac(7,"span",5),r.kc("click",function(){return t.addTextToCanvas("bodytext")}),r.Qc(8,"Add Body Text"),r.Zb(),r.Zb(),r.ac(9,"span",6),r.Qc(10,"Text Styles"),r.Zb(),r.ac(11,"div",7),r.ac(12,"div",8),r.Oc(13,Ma,3,1,"div",9),r.Zb(),r.ac(14,"div",10),r.Oc(15,Da,3,1,"div",9),r.Zb(),r.Zb(),r.Zb(),r.Zb()),2&e&&(r.Hb(1),r.uc("scrollWindow",!1)("infiniteScrollDistance",2)("infiniteScrollThrottle",50),r.Hb(2),r.uc("elementData",r.xc(8,ja)),r.Hb(2),r.uc("elementData",r.xc(9,La)),r.Hb(2),r.uc("elementData",r.xc(10,Za)),r.Hb(6),r.uc("ngForOf",t.textTemplatesColumn1),r.Hb(2),r.uc("ngForOf",t.textTemplatesColumn2))},directives:[da.a,wa,k.l,Ze.a],styles:[""]}),e})(),za=(()=>{class e{constructor(e){this._http=e}getAICopySuggestions(e,t,a,n,i){return this._http.post(`/api/content-creation/${a}`,{userId:e,workspaceId:t,query:n,additionalQuery:i}).toPromise()}}return e.\u0275fac=function(t){return new(t||e)(r.hc(me.b))},e.\u0275prov=r.Qb({token:e,factory:e.\u0275fac}),e})();function Ba(e,t){if(1&e){const e=r.bc();r.ac(0,"div"),r.ac(1,"div",18),r.kc("click",function(){r.Ic(e);const a=t.$implicit;return r.oc().setSelectedCategory(a)}),r.ac(2,"span",19),r.Qc(3),r.Zb(),r.Zb(),r.Vb(4,"div",20),r.Zb()}if(2&e){const e=t.$implicit;r.Hb(3),r.Rc(e.title)}}function Ua(e,t){if(1&e&&(r.ac(0,"label",7),r.Qc(1),r.Zb()),2&e){const e=r.oc();r.Hb(1),r.Rc(e.selectedCategory.inputs[1].inputLabel)}}function Na(e,t){1&e&&r.Vb(0,"span",24)}function Va(e,t){if(1&e){const e=r.bc();r.ac(0,"button",21),r.kc("click",function(){r.Ic(e);const t=r.oc(),a=r.Ec(13);return t.getCopySuggestions(a,!1)}),r.Oc(1,Na,1,0,"span",22),r.Qc(2," Generate "),r.Vb(3,"mat-icon",23),r.Zb()}if(2&e){const e=r.oc();r.uc("disabled",e.isLoading),r.Hb(1),r.uc("ngIf",e.isLoading)}}function Wa(e,t){1&e&&r.Vb(0,"span",24)}function Ga(e,t){if(1&e){const e=r.bc();r.ac(0,"button",21),r.kc("click",function(){r.Ic(e);const t=r.oc(),a=r.Ec(13);return t.getCopySuggestions(a,!0)}),r.Oc(1,Wa,1,0,"span",22),r.Qc(2," Generate More "),r.Vb(3,"mat-icon",23),r.Zb()}if(2&e){const e=r.oc();r.uc("disabled",e.isLoading),r.Hb(1),r.uc("ngIf",e.isLoading)}}function Qa(e,t){if(1&e){const e=r.bc();r.ac(0,"div",25),r.ac(1,"span"),r.Qc(2),r.Zb(),r.ac(3,"div",26),r.ac(4,"mat-icon",27),r.kc("click",function(){r.Ic(e);const a=t.$implicit;return r.oc().addTextToCanvas(a)}),r.Zb(),r.ac(5,"mat-icon",28),r.kc("click",function(){r.Ic(e);const a=t.$implicit;return r.oc().copyTextToClipboard(a)}),r.Zb(),r.Zb(),r.Zb()}if(2&e){const e=t.$implicit;r.Hb(2),r.Rc(e)}}function $a(e,t){1&e&&(r.ac(0,"div",29),r.ac(1,"div",30),r.Qc(2,"Copied!"),r.Zb(),r.Zb())}let qa=(()=>{class e{constructor(e,t,a,n,i){this._aiCopyService=e,this._gaEventsService=t,this._userService=a,this._helpersService=n,this.fabricCanvasHandler=i,this.successfullyCopiedTextShow=!1,this.isLoading=!1,this.generateMore=!1,this.searchQuery="",this.selectedSubCategory="",this.suggestions=[],this.categories=[{id:"YOUTUBE_THUMBNAIL_TITLE_GENERATOR",title:"Youtube Thumbnail Title Generator",totalInputBoxes:1,inputs:[{inputLabel:"Add Video Description"}]},{id:"FACEBOOK_POST_HEADLINE_GENERATOR",title:"Facebook Post Headline Generator",totalInputBoxes:1,inputs:[{inputLabel:"Add Post Description"}]},{id:"PRODUCT_DESCRIPTIONS_GENERATOR",title:"Product Description Generator",totalInputBoxes:2,inputs:[{inputLabel:"Add Brand Name"},{inputLabel:"Add Brand Intro"}]},{id:"BLOG_TITLES_GENERATOR",title:"Blog Title Generator",totalInputBoxes:1,inputs:[{inputLabel:"Add Article Description"}]},{id:"QUOTES_GENERATOR",title:"Quote Generator",totalInputBoxes:1,inputs:[{inputLabel:"Add Quote Topic"}]}]}ngOnInit(){this.setSelectedCategory(this.categories[0])}setSelectedCategory(e){this.selectedCategory=e,this.generateMore=!1}getCopySuggestions(e,t){""!=this.searchQuery.trim()&&(this.isLoading=!0,t&&this._gaEventsService.eventEmitter("ai-copy-tool","generate more",this.searchQuery||""),t||this._gaEventsService.eventEmitter("ai-copy-tool","initial query search",this.searchQuery||""),this._aiCopyService.getAICopySuggestions(this._userService.getUserId(),this._userService.getCurrentUserWorkspaceId(),this.selectedCategory.id,this.searchQuery,e.value).then(e=>{this.isLoading=!1,this.generateMore=!0,this.suggestions=t?[...e.suggestions,...this.suggestions]:e.suggestions}).catch(e=>{throw this.isLoading=!1,e}))}copyTextToClipboard(e){this._helpersService.copyDataToClipboard(e),this.successfullyCopiedTextShow=!0,this._gaEventsService.eventEmitter("ai-copy-tool","copy to clipboard",this.searchQuery||""),setTimeout(()=>{this.successfullyCopiedTextShow=!1},3e3)}addTextToCanvas(e){this._gaEventsService.eventEmitter("ai-copy-tool","add to canvas",this.searchQuery||""),this.fabricCanvasHandler.textElementHandler.addTextHeadline("bodytext",e)}}return e.\u0275fac=function(t){return new(t||e)(r.Ub(za),r.Ub(F.a),r.Ub(P.a),r.Ub(He.a),r.Ub(ke))},e.\u0275cmp=r.Ob({type:e,selectors:[["app-ai-copy-sidebar"]],decls:21,vars:13,consts:[[1,"ai-copy-wrapper","mt-3"],["ngbDropdown","",1,"panel-dropdown"],["ngbDropdownToggle","",1,"btn","btn-block","d-flex","flex-row","align-items-baseline","no-caret-dropdown"],["placement","bottom",1,"flex-grow-1","text-truncate",3,"ngbTooltip"],["svgIcon","arrow_down",1,"arrow-down-icon"],["ngbDropdownMenu","","aria-labelledby","formatsDropdown",1,"panel-dropdown-menu","w-100","mt-2"],[4,"ngFor","ngForOf"],["for","query",1,"primary-text","mt-3","mb-1",2,"font-weight","400","font-size","12px"],["id","search-query","type","text",1,"form-control","editor-form-control","form-control-panel",2,"padding","8px 14px",3,"ngModel","ngModelChange"],["style","font-weight: 400; font-size: 12px","class","primary-text mt-3 mb-1","for","query",4,"ngIf"],["id","additional-search-query","type","text",1,"form-control","editor-form-control","form-control-panel",2,"padding","8px 14px",3,"hidden"],["additionalQuery",""],[1,"d-flex","justify-content-center","w-100","mt-2"],["class","btn btn-primary d-flex align-items-center",3,"disabled","click",4,"ngIf"],[1,"scrollableContainer"],[1,"suggestions-wrapper"],["class","suggestion-text position-relative",4,"ngFor","ngForOf"],["class","copy-text-success-wrapper position-absolute w-100",4,"ngIf"],["ngbDropdownItem","",1,"dropdown-item","d-flex","align-items-center",3,"click"],[1,"item-text","text-truncate","flex-grow-1","ml-2"],[1,"hr-border-bottom"],[1,"btn","btn-primary","d-flex","align-items-center",3,"disabled","click"],["class","spinner-border spinner-border-sm mr-1",4,"ngIf"],["svgIcon","generate_text",2,"width","13px","font-size","6px","height","13px","margin-left","6px"],[1,"spinner-border","spinner-border-sm","mr-1"],[1,"suggestion-text","position-relative"],[1,"options-wrapper","position-absolute"],["svgIcon","add_to_canvas","placement","bottom","ngbTooltip","Add text to canvas",1,"add-to-canvas-icon",3,"click"],["svgIcon","copy","placement","bottom","ngbTooltip","Copy text to clipboard",1,"copy-text-icon",3,"click"],[1,"copy-text-success-wrapper","position-absolute","w-100"],[1,"copy-text-success"]],template:function(e,t){1&e&&(r.ac(0,"div",0),r.ac(1,"div",1),r.ac(2,"button",2),r.ac(3,"span",3),r.Qc(4),r.Zb(),r.Vb(5,"mat-icon",4),r.Zb(),r.ac(6,"div",5),r.Oc(7,Ba,5,1,"div",6),r.Zb(),r.Zb(),r.ac(8,"label",7),r.Qc(9),r.Zb(),r.ac(10,"input",8),r.kc("ngModelChange",function(e){return t.searchQuery=e}),r.Zb(),r.Oc(11,Ua,2,1,"label",9),r.Vb(12,"input",10,11),r.ac(14,"div",12),r.Oc(15,Va,4,2,"button",13),r.Oc(16,Ga,4,2,"button",13),r.Zb(),r.ac(17,"div",14),r.ac(18,"div",15),r.Oc(19,Qa,6,1,"div",16),r.Zb(),r.Zb(),r.Oc(20,$a,3,0,"div",17),r.Zb()),2&e&&(r.Hb(3),r.vc("ngbTooltip",t.selectedCategory.title),r.Hb(1),r.Rc(t.selectedCategory.title),r.Hb(3),r.uc("ngForOf",t.categories),r.Hb(2),r.Rc(t.selectedCategory.inputs[0].inputLabel),r.Hb(1),r.uc("ngModel",t.searchQuery),r.Hb(1),r.uc("ngIf",2==t.selectedCategory.totalInputBoxes),r.Hb(1),r.uc("hidden",2!=t.selectedCategory.totalInputBoxes),r.Hb(3),r.uc("ngIf",!t.generateMore),r.Hb(1),r.uc("ngIf",t.generateMore),r.Hb(1),r.Nc("top",2==t.selectedCategory.totalInputBoxes?"19.8":"15.4","rem"),r.Hb(2),r.uc("ngForOf",t.suggestions),r.Hb(1),r.uc("ngIf",t.successfullyCopiedTextShow))},directives:[T.f,T.j,T.q,Le.a,T.h,k.l,O.b,O.i,O.l,k.m,T.g],styles:[".copy-text-success-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;bottom:12px;left:0}.copy-text-success-wrapper[_ngcontent-%COMP%]   .copy-text-success[_ngcontent-%COMP%]{color:#fff;padding:8px 20px;background:#131313;border-radius:6px;font-size:12px;font-weight:600;left:0}"]}),e})();var Ya=a("0IP6");function Xa(e,t){1&e&&r.Vb(0,"mat-icon",16)}function Ja(e,t){1&e&&r.Vb(0,"mat-icon",16)}function Ka(e,t){if(1&e){const e=r.bc();r.ac(0,"div"),r.ac(1,"div",6),r.kc("click",function(){r.Ic(e);const a=t.$implicit;return r.oc().changeCategory(a)}),r.ac(2,"span",7),r.Qc(3),r.Zb(),r.Oc(4,Ja,1,0,"mat-icon",8),r.Zb(),r.Vb(5,"div",9),r.Zb()}if(2&e){const e=t.$implicit,a=r.oc();r.Hb(3),r.Rc(e),r.Hb(1),r.uc("ngIf",a.selectedCategory===e)}}const en=function(e){return{vectorURL:e,dragType:"illustration"}};function tn(e,t){if(1&e){const e=r.bc();r.ac(0,"div",17),r.kc("click",function(){r.Ic(e);const a=t.$implicit;return r.oc().addIllustrationToCanvas(a)}),r.Vb(1,"img",18),r.Zb()}if(2&e){const e=t.$implicit,a=r.oc();r.uc("elementData",r.yc(3,en,e.thumbnail_url)),r.Hb(1),r.uc("lazyLoad",e.thumbnail_url)("defaultImage",a.placeholderBGColor)}}function an(e,t){1&e&&(r.ac(0,"div",19),r.Vb(1,"div",20),r.Zb())}let nn=(()=>{class e{constructor(e,t,a){this._editorService=e,this._utilsService=t,this._gaEventsService=a,this.illustrations=[],this.illustrationCategories=Ya.a,this.selectedCategory="All Categories",this.isLoading=!1,this.noDataToLoad=!1,this.pageNum=1,this.pageSize=30,this.subscriptionsList=new p.a}ngOnInit(){this.subscriptionsList.add(this._utilsService.activeSidebarItem.subscribe(e=>{if((null==e?void 0:e.sidebarItemId)===f.a.SIDEBAR_ITEMS.ILLUSTRATIONS.id){if(this.isSidebarItemActivated)return;this.isSidebarItemActivated=!0,this.isLoading=!0,this.getIllustrations()}}))}ngOnDestroy(){this.subscriptionsList.unsubscribe()}getIllustrations(e=null){this.isLoading=!0,this._editorService.getIllustrations(this.pageNum,this.pageSize,e).subscribe(e=>{if(0==e.length)return this.noDataToLoad=!0,void(this.isLoading=!1);this.isLoading=!1,this.illustrations=[...this.illustrations,...e]})}changeCategory(e){this.selectedCategory=e,"All Categories"===e&&(e=null),this.illustrations=[],this.pageNum=1,this.noDataToLoad=!1,e=null===e?e:e.replace(/ /g,"-").toLowerCase(),this.getIllustrations(e),this._gaEventsService.eventEmitter("Editor Illustrations Sidebar","Illustrations Category Selected",`${this.selectedCategory}`,null)}onScroll(){if(this.noDataToLoad)return;this.isLoading=!0,this.pageNum+=1;let e=this.selectedCategory;"All Categories"===e&&(e=null),e=null===e?e:e.replace(/ /g,"-").toLowerCase(),this.getIllustrations(e)}addIllustrationToCanvas(e){this._utilsService.sendDataToSend({type:"add-vector",objectData:e.thumbnail_url}),this._gaEventsService.eventEmitter("Editor Illustrations Sidebar","Illustration Added",`${this.selectedCategory}`,null)}}return e.\u0275fac=function(t){return new(t||e)(r.Ub(fe.a),r.Ub(xe),r.Ub(F.a))},e.\u0275cmp=r.Ob({type:e,selectors:[["app-illustrations-sidebar"]],inputs:{placeholderBGColor:"placeholderBGColor"},decls:20,vars:8,consts:[[1,"illustrations-wrapper"],["ngbDropdown","",1,"panel-dropdown"],["ngbDropdownToggle","",1,"btn","btn-block","d-flex","flex-row","align-items-baseline","no-caret-dropdown"],[1,"flex-grow-1"],["svgIcon","arrow_down",1,"arrow-down-icon"],["ngbDropdownMenu","","aria-labelledby","illustrationsDropdown",1,"panel-dropdown-menu","w-100","mt-2"],["ngbDropdownItem","",1,"dropdown-item","d-flex","align-items-center",3,"click"],[1,"item-text","text-truncate","flex-grow-1","ml-2"],["style","width: 20px; height: 20px; font-size: 12px","svgIcon","header-check",4,"ngIf"],[1,"hr-border-bottom"],[4,"ngFor","ngForOf"],[1,"search-query-text"],["infiniteScroll","",1,"scrollableContainer",3,"scrollWindow","infiniteScrollDistance","infiniteScrollThrottle","scrolled"],[1,"d-flex","flex-row","flex-wrap","justify-content-between","mt-1"],["class","img-container","appCanvasDrag","",3,"elementData","click",4,"ngFor","ngForOf"],["class","text-center p-3",4,"ngIf"],["svgIcon","header-check",2,"width","20px","height","20px","font-size","12px"],["appCanvasDrag","",1,"img-container",3,"elementData","click"],["alt","illustration",1,"img-thumb","img-opacity-fadein",3,"lazyLoad","defaultImage"],[1,"text-center","p-3"],[1,"data-loader"]],template:function(e,t){1&e&&(r.ac(0,"div",0),r.ac(1,"div",1),r.ac(2,"button",2),r.ac(3,"span",3),r.Qc(4,"Select Category"),r.Zb(),r.Vb(5,"mat-icon",4),r.Zb(),r.ac(6,"div",5),r.ac(7,"div",6),r.kc("click",function(){return t.changeCategory("All Categories")}),r.ac(8,"span",7),r.Qc(9,"All Categories"),r.Zb(),r.Oc(10,Xa,1,0,"mat-icon",8),r.Zb(),r.Vb(11,"div",9),r.Oc(12,Ka,6,2,"div",10),r.Zb(),r.Zb(),r.ac(13,"div",11),r.ac(14,"span"),r.Qc(15),r.Zb(),r.Zb(),r.ac(16,"div",12),r.kc("scrolled",function(){return t.onScroll()}),r.ac(17,"div",13),r.Oc(18,tn,2,5,"div",14),r.Zb(),r.Oc(19,an,2,0,"div",15),r.Zb(),r.Zb()),2&e&&(r.Hb(10),r.uc("ngIf","All Categories"===t.selectedCategory),r.Hb(2),r.uc("ngForOf",t.illustrationCategories),r.Hb(3),r.Rc(t.selectedCategory),r.Hb(1),r.uc("scrollWindow",!1)("infiniteScrollDistance",2)("infiniteScrollThrottle",50),r.Hb(2),r.uc("ngForOf",t.illustrations),r.Hb(1),r.uc("ngIf",t.isLoading))},directives:[T.f,T.j,Le.a,T.h,T.g,k.m,k.l,da.a,wa,Ze.a],styles:[""]}),e})();class rn extends class{constructor(){this.sections=[]}}{constructor(){super()}}const sn=["Device","Phone","Branding","Stationery","Print","Advertising"];function on(e,t){1&e&&r.Vb(0,"mat-icon",19)}function cn(e,t){1&e&&r.Vb(0,"mat-icon",19)}function ln(e,t){if(1&e){const e=r.bc();r.ac(0,"div"),r.ac(1,"div",10),r.kc("click",function(){r.Ic(e);const a=t.$implicit;return r.oc().changeCategory(a)}),r.ac(2,"span",11),r.Qc(3),r.Zb(),r.Oc(4,cn,1,0,"mat-icon",12),r.Zb(),r.Vb(5,"div",13),r.Zb()}if(2&e){const e=t.$implicit,a=r.oc();r.Hb(3),r.Rc(e),r.Hb(1),r.uc("ngIf",a.selectedCategory===e)}}function dn(e,t){if(1&e){const e=r.bc();r.ac(0,"div",20),r.kc("click",function(){r.Ic(e);const a=t.$implicit;return r.oc().addMockupToCanvas(a)}),r.Vb(1,"img",21),r.Zb()}if(2&e){const e=t.$implicit,a=r.oc();r.Hb(1),r.uc("defaultImage",a.placeholderBGColor)("lazyLoad",(null==e.thumbnail?null:e.thumbnail.url)||e.thumbnail_url)}}function pn(e,t){1&e&&(r.ac(0,"div",22),r.Vb(1,"div",23),r.Zb())}let hn=(()=>{class e{constructor(e,t,a,n,i,r){this.fabricCanvasHandler=e,this._utilsService=t,this._mockupService=a,this._userService=n,this._gaEventsService=i,this._modalService=r,this.selectedCategory="All Categories",this.searchQuery="",this.keywordTagOrQuery="",this.mockupCategories=sn,this.mockupData=new rn,this.mockups=[],this.isLoading=!1,this.noDataToLoad=!1,this.pageNum=1,this.pageSize=30,this.subscriptionsList=new p.a}ngOnInit(){this.subscriptionsList.add(this._utilsService.activeSidebarItem.subscribe(e=>{if((null==e?void 0:e.sidebarItemId)===f.a.SIDEBAR_ITEMS.MOCKUPS.id){if(this.isSidebarItemActivated)return;this.isSidebarItemActivated=!0,this.getMockups()}}))}getMockups(e="",t="",a=""){this.isLoading=!0,this._mockupService.getMockups(this.pageNum,this.pageSize,e,t,a).subscribe(e=>{if(0==e.length)return this.noDataToLoad=!0,void(this.isLoading=!1);this.isLoading=!1,this.mockups=[...this.mockups,...e]})}changeCategory(e){this.selectedCategory=e,"All Categories"===e&&(e=""),this.keywordTagOrQuery="keyword",this.searchQuery="",this.mockups=[],this.pageNum=1,this.noDataToLoad=!1,e=""===e?e:e.replace(/ /g,"-").toLowerCase(),this.getMockups(e,"",this.keywordTagOrQuery),this._gaEventsService.eventEmitter("Editor Mockups Sidebar Cat","Mockups Category Selected",`${this.selectedCategory}`)}getMockupsByTags(){if(""==this.searchQuery.trim())return;this.mockups=[],this.pageNum=1,this.noDataToLoad=!1,this.selectedCategory="All Categories";let e=this.selectedCategory;"All Categories"===e&&(e=""),this.keywordTagOrQuery="query",e=""===e?e:e.replace(/ /g,"-").toLowerCase(),this.getMockups(e,this.searchQuery,this.keywordTagOrQuery),this._gaEventsService.eventEmitter("Editor Mockups Sidebar Search","Search Keyword",`${this.searchQuery}`)}onScroll(){if(this.noDataToLoad)return;this.isLoading=!0,this.pageNum+=1;let e=this.selectedCategory;"All Categories"===e&&(e=""),e=""===e?e:e.replace(/ /g,"-").toLowerCase(),this.getMockups(e,this.searchQuery,this.keywordTagOrQuery)}addMockupToCanvas(e){this.fabricCanvasHandler.currentCanvasId!==f.a.MOCKUP_CANVAS&&(this._utilsService.sendDataToSend({type:"add-mockup",objectData:e}),this._gaEventsService.eventEmitter("Editor Mockups Sidebar","Mockup Selected",e.title))}}return e.\u0275fac=function(t){return new(t||e)(r.Ub(ke),r.Ub(xe),r.Ub(Ce),r.Ub(P.a),r.Ub(F.a),r.Ub(T.k))},e.\u0275cmp=r.Ob({type:e,selectors:[["app-mockups-sidebar"]],inputs:{placeholderBGColor:"placeholderBGColor"},decls:21,vars:9,consts:[[1,"mockups-wrapper"],[1,"search-query"],[1,"search-icon",3,"click"],["svgIcon","search_icon",1,"icon"],["type","text","placeholder","Search Mockups",1,"form-control","editor-form-control","form-control-panel","form-control-lg",3,"ngModel","keyup.enter","ngModelChange"],["ngbDropdown","",1,"panel-dropdown",2,"padding-top","12px"],["ngbDropdownToggle","",1,"btn","d-flex","flex-row","align-items-baseline","btn-block","no-caret-dropdown"],[1,"flex-grow-1"],["svgIcon","arrow_down",1,"arrow-down-icon"],["ngbDropdownMenu","",1,"panel-dropdown-menu","w-100","mt-2",2,"max-height","300px","overflow-y","auto"],["ngbDropdownItem","",1,"dropdown-item","d-flex","align-items-center",3,"click"],[1,"item-text","text-truncate","flex-grow-1","ml-2"],["style","width: 20px; height: 20px; font-size: 12px","svgIcon","header-check",4,"ngIf"],[1,"hr-border-bottom"],[4,"ngFor","ngForOf"],["infiniteScroll","",1,"scrollableContainer",3,"scrollWindow","infiniteScrollDistance","infiniteScrollThrottle","scrolled"],[1,"mockups","d-flex","flex-row","flex-wrap","justify-content-between","mt-1"],["class","img-container position-relative",3,"click",4,"ngFor","ngForOf"],["class","text-center p-3",4,"ngIf"],["svgIcon","header-check",2,"width","20px","height","20px","font-size","12px"],[1,"img-container","position-relative",3,"click"],["alt","",1,"img-thumb","img-opacity-fadein","w-100",3,"defaultImage","lazyLoad"],[1,"text-center","p-3"],[1,"data-loader"]],template:function(e,t){1&e&&(r.ac(0,"div",0),r.ac(1,"div",1),r.ac(2,"span",2),r.kc("click",function(){return t.getMockupsByTags()}),r.Vb(3,"mat-icon",3),r.Zb(),r.ac(4,"input",4),r.kc("keyup.enter",function(){return t.getMockupsByTags()})("ngModelChange",function(e){return t.searchQuery=e}),r.Zb(),r.Zb(),r.ac(5,"div",5),r.ac(6,"button",6),r.ac(7,"span",7),r.Qc(8),r.Zb(),r.Vb(9,"mat-icon",8),r.Zb(),r.ac(10,"div",9),r.ac(11,"div",10),r.kc("click",function(){return t.changeCategory("All Categories")}),r.ac(12,"span",11),r.Qc(13,"All Categories"),r.Zb(),r.Oc(14,on,1,0,"mat-icon",12),r.Zb(),r.Vb(15,"div",13),r.Oc(16,ln,6,2,"div",14),r.Zb(),r.Zb(),r.ac(17,"div",15),r.kc("scrolled",function(){return t.onScroll()}),r.ac(18,"div",16),r.Oc(19,dn,2,2,"div",17),r.Zb(),r.Oc(20,pn,2,0,"div",18),r.Zb(),r.Zb()),2&e&&(r.Hb(4),r.uc("ngModel",t.searchQuery),r.Hb(4),r.Rc(t.selectedCategory),r.Hb(6),r.uc("ngIf","All Categories"===t.selectedCategory),r.Hb(2),r.uc("ngForOf",t.mockupCategories),r.Hb(1),r.uc("scrollWindow",!1)("infiniteScrollDistance",2)("infiniteScrollThrottle",50),r.Hb(2),r.uc("ngForOf",t.mockups),r.Hb(1),r.uc("ngIf",t.isLoading))},directives:[Le.a,O.b,O.i,O.l,T.f,T.j,T.h,T.g,k.m,k.l,da.a,Ze.a],styles:[".mockups[_ngcontent-%COMP%]   .img-container[_ngcontent-%COMP%]   .mockup-subscription[_ngcontent-%COMP%]{position:absolute;top:0;right:0;margin:6px}.mockups[_ngcontent-%COMP%]   .img-container[_ngcontent-%COMP%]   .mockup-subscription.is-pro[_ngcontent-%COMP%]{display:flex;background-color:rgba(0,0,0,.45);padding:4px;border-radius:2px}.mockups[_ngcontent-%COMP%]   .img-container[_ngcontent-%COMP%]   .mockup-subscription.is-pro[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .mockups[_ngcontent-%COMP%]   .img-container[_ngcontent-%COMP%]   .mockup-subscription.is-pro[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:14px;height:14px}"]}),e})();var un=a("4HT6"),bn=a("QVf6");function gn(e,t){if(1&e){const e=r.bc();r.ac(0,"div",2),r.ac(1,"span",3),r.Qc(2,"Sign In"),r.Zb(),r.ac(3,"span",4),r.Qc(4,"to add multiple "),r.Vb(5,"br"),r.Qc(6," brand presets."),r.Zb(),r.Vb(7,"mat-icon",5),r.ac(8,"button",6),r.kc("click",function(){return r.Ic(e),r.oc().openLoginSignupModal("signin")}),r.Qc(9," Sign In "),r.Zb(),r.ac(10,"span",7),r.Qc(11,"Don't have an account?"),r.Zb(),r.ac(12,"span",8),r.kc("click",function(){return r.Ic(e),r.oc().openLoginSignupModal("signup")}),r.Qc(13,"Sign Up"),r.Zb(),r.Zb()}}function fn(e,t){if(1&e){const e=r.bc();r.ac(0,"div",2),r.ac(1,"span",3),r.Qc(2,"Let's Brandify"),r.Zb(),r.ac(3,"span",4),r.Qc(4,"Brand consistency in a "),r.Vb(5,"br"),r.Qc(6," single click."),r.Zb(),r.Vb(7,"mat-icon",5),r.ac(8,"button",6),r.kc("click",function(){return r.Ic(e),r.oc().openBrandPresetModal()}),r.Qc(9," Add Preset "),r.Zb(),r.Zb()}}function vn(e,t){if(1&e){const e=r.bc();r.ac(0,"div",18),r.ac(1,"div",19),r.ac(2,"div",20),r.Vb(3,"img",21),r.Zb(),r.ac(4,"div",22),r.ac(5,"span",23),r.Qc(6),r.pc(7,"titlecase"),r.Zb(),r.Zb(),r.Zb(),r.ac(8,"div",24),r.ac(9,"span",25),r.Qc(10),r.Zb(),r.Zb(),r.ac(11,"div",26),r.ac(12,"span",27),r.Qc(13),r.Zb(),r.Zb(),r.ac(14,"div",28),r.Vb(15,"span",29),r.Vb(16,"span",29),r.Vb(17,"span",29),r.Vb(18,"span",29),r.Zb(),r.Vb(19,"hr",30),r.ac(20,"span",31),r.Qc(21),r.Zb(),r.ac(22,"div",32),r.ac(23,"div",33),r.ac(24,"div",34),r.Vb(25,"mat-icon",35),r.Zb(),r.ac(26,"div",36),r.ac(27,"div",37),r.kc("click",function(){r.Ic(e);const a=t.$implicit;return r.oc(2).editBrandPreset(a)}),r.ac(28,"span",38),r.Qc(29,"Edit Brand Preset"),r.Zb(),r.Zb(),r.ac(30,"div",37),r.kc("click",function(){r.Ic(e);const a=t.$implicit;return r.oc(2).deleteBrandPreset(a._id)}),r.ac(31,"span",38),r.Qc(32,"Delete Brand Preset"),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.ac(33,"button",39),r.kc("click",function(){r.Ic(e);const a=t.$implicit;return r.oc(2).applyBrandPresetToCanvas(a)}),r.Vb(34,"mat-icon",40),r.Qc(35," Brandify "),r.Zb(),r.Zb(),r.Zb()}if(2&e){const e=t.$implicit;r.Hb(3),r.uc("src",null==e.logo?null:e.logo.logo_preview_url,r.Lc),r.Hb(3),r.Rc(r.qc(7,17,null==e.logo?null:e.logo.logo_placement.replace("-"," "))),r.Hb(3),r.Nc("font-family",null==e.preset_fonts||null==e.preset_fonts.headline_font?null:e.preset_fonts.headline_font.font_name),r.Hb(1),r.Rc(null==e.preset_fonts||null==e.preset_fonts.headline_font?null:e.preset_fonts.headline_font.font_name),r.Hb(2),r.Nc("font-family",null==e.preset_fonts||null==e.preset_fonts.text_font?null:e.preset_fonts.text_font.font_name),r.Hb(1),r.Rc(null==e.preset_fonts||null==e.preset_fonts.text_font?null:e.preset_fonts.text_font.font_name),r.Hb(2),r.Nc("background-color",null==e.blend?null:e.blend.bg),r.Hb(1),r.Nc("background-color",null==e.blend?null:e.blend.head),r.Hb(1),r.Nc("background-color",null==e.blend?null:e.blend.sub),r.Hb(1),r.Nc("background-color",null==e.blend?null:e.blend.svg),r.Hb(3),r.Rc(e.preset_name)}}function mn(e,t){if(1&e){const e=r.bc();r.ac(0,"div"),r.ac(1,"div",9),r.ac(2,"div",10),r.ac(3,"span",11),r.Qc(4,"Add New"),r.Zb(),r.ac(5,"mat-icon",12),r.kc("click",function(){return r.Ic(e),r.oc().openBrandPresetModal()}),r.Zb(),r.Zb(),r.Zb(),r.Vb(6,"div",13),r.ac(7,"div",14),r.ac(8,"div",15),r.ac(9,"span",16),r.Qc(10,"Your Brands"),r.Zb(),r.Oc(11,vn,36,19,"div",17),r.Zb(),r.Zb(),r.Zb()}if(2&e){const e=r.oc();r.Hb(11),r.uc("ngForOf",e.brandPresetsList)}}let Cn=(()=>{class e{constructor(e,t,a,n,i,r,s){this._editorBrandPresetService=e,this.fabricCanvasHandler=t,this._utilsService=a,this._toastService=n,this._gaEventsService=i,this._modalService=r,this._userService=s,this.brandPresetsList=[],this.subscriptionsList=new p.a}ngOnInit(){this.subscriptionsList.add(this._editorBrandPresetService.brandPresetsList.subscribe(e=>{e&&(this.brandPresetsList=e,this.loadFonts())})),this.subscriptionsList.add(this._utilsService.activeSidebarItem.subscribe(e=>{if((null==e?void 0:e.sidebarItemId)===f.a.SIDEBAR_ITEMS.BRANDIFY.id){if(this.isSidebarItemActivated)return;this.userDataSubscription(),this.isSidebarItemActivated=!0,this.loadFonts()}}))}ngOnDestroy(){this.subscriptionsList.unsubscribe()}deleteBrandPreset(e){confirm("Are you sure you want to delete the brand preset?")&&this._editorBrandPresetService.deleteBrandPreset(e).then(t=>{this._toastService.show("Brand preset deleted successfully",{classname:"bg-success text-light",delay:5e3});let a=this.brandPresetsList.findIndex(t=>t._id===e);-1!=a&&this.brandPresetsList.splice(a,1)}).catch(e=>{throw this._toastService.show("Error deleting brand preset, please try again",{classname:"bg-danger text-light",delay:5e3}),e})}editBrandPreset(e){const t=this._modalService.open(bn.a,{centered:!0,size:"xl"});t.componentInstance.brandPreset=e,t.componentInstance.brandPresetsList=this.brandPresetsList,t.componentInstance.selectedWorkspaceId=this._userService.getCurrentUserWorkspaceId(),t.componentInstance.modalMode="edit"}openLoginSignupModal(e){this._modalService.open(ee,{size:"lg",centered:!0}).componentInstance.uiMode=e}userDataSubscription(){this.subscriptionsList.add(this._userService.user.subscribe(e=>{e&&(this.user=e)}))}openBrandPresetModal(){const e=this._modalService.open(un.a,{centered:!0,size:"lg"});e.componentInstance.brandPresetsList=this.brandPresetsList,e.componentInstance.selectedWorkspaceId=this._userService.getCurrentUserWorkspaceId()}loadFonts(){let e=[],t=[];for(let a of this.brandPresetsList){let n=a.preset_fonts,i=null==n?void 0:n.headline_font.webFontLoaderCommandName,r=null==n?void 0:n.headline_font.font_name,s=null==n?void 0:n.headline_font.font_file_url,o=null==n?void 0:n.text_font.webFontLoaderCommandName,c=null==n?void 0:n.text_font.font_name,l=null==n?void 0:n.text_font.font_file_url;n&&!s?-1==e.indexOf(i)&&e.push(n.headline_font):-1==t.indexOf(r)&&t.push(n.headline_font),n&&!l?-1==e.indexOf(o)&&e.push(n.text_font):-1==t.indexOf(c)&&t.push(n.text_font)}this.fabricCanvasHandler.textElementHandler.loadFontsUsingWebfontloader(e,t).then(()=>{}).catch(e=>{throw e})}applyBrandPresetToCanvas(e){this._utilsService.sendDataToSend({type:"apply-brand-preset",objectData:e}),this._gaEventsService.eventEmitter("Brandify feature","brand preset selected","brand preset selected",null)}}return e.\u0275fac=function(t){return new(t||e)(r.Ub(at),r.Ub(ke),r.Ub(xe),r.Ub(E.a),r.Ub(F.a),r.Ub(T.k),r.Ub(P.a))},e.\u0275cmp=r.Ob({type:e,selectors:[["app-brand-presets-sidebar"]],decls:3,vars:3,consts:[["class","d-flex flex-column align-items-center text-center","style","margin-top: 60px",4,"ngIf"],[4,"ngIf"],[1,"d-flex","flex-column","align-items-center","text-center",2,"margin-top","60px"],[1,"primary-text",2,"font-size","24px","font-weight","600"],[1,"secondary-text",2,"margin-top","16px","font-size","12px"],["svgIcon","brandify-hero",2,"width","180px","height","auto","margin-top","34px","margin-bottom","48px"],[1,"btn","btn-primary",3,"click"],[1,"secondary-text",2,"font-size","12px","margin-top","22px"],[2,"font-size","12px","color","#5f58b7","font-weight","500","cursor","pointer",3,"click"],[1,"px-2","py-4","d-flex","flex-column"],[1,"d-flex","flex-row"],[1,"primary-text","flex-grow-1",2,"font-size","18px","font-weight","700"],["svgIcon","editor_blend_add",2,"cursor","pointer",3,"click"],[1,"hr-separator"],[1,"brand-presets-wrapper"],[1,"scrollableContainer","mt-4"],[1,"primary-text",2,"font-weight","700","font-size","12px"],["class","brand-preset-wrapper d-flex flex-column py-3 mt-2",4,"ngFor","ngForOf"],[1,"brand-preset-wrapper","d-flex","flex-column","py-3","mt-2"],[1,"d-flex","flex-row","px-3"],[1,"img-logo-wrapper"],["alt","",1,"logo-img",3,"src"],[1,"ml-3"],[1,"logo-placement",2,"border-radius","4px","padding","2px 12px","font-weight","600","font-size","12px"],[1,"px-3","mt-3"],[1,"font-name",2,"font-size","22px","font-weight","bold"],[1,"px-3","mt-1"],[1,"font-name",2,"font-size","18px","font-weight","500"],[1,"brand-colors-wrapper","d-flex","flex-row","justify-content-between","px-3","mt-3"],[1,"brand-color"],[1,"hr-border-top"],[1,"primary-text","preset-name","px-3",2,"text-align","center","font-size","13px","font-weight","600"],[1,"options-wrapper"],["ngbDropdown","","display","dynamic","placement","bottom-right",1,"edit-delete-wrapper","position-absolute"],["ngbDropdownToggle",""],["svgIcon","dots_options"],["ngbDropdownMenu","",1,"panel-dropdown-menu","w-100","mt-2",2,"min-width","200px"],["ngbDropdownItem","",1,"dropdown-item","d-flex","align-items-center",3,"click"],[1,"item-text","text-truncate","flex-grow-1","ml-2"],[1,"btn","btn-light","d-flex","align-items-center",3,"click"],["svgIcon","brand_presets",2,"color","#5f58b7","width","20px","height","20px","margin-right","4px"]],template:function(e,t){1&e&&(r.Oc(0,gn,14,0,"div",0),r.Oc(1,fn,10,0,"div",0),r.Oc(2,mn,12,1,"div",1)),2&e&&(r.uc("ngIf",!t.user),r.Hb(1),r.uc("ngIf",t.user&&0===t.brandPresetsList.length),r.Hb(1),r.uc("ngIf",t.user&&t.brandPresetsList.length>0))},directives:[k.m,Le.a,k.l,T.f,T.j,T.h,T.g],pipes:[k.s],styles:['.brand-presets-wrapper[_ngcontent-%COMP%]   .brand-preset-wrapper[_ngcontent-%COMP%]{position:relative;border-radius:14px}.brand-presets-wrapper[_ngcontent-%COMP%]   .brand-preset-wrapper[_ngcontent-%COMP%]:hover:before{content:"";position:absolute;top:0;left:0;width:100%;height:100%;border-radius:14px;background-color:rgba(60,57,95,.85)}.brand-presets-wrapper[_ngcontent-%COMP%]   .brand-preset-wrapper[_ngcontent-%COMP%]:hover   .options-wrapper[_ngcontent-%COMP%]{display:block}.brand-presets-wrapper[_ngcontent-%COMP%]   .brand-preset-wrapper[_ngcontent-%COMP%]   .img-logo-wrapper[_ngcontent-%COMP%]{width:55px;height:55px;border-radius:4px;display:flex;align-items:center;padding:2px}.brand-presets-wrapper[_ngcontent-%COMP%]   .brand-preset-wrapper[_ngcontent-%COMP%]   .brand-color[_ngcontent-%COMP%]{width:44px;height:44px;border-radius:6px;border:2px solid rgba(0,0,0,.1)}.brand-presets-wrapper[_ngcontent-%COMP%]   .brand-preset-wrapper[_ngcontent-%COMP%]   .options-wrapper[_ngcontent-%COMP%]{display:none;position:absolute;width:100%;height:100%;top:0;left:0}.brand-presets-wrapper[_ngcontent-%COMP%]   .brand-preset-wrapper[_ngcontent-%COMP%]   .options-wrapper[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);color:#5f58b7;background-color:#fff;transition:all .3s;font-size:12px;font-weight:700}.brand-presets-wrapper[_ngcontent-%COMP%]   .brand-preset-wrapper[_ngcontent-%COMP%]   .options-wrapper[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:hover{background-color:#eee}.brand-presets-wrapper[_ngcontent-%COMP%]   .brand-preset-wrapper[_ngcontent-%COMP%]   .options-wrapper[_ngcontent-%COMP%]   .edit-delete-wrapper[_ngcontent-%COMP%]{top:8px;right:8px;z-index:10}.brand-presets-wrapper[_ngcontent-%COMP%]   .brand-preset-wrapper[_ngcontent-%COMP%]   .options-wrapper[_ngcontent-%COMP%]   .edit-delete-wrapper[_ngcontent-%COMP%]   .dropdown-toggle[_ngcontent-%COMP%]{-webkit-user-select:none;-moz-user-select:none;user-select:none;display:flex;align-items:center;justify-content:center;width:24px;height:24px;text-align:center;background-color:#fff;padding:4px;border-radius:4px;box-shadow:0 0 4px 2px rgba(60,57,100,.16);cursor:pointer}.brand-presets-wrapper[_ngcontent-%COMP%]   .brand-preset-wrapper[_ngcontent-%COMP%]   .options-wrapper[_ngcontent-%COMP%]   .edit-delete-wrapper[_ngcontent-%COMP%]   .dropdown-toggle[_ngcontent-%COMP%]:hover   .mat-icon[_ngcontent-%COMP%]{color:#5f58b7}.brand-presets-wrapper[_ngcontent-%COMP%]   .brand-preset-wrapper[_ngcontent-%COMP%]   .options-wrapper[_ngcontent-%COMP%]   .edit-delete-wrapper[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{transition:all .3s;height:16px;width:8px;font-size:8px}.brand-presets-wrapper[_ngcontent-%COMP%]   .brand-preset-wrapper[_ngcontent-%COMP%]   .options-wrapper[_ngcontent-%COMP%]   .edit-delete-wrapper[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]{padding:6px 16px;font-size:12px}']}),e})();var wn=["Shapes","Arrows","Blobs","Lines","Scribbles","Speech Bubbles","Sparkles","Smoke Effects","Water Splash","Lens Flare","Leaves","Reviews","Waves"];function _n(e,t){1&e&&r.Vb(0,"mat-icon",16)}function yn(e,t){1&e&&r.Vb(0,"mat-icon",16)}function xn(e,t){if(1&e){const e=r.bc();r.ac(0,"div"),r.ac(1,"div",6),r.kc("click",function(){r.Ic(e);const a=t.$implicit;return r.oc().changeCategory(a)}),r.ac(2,"span",7),r.Qc(3),r.Zb(),r.Oc(4,yn,1,0,"mat-icon",8),r.Zb(),r.Vb(5,"div",9),r.Zb()}if(2&e){const e=t.$implicit,a=r.oc();r.Hb(3),r.Rc(e),r.Hb(1),r.uc("ngIf",a.selectedCategory===e)}}const Hn=function(e){return{element:e,dragType:"sidebar-element"}};function Sn(e,t){if(1&e){const e=r.bc();r.ac(0,"div",17),r.ac(1,"div",18),r.kc("click",function(){r.Ic(e);const a=t.$implicit;return r.oc().addElement(a)}),r.Vb(2,"img",19),r.Zb(),r.Zb()}if(2&e){const e=t.$implicit,a=r.oc();r.Hb(1),r.uc("elementData",r.yc(3,Hn,e)),r.Hb(1),r.uc("defaultImage",a.placeholderBGColor)("lazyLoad",e.thumbnail_url)}}function kn(e,t){1&e&&(r.ac(0,"div",20),r.Vb(1,"div",21),r.Zb())}let On=(()=>{class e{constructor(e,t,a,n){this._utilsService=e,this._editorService=t,this.fabricCanvasHandler=a,this._gaEventsService=n,this.elements=[],this.elementCategories=wn,this.selectedCategory="All Categories",this.pageNum=1,this.pageSize=60,this.isLoading=!1,this.noDataToLoad=!1,this.isSidebarItemActivated=!1,this.subscriptionsList=new p.a}ngOnInit(){this.subscriptionsList.add(this._utilsService.activeSidebarItem.subscribe(e=>{if((null==e?void 0:e.sidebarItemId)===f.a.SIDEBAR_ITEMS.ELEMENTS.id){if(this.isSidebarItemActivated)return;this.isSidebarItemActivated=!0,this.isLoading=!0,this.getElements()}}))}getElements(e=null){this._editorService.getElements(this.pageNum,this.pageSize,e).subscribe(e=>{if(0==e.length)return this.noDataToLoad=!0,void(this.isLoading=!1);this.isLoading=!1,this.elements=[...this.elements,...e]})}ngOnDestroy(){this.subscriptionsList.unsubscribe()}changeCategory(e){this.selectedCategory=e,"All Categories"===e&&(e=null),this.elements=[],this.pageNum=1,this.noDataToLoad=!1,e=null===e?e:e.replace(/ /g,"-").toLowerCase(),this.getElements(e),this._gaEventsService.eventEmitter("Editor Elements Sidebar","Elements Category Selected",`${this.selectedCategory}`,null)}onScroll(){if(this.noDataToLoad)return;this.isLoading=!0,this.pageNum+=1;let e=this.selectedCategory;"All Categories"===e&&(e=null),e=null===e?e:e.replace(/ /g,"-").toLowerCase(),this.getElements(e)}addElement(e){e.thumbnail_url.includes(".svg")?this._editorService.downloadSVGFileFromS3(e.thumbnail_url).subscribe(e=>{this.fabricCanvasHandler.vectorHandler.loadSVGFromString(e,null)},e=>{throw e}):e.thumbnail_url.includes(".png")&&this.fabricCanvasHandler.imageHandler.addImage(e.image_url)}}return e.\u0275fac=function(t){return new(t||e)(r.Ub(xe),r.Ub(fe.a),r.Ub(ke),r.Ub(F.a))},e.\u0275cmp=r.Ob({type:e,selectors:[["app-elements-sidebar"]],inputs:{placeholderBGColor:"placeholderBGColor"},decls:20,vars:8,consts:[[1,"elements-wrapper"],["ngbDropdown","",1,"panel-dropdown"],["ngbDropdownToggle","",1,"btn","d-flex","flex-row","align-items-baseline","btn-block","no-caret-dropdown"],[1,"flex-grow-1"],["svgIcon","arrow_down",1,"arrow-down-icon"],["ngbDropdownMenu","","aria-labelledby","elementsDropdown",1,"panel-dropdown-menu","w-100","mt-2",2,"max-height","300px","overflow-y","auto"],["ngbDropdownItem","",1,"dropdown-item","d-flex","align-items-center",3,"click"],[1,"item-text","text-truncate","flex-grow-1","ml-2"],["style","width: 20px; height: 20px; font-size: 12px","svgIcon","header-check",4,"ngIf"],[1,"hr-border-bottom"],[4,"ngFor","ngForOf"],[1,"search-query-text"],["infiniteScroll","",1,"scrollableContainer",3,"scrollWindow","infiniteScrollDistance","infiniteScrollThrottle","scrolled"],[1,"d-flex","flex-row","flex-wrap","justify-content-between","mt-1"],["class","element",4,"ngFor","ngForOf"],["class","text-center p-3",4,"ngIf"],["svgIcon","header-check",2,"width","20px","height","20px","font-size","12px"],[1,"element"],["appCanvasDrag","",1,"img-container",3,"elementData","click"],["alt","Element",1,"img-thumb",3,"defaultImage","lazyLoad"],[1,"text-center","p-3"],[1,"data-loader"]],template:function(e,t){1&e&&(r.ac(0,"div",0),r.ac(1,"div",1),r.ac(2,"button",2),r.ac(3,"span",3),r.Qc(4,"Select Category"),r.Zb(),r.Vb(5,"mat-icon",4),r.Zb(),r.ac(6,"div",5),r.ac(7,"div",6),r.kc("click",function(){return t.changeCategory("All Categories")}),r.ac(8,"span",7),r.Qc(9,"All Categories"),r.Zb(),r.Oc(10,_n,1,0,"mat-icon",8),r.Zb(),r.Vb(11,"div",9),r.Oc(12,xn,6,2,"div",10),r.Zb(),r.Zb(),r.ac(13,"div",11),r.ac(14,"span"),r.Qc(15),r.Zb(),r.Zb(),r.ac(16,"div",12),r.kc("scrolled",function(){return t.onScroll()}),r.ac(17,"div",13),r.Oc(18,Sn,3,5,"div",14),r.Zb(),r.Oc(19,kn,2,0,"div",15),r.Zb(),r.Zb()),2&e&&(r.Hb(10),r.uc("ngIf","All Categories"===t.selectedCategory),r.Hb(2),r.uc("ngForOf",t.elementCategories),r.Hb(3),r.Rc(t.selectedCategory),r.Hb(1),r.uc("scrollWindow",!1)("infiniteScrollDistance",2)("infiniteScrollThrottle",50),r.Hb(2),r.uc("ngForOf",t.elements),r.Hb(1),r.uc("ngIf",t.isLoading))},directives:[T.f,T.j,Le.a,T.h,T.g,k.m,k.l,da.a,wa,Ze.a],styles:[""]}),e})();class In{constructor(){this.iconfinderIcons=[],this.svgRepoIcons=[]}}let Pn=(()=>{class e{constructor(e){this._http=e}getIconsFromIconfinder(e,t){return this._http.get(`${b.a.apiUrl}/api/shapes-service/iconfinder?query=${e}&offset=${t}`)}getIconsFromSvgrepo(e,t,a){return this._http.get(`${b.a.apiUrl}/api/shapes-service/svgrepo?query=${e}&pageSize=${a}&offset=${t}`)}downloadIconByDownloadUrl(e,t){const a=new me.f;return a.set("Accept","image/svg+xml"),this._http.get(`/api/shapes-service/download/${t}/icon?download-url=${e}`,{headers:a,responseType:"text"})}}return e.\u0275fac=function(t){return new(t||e)(r.hc(me.b))},e.\u0275prov=r.Qb({token:e,factory:e.\u0275fac}),e})();function Tn(e,t){1&e&&r.Vb(0,"mat-icon",22)}function En(e,t){1&e&&r.Vb(0,"mat-icon",23)}function Fn(e,t){1&e&&r.Vb(0,"mat-icon",24)}function An(e,t){1&e&&r.Vb(0,"mat-icon",25)}const Mn=function(e){return{iconURL:e,iconsProvider:"Iconfinder",dragType:"sidebar-icon"}};function Dn(e,t){if(1&e){const e=r.bc();r.ac(0,"div",26),r.kc("click",function(){r.Ic(e);const a=t.$implicit;return r.oc().getIcon(a)}),r.Vb(1,"img",27),r.Zb()}if(2&e){const e=t.$implicit,a=r.oc();r.uc("elementData",r.yc(3,Mn,e.downloadUrl)),r.Hb(1),r.uc("defaultImage",a.placeholderBGColor)("lazyLoad",e.previewUrl)}}function jn(e,t){1&e&&(r.ac(0,"div",28),r.Vb(1,"div",29),r.Zb())}const Ln=function(e){return{iconURL:e,iconsProvider:"Svgrepo",dragType:"sidebar-icon"}};function Zn(e,t){if(1&e){const e=r.bc();r.ac(0,"div",26),r.kc("click",function(){r.Ic(e);const a=t.$implicit;return r.oc().getIcon(a)}),r.Vb(1,"img",27),r.Zb()}if(2&e){const e=t.$implicit,a=r.oc();r.uc("elementData",r.yc(3,Ln,e.downloadUrl)),r.Hb(1),r.uc("defaultImage",a.placeholderBGColor)("lazyLoad",e.previewUrl)}}function Rn(e,t){1&e&&(r.ac(0,"div",28),r.Vb(1,"div",29),r.Zb())}let zn=(()=>{class e{constructor(e,t,a){this._iconService=e,this._utilsService=t,this._gaEventsService=a,this.allIcons=new In,this.searchQuery="social",this.iconfinderOffset=0,this.svgrepoOffset=0,this.pageSize=50,this.isLoading=!1,this.noIconfinderDataToLoad=!1,this.noSvgrepoDataToLoad=!1,this.subscriptionsList=new p.a,this.iconsProvider="Iconfinder",this.iconsProviderLink="https://iconfinder.com"}ngOnInit(){this.subscriptionsList.add(this._utilsService.activeSidebarItem.subscribe(e=>{if((null==e?void 0:e.sidebarItemId)===f.a.SIDEBAR_ITEMS.ICONS.id){if(this.isSidebarItemActivated)return;this.isSidebarItemActivated=!0,this.isLoading=!0,this.getIconsFromIconfinder(this.searchQuery)}}))}getIconsFromIconfinder(e){this.isLoading=!0,this._iconService.getIconsFromIconfinder(e,this.iconfinderOffset).subscribe(e=>{if(0==e.icons.length)return this.noIconfinderDataToLoad=!0,void(this.isLoading=!1);this.isLoading=!1,this.allIcons.iconfinderIcons=[...this.allIcons.iconfinderIcons,...e.icons]},e=>{throw this.isLoading=!1,e})}getIconsFromSvgrepo(e){this.isLoading=!0,this._iconService.getIconsFromSvgrepo(e,this.svgrepoOffset,this.pageSize).subscribe(e=>{if(0==e.icons.length)return this.noSvgrepoDataToLoad=!0,void(this.isLoading=!1);this.isLoading=!1,this.allIcons.svgRepoIcons=[...this.allIcons.svgRepoIcons,...e.icons]},e=>{throw this.isLoading=!1,e})}changeIconsProvider(e){this.isLoading||(this.iconsProvider=e,"Iconfinder"===this.iconsProvider?this.iconsProviderLink="https://iconfinder.com":"Svgrepo"===this.iconsProvider&&(this.iconsProviderLink="https://svgrepo.com"))}onScroll(){if("Iconfinder"===this.iconsProvider){if(this.noIconfinderDataToLoad)return;this.iconfinderOffset=this.allIcons.iconfinderIcons.length,this.getIconsFromIconfinder(this.searchQuery)}else if("Svgrepo"===this.iconsProvider){if(this.noSvgrepoDataToLoad)return;this.svgrepoOffset=this.allIcons.svgRepoIcons.length,this.getIconsFromSvgrepo(this.searchQuery)}}ngOnDestroy(){this.subscriptionsList.unsubscribe()}searchIcons(){"Iconfinder"===this.iconsProvider?(this.iconfinderOffset=0,this.resetIconsList(),this.getIconsFromIconfinder(this.searchQuery)):"Svgrepo"===this.iconsProvider&&(this.svgrepoOffset=0,this.resetIconsList(),this.getIconsFromSvgrepo(this.searchQuery)),""!==this.searchQuery.trim()&&this._gaEventsService.eventEmitter("Editor Icons Sidebar Search","Search Keyword Icons",`${this.searchQuery}-${this.iconsProvider}`,null)}resetIconsList(){"Iconfinder"===this.iconsProvider?(this.allIcons.iconfinderIcons=[],this.noIconfinderDataToLoad=!1):"Svgrepo"===this.iconsProvider&&(this.allIcons.svgRepoIcons=[],this.noSvgrepoDataToLoad=!1)}getIcon(e){this._utilsService.sendDataToSend({type:"add-svg-icon",objectData:{iconURL:e.downloadUrl,iconsProvider:this.iconsProvider}})}addIcon(e){this._utilsService.sendDataToSend({type:"add-svg-icon",objectData:e})}}return e.\u0275fac=function(t){return new(t||e)(r.Ub(Pn),r.Ub(xe),r.Ub(F.a))},e.\u0275cmp=r.Ob({type:e,selectors:[["app-search-icons-sidebar"]],inputs:{placeholderBGColor:"placeholderBGColor"},decls:30,vars:23,consts:[[1,"icons-wrapper","d-flex","flex-column"],[1,"d-flex","flex-row"],[1,"default-integrations-provider","left-integration-wrapper","d-flex","flex-row","align-items-center","justify-content-center","w-100",3,"click"],["class","icon","svgIcon","iconfinder_default",4,"ngIf"],["class","icon","svgIcon","iconfinder_active",4,"ngIf"],[1,"ml-2"],[1,"default-integrations-provider","right-integration-wrapper","d-flex","flex-row","align-items-center","justify-content-center","w-100",3,"click"],["style","width: 40px","class","icon","svgIcon","svgrepo_default",4,"ngIf"],["style","width: 40px","class","icon","svgIcon","svgrepo_active",4,"ngIf"],[1,"mt-2"],[1,"search-query"],[1,"search-icon",3,"click"],["svgIcon","search_icon"],["type","text","placeholder","Search Icons",1,"form-control","editor-form-control","form-control-panel","form-control-lg",3,"ngModel","keyup.enter","ngModelChange"],[1,"provider-text"],["target","_blank","rel","noopener",1,"unsplash-provider-color",3,"href"],["infiniteScroll","",1,"scrollableContainer",3,"scrollWindow","infiniteScrollDistance","infiniteScrollThrottle","hidden","scrolled"],[1,"d-flex","flex-row","flex-wrap","justify-content-between","mt-1"],["appCanvasDrag","","class","img-container icon-px",3,"elementData","click",4,"ngFor","ngForOf"],["class","text-center p-3",4,"ngIf"],["infiniteScroll","",1,"px-2","scrollableContainer",3,"scrollWindow","infiniteScrollDistance","infiniteScrollThrottle","hidden","scrolled"],[1,"d-flex","flex-row","flex-wrap","justify-content-between","mt-2"],["svgIcon","iconfinder_default",1,"icon"],["svgIcon","iconfinder_active",1,"icon"],["svgIcon","svgrepo_default",1,"icon",2,"width","40px"],["svgIcon","svgrepo_active",1,"icon",2,"width","40px"],["appCanvasDrag","",1,"img-container","icon-px",3,"elementData","click"],["alt","Shape",1,"img-thumb","img-opacity-fadein",3,"defaultImage","lazyLoad"],[1,"text-center","p-3"],[1,"data-loader"]],template:function(e,t){1&e&&(r.ac(0,"div",0),r.ac(1,"div",1),r.ac(2,"div",2),r.kc("click",function(){return t.changeIconsProvider("Iconfinder")}),r.Oc(3,Tn,1,0,"mat-icon",3),r.Oc(4,En,1,0,"mat-icon",4),r.ac(5,"span",5),r.Qc(6,"Iconfinder"),r.Zb(),r.Zb(),r.ac(7,"div",6),r.kc("click",function(){return t.changeIconsProvider("Svgrepo")}),r.Oc(8,Fn,1,0,"mat-icon",7),r.Oc(9,An,1,0,"mat-icon",8),r.ac(10,"span",5),r.Qc(11,"Svgrepo"),r.Zb(),r.Zb(),r.Zb(),r.ac(12,"div",9),r.ac(13,"div",10),r.ac(14,"span",11),r.kc("click",function(){return t.searchIcons()}),r.Vb(15,"mat-icon",12),r.Zb(),r.ac(16,"input",13),r.kc("keyup.enter",function(){return t.searchIcons()})("ngModelChange",function(e){return t.searchQuery=e}),r.Zb(),r.Zb(),r.Zb(),r.ac(17,"div",14),r.ac(18,"span"),r.Qc(19,"Icons provided by "),r.ac(20,"a",15),r.Qc(21),r.Zb(),r.Zb(),r.Zb(),r.ac(22,"div",16),r.kc("scrolled",function(){return t.onScroll()}),r.ac(23,"div",17),r.Oc(24,Dn,2,5,"div",18),r.Zb(),r.Oc(25,jn,2,0,"div",19),r.Zb(),r.ac(26,"div",20),r.kc("scrolled",function(){return t.onScroll()}),r.ac(27,"div",21),r.Oc(28,Zn,2,5,"div",18),r.Zb(),r.Oc(29,Rn,2,0,"div",19),r.Zb(),r.Zb()),2&e&&(r.Hb(2),r.Mb("active-integrations-provider","Iconfinder"===t.iconsProvider),r.Hb(1),r.uc("ngIf","Iconfinder"!==t.iconsProvider),r.Hb(1),r.uc("ngIf","Iconfinder"===t.iconsProvider),r.Hb(3),r.Mb("active-integrations-provider","Svgrepo"===t.iconsProvider),r.Hb(1),r.uc("ngIf","Svgrepo"!==t.iconsProvider),r.Hb(1),r.uc("ngIf","Svgrepo"===t.iconsProvider),r.Hb(7),r.uc("ngModel",t.searchQuery),r.Hb(4),r.uc("href",t.iconsProviderLink,r.Lc),r.Hb(1),r.Rc(t.iconsProvider),r.Hb(1),r.uc("scrollWindow",!1)("infiniteScrollDistance",2)("infiniteScrollThrottle",50)("hidden","Iconfinder"!==t.iconsProvider),r.Hb(2),r.uc("ngForOf",null==t.allIcons?null:t.allIcons.iconfinderIcons),r.Hb(1),r.uc("ngIf",t.isLoading),r.Hb(1),r.uc("scrollWindow",!1)("infiniteScrollDistance",2)("infiniteScrollThrottle",50)("hidden","Svgrepo"!==t.iconsProvider),r.Hb(2),r.uc("ngForOf",null==t.allIcons?null:t.allIcons.svgRepoIcons),r.Hb(1),r.uc("ngIf",t.isLoading))},directives:[k.m,Le.a,O.b,O.i,O.l,da.a,k.l,wa,Ze.a],styles:[""]}),e})();var Bn=a("ddVi"),Un=[{bg:"#663366",head:"#99cc99",sub:"#666633",svg:"#ffffcc"},{bg:"#333333",head:"#ffffff",sub:"#cc6600",svg:"#333333"},{bg:"#cfa595",head:"#009e7c",sub:"#666633",svg:"#ffffcc"},{bg:"#ffffcc",head:"#cc0033",sub:"#993333",svg:"#99cc00"},{bg:"#000000",head:"#ff3300",sub:"#ffaa80",svg:"#995a1a"},{bg:"#ffa6d3",head:"#666666",sub:"#000000",svg:"#e35b00"},{bg:"#000000",head:"#ffffff",sub:"#737777",svg:"#9933cc"},{bg:"#17fff8",head:"#c2b24c",sub:"#000000",svg:"#e5008b"},{bg:"#ffffff",head:"#000000",sub:"#ff3300",svg:"#666666"},{bg:"#fffac7",head:"#000000",sub:"#006699",svg:"#ffcc33"},{bg:"#ff6666",head:"#333333",sub:"#ffffff",svg:"#e5008b"},{bg:"#ffffff",head:"#00ffff",sub:"#333333",svg:"#cc3333"},{bg:"#ccccff",head:"#003366",sub:"#ffffff",svg:"#ff99ff"},{bg:"#ff0033",head:"#ccffff",sub:"#00cccc",svg:"#0099cc"},{bg:"#333366",head:"#ff99cc",sub:"#ffffff",svg:"#996699"},{bg:"#9933cc",head:"#ffcc00",sub:"#333333",svg:"#cc66ff"},{bg:"#ffff66",head:"#99ff33",sub:"#339999",svg:"#33ff66"},{bg:"#ff6666",head:"#009999",sub:"#333333",svg:"#006666"},{bg:"#000099",head:"#ff6600",sub:"#666666",svg:"#cf714e"},{bg:"#440047",head:"#fbecec",sub:"#91d18b",svg:"#e11d74"},{bg:"#000000",head:"#ffffff",sub:"#d9d3b7",svg:"#ec6d69"},{bg:"#cc9bcc",head:"#d100a0",sub:"#ff6633",svg:"#ffffff"},{bg:"#ff9966",head:"#ffffff",sub:"#ffcc33",svg:"#d14c0b"},{bg:"#971729",head:"#737777",sub:"#ed5a68",svg:"#ce7077"},{bg:"#ffffff",head:"#666666",sub:"#ffcc33",svg:"#333333"},{bg:"#99cccc",head:"#ffffff",sub:"#000000",svg:"#cc3333"},{bg:"#000099",head:"#000000",sub:"#ccff00",svg:"#7da9ff"},{bg:"#ff3300",head:"#ffffff",sub:"#333333",svg:"#e5008b"},{bg:"#cc006f",head:"#000000",sub:"#d4cd00",svg:"#3d7fff"},{bg:"#ffffff",head:"#ffcc33",sub:"#000000",svg:"#ff6600"}];let Nn=(()=>{class e{constructor(e){this._http=e}getUserBlends(e,t){return this._http.get(`/api/blends/users/${e}/blends?workspace_id=${t}`)}addUserBlend(e,t,a){return this._http.post("/api/blends",{user_id:e,workspace_id:t,blend:a})}updateUserBlend(e,t,a){return this._http.put(`/api/blends/${e}`,{userId:t,blend:a})}deleteUserBlend(e,t){return this._http.delete(`/api/blends/${t}/${e}`)}}return e.\u0275fac=function(t){return new(t||e)(r.hc(me.b))},e.\u0275prov=r.Qb({token:e,factory:e.\u0275fac}),e})();var Vn=a("R9Cn");function Wn(e,t){1&e&&(r.ac(0,"div",16),r.Vb(1,"div",17),r.Zb())}function Gn(e,t){1&e&&(r.ac(0,"span",13),r.Qc(1,"My Blends"),r.Zb())}function Qn(e,t){if(1&e){const e=r.bc();r.ac(0,"div",18),r.ac(1,"div",19),r.kc("mouseenter",function(){r.Ic(e);const a=t.$implicit;return r.oc().blendPreview(a.blend)})("mouseleave",function(){return r.Ic(e),r.oc().detachBlendPreview()})("click",function(){r.Ic(e);const a=t.$implicit;return r.oc().selectColorPalette(a.blend)}),r.Vb(2,"span",20),r.Vb(3,"span",20),r.Vb(4,"span",20),r.Vb(5,"span",20),r.Zb(),r.ac(6,"div",21),r.Vb(7,"mat-icon",22),r.ac(8,"div",23),r.ac(9,"div",24),r.kc("click",function(){r.Ic(e);const a=t.$implicit;return r.oc().deleteUserBlend(a)}),r.Vb(10,"mat-icon",25),r.ac(11,"span",26),r.Qc(12,"Remove Blend"),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb()}if(2&e){const e=t.$implicit;r.Hb(2),r.Nc("background-color",e.blend.bg),r.Hb(1),r.Nc("background-color",e.blend.head),r.Hb(1),r.Nc("background-color",e.blend.sub),r.Hb(1),r.Nc("background-color",e.blend.svg)}}function $n(e,t){if(1&e){const e=r.bc();r.ac(0,"div",27),r.kc("mouseenter",function(){r.Ic(e);const a=t.$implicit;return r.oc().blendPreview(a)})("mouseleave",function(){return r.Ic(e),r.oc().detachBlendPreview()})("click",function(){r.Ic(e);const a=t.$implicit;return r.oc().selectColorPalette(a)}),r.Vb(1,"span",20),r.Vb(2,"span",20),r.Vb(3,"span",20),r.Vb(4,"span",20),r.Zb()}if(2&e){const e=t.$implicit;r.Hb(1),r.Nc("background-color",e.bg),r.Hb(1),r.Nc("background-color",e.head),r.Hb(1),r.Nc("background-color",e.sub),r.Hb(1),r.Nc("background-color",e.svg)}}function qn(e,t){1&e&&r.Vb(0,"span",47)}function Yn(e,t){1&e&&r.Vb(0,"span",47)}function Xn(e,t){if(1&e){const e=r.bc();r.ac(0,"div",28),r.ac(1,"button",29),r.kc("click",function(){return t.$implicit.dismiss("Cross click")}),r.ac(2,"span",30),r.Qc(3,"\xd7"),r.Zb(),r.Zb(),r.ac(4,"div",31),r.Vb(5,"img",32),r.ac(6,"span",33),r.Qc(7,"Add Your Own Blend"),r.Zb(),r.Zb(),r.ac(8,"div",34),r.ac(9,"div",35),r.ac(10,"div",36),r.ac(11,"div",37),r.ac(12,"span",38),r.Qc(13,"Background"),r.Zb(),r.Vb(14,"div",39),r.ac(15,"input",40),r.kc("focus",function(){return r.Ic(e),r.oc().setSelectedColorItem("bgColor")})("ngModelChange",function(t){return r.Ic(e),r.oc().bgColor=t}),r.Zb(),r.Zb(),r.ac(16,"div",37),r.ac(17,"span",38),r.Qc(18,"Big Text"),r.Zb(),r.Vb(19,"div",39),r.ac(20,"input",40),r.kc("focus",function(){return r.Ic(e),r.oc().setSelectedColorItem("headColor")})("ngModelChange",function(t){return r.Ic(e),r.oc().headColor=t}),r.Zb(),r.Zb(),r.ac(21,"div",37),r.ac(22,"span",38),r.Qc(23,"Small Texts"),r.Zb(),r.Vb(24,"div",39),r.ac(25,"input",40),r.kc("focus",function(){return r.Ic(e),r.oc().setSelectedColorItem("subColor")})("ngModelChange",function(t){return r.Ic(e),r.oc().subColor=t}),r.Zb(),r.Zb(),r.ac(26,"div",37),r.ac(27,"span",38),r.Qc(28,"Shapes"),r.Zb(),r.Vb(29,"div",39),r.ac(30,"input",40),r.kc("focus",function(){return r.Ic(e),r.oc().setSelectedColorItem("svgColor")})("ngModelChange",function(t){return r.Ic(e),r.oc().svgColor=t}),r.Zb(),r.Zb(),r.Zb(),r.ac(31,"div",41),r.ac(32,"div",1),r.ac(33,"div",42),r.kc("colorPickerChange",function(t){return r.Ic(e),r.oc().selectedColorItem.colorCode=t})("colorPickerChange",function(){return r.Ic(e),r.oc().setBlendColorItem()}),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.ac(34,"div",43),r.ac(35,"button",44),r.kc("click",function(){return t.$implicit.dismiss("Close click")}),r.Oc(36,qn,1,0,"span",45),r.Qc(37," Cancel "),r.Zb(),r.ac(38,"button",46),r.kc("click",function(){return r.Ic(e),r.oc().addNewUserBlend()}),r.Oc(39,Yn,1,0,"span",45),r.Qc(40," Save "),r.Zb(),r.Zb(),r.Zb(),r.Zb()}if(2&e){const e=r.oc();r.Hb(11),r.Mb("active-blend-item","bgColor"===e.selectedColorItem.item),r.Hb(3),r.Nc("background-color",e.bgColor),r.Hb(1),r.uc("ngModel",e.bgColor),r.Hb(1),r.Mb("active-blend-item","headColor"===e.selectedColorItem.item),r.Hb(3),r.Nc("background-color",e.headColor),r.Hb(1),r.uc("ngModel",e.headColor),r.Hb(1),r.Mb("active-blend-item","subColor"===e.selectedColorItem.item),r.Hb(3),r.Nc("background-color",e.subColor),r.Hb(1),r.uc("ngModel",e.subColor),r.Hb(1),r.Mb("active-blend-item","svgColor"===e.selectedColorItem.item),r.Hb(3),r.Nc("background-color",e.svgColor),r.Hb(1),r.uc("ngModel",e.svgColor),r.Hb(3),r.uc("cpToggle",!0)("cpDialogDisplay","inline")("colorPicker",e.selectedColorItem.colorCode),r.Hb(2),r.uc("disabled",e.addBlendLoading),r.Hb(1),r.uc("ngIf",e.addBlendLoading),r.Hb(2),r.uc("disabled",e.addBlendLoading),r.Hb(1),r.uc("ngIf",e.addBlendLoading)}}let Jn=(()=>{class e{constructor(e,t,a,n,i){this._userService=e,this._utilsService=t,this._modalService=a,this._gaEventsService=n,this._colorPaletteService=i,this.userColorPalettes=[],this.bgColor="#DADADA",this.headColor="#DADADA",this.subColor="#DADADA",this.svgColor="#DADADA",this.selectedColorItem={item:"bgColor",colorCode:this.bgColor},this.addBlendLoading=!1,this.isLoading=!1,this.subscriptionsList=new p.a,this.debouncedBlendPreview=m()(e=>{this._utilsService.sendDataToSend({type:"blend",options:{isPreview:!0},objectData:e})},0,{leading:!0,trailing:!1}),this.debouncedDefaultBlendPreview=m()(()=>{this._utilsService.sendDataToSend({type:"previous-blend",objectData:null})},0,{leading:!0,trailing:!1})}ngOnInit(){this.subscriptionsList.add(this._utilsService.activeSidebarItem.subscribe(e=>{if((null==e?void 0:e.sidebarItemId)===f.a.SIDEBAR_ITEMS.BLEND.id){if(this.isSidebarItemActivated)return;this.isSidebarItemActivated=!0,this.getColorPalettes(),this.getUserColorPalettes()}}))}selectColorPalette(e){this._utilsService.sendDataToSend({type:"blend",options:{isPreview:!1},objectData:e}),this._gaEventsService.eventEmitter("Editor Blend Sidebar","Blend Selected","Blend Selected",null)}blendPreview(e){this.debouncedBlendPreview(e)}detachBlendPreview(){this.debouncedDefaultBlendPreview()}setBlendColorItem(){"bgColor"===this.selectedColorItem.item?this.bgColor=this.selectedColorItem.colorCode:"headColor"===this.selectedColorItem.item?this.headColor=this.selectedColorItem.colorCode:"subColor"===this.selectedColorItem.item?this.subColor=this.selectedColorItem.colorCode:"svgColor"===this.selectedColorItem.item&&(this.svgColor=this.selectedColorItem.colorCode)}setSelectedColorItem(e){"bgColor"===e?(this.selectedColorItem.item="bgColor",this.selectedColorItem.colorCode=this.bgColor):"headColor"===e?(this.selectedColorItem.item="headColor",this.selectedColorItem.colorCode=this.headColor):"subColor"===e?(this.selectedColorItem.item="subColor",this.selectedColorItem.colorCode=this.subColor):"svgColor"===e&&(this.selectedColorItem.item="svgColor",this.selectedColorItem.colorCode=this.svgColor)}deleteUserBlend(e){this._colorPaletteService.deleteUserBlend(this._userService.getUserId(),e._id).subscribe(t=>{this.userColorPalettes.splice(this.userColorPalettes.findIndex(t=>t._id==e._id),1)},e=>{throw e})}addNewUserBlend(){this.addBlendLoading=!0;let e=new Bn.a(this.bgColor,this.headColor,this.subColor,this.svgColor);this._colorPaletteService.addUserBlend(this._userService.getUserId(),this._userService.getCurrentUserWorkspaceId(),e).subscribe(e=>{this.userColorPalettes.unshift(e),this._modalService.dismissAll(),this.addBlendLoading=!1},e=>{throw this._modalService.dismissAll(),this.addBlendLoading=!1,e})}getColorPalettes(){this.colorPalettes=Un}getUserColorPalettes(){this._userService.getUserId()!==f.a.USER_NOT_LOGGED_IN&&(this.isLoading=!0,this._colorPaletteService.getUserBlends(this._userService.getUserId(),this._userService.getCurrentUserWorkspaceId()).subscribe(e=>{this.userColorPalettes=e,this.isLoading=!1},e=>{throw this.isLoading=!1,e}))}ngOnDestroy(){this.subscriptionsList.unsubscribe()}openModal(e){this._modalService.open(e,{size:"550",centered:!0})}}return e.\u0275fac=function(t){return new(t||e)(r.Ub(P.a),r.Ub(xe),r.Ub(T.k),r.Ub(F.a),r.Ub(Nn))},e.\u0275cmp=r.Ob({type:e,selectors:[["app-color-palettes-sidebar"]],decls:20,vars:4,consts:[[1,"px-2","py-4","custom-blend-wrapper","d-flex","flex-column"],[1,"d-flex","flex-row"],[1,"primary-text","flex-grow-1",2,"font-size","18px","font-weight","700"],["svgIcon","editor_blend_add",2,"cursor","pointer",3,"click"],[1,"secondary-text",2,"font-size","12px","margin-top","3px"],[1,"color-palettes-wrapper"],[1,"scrollableContainer"],[1,"hr-border-top",2,"margin-top","0","margin-bottom","0"],["class","text-center p-3",4,"ngIf"],[1,"user-palettes","mt-3"],["class","primary-text","style","font-weight: 700; font-size: 13px; min-width: 6rem",4,"ngIf"],["style","\n          display: flex;\n          align-items: center;\n          justify-content: space-between;\n        ",4,"ngFor","ngForOf"],[1,"default-palettes","mt-3"],[1,"primary-text",2,"font-weight","700","font-size","13px","min-width","6rem"],["class","color-palette-wrapper d-flex flex-row justify-content-between",3,"mouseenter","mouseleave","click",4,"ngFor","ngForOf"],["addBlendModal",""],[1,"text-center","p-3"],[1,"data-loader"],[2,"display","flex","align-items","center","justify-content","space-between"],[1,"user-color-palette-wrapper","color-palette-wrapper","d-flex","flex-row","justify-content-between",3,"mouseenter","mouseleave","click"],[1,"color"],["ngbDropdown","","display","dynamic","placement","bottom-right"],["ngbDropdownToggle","","id","blendOptionsDropdown","svgIcon","editor_icon_more",1,"blend-options-icon",2,"width","20px","height","20px"],["ngbDropdownMenu","","aria-labelledby","blendOptionsDropdown",1,"px-dropdown-menu",2,"min-width","8rem"],["ngbDropdownItem","",1,"dropdown-item","d-flex",3,"click"],["svgIcon","delete",1,"item-icon"],[1,"item-text","black-text"],[1,"color-palette-wrapper","d-flex","flex-row","justify-content-between",3,"mouseenter","mouseleave","click"],[1,"px-card","px-modal-card"],["type","button","aria-label","Close",1,"close","close-btn",3,"click"],["aria-hidden","true"],[1,"px-card-header","d-flex","flex-column"],["src","assets/img/svg/modal-svg.svg","alt","",1,"modal-svg"],[1,"title"],[1,"px-card-body","d-flex","flex-column",2,"padding","30px 30px 30px 36px"],[1,"d-flex","flex-row","w-100","justify-content-between"],[1,"d-flex","flex-column","w-100","pr-2"],[1,"d-flex","flex-row","align-items-center","justify-content-between","mb-2",2,"padding","3px","border","2px solid transparent","border-radius","4px"],[2,"font-weight","700","font-size","13px","min-width","5rem"],[1,"color-input-preview",2,"width","36px","height","36px","border-radius","6px","border","1px solid rgba(0, 0, 0, 0.1)"],["type","text",1,"color-input","form-control","form-control-lg",2,"max-width","5rem",3,"ngModel","focus","ngModelChange"],[1,"d-flex","flex-column","pl-2"],[1,"blend-colorpicker",3,"cpToggle","cpDialogDisplay","colorPicker","colorPickerChange"],[1,"btn-area","d-flex","w-100",2,"justify-content","flex-end"],["type","button",1,"btn","btn-outline-dark",3,"disabled","click"],["class","spinner-border spinner-border-sm mr-1",4,"ngIf"],[1,"btn","btn-primary",2,"margin-left","8px",3,"disabled","click"],[1,"spinner-border","spinner-border-sm","mr-1"]],template:function(e,t){if(1&e){const e=r.bc();r.ac(0,"div",0),r.ac(1,"div",1),r.ac(2,"span",2),r.Qc(3,"Custom Blend"),r.Zb(),r.ac(4,"mat-icon",3),r.kc("click",function(){r.Ic(e);const a=r.Ec(19);return t.openModal(a)}),r.Zb(),r.Zb(),r.ac(5,"span",4),r.Qc(6,"Add your own custom blend"),r.Zb(),r.Zb(),r.ac(7,"div",5),r.ac(8,"div",6),r.Vb(9,"hr",7),r.Oc(10,Wn,2,0,"div",8),r.ac(11,"div",9),r.Oc(12,Gn,2,0,"span",10),r.Oc(13,Qn,13,8,"div",11),r.Zb(),r.ac(14,"div",12),r.ac(15,"span",13),r.Qc(16,"Default"),r.Zb(),r.Oc(17,$n,5,8,"div",14),r.Zb(),r.Zb(),r.Zb(),r.Oc(18,Xn,41,27,"ng-template",null,15,r.Pc)}2&e&&(r.Hb(10),r.uc("ngIf",t.isLoading),r.Hb(2),r.uc("ngIf",t.userColorPalettes.length>0),r.Hb(1),r.uc("ngForOf",t.userColorPalettes),r.Hb(4),r.uc("ngForOf",t.colorPalettes))},directives:[Le.a,k.m,k.l,T.f,T.j,T.h,T.g,O.b,O.i,O.l,Vn.a],styles:[".color-input[_ngcontent-%COMP%]{max-width:5rem;padding:8px 10px;font-size:12px;font-weight:600;color:#676767;border:1px solid #ced4da}.active-blend-item[_ngcontent-%COMP%]{transition:all .2s;border:2px solid #5f58b7!important}.color-palettes-wrapper[_ngcontent-%COMP%]   .color-palette-wrapper[_ngcontent-%COMP%]{padding:6px;margin-top:12px;border-radius:6px;transition:all .2s}.color-palettes-wrapper[_ngcontent-%COMP%]   .color-palette-wrapper[_ngcontent-%COMP%]:hover{border:2px solid #5f58b7;cursor:pointer;transform:scale(1.02)}.color-palettes-wrapper[_ngcontent-%COMP%]   .color-palette-wrapper[_ngcontent-%COMP%]   .color[_ngcontent-%COMP%]{width:52px;height:52px;border-radius:8px}.color-palettes-wrapper[_ngcontent-%COMP%]   .user-color-palette-wrapper[_ngcontent-%COMP%]{min-width:220px;max-width:220px}.color-palettes-wrapper[_ngcontent-%COMP%]   .user-color-palette-wrapper[_ngcontent-%COMP%]   .color[_ngcontent-%COMP%]{width:40px;height:40px}.blend-options-icon[_ngcontent-%COMP%]{cursor:pointer;opacity:.5;transition:all .3s}.blend-options-icon[_ngcontent-%COMP%]:after{display:none}.blend-options-icon[_ngcontent-%COMP%]:hover{opacity:1}"]}),e})();var Kn=a("8LU1"),ei=a("LRne"),ti=a("HDdC"),ai=a("xgIS"),ni=a("VRyK");a("3N8a"),a("IjjT"),a("7Hc7");var ii=(a("7+OI"),a("/uUt"),a("D0XW")),ri=a("l7GE"),si=a("ZUHj");class oi{constructor(e){this.durationSelector=e}call(e,t){return t.subscribe(new ci(e,this.durationSelector))}}class ci extends ri.a{constructor(e,t){super(e),this.durationSelector=t,this.hasValue=!1}_next(e){if(this.value=e,this.hasValue=!0,!this.throttled){let a;try{const{durationSelector:t}=this;a=t(e)}catch(t){return this.destination.error(t)}const n=Object(si.a)(this,a);!n||n.closed?this.clearThrottle():this.add(this.throttled=n)}}clearThrottle(){const{value:e,hasValue:t,throttled:a}=this;a&&(this.remove(a),this.throttled=null,a.unsubscribe()),t&&(this.value=null,this.hasValue=!1,this.destination.next(e))}notifyNext(e,t,a,n){this.clearThrottle()}notifyComplete(){this.clearThrottle()}}var li=a("PqYM");function di(e,t=ii.a){return a=()=>Object(li.a)(e,t),function(e){return e.lift(new oi(a))};var a}var pi=a("pLZG"),hi=a("1G5W");a("JX91"),a("7o/Q"),a("eIep"),a("UXun");var ui=a("nLfN"),bi=a("cH1L");let gi=(()=>{class e{constructor(e,t,a){this._ngZone=e,this._platform=t,this._scrolled=new we.a,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=a}register(e){this.scrollContainers.has(e)||this.scrollContainers.set(e,e.elementScrolled().subscribe(()=>this._scrolled.next(e)))}deregister(e){const t=this.scrollContainers.get(e);t&&(t.unsubscribe(),this.scrollContainers.delete(e))}scrolled(e=20){return this._platform.isBrowser?new ti.a(t=>{this._globalSubscription||this._addGlobalListener();const a=e>0?this._scrolled.pipe(di(e)).subscribe(t):this._scrolled.subscribe(t);return this._scrolledCount++,()=>{a.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):Object(ei.a)()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((e,t)=>this.deregister(t)),this._scrolled.complete()}ancestorScrolled(e,t){const a=this.getAncestorScrollContainers(e);return this.scrolled(t).pipe(Object(pi.a)(e=>!e||a.indexOf(e)>-1))}getAncestorScrollContainers(e){const t=[];return this.scrollContainers.forEach((a,n)=>{this._scrollableContainsElement(n,e)&&t.push(n)}),t}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_scrollableContainsElement(e,t){let a=t.nativeElement,n=e.getElementRef().nativeElement;do{if(a==n)return!0}while(a=a.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>{const e=this._getWindow();return Object(ai.a)(e.document,"scroll").subscribe(()=>this._scrolled.next())})}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return e.\u0275fac=function(t){return new(t||e)(r.hc(r.E),r.hc(ui.a),r.hc(k.d,8))},e.\u0275prov=Object(r.Qb)({factory:function(){return new e(Object(r.hc)(r.E),Object(r.hc)(ui.a),Object(r.hc)(k.d,8))},token:e,providedIn:"root"}),e})(),fi=(()=>{class e{constructor(e,t,a){this._platform=e,this._document=a,t.runOutsideAngular(()=>{const t=this._getWindow();this._change=e.isBrowser?Object(ni.a)(Object(ai.a)(t,"resize"),Object(ai.a)(t,"orientationchange")):Object(ei.a)(),this._invalidateCache=this.change().subscribe(()=>this._updateViewportSize())})}ngOnDestroy(){this._invalidateCache.unsubscribe()}getViewportSize(){this._viewportSize||this._updateViewportSize();const e={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),e}getViewportRect(){const e=this.getViewportScrollPosition(),{width:t,height:a}=this.getViewportSize();return{top:e.top,left:e.left,bottom:e.top+a,right:e.left+t,height:a,width:t}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const e=this._getDocument(),t=this._getWindow(),a=e.documentElement,n=a.getBoundingClientRect();return{top:-n.top||e.body.scrollTop||t.scrollY||a.scrollTop||0,left:-n.left||e.body.scrollLeft||t.scrollX||a.scrollLeft||0}}change(e=20){return e>0?this._change.pipe(di(e)):this._change}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_updateViewportSize(){const e=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:e.innerWidth,height:e.innerHeight}:{width:0,height:0}}}return e.\u0275fac=function(t){return new(t||e)(r.hc(ui.a),r.hc(r.E),r.hc(k.d,8))},e.\u0275prov=Object(r.Qb)({factory:function(){return new e(Object(r.hc)(ui.a),Object(r.hc)(r.E),Object(r.hc)(k.d,8))},token:e,providedIn:"root"}),e})(),vi=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.Sb({type:e}),e.\u0275inj=r.Rb({}),e})(),mi=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.Sb({type:e}),e.\u0275inj=r.Rb({imports:[[bi.a,ui.b,vi],bi.a,vi]}),e})();function Ci(){throw Error("Host already has a portal attached")}class wi{attach(e){return null==e&&function(){throw Error("Attempting to attach a portal to a null PortalOutlet")}(),e.hasAttached()&&Ci(),this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;null==e?function(){throw Error("Attempting to detach a portal that is not attached to a host")}():(this._attachedHost=null,e.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class _i extends wi{constructor(e,t,a,n){super(),this.component=e,this.viewContainerRef=t,this.injector=a,this.componentFactoryResolver=n}}class yi extends wi{constructor(e,t,a){super(),this.templateRef=e,this.viewContainerRef=t,this.context=a}get origin(){return this.templateRef.elementRef}attach(e,t=this.context){return this.context=t,super.attach(e)}detach(){return this.context=void 0,super.detach()}}class xi extends wi{constructor(e){super(),this.element=e instanceof r.m?e.nativeElement:e}}class Hi extends class{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(e){return e||function(){throw Error("Must provide a portal to attach")}(),this.hasAttached()&&Ci(),this._isDisposed&&function(){throw Error("This PortalOutlet has already been disposed")}(),e instanceof _i?(this._attachedPortal=e,this.attachComponentPortal(e)):e instanceof yi?(this._attachedPortal=e,this.attachTemplatePortal(e)):this.attachDomPortal&&e instanceof xi?(this._attachedPortal=e,this.attachDomPortal(e)):void function(){throw Error("Attempting to attach an unknown Portal type. BasePortalOutlet accepts either a ComponentPortal or a TemplatePortal.")}()}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}{constructor(e,t,a,n,i){super(),this.outletElement=e,this._componentFactoryResolver=t,this._appRef=a,this._defaultInjector=n,this.attachDomPortal=e=>{if(!this._document)throw Error("Cannot attach DOM portal without _document constructor parameter");const t=e.element;if(!t.parentNode)throw Error("DOM portal content must be attached to a parent node.");const a=this._document.createComment("dom-portal");t.parentNode.insertBefore(a,t),this.outletElement.appendChild(t),super.setDisposeFn(()=>{a.parentNode&&a.parentNode.replaceChild(t,a)})},this._document=i}attachComponentPortal(e){const t=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component);let a;return e.viewContainerRef?(a=e.viewContainerRef.createComponent(t,e.viewContainerRef.length,e.injector||e.viewContainerRef.injector),this.setDisposeFn(()=>a.destroy())):(a=t.create(e.injector||this._defaultInjector),this._appRef.attachView(a.hostView),this.setDisposeFn(()=>{this._appRef.detachView(a.hostView),a.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(a)),a}attachTemplatePortal(e){let t=e.viewContainerRef,a=t.createEmbeddedView(e.templateRef,e.context);return a.detectChanges(),a.rootNodes.forEach(e=>this.outletElement.appendChild(e)),this.setDisposeFn(()=>{let e=t.indexOf(a);-1!==e&&t.remove(e)}),a}dispose(){super.dispose(),null!=this.outletElement.parentNode&&this.outletElement.parentNode.removeChild(this.outletElement)}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}let Si=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.Sb({type:e}),e.\u0275inj=r.Rb({}),e})();var ki=a("IzEk");a("FtGj");class Oi{constructor(e,t){this._viewportRuler=e,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=t}attach(){}enable(){if(this._canBeEnabled()){const e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=Object(Kn.c)(-this._previousScrollPosition.left),e.style.top=Object(Kn.c)(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const e=this._document.documentElement,t=e.style,a=this._document.body.style,n=t.scrollBehavior||"",i=a.scrollBehavior||"";this._isEnabled=!1,t.left=this._previousHTMLStyles.left,t.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),t.scrollBehavior=a.scrollBehavior="auto",window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),t.scrollBehavior=n,a.scrollBehavior=i}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const e=this._document.body,t=this._viewportRuler.getViewportSize();return e.scrollHeight>t.height||e.scrollWidth>t.width}}function Ii(){return Error("Scroll strategy has already been attached.")}class Pi{constructor(e,t,a,n){this._scrollDispatcher=e,this._ngZone=t,this._viewportRuler=a,this._config=n,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(e){if(this._overlayRef)throw Ii();this._overlayRef=e}enable(){if(this._scrollSubscription)return;const e=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{const e=this._viewportRuler.getViewportScrollPosition().top;Math.abs(e-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class Ti{enable(){}disable(){}attach(){}}function Ei(e,t){return t.some(t=>e.bottom<t.top||e.top>t.bottom||e.right<t.left||e.left>t.right)}function Fi(e,t){return t.some(t=>e.top<t.top||e.bottom>t.bottom||e.left<t.left||e.right>t.right)}class Ai{constructor(e,t,a,n){this._scrollDispatcher=e,this._viewportRuler=t,this._ngZone=a,this._config=n,this._scrollSubscription=null}attach(e){if(this._overlayRef)throw Ii();this._overlayRef=e}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const e=this._overlayRef.overlayElement.getBoundingClientRect(),{width:t,height:a}=this._viewportRuler.getViewportSize();Ei(e,[{width:t,height:a,bottom:a,right:t,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let Mi=(()=>{class e{constructor(e,t,a,n){this._scrollDispatcher=e,this._viewportRuler=t,this._ngZone=a,this.noop=()=>new Ti,this.close=e=>new Pi(this._scrollDispatcher,this._ngZone,this._viewportRuler,e),this.block=()=>new Oi(this._viewportRuler,this._document),this.reposition=e=>new Ai(this._scrollDispatcher,this._viewportRuler,this._ngZone,e),this._document=n}}return e.\u0275fac=function(t){return new(t||e)(r.hc(gi),r.hc(fi),r.hc(r.E),r.hc(k.d))},e.\u0275prov=Object(r.Qb)({factory:function(){return new e(Object(r.hc)(gi),Object(r.hc)(fi),Object(r.hc)(r.E),Object(r.hc)(k.d))},token:e,providedIn:"root"}),e})();class Di{constructor(e){if(this.scrollStrategy=new Ti,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,e){const t=Object.keys(e);for(const a of t)void 0!==e[a]&&(this[a]=e[a])}}}class ji{constructor(e,t,a,n,i){this.offsetX=a,this.offsetY=n,this.panelClass=i,this.originX=e.originX,this.originY=e.originY,this.overlayX=t.overlayX,this.overlayY=t.overlayY}}class Li{constructor(e,t){this.connectionPair=e,this.scrollableViewProperties=t}}function Zi(e,t){if("top"!==t&&"bottom"!==t&&"center"!==t)throw Error(`ConnectedPosition: Invalid ${e} "${t}". Expected "top", "bottom" or "center".`)}function Ri(e,t){if("start"!==t&&"end"!==t&&"center"!==t)throw Error(`ConnectedPosition: Invalid ${e} "${t}". Expected "start", "end" or "center".`)}let zi=(()=>{class e{constructor(e){this._attachedOverlays=[],this._keydownListener=e=>{const t=this._attachedOverlays;for(let a=t.length-1;a>-1;a--)if(t[a]._keydownEvents.observers.length>0){t[a]._keydownEvents.next(e);break}},this._document=e}ngOnDestroy(){this._detach()}add(e){this.remove(e),this._isAttached||(this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0),this._attachedOverlays.push(e)}remove(e){const t=this._attachedOverlays.indexOf(e);t>-1&&this._attachedOverlays.splice(t,1),0===this._attachedOverlays.length&&this._detach()}_detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return e.\u0275fac=function(t){return new(t||e)(r.hc(k.d))},e.\u0275prov=Object(r.Qb)({factory:function(){return new e(Object(r.hc)(k.d))},token:e,providedIn:"root"}),e})();const Bi=!("undefined"==typeof window||!window||!window.__karma__&&!window.jasmine);let Ui=(()=>{class e{constructor(e,t){this._platform=t,this._document=e}ngOnDestroy(){const e=this._containerElement;e&&e.parentNode&&e.parentNode.removeChild(e)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const e=this._platform?this._platform.isBrowser:"undefined"!=typeof window;if(e||Bi){const e=this._document.querySelectorAll('.cdk-overlay-container[platform="server"], .cdk-overlay-container[platform="test"]');for(let t=0;t<e.length;t++)e[t].parentNode.removeChild(e[t])}const t=this._document.createElement("div");t.classList.add("cdk-overlay-container"),Bi?t.setAttribute("platform","test"):e||t.setAttribute("platform","server"),this._document.body.appendChild(t),this._containerElement=t}}return e.\u0275fac=function(t){return new(t||e)(r.hc(k.d),r.hc(ui.a))},e.\u0275prov=Object(r.Qb)({factory:function(){return new e(Object(r.hc)(k.d),Object(r.hc)(ui.a))},token:e,providedIn:"root"}),e})();class Ni{constructor(e,t,a,n,i,r,s,o){this._portalOutlet=e,this._host=t,this._pane=a,this._config=n,this._ngZone=i,this._keyboardDispatcher=r,this._document=s,this._location=o,this._backdropElement=null,this._backdropClick=new we.a,this._attachments=new we.a,this._detachments=new we.a,this._locationChanges=p.a.EMPTY,this._backdropClickHandler=e=>this._backdropClick.next(e),this._keydownEvents=new we.a,n.scrollStrategy&&(this._scrollStrategy=n.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=n.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(e){let t=this._portalOutlet.attach(e);return!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host),this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.asObservable().pipe(Object(ki.a)(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&this._location&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),t}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const e=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),e}dispose(){const e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this.detachBackdrop(),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._host&&this._host.parentNode&&(this._host.parentNode.removeChild(this._host),this._host=null),this._previousHostParent=this._pane=null,e&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick.asObservable()}attachments(){return this._attachments.asObservable()}detachments(){return this._detachments.asObservable()}keydownEvents(){return this._keydownEvents.asObservable()}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config=Object.assign(Object.assign({},this._config),e),this._updateElementSize()}setDirection(e){this._config=Object.assign(Object.assign({},this._config),{direction:e}),this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){const e=this._config.direction;return e?"string"==typeof e?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const e=this._pane.style;e.width=Object(Kn.c)(this._config.width),e.height=Object(Kn.c)(this._config.height),e.minWidth=Object(Kn.c)(this._config.minWidth),e.minHeight=Object(Kn.c)(this._config.minHeight),e.maxWidth=Object(Kn.c)(this._config.maxWidth),e.maxHeight=Object(Kn.c)(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"auto":"none"}_attachBackdrop(){this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),"undefined"!=typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add("cdk-overlay-backdrop-showing")})}):this._backdropElement.classList.add("cdk-overlay-backdrop-showing")}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){let e,t=this._backdropElement;if(!t)return;let a=()=>{t&&(t.removeEventListener("click",this._backdropClickHandler),t.removeEventListener("transitionend",a),t.parentNode&&t.parentNode.removeChild(t)),this._backdropElement==t&&(this._backdropElement=null),this._config.backdropClass&&this._toggleClasses(t,this._config.backdropClass,!1),clearTimeout(e)};t.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{t.addEventListener("transitionend",a)}),t.style.pointerEvents="none",e=this._ngZone.runOutsideAngular(()=>setTimeout(a,500))}_toggleClasses(e,t,a){const n=e.classList;Object(Kn.a)(t).forEach(e=>{e&&(a?n.add(e):n.remove(e))})}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const e=this._ngZone.onStable.asObservable().pipe(Object(hi.a)(Object(ni.a)(this._attachments,this._detachments))).subscribe(()=>{this._pane&&this._host&&0!==this._pane.children.length||(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._previousHostParent.removeChild(this._host)),e.unsubscribe())})})}_disposeScrollStrategy(){const e=this._scrollStrategy;e&&(e.disable(),e.detach&&e.detach())}}const Vi=/([A-Za-z%]+)$/;class Wi{constructor(e,t,a,n,i){this._viewportRuler=t,this._document=a,this._platform=n,this._overlayContainer=i,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new we.a,this._resizeSubscription=p.a.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges.asObservable(),this.setOrigin(e)}get positions(){return this._preferredPositions}attach(e){if(this._overlayRef&&e!==this._overlayRef)throw Error("This position strategy is already attached to an overlay");this._validatePositions(),e.hostElement.classList.add("cdk-overlay-connected-position-bounding-box"),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect();const e=this._originRect,t=this._overlayRect,a=this._viewportRect,n=[];let i;for(let r of this._preferredPositions){let s=this._getOriginPoint(e,r),o=this._getOverlayPoint(s,t,r),c=this._getOverlayFit(o,t,a,r);if(c.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(r,s);this._canFitWithFlexibleDimensions(c,o,a)?n.push({position:r,origin:s,overlayRect:t,boundingBoxRect:this._calculateBoundingBoxRect(s,r)}):(!i||i.overlayFit.visibleArea<c.visibleArea)&&(i={overlayFit:c,overlayPoint:o,originPoint:s,position:r,overlayRect:t})}if(n.length){let e=null,t=-1;for(const a of n){const n=a.boundingBoxRect.width*a.boundingBoxRect.height*(a.position.weight||1);n>t&&(t=n,e=a)}return this._isPushed=!1,void this._applyPosition(e.position,e.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(i.position,i.originPoint);this._applyPosition(i.position,i.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&Gi(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove("cdk-overlay-connected-position-bounding-box"),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(!this._isDisposed&&(!this._platform||this._platform.isBrowser)){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect();const e=this._lastPosition||this._preferredPositions[0],t=this._getOriginPoint(this._originRect,e);this._applyPosition(e,t)}}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,-1===e.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,t){let a,n;if("center"==t.originX)a=e.left+e.width/2;else{const n=this._isRtl()?e.right:e.left,i=this._isRtl()?e.left:e.right;a="start"==t.originX?n:i}return n="center"==t.originY?e.top+e.height/2:"top"==t.originY?e.top:e.bottom,{x:a,y:n}}_getOverlayPoint(e,t,a){let n,i;return n="center"==a.overlayX?-t.width/2:"start"===a.overlayX?this._isRtl()?-t.width:0:this._isRtl()?0:-t.width,i="center"==a.overlayY?-t.height/2:"top"==a.overlayY?0:-t.height,{x:e.x+n,y:e.y+i}}_getOverlayFit(e,t,a,n){let{x:i,y:r}=e,s=this._getOffset(n,"x"),o=this._getOffset(n,"y");s&&(i+=s),o&&(r+=o);let c=0-r,l=r+t.height-a.height,d=this._subtractOverflows(t.width,0-i,i+t.width-a.width),p=this._subtractOverflows(t.height,c,l),h=d*p;return{visibleArea:h,isCompletelyWithinViewport:t.width*t.height===h,fitsInViewportVertically:p===t.height,fitsInViewportHorizontally:d==t.width}}_canFitWithFlexibleDimensions(e,t,a){if(this._hasFlexibleDimensions){const n=a.bottom-t.y,i=a.right-t.x,r=Qi(this._overlayRef.getConfig().minHeight),s=Qi(this._overlayRef.getConfig().minWidth),o=e.fitsInViewportHorizontally||null!=s&&s<=i;return(e.fitsInViewportVertically||null!=r&&r<=n)&&o}return!1}_pushOverlayOnScreen(e,t,a){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};const n=this._viewportRect,i=Math.max(e.x+t.width-n.right,0),r=Math.max(e.y+t.height-n.bottom,0),s=Math.max(n.top-a.top-e.y,0),o=Math.max(n.left-a.left-e.x,0);let c=0,l=0;return c=t.width<=n.width?o||-i:e.x<this._viewportMargin?n.left-a.left-e.x:0,l=t.height<=n.height?s||-r:e.y<this._viewportMargin?n.top-a.top-e.y:0,this._previousPushAmount={x:c,y:l},{x:e.x+c,y:e.y+l}}_applyPosition(e,t){if(this._setTransformOrigin(e),this._setOverlayElementStyles(t,e),this._setBoundingBoxStyles(t,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._lastPosition=e,this._positionChanges.observers.length){const t=this._getScrollVisibility(),a=new Li(e,t);this._positionChanges.next(a)}this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;const t=this._boundingBox.querySelectorAll(this._transformOriginSelector);let a,n=e.overlayY;a="center"===e.overlayX?"center":this._isRtl()?"start"===e.overlayX?"right":"left":"start"===e.overlayX?"left":"right";for(let i=0;i<t.length;i++)t[i].style.transformOrigin=`${a} ${n}`}_calculateBoundingBoxRect(e,t){const a=this._viewportRect,n=this._isRtl();let i,r,s,o,c,l;if("top"===t.overlayY)r=e.y,i=a.height-r+this._viewportMargin;else if("bottom"===t.overlayY)s=a.height-e.y+2*this._viewportMargin,i=a.height-s+this._viewportMargin;else{const t=Math.min(a.bottom-e.y+a.top,e.y),n=this._lastBoundingBoxSize.height;i=2*t,r=e.y-t,i>n&&!this._isInitialRender&&!this._growAfterOpen&&(r=e.y-n/2)}if("end"===t.overlayX&&!n||"start"===t.overlayX&&n)l=a.width-e.x+this._viewportMargin,o=e.x-this._viewportMargin;else if("start"===t.overlayX&&!n||"end"===t.overlayX&&n)c=e.x,o=a.right-e.x;else{const t=Math.min(a.right-e.x+a.left,e.x),n=this._lastBoundingBoxSize.width;o=2*t,c=e.x-t,o>n&&!this._isInitialRender&&!this._growAfterOpen&&(c=e.x-n/2)}return{top:r,left:c,bottom:s,right:l,width:o,height:i}}_setBoundingBoxStyles(e,t){const a=this._calculateBoundingBoxRect(e,t);this._isInitialRender||this._growAfterOpen||(a.height=Math.min(a.height,this._lastBoundingBoxSize.height),a.width=Math.min(a.width,this._lastBoundingBoxSize.width));const n={};if(this._hasExactPosition())n.top=n.left="0",n.bottom=n.right=n.maxHeight=n.maxWidth="",n.width=n.height="100%";else{const e=this._overlayRef.getConfig().maxHeight,i=this._overlayRef.getConfig().maxWidth;n.height=Object(Kn.c)(a.height),n.top=Object(Kn.c)(a.top),n.bottom=Object(Kn.c)(a.bottom),n.width=Object(Kn.c)(a.width),n.left=Object(Kn.c)(a.left),n.right=Object(Kn.c)(a.right),n.alignItems="center"===t.overlayX?"center":"end"===t.overlayX?"flex-end":"flex-start",n.justifyContent="center"===t.overlayY?"center":"bottom"===t.overlayY?"flex-end":"flex-start",e&&(n.maxHeight=Object(Kn.c)(e)),i&&(n.maxWidth=Object(Kn.c)(i))}this._lastBoundingBoxSize=a,Gi(this._boundingBox.style,n)}_resetBoundingBoxStyles(){Gi(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){Gi(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,t){const a={},n=this._hasExactPosition(),i=this._hasFlexibleDimensions,r=this._overlayRef.getConfig();if(n){const n=this._viewportRuler.getViewportScrollPosition();Gi(a,this._getExactOverlayY(t,e,n)),Gi(a,this._getExactOverlayX(t,e,n))}else a.position="static";let s="",o=this._getOffset(t,"x"),c=this._getOffset(t,"y");o&&(s+=`translateX(${o}px) `),c&&(s+=`translateY(${c}px)`),a.transform=s.trim(),r.maxHeight&&(n?a.maxHeight=Object(Kn.c)(r.maxHeight):i&&(a.maxHeight="")),r.maxWidth&&(n?a.maxWidth=Object(Kn.c)(r.maxWidth):i&&(a.maxWidth="")),Gi(this._pane.style,a)}_getExactOverlayY(e,t,a){let n={top:"",bottom:""},i=this._getOverlayPoint(t,this._overlayRect,e);this._isPushed&&(i=this._pushOverlayOnScreen(i,this._overlayRect,a));let r=this._overlayContainer.getContainerElement().getBoundingClientRect().top;return i.y-=r,"bottom"===e.overlayY?n.bottom=this._document.documentElement.clientHeight-(i.y+this._overlayRect.height)+"px":n.top=Object(Kn.c)(i.y),n}_getExactOverlayX(e,t,a){let n,i={left:"",right:""},r=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(r=this._pushOverlayOnScreen(r,this._overlayRect,a)),n=this._isRtl()?"end"===e.overlayX?"left":"right":"end"===e.overlayX?"right":"left","right"===n?i.right=this._document.documentElement.clientWidth-(r.x+this._overlayRect.width)+"px":i.left=Object(Kn.c)(r.x),i}_getScrollVisibility(){const e=this._getOriginRect(),t=this._pane.getBoundingClientRect(),a=this._scrollables.map(e=>e.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:Fi(e,a),isOriginOutsideView:Ei(e,a),isOverlayClipped:Fi(t,a),isOverlayOutsideView:Ei(t,a)}}_subtractOverflows(e,...t){return t.reduce((e,t)=>e-Math.max(t,0),e)}_getNarrowedViewportRect(){const e=this._document.documentElement.clientWidth,t=this._document.documentElement.clientHeight,a=this._viewportRuler.getViewportScrollPosition();return{top:a.top+this._viewportMargin,left:a.left+this._viewportMargin,right:a.left+e-this._viewportMargin,bottom:a.top+t-this._viewportMargin,width:e-2*this._viewportMargin,height:t-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,t){return"x"===t?null==e.offsetX?this._offsetX:e.offsetX:null==e.offsetY?this._offsetY:e.offsetY}_validatePositions(){if(!this._preferredPositions.length)throw Error("FlexibleConnectedPositionStrategy: At least one position is required.");this._preferredPositions.forEach(e=>{Ri("originX",e.originX),Zi("originY",e.originY),Ri("overlayX",e.overlayX),Zi("overlayY",e.overlayY)})}_addPanelClasses(e){this._pane&&Object(Kn.a)(e).forEach(e=>{""!==e&&-1===this._appliedPanelClasses.indexOf(e)&&(this._appliedPanelClasses.push(e),this._pane.classList.add(e))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){const e=this._origin;if(e instanceof r.m)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();const t=e.width||0,a=e.height||0;return{top:e.y,bottom:e.y+a,left:e.x,right:e.x+t,height:a,width:t}}}function Gi(e,t){for(let a in t)t.hasOwnProperty(a)&&(e[a]=t[a]);return e}function Qi(e){if("number"!=typeof e&&null!=e){const[t,a]=e.split(Vi);return a&&"px"!==a?null:parseFloat(t)}return e||null}class $i{constructor(e,t,a,n,i,r,s){this._preferredPositions=[],this._positionStrategy=new Wi(a,n,i,r,s).withFlexibleDimensions(!1).withPush(!1).withViewportMargin(0),this.withFallbackPosition(e,t)}get _isRtl(){return"rtl"===this._overlayRef.getDirection()}get onPositionChange(){return this._positionStrategy.positionChanges}get positions(){return this._preferredPositions}attach(e){this._overlayRef=e,this._positionStrategy.attach(e),this._direction&&(e.setDirection(this._direction),this._direction=null)}dispose(){this._positionStrategy.dispose()}detach(){this._positionStrategy.detach()}apply(){this._positionStrategy.apply()}recalculateLastPosition(){this._positionStrategy.reapplyLastPosition()}withScrollableContainers(e){this._positionStrategy.withScrollableContainers(e)}withFallbackPosition(e,t,a,n){const i=new ji(e,t,a,n);return this._preferredPositions.push(i),this._positionStrategy.withPositions(this._preferredPositions),this}withDirection(e){return this._overlayRef?this._overlayRef.setDirection(e):this._direction=e,this}withOffsetX(e){return this._positionStrategy.withDefaultOffsetX(e),this}withOffsetY(e){return this._positionStrategy.withDefaultOffsetY(e),this}withLockedPosition(e){return this._positionStrategy.withLockedPosition(e),this}withPositions(e){return this._preferredPositions=e.slice(),this._positionStrategy.withPositions(this._preferredPositions),this}setOrigin(e){return this._positionStrategy.setOrigin(e),this}}class qi{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._leftOffset="",this._rightOffset="",this._alignItems="",this._justifyContent="",this._width="",this._height=""}attach(e){const t=e.getConfig();this._overlayRef=e,this._width&&!t.width&&e.updateSize({width:this._width}),this._height&&!t.height&&e.updateSize({height:this._height}),e.hostElement.classList.add("cdk-global-overlay-wrapper"),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._rightOffset="",this._leftOffset=e,this._justifyContent="flex-start",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._leftOffset="",this._rightOffset=e,this._justifyContent="flex-end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._justifyContent="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement.style,a=this._overlayRef.getConfig(),{width:n,height:i,maxWidth:r,maxHeight:s}=a,o=!("100%"!==n&&"100vw"!==n||r&&"100%"!==r&&"100vw"!==r),c=!("100%"!==i&&"100vh"!==i||s&&"100%"!==s&&"100vh"!==s);e.position=this._cssPosition,e.marginLeft=o?"0":this._leftOffset,e.marginTop=c?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=this._rightOffset,o?t.justifyContent="flex-start":"center"===this._justifyContent?t.justifyContent="center":"rtl"===this._overlayRef.getConfig().direction?"flex-start"===this._justifyContent?t.justifyContent="flex-end":"flex-end"===this._justifyContent&&(t.justifyContent="flex-start"):t.justifyContent=this._justifyContent,t.alignItems=c?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement,a=t.style;t.classList.remove("cdk-global-overlay-wrapper"),a.justifyContent=a.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}}let Yi=(()=>{class e{constructor(e,t,a,n){this._viewportRuler=e,this._document=t,this._platform=a,this._overlayContainer=n}global(){return new qi}connectedTo(e,t,a){return new $i(t,a,e,this._viewportRuler,this._document,this._platform,this._overlayContainer)}flexibleConnectedTo(e){return new Wi(e,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return e.\u0275fac=function(t){return new(t||e)(r.hc(fi),r.hc(k.d),r.hc(ui.a),r.hc(Ui))},e.\u0275prov=Object(r.Qb)({factory:function(){return new e(Object(r.hc)(fi),Object(r.hc)(k.d),Object(r.hc)(ui.a),Object(r.hc)(Ui))},token:e,providedIn:"root"}),e})(),Xi=0,Ji=(()=>{class e{constructor(e,t,a,n,i,r,s,o,c,l){this.scrollStrategies=e,this._overlayContainer=t,this._componentFactoryResolver=a,this._positionBuilder=n,this._keyboardDispatcher=i,this._injector=r,this._ngZone=s,this._document=o,this._directionality=c,this._location=l}create(e){const t=this._createHostElement(),a=this._createPaneElement(t),n=this._createPortalOutlet(a),i=new Di(e);return i.direction=i.direction||this._directionality.value,new Ni(n,t,a,i,this._ngZone,this._keyboardDispatcher,this._document,this._location)}position(){return this._positionBuilder}_createPaneElement(e){const t=this._document.createElement("div");return t.id="cdk-overlay-"+Xi++,t.classList.add("cdk-overlay-pane"),e.appendChild(t),t}_createHostElement(){const e=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(e),e}_createPortalOutlet(e){return this._appRef||(this._appRef=this._injector.get(r.g)),new Hi(e,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return e.\u0275fac=function(t){return new(t||e)(r.hc(Mi),r.hc(Ui),r.hc(r.j),r.hc(Yi),r.hc(zi),r.hc(r.u),r.hc(r.E),r.hc(k.d),r.hc(bi.b),r.hc(k.i,8))},e.\u0275prov=r.Qb({token:e,factory:e.\u0275fac}),e})();const Ki={provide:new r.t("cdk-connected-overlay-scroll-strategy"),deps:[Ji],useFactory:function(e){return()=>e.scrollStrategies.reposition()}};let er=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.Sb({type:e}),e.\u0275inj=r.Rb({providers:[Ji,Ki],imports:[[bi.a,Si,mi],mi]}),e})(),tr=(()=>{class e extends Ui{constructor(e,t){super(e,t)}ngOnDestroy(){super.ngOnDestroy(),this._fullScreenEventName&&this._fullScreenListener&&this._document.removeEventListener(this._fullScreenEventName,this._fullScreenListener)}_createContainer(){super._createContainer(),this._adjustParentForFullscreenChange(),this._addFullscreenChangeListener(()=>this._adjustParentForFullscreenChange())}_adjustParentForFullscreenChange(){this._containerElement&&(this.getFullscreenElement()||this._document.body).appendChild(this._containerElement)}_addFullscreenChangeListener(e){const t=this._getEventName();t&&(this._fullScreenListener&&this._document.removeEventListener(t,this._fullScreenListener),this._document.addEventListener(t,e),this._fullScreenListener=e)}_getEventName(){if(!this._fullScreenEventName){const e=this._document;e.fullscreenEnabled?this._fullScreenEventName="fullscreenchange":e.webkitFullscreenEnabled?this._fullScreenEventName="webkitfullscreenchange":e.mozFullScreenEnabled?this._fullScreenEventName="mozfullscreenchange":e.msFullscreenEnabled&&(this._fullScreenEventName="MSFullscreenChange")}return this._fullScreenEventName}getFullscreenElement(){const e=this._document;return e.fullscreenElement||e.webkitFullscreenElement||e.mozFullScreenElement||e.msFullscreenElement||null}}return e.\u0275fac=function(t){return new(t||e)(r.hc(k.d),r.hc(ui.a))},e.\u0275prov=Object(r.Qb)({factory:function(){return new e(Object(r.hc)(k.d),Object(r.hc)(ui.a))},token:e,providedIn:"root"}),e})();var ar=a("SxV6"),nr=a("u47x");const ir=["menu"],rr=["li"];function sr(e,t){}const or=function(e){return{$implicit:e}};function cr(e,t){if(1&e){const e=r.bc();r.ac(0,"a",7),r.kc("click",function(t){r.Ic(e);const a=r.oc().$implicit;return r.oc().onMenuItemSelect(a,t)})("mouseenter",function(t){r.Ic(e);const a=r.oc().$implicit;return r.oc().onOpenSubMenu(a,t)}),r.Oc(1,sr,0,0,"ng-template",8),r.Zb()}if(2&e){const e=r.oc().$implicit,t=r.oc();r.Mb("dropdown-item",t.useBootstrap4)("active",e.isActive&&t.isMenuItemEnabled(e))("disabled",t.useBootstrap4&&!t.isMenuItemEnabled(e))("hasSubMenu",!!e.subMenu),r.Hb(1),r.uc("ngTemplateOutlet",e.template)("ngTemplateOutletContext",r.yc(10,or,t.item))}}function lr(e,t){}function dr(e,t){if(1&e){const e=r.bc();r.ac(0,"span",9),r.kc("click",function(t){return r.Ic(e),r.oc(2).stopEvent(t)})("contextmenu",function(t){return r.Ic(e),r.oc(2).stopEvent(t)}),r.Oc(1,lr,0,0,"ng-template",8),r.Zb()}if(2&e){const e=r.oc().$implicit,t=r.oc();r.Mb("dropdown-item",t.useBootstrap4)("disabled",t.useBootstrap4&&!t.isMenuItemEnabled(e)),r.Hb(1),r.uc("ngTemplateOutlet",e.template)("ngTemplateOutletContext",r.yc(6,or,t.item))}}function pr(e,t){if(1&e&&(r.ac(0,"li",null,4),r.Oc(2,cr,2,12,"a",5),r.Oc(3,dr,2,8,"span",6),r.Zb()),2&e){const e=t.$implicit,a=r.oc();r.Mb("disabled",!a.isMenuItemEnabled(e))("divider",e.divider)("dropdown-divider",a.useBootstrap4&&e.divider)("active",e.isActive&&a.isMenuItemEnabled(e)),r.Ib("role",e.divider?"separator":void 0),r.Hb(2),r.uc("ngIf",!e.divider&&!e.passive),r.Hb(1),r.uc("ngIf",!e.divider&&e.passive)}}let hr=(()=>{class e{constructor(e,t){this.template=e,this.elementRef=t,this.divider=!1,this.enabled=!0,this.passive=!1,this.visible=!0,this.execute=new r.o,this.isActive=!1}get disabled(){return this.passive||this.divider||!this.evaluateIfFunction(this.enabled,this.currentItem)}evaluateIfFunction(e,t){return e instanceof Function?e(t):e}setActiveStyles(){this.isActive=!0}setInactiveStyles(){this.isActive=!1}triggerExecute(e,t){this.evaluateIfFunction(this.enabled,e)&&this.execute.emit({event:t,item:e})}}return e.\u0275fac=function(t){return new(t||e)(r.Ub(r.R),r.Ub(r.m))},e.\u0275dir=r.Pb({type:e,selectors:[["","contextMenuItem",""]],inputs:{divider:"divider",enabled:"enabled",passive:"passive",visible:"visible",subMenu:"subMenu"},outputs:{execute:"execute"}}),e})();const ur=new r.t("CONTEXT_MENU_OPTIONS");let br=(()=>{class e{constructor(e,t,a){this.changeDetector=e,this.elementRef=t,this.options=a,this.menuItems=[],this.isLeaf=!1,this.execute=new r.o,this.openSubMenu=new r.o,this.closeLeafMenu=new r.o,this.closeAllMenus=new r.o,this.autoFocus=!1,this.useBootstrap4=!1,this.subscription=new p.a,a&&(this.autoFocus=a.autoFocus,this.useBootstrap4=a.useBootstrap4)}ngOnInit(){this.menuItems.forEach(e=>{e.currentItem=this.item,this.subscription.add(e.execute.subscribe(t=>this.execute.emit(Object.assign({},t,{menuItem:e}))))});const e=new r.I;e.reset(this.menuItems),this._keyManager=new nr.a(e).withWrap()}ngAfterViewInit(){this.autoFocus&&setTimeout(()=>this.focus()),this.overlay.updatePosition()}ngOnDestroy(){this.subscription.unsubscribe()}focus(){this.autoFocus&&this.menuElement.nativeElement.focus()}stopEvent(e){e.stopPropagation()}isMenuItemEnabled(e){return this.evaluateIfFunction(e&&e.enabled)}isMenuItemVisible(e){return this.evaluateIfFunction(e&&e.visible)}evaluateIfFunction(e){return e instanceof Function?e(this.item):e}isDisabled(e){return e.enabled&&!e.enabled(this.item)}onKeyEvent(e){this.isLeaf&&this._keyManager.onKeydown(e)}keyboardOpenSubMenu(e){if(!this.isLeaf)return;this.cancelEvent(e);const t=this.menuItems[this._keyManager.activeItemIndex];t&&this.onOpenSubMenu(t)}keyboardMenuItemSelect(e){if(!this.isLeaf)return;this.cancelEvent(e);const t=this.menuItems[this._keyManager.activeItemIndex];t&&this.onMenuItemSelect(t,e)}onCloseLeafMenu(e){this.isLeaf&&(this.cancelEvent(e),this.closeLeafMenu.emit({exceptRootMenu:37===e.keyCode,event:e}))}closeMenu(e){"click"===e.type&&2===e.button||this.closeAllMenus.emit({event:e})}onOpenSubMenu(e,t){const a=this.menuItemElements.toArray()[this._keyManager.activeItemIndex];this.openSubMenu.emit({anchorElement:a&&a.nativeElement,contextMenu:e.subMenu,event:t,item:this.item,parentContextMenu:this})}onMenuItemSelect(e,t){t.preventDefault(),t.stopPropagation(),this.onOpenSubMenu(e,t),e.subMenu||e.triggerExecute(this.item,t)}cancelEvent(e){if(!e)return;const t=e.target;["INPUT","TEXTAREA","SELECT"].indexOf(t.tagName)>-1||t.isContentEditable||(e.preventDefault(),e.stopPropagation())}}return e.\u0275fac=function(t){return new(t||e)(r.Ub(r.h),r.Ub(r.m),r.Ub(ur,8))},e.\u0275cmp=r.Ob({type:e,selectors:[["context-menu-content"]],viewQuery:function(e,t){if(1&e&&(r.Wc(ir,3),r.Wc(rr,1)),2&e){let e;r.Dc(e=r.lc())&&(t.menuElement=e.first),r.Dc(e=r.lc())&&(t.menuItemElements=e)}},hostBindings:function(e,t){1&e&&r.kc("keydown.ArrowDown",function(e){return t.onKeyEvent(e)},!1,r.Hc)("keydown.ArrowUp",function(e){return t.onKeyEvent(e)},!1,r.Hc)("keydown.ArrowRight",function(e){return t.keyboardOpenSubMenu(e)},!1,r.Hc)("keydown.Enter",function(e){return t.keyboardMenuItemSelect(e)},!1,r.Hc)("keydown.Space",function(e){return t.keyboardMenuItemSelect(e)},!1,r.Hc)("keydown.Escape",function(e){return t.onCloseLeafMenu(e)},!1,r.Hc)("keydown.ArrowLeft",function(e){return t.onCloseLeafMenu(e)},!1,r.Hc)("click",function(e){return t.closeMenu(e)},!1,r.Gc)("contextmenu",function(e){return t.closeMenu(e)},!1,r.Gc)},inputs:{menuItems:"menuItems",isLeaf:"isLeaf",item:"item",event:"event",parentContextMenu:"parentContextMenu",menuClass:"menuClass",overlay:"overlay"},outputs:{execute:"execute",openSubMenu:"openSubMenu",closeLeafMenu:"closeLeafMenu",closeAllMenus:"closeAllMenus"},decls:4,vars:2,consts:[["tabindex","0",1,"dropdown","open","show","ngx-contextmenu",3,"ngClass"],["tabindex","0",1,"dropdown-menu","show",2,"position","static","float","none"],["menu",""],[3,"disabled","divider","dropdown-divider","active",4,"ngFor","ngForOf"],["li",""],["href","",3,"dropdown-item","active","disabled","hasSubMenu","click","mouseenter",4,"ngIf"],["class","passive",3,"dropdown-item","disabled","click","contextmenu",4,"ngIf"],["href","",3,"click","mouseenter"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"passive",3,"click","contextmenu"]],template:function(e,t){1&e&&(r.ac(0,"div",0),r.ac(1,"ul",1,2),r.Oc(3,pr,4,11,"li",3),r.Zb(),r.Zb()),2&e&&(r.uc("ngClass",t.menuClass),r.Hb(3),r.uc("ngForOf",t.menuItems))},directives:[k.k,k.l,k.m,k.o],styles:[".passive[_ngcontent-%COMP%] {\n        display: block;\n        padding: 3px 20px;\n        clear: both;\n        font-weight: normal;\n        line-height: @line-height-base;\n        white-space: nowrap;\n      }\n      .hasSubMenu[_ngcontent-%COMP%]:before {\n        content: '\u25b6';\n        float: right;\n      }"]}),e})(),gr=(()=>{class e{constructor(e,t){this.overlay=e,this.scrollStrategy=t,this.isDestroyingLeafMenu=!1,this.show=new we.a,this.triggerClose=new we.a,this.close=new we.a,this.overlays=[],this.fakeElement={getBoundingClientRect:()=>({bottom:0,height:0,left:0,right:0,top:0,width:0})}}openContextMenu(e){const{anchorElement:t,event:a,parentContextMenu:n}=e;if(n){const i=this.overlay.position().connectedTo(new r.m(a?a.target:t),{originX:"end",originY:"top"},{overlayX:"start",overlayY:"top"}).withFallbackPosition({originX:"start",originY:"top"},{overlayX:"end",overlayY:"top"}).withFallbackPosition({originX:"end",originY:"bottom"},{overlayX:"start",overlayY:"bottom"}).withFallbackPosition({originX:"start",originY:"bottom"},{overlayX:"end",overlayY:"bottom"}),s=this.overlay.create({positionStrategy:i,panelClass:"ngx-contextmenu",scrollStrategy:this.scrollStrategy.close()});this.destroySubMenus(n),this.overlays=this.overlays.concat(s),this.attachContextMenu(s,e)}else{const n=a;this.fakeElement.getBoundingClientRect=()=>({bottom:n.clientY,height:0,left:n.clientX,right:n.clientX,top:n.clientY,width:0}),this.closeAllContextMenus({eventType:"cancel",event:a});const i=this.overlay.position().connectedTo(new r.m(t||this.fakeElement),{originX:"start",originY:"bottom"},{overlayX:"start",overlayY:"top"}).withFallbackPosition({originX:"start",originY:"top"},{overlayX:"start",overlayY:"bottom"}).withFallbackPosition({originX:"end",originY:"top"},{overlayX:"start",overlayY:"top"}).withFallbackPosition({originX:"start",originY:"top"},{overlayX:"end",overlayY:"top"}).withFallbackPosition({originX:"end",originY:"center"},{overlayX:"start",overlayY:"center"}).withFallbackPosition({originX:"start",originY:"center"},{overlayX:"end",overlayY:"center"});this.overlays=[this.overlay.create({positionStrategy:i,panelClass:"ngx-contextmenu",scrollStrategy:this.scrollStrategy.close()})],this.attachContextMenu(this.overlays[0],e)}}attachContextMenu(e,t){const{event:a,item:n,menuItems:i,menuClass:r}=t,s=e.attach(new _i(br));s.instance.event=a,s.instance.item=n,s.instance.menuItems=i,s.instance.overlay=e,s.instance.isLeaf=!0,s.instance.menuClass=r,e.contextMenu=s.instance;const o=new p.a;o.add(s.instance.execute.asObservable().subscribe(e=>this.closeAllContextMenus(Object.assign({eventType:"execute"},e)))),o.add(s.instance.closeAllMenus.asObservable().subscribe(e=>this.closeAllContextMenus(Object.assign({eventType:"cancel"},e)))),o.add(s.instance.closeLeafMenu.asObservable().subscribe(e=>this.destroyLeafMenu(e))),o.add(s.instance.openSubMenu.asObservable().subscribe(e=>{this.destroySubMenus(s.instance),e.contextMenu?(s.instance.isLeaf=!1,this.show.next(e)):s.instance.isLeaf=!0})),s.onDestroy(()=>{i.forEach(e=>e.isActive=!1),o.unsubscribe()}),s.changeDetectorRef.detectChanges()}closeAllContextMenus(e){this.overlays&&(this.close.next(e),this.overlays.forEach((e,t)=>{e.detach(),e.dispose()})),this.overlays=[]}getLastAttachedOverlay(){let e=this.overlays[this.overlays.length-1];for(;this.overlays.length>1&&e&&!e.hasAttached();)e.detach(),e.dispose(),this.overlays=this.overlays.slice(0,-1),e=this.overlays[this.overlays.length-1];return e}destroyLeafMenu({exceptRootMenu:e,event:t}={}){this.isDestroyingLeafMenu||(this.isDestroyingLeafMenu=!0,setTimeout(()=>{const a=this.getLastAttachedOverlay();this.overlays.length>1&&a&&(a.detach(),a.dispose()),!e&&this.overlays.length>0&&a&&(this.close.next({eventType:"cancel",event:t}),a.detach(),a.dispose());const n=this.getLastAttachedOverlay();n&&(n.contextMenu.isLeaf=!0),this.isDestroyingLeafMenu=!1}))}destroySubMenus(e){const t=this.overlays.indexOf(e.overlay);this.overlays.slice(t+1).forEach(e=>{e.detach(),e.dispose()})}isLeafMenu(e){const t=this.getLastAttachedOverlay();return e.overlay===t}}return e.\u0275fac=function(t){return new(t||e)(r.hc(Ji),r.hc(Mi))},e.\u0275prov=r.Qb({token:e,factory:e.\u0275fac}),e})(),fr=(()=>{class e{constructor(e,t,a,n){this._contextMenuService=e,this.changeDetector=t,this.elementRef=a,this.options=n,this.menuClass="",this.autoFocus=!1,this.useBootstrap4=!1,this.disabled=!1,this.close=new r.o,this.open=new r.o,this.visibleMenuItems=[],this.links=[],this.subscription=new p.a,n&&(this.autoFocus=n.autoFocus,this.useBootstrap4=n.useBootstrap4),this.subscription.add(e.show.subscribe(e=>{this.onMenuEvent(e)}))}ngOnDestroy(){this.subscription.unsubscribe()}onMenuEvent(e){if(this.disabled)return;const{contextMenu:t,event:a,item:n}=e;t&&t!==this||(this.event=a,this.item=n,this.setVisibleMenuItems(),this._contextMenuService.openContextMenu(Object.assign({},e,{menuItems:this.visibleMenuItems,menuClass:this.menuClass})),this._contextMenuService.close.asObservable().pipe(Object(ar.a)()).subscribe(e=>this.close.emit(e)),this.open.next(e))}isMenuItemVisible(e){return this.evaluateIfFunction(e.visible)}setVisibleMenuItems(){this.visibleMenuItems=this.menuItems.filter(e=>this.isMenuItemVisible(e))}evaluateIfFunction(e){return e instanceof Function?e(this.item):e}}return e.\u0275fac=function(t){return new(t||e)(r.Ub(gr),r.Ub(r.h),r.Ub(r.m),r.Ub(ur,8))},e.\u0275cmp=r.Ob({type:e,selectors:[["context-menu"]],contentQueries:function(e,t,a){if(1&e&&r.Nb(a,hr,0),2&e){let e;r.Dc(e=r.lc())&&(t.menuItems=e)}},viewQuery:function(e,t){if(1&e&&r.Wc(ir,1),2&e){let e;r.Dc(e=r.lc())&&(t.menuElement=e.first)}},inputs:{menuClass:"menuClass",autoFocus:"autoFocus",useBootstrap4:"useBootstrap4",disabled:"disabled"},outputs:{close:"close",open:"open"},decls:0,vars:0,template:function(e,t){},styles:["\n    .cdk-overlay-container {\n      position: fixed;\n      z-index: 1000;\n      pointer-events: none;\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: 100%;\n    }\n    .ngx-contextmenu.cdk-overlay-pane {\n      position: absolute;\n      pointer-events: auto;\n      box-sizing: border-box;\n    }\n  "],encapsulation:2}),e})(),vr=(()=>{class e{constructor(e){this.contextMenuService=e}onContextMenu(e){this.contextMenu.disabled||(this.contextMenuService.show.next({contextMenu:this.contextMenu,event:e,item:this.contextMenuSubject}),e.preventDefault(),e.stopPropagation())}}return e.\u0275fac=function(t){return new(t||e)(r.Ub(gr))},e.\u0275dir=r.Pb({type:e,selectors:[["","contextMenu",""]],hostBindings:function(e,t){1&e&&r.kc("contextmenu",function(e){return t.onContextMenu(e)})},inputs:{contextMenuSubject:"contextMenuSubject",contextMenu:"contextMenu"}}),e})(),mr=(()=>{class e{static forRoot(t){return{ngModule:e,providers:[gr,{provide:ur,useValue:t},{provide:Ui,useClass:tr}]}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.Sb({type:e}),e.\u0275inj=r.Rb({imports:[[k.c,er]]}),e})();function Cr(e,t){if(1&e){const e=r.bc();r.ac(0,"div",10),r.ac(1,"div",11),r.ac(2,"div",12),r.kc("click",function(){r.Ic(e);const a=t.$implicit;return r.oc().openFolder(a)}),r.nc(),r.ac(3,"svg",13),r.Vb(4,"path",14),r.Zb(),r.mc(),r.ac(5,"span",15),r.Qc(6),r.Zb(),r.Zb(),r.ac(7,"div",16),r.ac(8,"mat-icon",17),r.kc("click",function(){r.Ic(e);const a=t.$implicit;return r.oc().deleteFolder(a._id)}),r.Zb(),r.Zb(),r.Zb(),r.Zb()}if(2&e){const e=t.$implicit;r.Hb(5),r.vc("title",e.folder_name),r.Hb(1),r.Rc(e.folder_name)}}function wr(e,t){if(1&e&&(r.ac(0,"div",34),r.ac(1,"div"),r.Qc(2),r.Zb(),r.Zb()),2&e){const e=r.oc(2);r.Hb(2),r.Rc(e.modalErrorMessage)}}function _r(e,t){1&e&&r.Vb(0,"span",35)}function yr(e,t){1&e&&r.Vb(0,"span",35)}function xr(e,t){if(1&e){const e=r.bc();r.ac(0,"div",18),r.ac(1,"button",19),r.kc("click",function(){return t.$implicit.dismiss("Cross click")}),r.ac(2,"span",20),r.Qc(3,"\xd7"),r.Zb(),r.Zb(),r.ac(4,"div",21),r.Vb(5,"img",22),r.ac(6,"span",23),r.Qc(7,"Add Folder"),r.Zb(),r.Zb(),r.ac(8,"div",24),r.ac(9,"div",25),r.ac(10,"div",26),r.ac(11,"label",27),r.Qc(12,"Folder Name"),r.Zb(),r.ac(13,"input",28),r.kc("ngModelChange",function(t){return r.Ic(e),r.oc().folderName=t})("keyup.enter",function(t){return r.Ic(e),r.oc().addNewFolder(t)}),r.Zb(),r.Oc(14,wr,3,1,"div",29),r.Zb(),r.ac(15,"div",30),r.ac(16,"button",31),r.kc("click",function(){return t.$implicit.dismiss("Close click")}),r.Oc(17,_r,1,0,"span",32),r.Qc(18," Cancel "),r.Zb(),r.ac(19,"button",33),r.kc("click",function(){return r.Ic(e),r.oc().addNewFolder(null)}),r.Oc(20,yr,1,0,"span",32),r.Qc(21," Add New Folder "),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb()}if(2&e){const e=r.oc();r.Hb(13),r.uc("ngModel",e.folderName),r.Hb(1),r.uc("ngIf",e.modalErrorMessage),r.Hb(2),r.uc("disabled",e.addFolderLoading),r.Hb(1),r.uc("ngIf",e.addFolderLoading),r.Hb(2),r.uc("disabled",e.addFolderLoading),r.Hb(1),r.uc("ngIf",e.addFolderLoading)}}let Hr=(()=>{class e{constructor(e,t,a,n,i){this._editorService=e,this._userService=t,this._toastService=a,this._gaEventsService=n,this._modalService=i,this.folderId=new r.o,this.folderName="",this.addFolderLoading=!1,this.modalErrorMessage=""}ngOnInit(){}addNewFolder(e){if(null!=e&&(e.srcElement.blur(),e.preventDefault()),this.modalErrorMessage="",""===this.folderName.trim())return this.modalErrorMessage="Folder name cannot be empty";this.addFolderLoading=!0;const t={user_id:this.user._id,workspace_id:this._userService.getCurrentUserWorkspaceId(),folder_name:this.folderName,folder_type:"uploads"};this._editorService.addFolder(t).subscribe(e=>{this.addFolderLoading=!1,this._toastService.show(`Folder ${e.folder_name} added successfully`,{classname:"bg-success text-light",delay:5e3}),this.folderName="",this.folders.unshift(e),this._modalService.dismissAll()},e=>{throw this.addFolderLoading=!1,402===e.status?e.error.proAccess?(this._modalService.open(rt.a,{size:"lg",centered:!0,modalDialogClass:"modal-ltd-checkout"}),this._gaEventsService.eventEmitter("ltd-popup","popup-view","Add Folder feature")):this._toastService.show(e.error.message,{classname:"bg-danger text-light",delay:5e3}):500===e.status&&this._toastService.show(e.error.message,{classname:"bg-danger text-light",delay:5e3}),e})}openModal(e){this._modalService.open(e)}openFolder(e){this.folderId.emit(e)}deleteFolder(e){confirm("If you delete the folder then all of its contents will also be deleted. Continue?")&&this._editorService.deleteFolder(e).subscribe(t=>{this.folders.splice(this.folders.findIndex(t=>t._id==e),1),this._toastService.show("Folder Deleted",{classname:"bg-danger text-light",delay:5e3})})}}return e.\u0275fac=function(t){return new(t||e)(r.Ub(fe.a),r.Ub(P.a),r.Ub(E.a),r.Ub(F.a),r.Ub(T.k))},e.\u0275cmp=r.Ob({type:e,selectors:[["app-folders"]],inputs:{user:"user",folderView:"folderView",folders:"folders"},outputs:{folderId:"folderId"},decls:13,vars:2,consts:[[1,"folder-box","hr-border-bottom"],[1,"folder-length","primary-text"],[1,"add-new-button"],[1,"btn","btn-outline-primary",3,"click"],["id","plus-icon","width","9","height","9","viewBox","0 0 9 9","fill","none","xmlns","http://www.w3.org/2000/svg"],["id","plus-icon-path","d","M8.91429 5.09388H5.09388V8.91429H3.82041V5.09388H0V3.82041H3.82041V0H5.09388V3.82041H8.91429V5.09388Z","fill","#5F58B7"],[1,"folders-list","sidebar-curve-top"],[1,"row"],["class","col-md-4",4,"ngFor","ngForOf"],["addFolderModal",""],[1,"col-md-4"],[1,"folder-ex"],[1,"d-flex","flex-column","align-items-center",3,"click"],["width","30","height","24","viewBox","0 0 30 24","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M27.3529 3.5192H15.1706L12.7441 0.633905C12.6717 0.546847 12.5632 0.498023 12.45 0.501552H2.64706C1.17971 0.516111 -0.00168936 1.7106 1.81343e-06 3.17802V20.8251C-7.1716e-05 22.2913 1.18088 23.4841 2.64706 23.4986H27.3529C28.8191 23.4841 30.0001 22.2913 30 20.8251V6.19273C30.0001 4.72648 28.8191 3.53376 27.3529 3.5192Z","fill","#3C395F"],[1,"primary-text","w-100","text-truncate","text-center",3,"title"],[1,"options-container"],["title","Delete Folder","svgIcon","delete",1,"icon","active",3,"click"],[1,"px-card","px-modal-card"],["type","button","aria-label","Close",1,"close","close-btn",3,"click"],["aria-hidden","true"],[1,"px-card-header","d-flex","flex-column"],["src","assets/img/svg/modal-svg.svg","alt","",1,"modal-svg"],[1,"title"],[1,"px-card-body"],[1,"modal-form"],[1,"form-group"],["for","name"],["name","folderName","type","text",1,"form-control","form-control-lg",3,"ngModel","ngModelChange","keyup.enter"],["style","display: block","class","invalid-feedback",4,"ngIf"],[1,"btn-area","d-flex",2,"justify-content","flex-end"],["type","button",1,"btn","btn-outline-dark",3,"disabled","click"],["class","spinner-border spinner-border-sm mr-1",4,"ngIf"],[1,"btn","btn-primary",3,"disabled","click"],[1,"invalid-feedback",2,"display","block"],[1,"spinner-border","spinner-border-sm","mr-1"]],template:function(e,t){if(1&e){const e=r.bc();r.ac(0,"div",0),r.ac(1,"div",1),r.Qc(2),r.Zb(),r.ac(3,"div",2),r.ac(4,"button",3),r.kc("click",function(){r.Ic(e);const a=r.Ec(12);return t.openModal(a)}),r.nc(),r.ac(5,"svg",4),r.Vb(6,"path",5),r.Zb(),r.Qc(7," Add New Folder "),r.Zb(),r.Zb(),r.Zb(),r.mc(),r.ac(8,"div",6),r.ac(9,"div",7),r.Oc(10,Cr,9,2,"div",8),r.Zb(),r.Zb(),r.Oc(11,xr,22,6,"ng-template",null,9,r.Pc)}2&e&&(r.Hb(2),r.Sc(" ",t.folders.length," Folders Added "),r.Hb(8),r.uc("ngForOf",t.folders))},directives:[k.l,Le.a,O.b,O.i,O.l,k.m],styles:[".folder-length[_ngcontent-%COMP%]{font-size:12px}.folder-box[_ngcontent-%COMP%]{display:flex;padding:0 10px;justify-content:space-between;align-items:center;height:60px;color:#000;font-weight:600;position:relative}.folder-box[_ngcontent-%COMP%]   .btn-outline-primary[_ngcontent-%COMP%]:hover   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{fill:#fff}.folders-list[_ngcontent-%COMP%]{min-height:170px;max-height:200px;overflow-y:auto;padding:20px;font-size:12px}.folder-ex[_ngcontent-%COMP%]{position:relative;margin-bottom:30px;font-size:10px;font-weight:600;line-height:12px;cursor:pointer}.folder-ex[_ngcontent-%COMP%]:hover   .options-container[_ngcontent-%COMP%]{display:block}.folder-ex[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{margin-bottom:4px}button.btn.btn-outline-primary[_ngcontent-%COMP%]{font-size:12px;font-weight:600;line-height:1px;border:1px solid #5f58b7;padding:10px 15px}.options-container[_ngcontent-%COMP%]{position:absolute;bottom:0;right:0;margin:4px;display:none}.options-container[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{font-size:8px;background-color:#fff;border-radius:4px;width:16px;height:16px;transition:all .3s;box-shadow:1px 1px 1px 1px rgba(0,0,0,.15)}.options-container[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]:hover{cursor:pointer;color:#ff1b1b}"]}),e})();function Sr(e,t){1&e&&(r.ac(0,"div",3),r.nc(),r.ac(1,"svg",4),r.Vb(2,"path",5),r.Zb(),r.Zb())}function kr(e,t){1&e&&(r.ac(0,"div",3),r.nc(),r.ac(1,"svg",6),r.Vb(2,"path",7),r.Zb(),r.Zb())}let Or=(()=>{class e{constructor(){this.folderView=new r.o,this.folderToggle=!1}ngOnInit(){}toggleView(){this.folderToggle=!this.folderToggle,this.folderView.emit(this.folderToggle)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r.Ob({type:e,selectors:[["app-folder-nav"]],outputs:{folderView:"folderView"},decls:5,vars:2,consts:[[1,"nav-bar",2,"cursor","pointer",3,"click"],[1,"nav-text-"],["class","nav-arrow",4,"ngIf"],[1,"nav-arrow"],["width","6","height","10","viewBox","0 0 6 10","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M0.221245 8.4425L3.65624 5L0.221244 1.5575L1.27874 0.5L5.77874 5L1.27874 9.5L0.221245 8.4425Z","fill","white"],["width","10","height","6","viewBox","0 0 10 6","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M1.5575 0.221252L5 3.65625L8.4425 0.221252L9.5 1.27875L5 5.77875L0.5 1.27875L1.5575 0.221252Z","fill","white"]],template:function(e,t){1&e&&(r.ac(0,"div",0),r.kc("click",function(){return t.toggleView()}),r.ac(1,"div",1),r.Qc(2," Folders "),r.Zb(),r.Oc(3,Sr,3,0,"div",2),r.Oc(4,kr,3,0,"div",2),r.Zb()),2&e&&(r.Hb(3),r.uc("ngIf",!t.folderToggle),r.Hb(1),r.uc("ngIf",t.folderToggle))},directives:[k.m],styles:[""]}),e})(),Ir=(()=>{class e{constructor(e){this._editorService=e,this.subscriptionsList=new p.a}ngOnInit(){this.subscriptionsList.add(this._editorService.currentFolder.subscribe(e=>{this.folder=e}))}ngOnDestroy(){this.subscriptionsList.unsubscribe()}goBack(){this._editorService.currentFolder.next(null)}}return e.\u0275fac=function(t){return new(t||e)(r.Ub(fe.a))},e.\u0275cmp=r.Ob({type:e,selectors:[["app-folder-view"]],decls:6,vars:1,consts:[[1,"nav-bar-dark"],[1,"nav-arrow",3,"click"],["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M13.1583 6.01732C13.1011 6.00803 13.0431 6.00374 12.9851 6.00449H3.10836L3.32372 5.90432C3.53423 5.80468 3.72575 5.66908 3.88968 5.50364L6.65936 2.73396C7.02413 2.38575 7.08542 1.82558 6.8046 1.40672C6.47777 0.960373 5.85099 0.863459 5.40461 1.19029C5.36855 1.21671 5.33428 1.24551 5.30207 1.2765L0.293602 6.28496C-0.0978088 6.67594 -0.0981532 7.31016 0.29282 7.70158C0.29307 7.70183 0.293352 7.70211 0.293602 7.70236L5.30207 12.7108C5.69379 13.1014 6.32802 13.1006 6.71868 12.7088C6.74942 12.678 6.77812 12.6452 6.8046 12.6107C7.08542 12.1918 7.02413 11.6316 6.65936 11.2834L3.89469 8.50872C3.74772 8.3616 3.57875 8.23823 3.39384 8.1431L3.09333 8.00787H12.93C13.4417 8.02688 13.8906 7.66943 13.9867 7.16645C14.0753 6.62037 13.7044 6.10591 13.1583 6.01732Z","fill","white"],[1,"nav-text-"]],template:function(e,t){1&e&&(r.ac(0,"div",0),r.ac(1,"div",1),r.kc("click",function(){return t.goBack()}),r.nc(),r.ac(2,"svg",2),r.Vb(3,"path",3),r.Zb(),r.Zb(),r.mc(),r.ac(4,"div",4),r.Qc(5),r.Zb(),r.Zb()),2&e&&(r.Hb(5),r.Sc(" Folders/",t.folder.folder_name," "))},styles:[""]}),e})(),Pr=(()=>{class e{constructor(e){this._dragDataService=e,this.fileDrop=new r.o,this.preventBodyDrop=!0,this.active=!1}onDrop(e){if(e.preventDefault(),this.active=!1,this._dragDataService.getData()&&"sidebar-item-drop"===this._dragDataService.getData().dropType)return void this._dragDataService.setData(null);const{dataTransfer:t}=e,a={target:{},dropType:"upload-files"};if(t.items.length>0){const e=[];for(let a=0;a<t.items.length;a++)"file"===t.items[a].kind&&e.push(t.items[a].getAsFile());t.items.clear(),a.target.files=e,this.fileDrop.emit(a)}else t.clearData()}onDragOver(e){e.stopPropagation(),e.preventDefault(),this.active=!0}onDragLeave(e){this.active=!1}onBodyDragOver(e){this.preventBodyDrop&&(e.preventDefault(),e.stopPropagation())}onBodyDrop(e){this.preventBodyDrop&&e.preventDefault()}}return e.\u0275fac=function(t){return new(t||e)(r.Ub(Ca.a))},e.\u0275dir=r.Pb({type:e,selectors:[["","appDropZone",""]],hostVars:2,hostBindings:function(e,t){1&e&&r.kc("drop",function(e){return t.onDrop(e)})("dragover",function(e){return t.onDragOver(e)})("dragleave",function(e){return t.onDragLeave(e)})("dragover",function(e){return t.onBodyDragOver(e)},!1,r.Fc)("drop",function(e){return t.onBodyDrop(e)},!1,r.Fc),2&e&&r.Mb("drop-zone-active",t.active)},inputs:{preventBodyDrop:"preventBodyDrop"},outputs:{fileDrop:"appDropZone"}}),e})(),Tr=(()=>{class e{constructor(e){this._modalService=e}ngOnInit(){}openLoginSignupModal(e){this._modalService.open(ee,{size:"lg",centered:!0}).componentInstance.uiMode=e}}return e.\u0275fac=function(t){return new(t||e)(r.Ub(T.k))},e.\u0275cmp=r.Ob({type:e,selectors:[["app-sign-in-message"]],decls:14,vars:0,consts:[[1,"d-flex","flex-column","align-items-center","text-center",2,"margin-top","60px"],[1,"primary-text",2,"font-size","24px","font-weight","600"],[1,"secondary-text",2,"margin-top","16px","font-size","12px"],["svgIcon","sign-in-files",2,"width","154px","height","auto","margin-top","34px","margin-bottom","48px"],[1,"btn","btn-primary",3,"click"],[1,"secondary-text",2,"font-size","12px","margin-top","22px"],[2,"font-size","12px","color","#5f58b7","font-weight","500","cursor","pointer",3,"click"]],template:function(e,t){1&e&&(r.ac(0,"div",0),r.ac(1,"span",1),r.Qc(2,"Sign In"),r.Zb(),r.ac(3,"span",2),r.Qc(4,"to upload your files "),r.Vb(5,"br"),r.Qc(6," here."),r.Zb(),r.Vb(7,"mat-icon",3),r.ac(8,"button",4),r.kc("click",function(){return t.openLoginSignupModal("signin")}),r.Qc(9," Sign In "),r.Zb(),r.ac(10,"span",5),r.Qc(11,"Don't have an account?"),r.Zb(),r.ac(12,"span",6),r.kc("click",function(){return t.openLoginSignupModal("signup")}),r.Qc(13,"Sign Up"),r.Zb(),r.Zb())},directives:[Le.a],styles:[""]}),e})();function Er(e,t){if(1&e){const e=r.bc();r.ac(0,"app-folder-nav",15),r.kc("folderView",function(t){return r.Ic(e),r.oc().folderToggler(t)}),r.Zb()}}function Fr(e,t){1&e&&r.Vb(0,"app-folder-view")}function Ar(e,t){if(1&e){const e=r.bc();r.ac(0,"div",16),r.kc("appDropZone",function(t){return r.Ic(e),r.oc().onDrop(t)}),r.ac(1,"button",17),r.nc(),r.ac(2,"svg",18),r.Vb(3,"path",19),r.Zb(),r.Zb(),r.mc(),r.ac(4,"div",20),r.ac(5,"div",21),r.nc(),r.ac(6,"svg",22),r.Vb(7,"path",23),r.Zb(),r.Zb(),r.mc(),r.ac(8,"div",24),r.Qc(9,"Drag & drop"),r.Zb(),r.ac(10,"div",25),r.Qc(11,"your files here, or"),r.Zb(),r.ac(12,"div",26),r.ac(13,"label",27),r.Qc(14,"Browse"),r.Zb(),r.ac(15,"input",28),r.kc("change",function(t){return r.Ic(e),r.oc().readImageFile(t)}),r.Zb(),r.Zb(),r.Zb(),r.Zb()}}function Mr(e,t){1&e&&(r.ac(0,"div",29),r.ac(1,"span",30),r.Qc(2,"Uploading..."),r.Zb(),r.Zb())}function Dr(e,t){if(1&e&&r.Vb(0,"div",41),2&e){const e=r.oc().$implicit;r.uc("innerHTML",e.src,r.Jc)}}function jr(e,t){if(1&e&&r.Vb(0,"img",42),2&e){const e=r.oc().$implicit;r.uc("src",e.src,r.Lc)}}function Lr(e,t){if(1&e&&(r.ac(0,"div",34),r.ac(1,"div",35),r.Vb(2,"div",36),r.ac(3,"div",37),r.Vb(4,"div",38),r.Zb(),r.Oc(5,Dr,1,1,"div",39),r.Oc(6,jr,1,1,"img",40),r.Zb(),r.Zb()),2&e){const e=t.$implicit;r.Hb(4),r.Nc("width",e.progress,"%"),r.Hb(1),r.uc("ngIf",e.isVectorImage),r.Hb(1),r.uc("ngIf",!e.isVectorImage)}}function Zr(e,t){if(1&e&&(r.ac(0,"div",31),r.ac(1,"div",32),r.Oc(2,Lr,7,4,"div",33),r.Zb(),r.Zb()),2&e){const e=r.oc();r.Hb(2),r.uc("ngForOf",e._utilsService.userUploadingInProgress)}}function Rr(e,t){1&e&&r.Vb(0,"app-sign-in-message")}function zr(e,t){1&e&&(r.ac(0,"span",51),r.Qc(1,"Uploads out of folders"),r.Zb())}function Br(e,t){1&e&&(r.ac(0,"span",51),r.Qc(1,"Folder Contents"),r.Zb())}function Ur(e,t){1&e&&(r.ac(0,"div",52),r.ac(1,"span",53),r.Qc(2,"No Files!"),r.Zb(),r.ac(3,"span",54),r.Qc(4,"Your drive is empty."),r.Zb(),r.Vb(5,"mat-icon",55),r.Zb())}const Nr=function(e){return{asset:e,dragType:"user-file"}};function Vr(e,t){if(1&e){const e=r.bc();r.ac(0,"div",56),r.ac(1,"div",57),r.ac(2,"div",58),r.ac(3,"img",59),r.kc("click",function(){r.Ic(e);const a=t.$implicit;return r.oc(2).addImageToCanvas(a)}),r.Zb(),r.Zb(),r.Zb(),r.Zb()}if(2&e){const e=t.$implicit,a=r.oc(2);r.uc("contextMenu",a.filesContextMenu)("contextMenuSubject",e),r.Hb(1),r.Nc("padding-bottom",(null==e.thumbnail_details?null:e.thumbnail_details.height)/(null==e.thumbnail_details?null:e.thumbnail_details.width)*100||100,"%"),r.Hb(1),r.uc("elementData",r.yc(7,Nr,e)),r.Hb(1),r.uc("defaultImage",a.placeholderBGColor)("lazyLoad",a.setImageUrl(e.thumbnail_details.url))}}function Wr(e,t){if(1&e){const e=r.bc();r.ac(0,"div",56),r.ac(1,"div",57),r.ac(2,"div",58),r.ac(3,"img",59),r.kc("click",function(){r.Ic(e);const a=t.$implicit;return r.oc(2).addImageToCanvas(a)}),r.Zb(),r.Zb(),r.Zb(),r.Zb()}if(2&e){const e=t.$implicit,a=r.oc(2);r.uc("contextMenu",a.filesContextMenu)("contextMenuSubject",e),r.Hb(1),r.Nc("padding-bottom",(null==e.thumbnail_details?null:e.thumbnail_details.height)/(null==e.thumbnail_details?null:e.thumbnail_details.width)*100||100,"%"),r.Hb(1),r.uc("elementData",r.yc(7,Nr,e)),r.Hb(1),r.uc("defaultImage",a.placeholderBGColor)("lazyLoad",a.setImageUrl(e.thumbnail_details.url))}}function Gr(e,t){1&e&&(r.ac(0,"div",60),r.Vb(1,"div",61),r.Zb())}function Qr(e,t){if(1&e&&(r.ac(0,"div",43),r.Oc(1,zr,2,0,"span",44),r.Oc(2,Br,2,0,"span",44),r.Oc(3,Ur,6,0,"div",45),r.ac(4,"div",46),r.ac(5,"div",47),r.Oc(6,Vr,4,9,"div",48),r.Zb(),r.ac(7,"div",49),r.Oc(8,Wr,4,9,"div",48),r.Zb(),r.Zb(),r.Oc(9,Gr,2,0,"div",50),r.Zb()),2&e){const e=r.oc();r.Hb(1),r.uc("ngIf",!e.singleFolder),r.Hb(1),r.uc("ngIf",e.singleFolder),r.Hb(1),r.uc("ngIf",0===e.userUploadsColumn1.length&&0===e.userUploadsColumn2.length&&e.user&&!e.isLoading),r.Hb(3),r.uc("ngForOf",e.userUploadsColumn1),r.Hb(2),r.uc("ngForOf",e.userUploadsColumn2),r.Hb(1),r.uc("ngIf",e.isLoading)}}function $r(e,t){1&e&&(r.ac(0,"div",62),r.nc(),r.ac(1,"svg",63),r.Vb(2,"path",64),r.Zb(),r.mc(),r.ac(3,"span",65),r.Qc(4,"Add"),r.Zb(),r.Zb())}function qr(e,t){1&e&&(r.ac(0,"div",62),r.nc(),r.ac(1,"svg",66),r.Vb(2,"path",67),r.Zb(),r.mc(),r.ac(3,"span",65),r.Qc(4,"Move"),r.Zb(),r.Zb())}function Yr(e,t){if(1&e&&(r.ac(0,"div",62),r.ac(1,"span",65),r.Qc(2),r.Zb(),r.Zb()),2&e){const e=r.oc().$implicit;r.Hb(2),r.Rc(e.folder_name)}}function Xr(e,t){if(1&e){const e=r.bc();r.Oc(0,Yr,3,1,"ng-template",10),r.kc("execute",function(a){r.Ic(e);const n=t.$implicit;return r.oc().moveAssetToFolder(n,a.item)})}}function Jr(e,t){}function Kr(e,t){1&e&&(r.ac(0,"div",62),r.Vb(1,"mat-icon",68),r.ac(2,"span",65),r.Qc(3,"Delete"),r.Zb(),r.Zb())}let es=(()=>{class e{constructor(e,t,a,n,i,r,s,o){this._utilsService=e,this._helpersService=t,this._editorService=a,this._userService=n,this._toastService=i,this._modalService=r,this._domSanitizer=s,this._gaEventsService=o,this.userUploadsColumn1=[],this.userUploadsColumn2=[],this.pageNum=1,this.pageSize=30,this.isLoading=!1,this.isUploading=!1,this.noDataToLoad=!1,this.isSidebarItemActivated=!1,this.subscriptionsList=new p.a,this.folderId=null,this.folderView=!1,this.singleFolder=!1,this.folder=null,this.folders=[]}ngOnInit(){this.subscriptionsList.add(this._utilsService.activeSidebarItem.subscribe(e=>{if((null==e?void 0:e.sidebarItemId)===f.a.SIDEBAR_ITEMS.MY_FILES.id){if(this.isSidebarItemActivated)return;if(this.userDataSubscription(),this.isSidebarItemActivated=!0,this.isLoading=!0,!this.user)return void(this.isLoading=!1);this.getUserFolders()}})).add(this._editorService.currentFolder.subscribe(e=>{null===e&&this.isSidebarItemActivated&&(this.userUploadsColumn1=[],this.userUploadsColumn2=[],this.pageNum=1,this.singleFolder=!1,this.folderId=null,this.isLoading=!0,this.noDataToLoad=!1,this.getUserUploads())}))}ngOnDestroy(){this.subscriptionsList.unsubscribe()}getUserFolders(){this._editorService.getFolders(this.user._id,this._userService.getCurrentUserWorkspaceId(),"uploads").subscribe(e=>{this.folders=e})}userDataSubscription(){this.subscriptionsList.add(this._userService.user.subscribe(e=>{e&&(this.user=e,this.isLoading=!0,this.getUserUploads())})).add(this._utilsService.readAssetFiles.subscribe(e=>{this.user?this.readImageFile(e,!0):(this._modalService.open(ee,{size:"lg",centered:!0}).componentInstance.uiMode="signin",this._toastService.show("Please sign in to upload multiple files",{classname:"bg-danger text-light",delay:5e3}))}))}openLoginSignupModal(e){this._modalService.open(ee,{size:"lg",centered:!0}).componentInstance.uiMode=e}onScroll(){this.noDataToLoad||this.user&&(this.isLoading=!0,this.pageNum+=1,this.getUserUploads())}getUserUploads(){this._editorService.getUserUploadsByUserId(this.pageNum,this.pageSize,this.user._id,this._userService.getCurrentUserWorkspaceId(),this.folderId).subscribe(e=>{if(0==e.length)return this.noDataToLoad=!0,void(this.isLoading=!1);this.isLoading=!1,this.splitUploadsArrayInHalf(e)},e=>{throw this.isLoading=!1,e})}splitUploadsArrayInHalf(e){for(var t=0;t<e.length;t++)t%2==0?this.userUploadsColumn1.push(e[t]):this.userUploadsColumn2.push(e[t])}onDrop(e){this.readImageFile(e,!1)}readImageFile(e,t=!0){if(e.target.files.length>f.a.MAX_MULTIPLE_FILES_AT_ONCE)return this._toastService.show(`Only ${f.a.MAX_MULTIPLE_FILES_AT_ONCE} files can be uploaded at once`,{classname:"bg-danger text-light",delay:5e3});for(let a of e.target.files){if(!this.ifFileIsOfImageType(a))return void this._toastService.show("Only SVG, PNG and JPG files are allowed",{classname:"bg-danger text-light",delay:5e3});if(!this.checkFileSize(a))return void this._toastService.show(`File size cannot be more than ${f.a.MAX_IMAGE_FILE_UPLOAD} MB`,{classname:"bg-danger text-light",delay:5e3});let e=a.type;this.isUploading=!0,"image/jpeg"==e||"image/png"==e?this.processPNGAndJPEGImageFile(a,t,e):"image/svg+xml"==e&&this.processSVGFile(a,t)}}processPNGAndJPEGImageFile(e,t,a){const n=e,i=new FileReader;let r=new d.h(n.name,null,20,this.randomId(),!1,t);i.onload=e=>{r.src=e.target.result,r.shouldBeAddedToCanvas&&this._utilsService.sendAddUploadsToCanvas(r)},i.readAsDataURL(n),this._utilsService.userUploadingInProgress.push(r);const s=new FormData;s.append("file",n,n.name),s.append("image_type",a),s.append("user_id",this.user._id),s.append("workspace_id",this._userService.getCurrentUserWorkspaceId()),s.append("folder",this.folderId),this._editorService.uploadImageToS3AndAddItToCanvas(s).subscribe(e=>{switch(e.type){case me.e.UploadProgress:r.progress=Math.round(e.loaded/e.total*100);break;case me.e.Response:this.onPNGAndJPEGImageUploadSuccess(e,r)}},e=>{this.onPNGAndJPEGImageUploadError(e,r)})}onPNGAndJPEGImageUploadSuccess(e,t){this.addUploadedUserAssetToUserUploadsList(e.body.asset),this.isUploading=!1;for(let a in this._utilsService.userUploadingInProgress)this._utilsService.userUploadingInProgress[a].id===t.id&&(this._utilsService.userUploadingInProgress[a].progress=100,this._utilsService.userUploadingInProgress[a].src=e.body.asset.original_asset_details.url,this._utilsService.userUploadingInProgress[a].uploadStatus=d.g.UploadedSuccessfully,t.shouldBeAddedToCanvas&&this._utilsService.sendAddUploadsToCanvas(t),this._utilsService.userUploadingInProgress.splice(Number(a),1))}onPNGAndJPEGImageUploadError(e,t){this.isUploading=!1;for(let a in this._utilsService.userUploadingInProgress)this._utilsService.userUploadingInProgress[a].id===t.id&&(this._utilsService.userUploadingInProgress[a].progress=100,this._utilsService.userUploadingInProgress[a].uploadStatus=d.g.ErrorUploading,t.shouldBeAddedToCanvas&&this._utilsService.sendAddUploadsToCanvas(t),this._utilsService.userUploadingInProgress.splice(Number(a),1));throw this._toastService.show("Upload Error: Image file may be corrupted or not supported",{classname:"bg-danger text-light",delay:5e3}),e}ifFileIsOfImageType(e){if(e){let t=e.type;return"image/jpeg"==t||"image/png"==t||"image/svg+xml"==t}return!1}checkFileSize(e){return!(e.size/1e3/1e3>f.a.MAX_IMAGE_FILE_UPLOAD)}addUploadedUserAssetToUserUploadsList(e){this.isUploading=!1,this.userUploadsColumn1.length<=this.userUploadsColumn2.length?this.userUploadsColumn1.unshift(e):this.userUploadsColumn2.unshift(e)}randomId(){return Math.floor(999999*Math.random())+1}moveAssetToFolder(e,t){this._editorService.moveAssetToFolder(t._id,e._id).then(t=>{this.assetMovedToFolderSuccess(t,e)}).catch(e=>{this.assetMovedToFolderError(e)})}assetMovedToFolderSuccess(e,t){this._toastService.show(`Asset moved to ${t.folder_name}`,{classname:"bg-success text-light",delay:5e3})}assetMovedToFolderError(e){throw this._toastService.show("An error occurred while moving asset to folder, please try again",{classname:"bg-success text-light",delay:5e3}),e}processSVGFile(e,t){const a=e,n=new FileReader,i=new d.h(a.name,null,10,this.randomId(),!0,t);n.readAsText(e),n.onload=e=>{let t=e.target.result;this._helpersService.isSVGString(t)?(i.shouldBeAddedToCanvas&&this._utilsService.sendDataToSend({type:"add-svg-string",objectData:t}),i.src=this._domSanitizer.bypassSecurityTrustHtml(t),this._utilsService.userUploadingInProgress.push(i),this._editorService.uploadSVGToS3AndAddItToCanvas(t,this.user._id,this._userService.getCurrentUserWorkspaceId(),this.folderId).subscribe(e=>{this.onSVGImageUploadSuccess(e,i)},e=>{this.onSVGImageUploadError(e,i)})):(this.isUploading=!1,this._toastService.show("Upload Error: SVG file may be corrupted",{classname:"bg-danger text-light",delay:5e3}))}}onSVGImageUploadSuccess(e,t){this.isUploading=!1,this.addUploadedUserAssetToUserUploadsList(e.asset);for(let a in this._utilsService.userUploadingInProgress)this._utilsService.userUploadingInProgress[a].id===t.id&&(this._utilsService.userUploadingInProgress[a].progress=100,this._utilsService.userUploadingInProgress[a].uploadStatus=d.g.UploadedSuccessfully,this._utilsService.userUploadingInProgress.splice(Number(a),1))}onSVGImageUploadError(e,t){this.isUploading=!1;for(let a in this._utilsService.userUploadingInProgress)this._utilsService.userUploadingInProgress[a].id===t.id&&(this._utilsService.userUploadingInProgress[a].progress=100,this._utilsService.userUploadingInProgress[a].uploadStatus=d.g.ErrorUploading,this._utilsService.userUploadingInProgress.splice(Number(a),1));throw this._toastService.show("Upload Error: Image file may be corrupted or not supported",{classname:"bg-danger text-light",delay:5e3}),e}deleteAsset(e){confirm("Are you sure you want to delete the asset?")&&this._editorService.deleteUserUpload(e._id).subscribe(t=>{for(let a in this.userUploadsColumn1)this.userUploadsColumn1[a]._id===e._id&&this.userUploadsColumn1.splice(Number(a),1);for(let a in this.userUploadsColumn2)this.userUploadsColumn2[a]._id===e._id&&this.userUploadsColumn2.splice(Number(a),1);this._toastService.show("File deleted successfully",{classname:"bg-success text-light",delay:5e3})})}addImageToCanvas(e){this._utilsService.sendDataToSend("image/svg+xml"===e.mime_type?{type:"add-vector",objectData:e.original_asset_details.url}:{type:"add-image",objectData:{source:"s3",urls:{url:e.original_asset_details.url}}}),this._gaEventsService.eventEmitter("Editor My Files Sidebar","File Added To Canvas",`${e.mime_type}`,null)}setImageUrl(e){return b.a.production&&(e=e.replace("https://vl-graphics-bucket-s3.s3.amazonaws.com/","https://cdn.pixelied.com/")),encodeURI(e)}populateFolderId(e){this.userUploadsColumn1=[],this.userUploadsColumn2=[],this.folderView=!1,this.singleFolder=!0,this.folderId=e._id,this.folder=e,this.pageNum=1,this._editorService.currentFolder.next(e),this.isLoading=!0,this.noDataToLoad=!1,this.getUserUploads()}folderToggler(e){this.folderView=e}}return e.\u0275fac=function(t){return new(t||e)(r.Ub(xe),r.Ub(He.a),r.Ub(fe.a),r.Ub(P.a),r.Ub(E.a),r.Ub(T.k),r.Ub(it.b),r.Ub(F.a))},e.\u0275cmp=r.Ob({type:e,selectors:[["app-user-files-sidebar"]],viewQuery:function(e,t){if(1&e&&r.Wc(fr,1),2&e){let e;r.Dc(e=r.lc())&&(t.filesContextMenu=e.first)}},inputs:{placeholderBGColor:"placeholderBGColor"},decls:18,vars:18,consts:[[1,"user-files-wrapper"],["infiniteScroll","",1,"scrollableContainer",3,"scrollWindow","infiniteScrollDistance","infiniteScrollThrottle","scrolled"],[3,"folderView",4,"ngIf"],[4,"ngIf"],[3,"user","folders","folderView","hidden","folderId"],["class","drop-box",3,"appDropZone",4,"ngIf"],["class","image-uploading-title","style","padding-left: 18px",4,"ngIf"],["style","padding: 0px 10px 8px 18px",4,"ngIf"],["class","left-panel-scrollable-container-padding",4,"ngIf"],[3,"menuClass"],["contextMenuItem","",3,"execute"],["contextMenuItem","",3,"subMenu"],["filesContextSubMenu",""],[4,"ngFor","ngForOf"],["contextMenuItem","","divider","true"],[3,"folderView"],[1,"drop-box",3,"appDropZone"],["tooltipClass","tooltip-primary","placement","right","ngbTooltip","JPEG, JPG, PNG or SVG upto 25 MB",1,"upload-tooltip"],["width","14","height","14","viewBox","0 0 12 12","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M12 6C12 9.31444 9.31348 12 6 12C2.68652 12 0 9.31444 0 6C0 2.68749 2.68652 0 6 0C9.31348 0 12 2.68749 12 6ZM6.16101 1.98387C4.84253 1.98387 4.00161 2.53928 3.34127 3.5264C3.25573 3.65429 3.28435 3.82677 3.40696 3.91974L4.24645 4.55627C4.37238 4.65177 4.5518 4.62905 4.64964 4.50494C5.08183 3.95676 5.37818 3.63888 6.036 3.63888C6.53025 3.63888 7.1416 3.95698 7.1416 4.43625C7.1416 4.79857 6.84249 4.98464 6.35448 5.25825C5.78536 5.57729 5.03226 5.97438 5.03226 6.96774V7.06452C5.03226 7.22485 5.16225 7.35484 5.32258 7.35484H6.67742C6.83775 7.35484 6.96774 7.22485 6.96774 7.06452V7.03227C6.96774 6.34367 8.98031 6.315 8.98031 4.45161C8.98031 3.04834 7.5247 1.98387 6.16101 1.98387ZM6 7.98387C5.38633 7.98387 4.8871 8.4831 4.8871 9.09677C4.8871 9.71042 5.38633 10.2097 6 10.2097C6.61367 10.2097 7.1129 9.71042 7.1129 9.09677C7.1129 8.4831 6.61367 7.98387 6 7.98387Z","fill","#D2D2D2"],[1,"drop-body"],[1,"upload-img-icon"],["width","26","height","26","viewBox","0 0 26 26","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M13 3.25C10.471 3.25 8.34233 4.60362 6.9655 6.51481C3.12591 6.55838 0 9.69215 0 13.5417C0 17.4181 3.16521 20.5833 7.04167 20.5833H9.75V18.4167H7.04167C4.33579 18.4167 2.16667 16.2475 2.16667 13.5417C2.16667 10.8358 4.33579 8.66667 7.04167 8.66667C7.07958 8.66667 7.16783 8.67424 7.3125 8.68148L7.97477 8.71533L8.30485 8.13981C9.24095 6.51338 10.9827 5.41667 13 5.41667C15.7132 5.41667 17.9335 7.39428 18.3426 9.98275L18.5077 11.0238L19.5529 10.8883C19.7949 10.8568 19.9495 10.8333 20.0417 10.8333C22.1481 10.8333 23.8333 12.5185 23.8333 14.625C23.8333 16.7315 22.1481 18.4167 20.0417 18.4167H16.25V20.5833H20.0417C23.3194 20.5833 26 17.9027 26 14.625C26 11.3854 23.3751 8.74922 20.1496 8.68783C19.2074 5.57004 16.4148 3.25 13 3.25ZM13 9.75L8.66667 14.0833H11.9167V22.75H14.0833V14.0833H17.3333L13 9.75Z","fill","#D2D2D2"],[1,"primary-text","drag-drop-heading"],[1,"secondary-text","drag-drop-text"],[1,"drag-upload-button"],["for","file-upload",1,"btn","btn-primary"],["id","file-upload","type","file","accept","image/png, image/jpeg, image/svg+xml",1,"btn","btn-primary","upload-btn",3,"change"],[1,"image-uploading-title",2,"padding-left","18px"],[1,"upload-txt","primary-text"],[2,"padding","0px 10px 8px 18px"],[1,"upload-images","d-flex","flex-row","flex-wrap"],["class","upload-box",4,"ngFor","ngForOf"],[1,"upload-box"],[1,"mb-1","img-container",2,"padding","0"],[1,"upload-overlay"],[1,"progress"],["role","progressbar",1,"progress-bar","progress-bar-striped","bg-success"],["class","d-flex justify-content-center",3,"innerHTML",4,"ngIf"],["class","img-opacity-fadein img-thumb","alt","",3,"src",4,"ngIf"],[1,"d-flex","justify-content-center",3,"innerHTML"],["alt","",1,"img-opacity-fadein","img-thumb",3,"src"],[1,"left-panel-scrollable-container-padding"],["class","primary-text upload-txt",4,"ngIf"],["class","d-flex flex-column align-items-center text-center","style","margin-top: 60px",4,"ngIf"],[1,"d-flex","flex-row","mt-2"],[1,"column1","w-100",2,"margin-right","10px"],["class","d-flex flex-column",3,"contextMenu","contextMenuSubject",4,"ngFor","ngForOf"],[1,"column2","w-100",2,"margin-left","10px"],["class","text-center p-3",4,"ngIf"],[1,"primary-text","upload-txt"],[1,"d-flex","flex-column","align-items-center","text-center",2,"margin-top","60px"],[1,"primary-text",2,"font-size","24px","font-weight","600"],[1,"secondary-text",2,"margin-top","16px","font-size","12px"],["svgIcon","no-files",2,"width","154px","height","auto","margin-top","8px","margin-bottom","8px"],[1,"d-flex","flex-column",3,"contextMenu","contextMenuSubject"],[2,"position","relative","margin-bottom","20px"],["appCanvasDrag","",1,"img-container",3,"elementData"],["alt","User Asset",1,"img-opacity-fadein","img-thumb",3,"defaultImage","lazyLoad","click"],[1,"text-center","p-3"],[1,"data-loader"],[1,"menu-item","d-flex","flex-row","align-items-center"],["width","12","height","12","viewBox","0 0 12 12","fill","none","xmlns","http://www.w3.org/2000/svg",1,"item-icon",2,"width","18px","height","16px"],["d","M11 6.71429H6.71429V11H5.28571V6.71429H1V5.28571H5.28571V1H6.71429V5.28571H11V6.71429Z","fill","white"],[1,"item-text"],["width","14","height","13","viewBox","0 0 14 13","fill","none","xmlns","http://www.w3.org/2000/svg",1,"item-icon"],["d","M7.01197 1.27562C6.93497 1.27674 6.85926 1.29548 6.79062 1.33039C6.72199 1.36531 6.66226 1.41547 6.61602 1.47705L5.27597 2.81709C5.22757 2.86356 5.18893 2.91922 5.16231 2.98081C5.13569 3.0424 5.12163 3.10868 5.12095 3.17577C5.12026 3.24286 5.13298 3.30942 5.15834 3.37154C5.1837 3.43365 5.2212 3.49009 5.26864 3.53753C5.31609 3.58498 5.37252 3.62248 5.43464 3.64784C5.49676 3.6732 5.56331 3.68591 5.6304 3.68523C5.6975 3.68455 5.76378 3.67048 5.82537 3.64386C5.88696 3.61724 5.94262 3.5786 5.98909 3.5302L6.51506 3.00423V4.9387C6.51411 5.00553 6.52646 5.07187 6.55138 5.13389C6.5763 5.1959 6.61329 5.25234 6.66021 5.29993C6.70714 5.34752 6.76305 5.38531 6.8247 5.41111C6.88636 5.4369 6.95253 5.45018 7.01936 5.45018C7.08619 5.45018 7.15236 5.4369 7.21401 5.41111C7.27567 5.38531 7.33158 5.34752 7.3785 5.29993C7.42542 5.25234 7.46242 5.1959 7.48734 5.13389C7.51226 5.07187 7.5246 5.00553 7.52366 4.9387V3.00423L8.04963 3.5302C8.0961 3.5786 8.15176 3.61724 8.21335 3.64386C8.27494 3.67048 8.34122 3.68455 8.40831 3.68523C8.4754 3.68591 8.54196 3.6732 8.60408 3.64784C8.66619 3.62248 8.72263 3.58498 8.77007 3.53753C8.81752 3.49009 8.85502 3.43365 8.88038 3.37154C8.90574 3.30942 8.91845 3.24286 8.91777 3.17577C8.91709 3.10868 8.90302 3.0424 8.8764 2.98081C8.84978 2.91922 8.81114 2.86356 8.76274 2.81709L7.42073 1.47508C7.37298 1.41214 7.31111 1.3613 7.24011 1.32666C7.16911 1.29201 7.09096 1.27453 7.01197 1.27562ZM3.73155 4.55555C3.60053 4.55945 3.47618 4.61421 3.38484 4.70822L2.04283 6.05023C1.98073 6.0974 1.93042 6.15833 1.89585 6.22823C1.86127 6.29813 1.84338 6.37509 1.84357 6.45308C1.84376 6.53106 1.86203 6.60794 1.89695 6.67767C1.93186 6.74739 1.98247 6.80808 2.0448 6.85494L3.38484 8.19499C3.43131 8.24339 3.48697 8.28203 3.54856 8.30865C3.61015 8.33527 3.67643 8.34933 3.74353 8.35001C3.81062 8.3507 3.87717 8.33798 3.93929 8.31262C4.00141 8.28726 4.05784 8.24976 4.10529 8.20232C4.15273 8.15487 4.19023 8.09844 4.21559 8.03632C4.24095 7.9742 4.25367 7.90765 4.25298 7.84056C4.2523 7.77346 4.23824 7.70718 4.21162 7.64559C4.185 7.584 4.14636 7.52834 4.09796 7.48187L3.57199 6.9559H5.50645C5.57328 6.95685 5.63963 6.9445 5.70164 6.91958C5.76365 6.89466 5.8201 6.85767 5.86769 6.81075C5.91528 6.76382 5.95307 6.70791 5.97886 6.64626C6.00465 6.5846 6.01794 6.51844 6.01794 6.4516C6.01794 6.38477 6.00465 6.3186 5.97886 6.25695C5.95307 6.19529 5.91528 6.13938 5.86769 6.09246C5.8201 6.04554 5.76365 6.00854 5.70164 5.98362C5.63963 5.9587 5.57328 5.94636 5.50645 5.9473H3.57199L4.09796 5.42133C4.17083 5.3505 4.2206 5.2593 4.24076 5.15969C4.26091 5.06008 4.2505 4.95671 4.21089 4.86311C4.17128 4.76952 4.10432 4.69008 4.01879 4.6352C3.93325 4.58032 3.83313 4.55255 3.73155 4.55555ZM10.2919 4.55555C10.1916 4.55567 10.0936 4.58569 10.0105 4.64176C9.92737 4.69783 9.86284 4.77742 9.82515 4.87034C9.78746 4.96327 9.77833 5.06533 9.79892 5.16347C9.81951 5.26161 9.86889 5.35139 9.94076 5.42133L10.4667 5.9473H8.53226C8.46543 5.94636 8.39909 5.9587 8.33707 5.98362C8.27506 6.00854 8.21862 6.04554 8.17103 6.09246C8.12344 6.13938 8.08565 6.19529 8.05985 6.25695C8.03406 6.3186 8.02078 6.38477 8.02078 6.4516C8.02078 6.51844 8.03406 6.5846 8.05985 6.64626C8.08565 6.70791 8.12344 6.76382 8.17103 6.81075C8.21862 6.85767 8.27506 6.89466 8.33707 6.91958C8.39909 6.9445 8.46543 6.95685 8.53226 6.9559H10.4667L9.94076 7.48187C9.89236 7.52834 9.85372 7.584 9.8271 7.64559C9.80048 7.70718 9.78641 7.77346 9.78573 7.84056C9.78505 7.90765 9.79776 7.9742 9.82312 8.03632C9.84848 8.09844 9.88598 8.15488 9.93342 8.20232C9.98087 8.24976 10.0373 8.28726 10.0994 8.31263C10.1615 8.33799 10.2281 8.3507 10.2952 8.35001C10.3623 8.34933 10.4286 8.33527 10.4902 8.30865C10.5517 8.28203 10.6074 8.24339 10.6539 8.19499L11.9959 6.85297C12.058 6.8058 12.1083 6.74487 12.1429 6.67497C12.1774 6.60507 12.1953 6.52811 12.1951 6.45013C12.195 6.37214 12.1767 6.29527 12.1418 6.22554C12.1069 6.15581 12.0562 6.09513 11.9939 6.04826L10.6539 4.70822C10.6068 4.65985 10.5505 4.62142 10.4884 4.59519C10.4262 4.56897 10.3594 4.55549 10.2919 4.55555ZM7.01197 7.45331C6.87831 7.45527 6.75089 7.51021 6.65771 7.60606C6.56454 7.70192 6.51323 7.83084 6.51506 7.96451V9.89897L5.98909 9.373C5.94262 9.3246 5.88696 9.28596 5.82537 9.25934C5.76378 9.23272 5.6975 9.21866 5.6304 9.21798C5.56331 9.21729 5.49676 9.23 5.43464 9.25537C5.37252 9.28073 5.31609 9.31823 5.26864 9.36567C5.2212 9.41311 5.1837 9.46955 5.15833 9.53167C5.13297 9.59379 5.12026 9.66034 5.12095 9.72743C5.12163 9.79453 5.13569 9.86081 5.16231 9.9224C5.18893 9.98399 5.22757 10.0396 5.27597 10.0861L6.61799 11.4281C6.66516 11.4902 6.72609 11.5405 6.79599 11.5751C6.86589 11.6097 6.94285 11.6276 7.02083 11.6274C7.09881 11.6272 7.17569 11.6089 7.24542 11.574C7.31515 11.5391 7.37583 11.4885 7.4227 11.4262L8.76274 10.0861C8.81114 10.0396 8.84978 9.98399 8.8764 9.9224C8.90302 9.86081 8.91709 9.79453 8.91777 9.72743C8.91845 9.66034 8.90574 9.59379 8.88038 9.53167C8.85502 9.46955 8.81752 9.41311 8.77007 9.36567C8.72263 9.31823 8.6662 9.28073 8.60408 9.25537C8.54196 9.23 8.4754 9.21729 8.40831 9.21798C8.34122 9.21866 8.27494 9.23272 8.21335 9.25934C8.15176 9.28596 8.0961 9.3246 8.04963 9.373L7.52366 9.89897V7.96451C7.52458 7.89708 7.51197 7.83015 7.48658 7.76768C7.46118 7.70521 7.42352 7.64847 7.37581 7.60081C7.32811 7.55314 7.27133 7.51554 7.20883 7.4902C7.14634 7.46487 7.0794 7.45232 7.01197 7.45331Z","fill","#fff"],["svgIcon","delete",1,"icon","active","item-icon"]],template:function(e,t){if(1&e&&(r.ac(0,"div",0),r.ac(1,"div",1),r.kc("scrolled",function(){return t.onScroll()}),r.Oc(2,Er,1,0,"app-folder-nav",2),r.Oc(3,Fr,1,0,"app-folder-view",3),r.ac(4,"app-folders",4),r.kc("folderId",function(e){return t.populateFolderId(e)}),r.Zb(),r.Oc(5,Ar,16,0,"div",5),r.Oc(6,Mr,3,0,"div",6),r.Oc(7,Zr,3,1,"div",7),r.Oc(8,Rr,1,0,"app-sign-in-message",3),r.Oc(9,Qr,10,6,"div",8),r.Zb(),r.Zb(),r.ac(10,"context-menu",9),r.Oc(11,$r,5,0,"ng-template",10),r.kc("execute",function(e){return t.addImageToCanvas(e.item)}),r.Oc(12,qr,5,0,"ng-template",11),r.ac(13,"context-menu",9,12),r.Oc(15,Xr,1,0,void 0,13),r.Zb(),r.Oc(16,Jr,0,0,"ng-template",14),r.Oc(17,Kr,4,0,"ng-template",10),r.kc("execute",function(e){return t.deleteAsset(e.item)}),r.Zb()),2&e){const e=r.Ec(14);r.Hb(1),r.uc("scrollWindow",!1)("infiniteScrollDistance",2)("infiniteScrollThrottle",50),r.Hb(1),r.uc("ngIf",!t.singleFolder&&t.user),r.Hb(1),r.uc("ngIf",t.singleFolder),r.Hb(1),r.uc("user",t.user)("folders",t.folders)("folderView",t.folderView)("hidden",!t.folderView),r.Hb(1),r.uc("ngIf",t.user),r.Hb(1),r.uc("ngIf",t.isUploading),r.Hb(1),r.uc("ngIf",t._utilsService.userUploadingInProgress.length>0),r.Hb(1),r.uc("ngIf",!t.user),r.Hb(1),r.uc("ngIf",t.user),r.Hb(1),r.uc("menuClass","px-contextmenu"),r.Hb(2),r.uc("subMenu",e),r.Hb(1),r.uc("menuClass","px-contextmenu"),r.Hb(2),r.uc("ngForOf",t.folders)}},directives:[da.a,k.m,Hr,fr,hr,k.l,Or,Ir,Pr,T.q,Tr,Le.a,vr,wa,Ze.a],styles:['@charset "UTF-8";.px-contextmenu{max-width:12rem;min-width:8rem;background-color:#000;border-radius:2px;box-shadow:0 0 12pt rgba(0,0,0,.25);padding:12px 0}.px-contextmenu .dropdown-menu{border:none;padding:0;background-color:transparent;min-width:auto}.px-contextmenu .dropdown-menu:focus{outline:none}.px-contextmenu li a{min-width:100%;width:100%;position:relative}.px-contextmenu li a.active{background-color:#5f58b7}.px-contextmenu li .hasSubMenu:before{content:"\u25b6";position:absolute;font-size:10px;right:12px;color:#fff;top:6px}.px-contextmenu .divider,.px-contextmenu hr{border:none;border-bottom:1px solid #2b2b2b;margin-top:8px;margin-bottom:8px}.px-contextmenu .menu-item{padding:4px 10px;transition:all .3s}.px-contextmenu .menu-item:hover{cursor:pointer;background-color:#5f58b7}.px-contextmenu .menu-item .item-icon{width:18px;height:18px;color:#fff;font-size:10px;margin-right:8px;transition:all .4s}.px-contextmenu .menu-item .item-text{font-size:12px;color:#fff;font-weight:500;max-width:18em;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;flex-grow:1}.user-files-wrapper .drop-box{height:157px;margin:20px auto;border-radius:8px;width:220px;text-align:center;position:relative;transition:all .3s}.user-files-wrapper .drop-box.drop-zone-active{border:2px solid #5f58b7}.user-files-wrapper .drop-box button.upload-tooltip{position:absolute;right:12px;top:3px}.user-files-wrapper .drop-box input#file-upload{display:none}.user-files-wrapper .drop-box .drag-drop-heading{font-size:18px;font-weight:700}.user-files-wrapper .drop-box .drag-drop-text{font-size:10px;font-weight:500;padding-bottom:8px}.user-files-wrapper .drop-box .drop-body{padding:18px 0}.user-files-wrapper .drop-box .image-uploading-title{margin-bottom:30px}.user-files-wrapper .progress{height:4px!important;position:absolute;z-index:9999;overflow:hidden;width:90%;margin-left:3.5%;vertical-align:middle;top:48%}.user-files-wrapper .nav-bar,.user-files-wrapper .nav-bar-dark{height:48px;color:#fff;display:flex;align-items:center;padding-right:20px;padding-left:20px;font-weight:600;text-transform:capitalize;font-size:14px}.user-files-wrapper .nav-bar{background:#5f58b7;justify-content:space-between}.user-files-wrapper .nav-bar-dark{background:#3c395f}.user-files-wrapper .nav-bar-dark svg{margin-right:10px}.user-files-wrapper .nav-arrow{cursor:pointer}.user-files-wrapper .upload-images{gap:8px}.user-files-wrapper .upload-images .upload-overlay{height:100%;width:100%;border-radius:4px;background:rgba(60,57,95,.85);position:absolute}.user-files-wrapper .upload-box .img-container{position:relative}.user-files-wrapper .upload-box .img-container svg{width:124px;height:auto}.user-files-wrapper .upload-box .img-container .img-thumb{width:100%}.user-files-wrapper .upload-box{flex:48%}.user-files-wrapper span.upload-txt{font-size:13px;font-weight:600;margin:8px 2px}'],encapsulation:2}),e})();function ts(e,t){1&e&&(r.ac(0,"div",22),r.Qc(1," Group Colors "),r.Zb())}function as(e,t){if(1&e){const e=r.bc();r.ac(0,"div",25),r.kc("click",function(){r.Ic(e);const a=t.$implicit;return r.oc(2).selectGroupItemColor(a)}),r.Zb()}if(2&e){const e=t.$implicit,a=r.oc(2);r.Nc("background-color",e.colorValue),r.Mb("color-selected",a.selectedColorItem.colorCode===e.colorValue)}}function ns(e,t){if(1&e&&(r.ac(0,"div",23),r.Oc(1,as,1,4,"div",24),r.Zb()),2&e){const e=r.oc();r.Hb(1),r.uc("ngForOf",null==e.fabricCanvasHandlerService||null==e.fabricCanvasHandlerService.elementProps?null:e.fabricCanvasHandlerService.elementProps.groupColors)}}function is(e,t){if(1&e){const e=r.bc();r.ac(0,"div",26),r.ac(1,"span",27),r.Qc(2,"Border Width"),r.Zb(),r.ac(3,"input",28),r.kc("ngModelChange",function(t){return r.Ic(e),r.oc().fabricCanvasHandlerService.elementProps.strokeWidth=t})("input",function(){return r.Ic(e),r.oc().fabricCanvasHandlerService.basicToolsHandler.setStrokeWidth()}),r.Zb(),r.ac(4,"span",29),r.Qc(5),r.Zb(),r.Zb()}if(2&e){const e=r.oc();r.Hb(3),r.uc("ngModel",e.fabricCanvasHandlerService.elementProps.strokeWidth),r.Hb(2),r.Rc(null==e.fabricCanvasHandlerService||null==e.fabricCanvasHandlerService.elementProps?null:e.fabricCanvasHandlerService.elementProps.strokeWidth)}}function rs(e,t){if(1&e){const e=r.bc();r.ac(0,"div",30),r.kc("colorPickerChange",function(t){return r.Ic(e),r.oc().selectedColorItem.colorCode=t})("colorPickerChange",function(){return r.Ic(e),r.oc().setElementFill()}),r.Zb()}if(2&e){const e=r.oc();r.uc("cpToggle",!0)("cpWidth","286px")("cpDialogDisplay","inline")("colorPicker",e.selectedColorItem.colorCode)}}function ss(e,t){1&e&&(r.ac(0,"div"),r.ac(1,"span",31),r.Qc(2,"Brand Preset Colors"),r.Zb(),r.Zb())}function os(e,t){if(1&e){const e=r.bc();r.ac(0,"div",34),r.kc("click",function(){r.Ic(e);const a=t.$implicit;return r.oc(2).setObjectFillOrBorder(a)})("mouseenter",function(){r.Ic(e);const a=t.$implicit;return r.oc(2).fillPreview(a)})("mouseleave",function(){return r.Ic(e),r.oc(2).detachFillPreview()}),r.Zb()}if(2&e){const e=t.$implicit,a=r.oc(2);r.Nc("background-color",e),r.Mb("color-selected",a.selectedColorItem.colorCode===e)}}function cs(e,t){if(1&e&&(r.ac(0,"div",32),r.ac(1,"span",33),r.Qc(2),r.Zb(),r.ac(3,"div",20),r.Oc(4,os,1,4,"div",21),r.Zb(),r.Zb()),2&e){const e=t.$implicit;r.Hb(2),r.Sc("",e.brandPresetName," Colors"),r.Hb(2),r.uc("ngForOf",e.colors)}}function ls(e,t){if(1&e){const e=r.bc();r.ac(0,"div",34),r.kc("click",function(){r.Ic(e);const a=t.$implicit;return r.oc().setObjectFillOrBorder(a)})("mouseenter",function(){r.Ic(e);const a=t.$implicit;return r.oc().fillPreview(a)})("mouseleave",function(){return r.Ic(e),r.oc().detachFillPreview()}),r.Zb()}if(2&e){const e=t.$implicit,a=r.oc();r.Nc("background-color",e),r.Mb("color-selected",a.selectedColorItem.colorCode===e)}}let ds=(()=>{class e{constructor(e,t,a,n){this._utilsService=e,this.fabricCanvasHandlerService=t,this._gaEventsService=a,this._editorBrandPresetService=n,this.isSidebarItemActivated=!1,this.subscriptionsList=new p.a,this.brandPresetsList=[],this.objectFillOpacity="100%",this.objectBorderFillOpacity="100%",this.selectedColorItem={item:"fill",colorCode:"#eee",groupItemColor:null},this.brandPresetsColorsList=[],this.documentColors=[],this.defaultColors=["#000000","#595959","#A8A8A8","#D9D9D9","#ffffff","#FF3333","#F15A24","#F7931E","#FCEE21","#8CC63F","#39B54A","#009245","#00A99D","#29ABE2","#0988AF","#1B1464","#004AAD","#5271FF","#8BA0FF","#C8C7FF","#F798A0","#FF66C4","#ED1E79"],this.debouncedFillPreview=m()(e=>{this.fabricCanvasHandlerService.basicToolsHandler.setElementFill(e,!0)},0,{leading:!0,trailing:!1}),this.debouncedDefaultFillPreview=m()(()=>{this.fabricCanvasHandlerService.basicToolsHandler.restoreObjectFill()},0,{leading:!0,trailing:!1}),this.debouncedBorderFillPreview=m()(e=>{this.fabricCanvasHandlerService.basicToolsHandler.setStrokeColor(e,!0)},0,{leading:!0,trailing:!1}),this.debouncedDefaultBorderFillPreview=m()(()=>{this.fabricCanvasHandlerService.basicToolsHandler.restoreObjectsStrokeColor()},0,{leading:!0,trailing:!1})}ngOnInit(){this.subscriptionsList.add(this._editorBrandPresetService.brandPresetsList.subscribe(e=>{e&&(this.brandPresetsList=e,this.extractBrandPresetColors())})).add(this._utilsService.activeSidebarItem.subscribe(e=>{"fillOrBorder"===(null==e?void 0:e.sidebarItemId)?(this.isSidebarItemActivated=!0,this.getObjectFillOpacity(),this.getObjectBorderFillOpacity(),this.fabricCanvasHandlerService.basicToolsHandler.objectFillOrBorderMode="fill",this.selectedColorItem.colorCode=this.fabricCanvasHandlerService.elementProps.fill):"groupColors"===(null==e?void 0:e.sidebarItemId)?(this.isSidebarItemActivated=!0,this.selectedColorItem.colorCode=this.fabricCanvasHandlerService.elementProps.groupColors[0].colorValue,this.selectedColorItem.groupItemColor=this.fabricCanvasHandlerService.elementProps.groupColors[0],this.fabricCanvasHandlerService.elementProps.groupColors[0].selected=!0):this.resetValues()}))}ngOnDestroy(){this.subscriptionsList.unsubscribe()}resetValues(){this.fabricCanvasHandlerService.basicToolsHandler.objectFillOrBorderMode="fill",this.objectFillOpacity="100%",this.objectBorderFillOpacity="100%"}initEyeDropper(){this.fabricCanvasHandlerService.eyeDropperHandler.eyeDropperMode?this.fabricCanvasHandlerService.eyeDropperHandler.resetEyeDropper():(this.fabricCanvasHandlerService.eyeDropperHandler.initEyeDropper(),this._gaEventsService.eventEmitter("Eye dropper feature","Eye dropper selected","Eye dropper selected"))}getObjectFillOpacity(){if(String(this.fabricCanvasHandlerService.elementProps.fill).includes("rgb"))try{const e=String(this.fabricCanvasHandlerService.elementProps.fill).replace(/^.*,(.+)\)/,"$1");this.objectFillOpacity=`${(100*Number(e)).toFixed(0)}%`}catch(e){this.objectFillOpacity="100%"}else this.objectFillOpacity="100%"}getObjectBorderFillOpacity(){if(String(this.fabricCanvasHandlerService.elementProps.strokeColor).includes("rgb"))try{const e=String(this.fabricCanvasHandlerService.elementProps.strokeColor).replace(/^.*,(.+)\)/,"$1");this.objectBorderFillOpacity=`${(100*Number(e)).toFixed(0)}%`}catch(e){this.objectBorderFillOpacity="100%"}else this.objectBorderFillOpacity="100%"}selectGroupItemColor(e){this.selectedColorItem.colorCode=e.colorValue,this.selectedColorItem.groupItemColor=e}setElementFill(){if("svg"===this.fabricCanvasHandlerService.elementProps.fillType){let e=this.fabricCanvasHandlerService.elementProps.groupColors.findIndex(e=>e.colorValue===this.selectedColorItem.groupItemColor.colorValue);-1!=e&&(this.fabricCanvasHandlerService.elementProps.groupColors[e].colorValue=this.selectedColorItem.colorCode),this.fabricCanvasHandlerService.basicToolsHandler.setSVGGroupPathFill(this.selectedColorItem.groupItemColor,this.selectedColorItem.colorCode)}else"fill"===this.fabricCanvasHandlerService.basicToolsHandler.objectFillOrBorderMode&&this.fabricCanvasHandlerService.elementProps.isFill?(this.fabricCanvasHandlerService.elementProps.fill=this.selectedColorItem.colorCode,this.fabricCanvasHandlerService.basicToolsHandler.setElementFill(),this.getObjectFillOpacity()):"border"===this.fabricCanvasHandlerService.basicToolsHandler.objectFillOrBorderMode&&this.fabricCanvasHandlerService.elementProps.isStroke&&(this.fabricCanvasHandlerService.elementProps.strokeColor=this.selectedColorItem.colorCode,this.fabricCanvasHandlerService.basicToolsHandler.setStrokeColor(),this.getObjectBorderFillOpacity())}toggleStroke(){this.fabricCanvasHandlerService.basicToolsHandler.toggleStroke(),this.objectBorderFillOpacity=this.fabricCanvasHandlerService.elementProps.isStroke?"100%":"0%"}toggleFill(){this.fabricCanvasHandlerService.basicToolsHandler.toggleFill(),this.objectBorderFillOpacity=this.fabricCanvasHandlerService.elementProps.isFill?"100%":"0%"}extractBrandPresetColors(){for(let e of this.brandPresetsList)this.brandPresetsColorsList.push({brandPresetName:e.preset_name,colors:[e.blend.bg,e.blend.head,e.blend.sub,e.blend.svg]})}setObjectFillOrBorderMode(e){this.fabricCanvasHandlerService.basicToolsHandler.objectFillOrBorderMode=e,this.selectedColorItem.item=e,"fill"===e?this.selectedColorItem.colorCode=this.fabricCanvasHandlerService.elementProps.fill:"border"===e&&(this.selectedColorItem.colorCode=this.fabricCanvasHandlerService.elementProps.strokeColor)}setObjectFillOrBorder(e){this.selectedColorItem.colorCode=e,this.setElementFill()}fillPreview(e){"fill"===this.fabricCanvasHandlerService.basicToolsHandler.objectFillOrBorderMode&&this.fabricCanvasHandlerService.elementProps.isFill?this.debouncedFillPreview(e):"border"===this.fabricCanvasHandlerService.basicToolsHandler.objectFillOrBorderMode&&this.fabricCanvasHandlerService.elementProps.isStroke&&this.debouncedBorderFillPreview(e)}detachFillPreview(){"fill"===this.fabricCanvasHandlerService.basicToolsHandler.objectFillOrBorderMode&&this.fabricCanvasHandlerService.elementProps.isFill?this.debouncedDefaultFillPreview():"border"===this.fabricCanvasHandlerService.basicToolsHandler.objectFillOrBorderMode&&this.fabricCanvasHandlerService.elementProps.isStroke&&this.debouncedDefaultBorderFillPreview()}}return e.\u0275fac=function(t){return new(t||e)(r.Ub(xe),r.Ub(ke),r.Ub(F.a),r.Ub(at))},e.\u0275cmp=r.Ob({type:e,selectors:[["app-object-color-border-mode-sidebar"]],decls:33,vars:25,consts:[[1,"fill-border-wrapper"],[1,"scrollableContainer"],[1,"d-flex","flex-column"],["class","primary-text","style","font-weight: 500",4,"ngIf"],["style","margin-top: 16px","class","colors-list",4,"ngIf"],[1,"d-flex","flex-row","align-items-center","fill-border-box",3,"click"],["ngbTooltip","Eye Dropper","placement","bottom",1,"btn","panel-button-setting","active",3,"click"],["svgIcon","color-picker",2,"width","18px","height","18px"],[1,"rectangle-fill"],[1,"primary-text","flex-grow-1",2,"font-weight","700","font-size","12px"],[1,"primary-text",2,"font-weight","500","margin-right","10px","font-size","11px"],["type","checkbox",3,"ngModel","change","ngModelChange"],[1,"d-flex","flex-row","align-items-center","fill-border-box","mt-2",3,"click"],["class","d-flex flex-row align-items-center mt-2 mb-1",4,"ngIf"],["class","fill-border-colorpicker mt-2",3,"cpToggle","cpWidth","cpDialogDisplay","colorPicker","colorPickerChange",4,"ngIf"],[4,"ngIf"],["class","colors-boxes-wrapper mt-3",4,"ngFor","ngForOf"],[1,"hr-separator","my-3"],[1,"colors-boxes-wrapper","mt-1"],[1,"primary-text",2,"font-size","13px","font-weight","700"],[1,"colors-list","mt-3"],["class","color-box",3,"color-selected","background-color","click","mouseenter","mouseleave",4,"ngFor","ngForOf"],[1,"primary-text",2,"font-weight","500"],[1,"colors-list",2,"margin-top","16px"],["class","color-box",3,"color-selected","background-color","click",4,"ngFor","ngForOf"],[1,"color-box",3,"click"],[1,"d-flex","flex-row","align-items-center","mt-2","mb-1"],[1,"primary-text",2,"font-size","11px","font-weight","500","width","60%"],["type","range","min","0","max","100","step","1","id","customRange2",1,"custom-range","flex-grow-1",3,"ngModel","ngModelChange","input"],[1,"primary-text",2,"font-size","11px","font-weight","500","padding-left","10px"],[1,"fill-border-colorpicker","mt-2",3,"cpToggle","cpWidth","cpDialogDisplay","colorPicker","colorPickerChange"],[1,"primary-text",2,"font-weight","700","font-size","18px"],[1,"colors-boxes-wrapper","mt-3"],[1,"primary-text",2,"font-size","13px","font-weight","600"],[1,"color-box",3,"click","mouseenter","mouseleave"]],template:function(e,t){1&e&&(r.ac(0,"div",0),r.ac(1,"div",1),r.ac(2,"div",2),r.Oc(3,ts,2,0,"div",3),r.Oc(4,ns,2,1,"div",4),r.ac(5,"div",5),r.kc("click",function(){return t.setObjectFillOrBorderMode("fill")}),r.ac(6,"button",6),r.kc("click",function(){return t.initEyeDropper()}),r.Vb(7,"mat-icon",7),r.Zb(),r.Vb(8,"span",8),r.ac(9,"span",9),r.Qc(10,"Fill"),r.Zb(),r.ac(11,"span",10),r.Qc(12),r.Zb(),r.ac(13,"input",11),r.kc("change",function(){return t.toggleFill()})("ngModelChange",function(e){return t.fabricCanvasHandlerService.elementProps.isFill=e}),r.Zb(),r.Zb(),r.ac(14,"div",12),r.kc("click",function(){return t.setObjectFillOrBorderMode("border")}),r.ac(15,"button",6),r.kc("click",function(){return t.initEyeDropper()}),r.Vb(16,"mat-icon",7),r.Zb(),r.Vb(17,"span",8),r.ac(18,"span",9),r.Qc(19,"Border"),r.Zb(),r.ac(20,"span",10),r.Qc(21),r.Zb(),r.ac(22,"input",11),r.kc("change",function(){return t.toggleStroke()})("ngModelChange",function(e){return t.fabricCanvasHandlerService.elementProps.isStroke=e}),r.Zb(),r.Zb(),r.Oc(23,is,6,2,"div",13),r.Oc(24,rs,1,4,"div",14),r.Oc(25,ss,3,0,"div",15),r.Oc(26,cs,5,2,"div",16),r.Vb(27,"div",17),r.ac(28,"div",18),r.ac(29,"span",19),r.Qc(30,"Default Colors"),r.Zb(),r.ac(31,"div",20),r.Oc(32,ls,1,4,"div",21),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb()),2&e&&(r.Hb(3),r.uc("ngIf","svg"===t.fabricCanvasHandlerService.elementProps.fillType),r.Hb(1),r.uc("ngIf","svg"===t.fabricCanvasHandlerService.elementProps.fillType),r.Hb(1),r.Mb("mt-4","svg"===t.fabricCanvasHandlerService.elementProps.fillType)("active-mode","fill"===t.fabricCanvasHandlerService.basicToolsHandler.objectFillOrBorderMode),r.Hb(1),r.Mb("selected",t.fabricCanvasHandlerService.eyeDropperHandler.eyeDropperMode&&"fill"===t.fabricCanvasHandlerService.basicToolsHandler.objectFillOrBorderMode),r.Hb(2),r.Nc("background-color",null==t.fabricCanvasHandlerService||null==t.fabricCanvasHandlerService.elementProps?null:t.fabricCanvasHandlerService.elementProps.fill),r.Hb(4),r.Sc(" ",t.objectFillOpacity," "),r.Hb(1),r.uc("ngModel",t.fabricCanvasHandlerService.elementProps.isFill),r.Hb(1),r.Mb("active-mode","border"===t.fabricCanvasHandlerService.basicToolsHandler.objectFillOrBorderMode),r.Hb(1),r.Mb("selected",t.fabricCanvasHandlerService.eyeDropperHandler.eyeDropperMode&&"border"===t.fabricCanvasHandlerService.basicToolsHandler.objectFillOrBorderMode),r.Hb(2),r.Nc("background-color",null==t.fabricCanvasHandlerService||null==t.fabricCanvasHandlerService.elementProps?null:t.fabricCanvasHandlerService.elementProps.strokeColor),r.Hb(4),r.Sc(" ",t.objectBorderFillOpacity," "),r.Hb(1),r.uc("ngModel",t.fabricCanvasHandlerService.elementProps.isStroke),r.Hb(1),r.uc("ngIf",t.fabricCanvasHandlerService.elementProps.isStroke),r.Hb(1),r.uc("ngIf",t.isSidebarItemActivated),r.Hb(1),r.uc("ngIf",t.brandPresetsColorsList.length>0),r.Hb(1),r.uc("ngForOf",t.brandPresetsColorsList),r.Hb(6),r.uc("ngForOf",t.defaultColors))},directives:[k.m,T.q,Le.a,O.a,O.i,O.l,k.l,O.p,O.b,Vn.a],styles:[".fill-border-wrapper[_ngcontent-%COMP%]   .rectangle-fill[_ngcontent-%COMP%]{width:20px;height:20px;border-radius:4px;margin:0 6px;border:.5px solid rgba(174,174,192,.5);transition:all .3s}.fill-border-wrapper[_ngcontent-%COMP%]   .active-mode[_ngcontent-%COMP%]{border:1px solid #5f58b7!important;border-radius:4px}.fill-border-wrapper[_ngcontent-%COMP%]   .fill-border-box[_ngcontent-%COMP%]{cursor:pointer;padding:4px 6px;border:1px solid transparent}"]}),e})();var ps=a("UhSo");function hs(e,t){1&e&&r.Vb(0,"span",44)}function us(e,t){1&e&&(r.ac(0,"span"),r.Qc(1,"Upload Custom Font"),r.Zb())}function bs(e,t){1&e&&(r.ac(0,"span",19),r.Qc(1,"User Fonts"),r.Zb())}function gs(e,t){if(1&e){const e=r.bc();r.ac(0,"div",45),r.ac(1,"div",46),r.kc("click",function(){r.Ic(e);const a=t.$implicit;return r.oc().deleteUserFont(a)}),r.Vb(2,"mat-icon",47),r.Zb(),r.ac(3,"div",48),r.kc("mouseenter",function(){r.Ic(e);const a=t.$implicit;return r.oc().fontPreview(a)})("mouseleave",function(){r.Ic(e);const a=t.$implicit;return r.oc().detachFontPreview(a)})("click",function(){r.Ic(e);const a=t.$implicit;return r.oc().fabricCanvasHandler.textElementHandler.setFontFamily(a)}),r.Vb(4,"img",49),r.Zb(),r.Zb()}if(2&e){const e=t.$implicit;r.Hb(4),r.uc("lazyLoad",e.font_preview_url)}}function fs(e,t){if(1&e){const e=r.bc();r.ac(0,"div",50),r.kc("mouseenter",function(){r.Ic(e);const a=t.$implicit;return r.oc().fontPreview(a)})("mouseleave",function(){r.Ic(e);const a=t.$implicit;return r.oc().detachFontPreview(a)})("click",function(){r.Ic(e);const a=t.$implicit;return r.oc().fabricCanvasHandler.textElementHandler.setFontFamily(a)}),r.Vb(1,"img",51),r.Zb()}if(2&e){const e=t.$implicit;r.Hb(1),r.uc("lazyLoad",e.font_preview_url)}}function vs(e,t){if(1&e){const e=r.bc();r.ac(0,"div",52),r.kc("click",function(){r.Ic(e);const a=t.$implicit;return r.oc().fabricCanvasHandler.textElementHandler.setFontSizeFromDropdown(a)}),r.Qc(1),r.Zb()}if(2&e){const e=t.$implicit;r.Hb(1),r.Sc(" ",e," ")}}function ms(e,t){if(1&e){const e=r.bc();r.ac(0,"button",31),r.kc("click",function(){r.Ic(e);const a=t.$implicit;return r.oc().fabricCanvasHandler.textElementHandler.setTextAlign(a.id)}),r.Vb(1,"mat-icon",53),r.Zb()}if(2&e){const e=t.$implicit,a=r.oc();r.Mb("selected",a.fabricCanvasHandler.elementProps.textAlign===e.id),r.Hb(1),r.vc("svgIcon",e.icon)}}const Cs=function(){return[12,24,36,48,72,96,108,120,144]};let ws=(()=>{class e{constructor(e,t,a,n,i,r,s,o){this.document=e,this.fabricCanvasHandler=t,this._editorService=a,this._utilsService=n,this._userService=i,this._linkService=r,this._toastService=s,this._gaEventsService=o,this.textAlignmentOptions=[{id:"left",icon:"text_align_left"},{id:"center",icon:"text_align_center"},{id:"right",icon:"text_align_right"},{id:"justify",icon:"text_align_justify"}],this.isFontUploading=!1,this.isSidebarItemActivated=!1,this.pageNum=1,this.pageSize=100,this.searchFonts="",this.subscriptionsList=new p.a,this.debouncedFontPreview=m()(e=>{this._utilsService.sendDataToSend({type:"font-family-preview",objectData:e})},1e3,{leading:!1,trailing:!0}),this.debouncedDefaultFontPreview=m()(e=>{this._utilsService.sendDataToSend({type:"previous-font-family",objectData:e})},1500,{leading:!0,trailing:!0})}ngOnInit(){this.subscriptionsList.add(this._utilsService.activeSidebarItem.subscribe(e=>{if("textProps"===(null==e?void 0:e.sidebarItemId)){if(this.isSidebarItemActivated)return;this.isSidebarItemActivated=!0,this._userService.getUserId()===f.a.USER_NOT_LOGGED_IN?this.getGoogleFonts():this.getGoogleFontsAndCustomFonts()}})).add(this._userService.user.subscribe(e=>{e&&this.getGoogleFontsAndCustomFonts()}))}ngOnDestroy(){this.subscriptionsList.unsubscribe()}openFileExplorer(){this.document.getElementById("fontFileInput").click()}onFileInput(e){if(e.target.files&&e.target.files[0]){let t=e.target.files[0].type;if(console.log(t),""==t){if(!/\.(otf|ttf)/i.test(e.target.files[0].name))return alert("Only OTF and TTF files are allowed!")}else if("application/vnd.oasis.opendocument.formula-template"!=t&&"font/ttf"!=t&&"font/otf"!=t)return this._toastService.show("Only OTF and TTF files are allowed!",{classname:"bg-danger text-light",delay:5e3});if(e.target.files[0].size/1e3/1e3>f.a.MAX_FONT_FILE_UPLOAD)return e.srcElement.value=null,this._toastService.show(`File cannot be more than ${f.a.MAX_FONT_FILE_UPLOAD} MB`,{classname:"bg-danger text-light",delay:5e3});this.isFontUploading=!0;const a=e.target.files[0],n=a.name.split(".")[0],i=new FormData;i.append("file",a,a.name),i.append("fontName",n),i.append("user_id",this._userService.getUserId()),i.append("workspace_id",this._userService.getCurrentUserWorkspaceId()),this._editorService.uploadFont(i).subscribe(e=>{this.isFontUploading=!1,e.asset.isCustomFont=!0,this.allFontsList.userFontsList.unshift(e.asset),this.addFontFaceToCssFile(e.asset),this._gaEventsService.eventEmitter("Fonts feature","Custom font uploaded",`Custom font uploaded - ${a.name}`)},e=>{throw this.isFontUploading=!1,e})}e.srcElement.value=null}deleteUserFont(e){confirm("Are you sure you want to delete the font?")&&this._editorService.deleteUserFont(e._id).subscribe(t=>{this._toastService.show("Font deleted successfully",{classname:"bg-success text-light",delay:5e3});let a=this.allFontsList.userFontsList.findIndex(t=>t._id===e._id);-1!=a&&this.allFontsList.userFontsList.splice(a,1)},e=>{throw this._toastService.show("Error deleting font, please try again",{classname:"bg-danger text-light",delay:5e3}),e})}fontPreview(e){this.debouncedFontPreview(e)}detachFontPreview(e){this.debouncedDefaultFontPreview(e)}addFontFaceToCssFile(e){let t="truetype";String(e.font_file_url).includes(".otf")&&(t="opentype");let a=`@font-face {\n        font-family: '${e.font_name}';\n        src: url(${encodeURI(e.font_file_url)}) format('${t}');\n    }`;this._linkService.createStyleTagAndAppendCssToIt(a)}getGoogleFonts(){this._editorService.getGoogleFonts().subscribe(e=>{this.allFontsList=e})}getGoogleFontsAndCustomFonts(){this._editorService.getUserUploadedFontsByUserId(this.pageNum,this.pageSize,this._userService.getUserId(),this._userService.getCurrentUserWorkspaceId(),!1).subscribe(e=>{this.allFontsList=e})}}return e.\u0275fac=function(t){return new(t||e)(r.Ub(k.d),r.Ub(ke),r.Ub(fe.a),r.Ub(xe),r.Ub(P.a),r.Ub(tt),r.Ub(E.a),r.Ub(F.a))},e.\u0275cmp=r.Ob({type:e,selectors:[["app-text-properties-mode-sidebar"]],inputs:{allFontsList:"allFontsList"},decls:55,vars:33,consts:[[1,"text-props-wrapper"],[1,"d-flex","flex-row"],["ngbDropdown","","display","dynamic","placement","bottom-left",1,"flex-grow-1","panel-dropdown"],["ngbDropdownToggle","",1,"d-flex","flex-row","btn-block"],[1,"text-truncate","flex-grow-1",2,"max-width","9.8rem"],["svgIcon","arrow_down",1,"arrow-down-icon"],["ngbDropdownMenu","",1,"panel-dropdown-menu","w-100","p-0"],[1,"search-fonts-wrapper","p-2"],[1,"btn","btn-block","btn-secondary","text-center",3,"disabled","click"],["class","spinner-border spinner-border-sm mr-1",4,"ngIf"],[4,"ngIf"],["type","file","id","fontFileInput",2,"display","none",3,"change"],["fileInput",""],[1,"hr-separator",2,"margin","10px 0px"],["placeholder","Search Fonts","type","text",1,"form-control","editor-form-control","mt-2","search-font-input",3,"ngModel","ngModelChange"],[1,"hr-separator"],[1,"scrollableContainer","p-0"],["class","primary-text",4,"ngIf"],["class","dropdown-item position-relative",4,"ngFor","ngForOf"],[1,"primary-text"],["class","font-preview-wrapper dropdown-item",3,"mouseenter","mouseleave","click",4,"ngFor","ngForOf"],["ngbDropdown","","display","dynamic","placement","bottom-left",1,"panel-dropdown",2,"width","4.5rem","margin-left","8px"],["ngbDropdownToggle",""],[1,"position-absolute","cursor-pointer",2,"right","6px","top","15px"],["type","text",1,"form-control","editor-form-control","form-control-panel","form-control-lg","primary-text",2,"border","1.5px solid transparent",3,"ngModel","change","ngModelChange"],["ngbDropdownMenu","",1,"panel-dropdown-menu","w-100"],["class","dropdown-item text-center",3,"click",4,"ngFor","ngForOf"],[1,"d-flex","flex-column"],[1,"tool-options-grid-row",2,"margin-top","30px","grid-auto-columns","min-content","gap","12px","grid-template-columns","none"],[1,"btn","panel-button-setting",3,"disabled","click"],["svgIcon","bold3"],[1,"btn","panel-button-setting","active",3,"click"],["svgIcon","italic3"],["svgIcon","underline3"],["svgIcon","strikethrough3"],["class","btn panel-button-setting active",3,"selected","click",4,"ngFor","ngForOf"],[1,"d-flex","flex-row","align-items-center",2,"margin-top","30px"],["disabled","",2,"margin-right","12px","cursor","default"],["svgIcon","letter_spacing",1,"secondary-text"],["type","range","min","0","max","500","step","1",1,"form-control-range","custom-range","flex-grow-1",3,"ngModel","ngModelChange","input"],["type","number","min","0","max","500","step","1",1,"form-control","editor-form-control","form-control-panel","form-control-sm","text-input",2,"width","3rem","text-align","center","margin-left","12px","border","1.5px solid transparent",3,"ngModel","ngModelChange","input"],["svgIcon","line_spacing",1,"secondary-text"],["type","range","min","0.5","max","3","step","0.1",1,"form-control-range","custom-range","flex-grow-1",3,"ngModel","ngModelChange","input"],["type","number","min","0.5","max","3","step","0.1",1,"form-control","editor-form-control","form-control-panel","form-control-sm","text-input",2,"width","3rem","text-align","center","margin-left","12px","border","1.5px solid transparent",3,"ngModel","ngModelChange","input"],[1,"spinner-border","spinner-border-sm","mr-1"],[1,"dropdown-item","position-relative"],[1,"delete-wrapper","position-absolute",3,"click"],["svgIcon","delete"],[1,"font-preview-wrapper",3,"mouseenter","mouseleave","click"],["src","data:image/jpg;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mN89B8AAskB44g04okAAAAASUVORK5CYII=","alt","font",1,"user-font-img","font-img","img-opacity-fadein",3,"lazyLoad"],[1,"font-preview-wrapper","dropdown-item",3,"mouseenter","mouseleave","click"],["src","data:image/jpg;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mN89B8AAskB44g04okAAAAASUVORK5CYII=","alt","font",1,"system-font-img","font-img","img-opacity-fadein",3,"lazyLoad"],[1,"dropdown-item","text-center",3,"click"],[3,"svgIcon"]],template:function(e,t){1&e&&(r.ac(0,"div",0),r.ac(1,"div",1),r.ac(2,"div",2),r.ac(3,"button",3),r.ac(4,"span",4),r.Qc(5),r.Zb(),r.Vb(6,"mat-icon",5),r.Zb(),r.ac(7,"div",6),r.ac(8,"div",7),r.ac(9,"div"),r.ac(10,"button",8),r.kc("click",function(){return t.openFileExplorer()}),r.Oc(11,hs,1,0,"span",9),r.Oc(12,us,2,0,"span",10),r.Zb(),r.ac(13,"input",11,12),r.kc("change",function(e){return t.onFileInput(e)}),r.Zb(),r.Zb(),r.Vb(15,"div",13),r.ac(16,"input",14),r.kc("ngModelChange",function(e){return t.searchFonts=e}),r.Zb(),r.Zb(),r.Vb(17,"div",15),r.ac(18,"div",16),r.Oc(19,bs,2,0,"span",17),r.Oc(20,gs,5,1,"div",18),r.pc(21,"filter"),r.ac(22,"span",19),r.Qc(23,"System Fonts"),r.Zb(),r.Oc(24,fs,2,1,"div",20),r.pc(25,"filter"),r.Zb(),r.Zb(),r.Zb(),r.ac(26,"div",21),r.ac(27,"div",22),r.ac(28,"div",23),r.Vb(29,"mat-icon",5),r.Zb(),r.ac(30,"input",24),r.kc("change",function(){return t.fabricCanvasHandler.textElementHandler.setFontSize()})("ngModelChange",function(e){return t.fabricCanvasHandler.elementProps.fontSize=e}),r.Zb(),r.Zb(),r.ac(31,"div",25),r.Oc(32,vs,2,1,"div",26),r.Zb(),r.Zb(),r.Zb(),r.ac(33,"div",27),r.ac(34,"div",28),r.ac(35,"button",29),r.kc("click",function(){return t.fabricCanvasHandler.textElementHandler.setTextAttributes("bold")}),r.Vb(36,"mat-icon",30),r.Zb(),r.ac(37,"button",31),r.kc("click",function(){return t.fabricCanvasHandler.textElementHandler.setTextAttributes("italic")}),r.Vb(38,"mat-icon",32),r.Zb(),r.ac(39,"button",31),r.kc("click",function(){return t.fabricCanvasHandler.textElementHandler.setTextAttributes("underline")}),r.Vb(40,"mat-icon",33),r.Zb(),r.ac(41,"button",31),r.kc("click",function(){return t.fabricCanvasHandler.textElementHandler.setTextAttributes("linethrough")}),r.Vb(42,"mat-icon",34),r.Zb(),r.Zb(),r.ac(43,"div",28),r.Oc(44,ms,2,3,"button",35),r.Zb(),r.ac(45,"div",36),r.ac(46,"button",37),r.Vb(47,"mat-icon",38),r.Zb(),r.ac(48,"input",39),r.kc("ngModelChange",function(e){return t.fabricCanvasHandler.elementProps.charSpacing=e})("input",function(){return t.fabricCanvasHandler.textElementHandler.setCharSpacing()}),r.Zb(),r.ac(49,"input",40),r.kc("ngModelChange",function(e){return t.fabricCanvasHandler.elementProps.charSpacing=e})("input",function(){return t.fabricCanvasHandler.textElementHandler.setCharSpacing()}),r.Zb(),r.Zb(),r.ac(50,"div",36),r.ac(51,"button",37),r.Vb(52,"mat-icon",41),r.Zb(),r.ac(53,"input",42),r.kc("ngModelChange",function(e){return t.fabricCanvasHandler.elementProps.lineHeight=e})("input",function(){return t.fabricCanvasHandler.textElementHandler.setLineHeight()}),r.Zb(),r.ac(54,"input",43),r.kc("ngModelChange",function(e){return t.fabricCanvasHandler.elementProps.lineHeight=e})("input",function(){return t.fabricCanvasHandler.textElementHandler.setLineHeight()}),r.Zb(),r.Zb(),r.Zb(),r.Zb()),2&e&&(r.Hb(5),r.Sc(" ",t.fabricCanvasHandler.elementProps.fontFamily," "),r.Hb(5),r.uc("disabled",t.isFontUploading),r.Hb(1),r.uc("ngIf",t.isFontUploading),r.Hb(1),r.uc("ngIf",!t.isFontUploading),r.Hb(4),r.uc("ngModel",t.searchFonts),r.Hb(3),r.uc("ngIf",(null==t.allFontsList?null:t.allFontsList.userFontsList.length)>0),r.Hb(1),r.uc("ngForOf",r.rc(21,26,null==t.allFontsList?null:t.allFontsList.userFontsList,t.searchFonts)),r.Hb(4),r.uc("ngForOf",r.rc(25,29,null==t.allFontsList?null:t.allFontsList.googleFontsList,t.searchFonts)),r.Hb(6),r.uc("ngModel",t.fabricCanvasHandler.elementProps.fontSize),r.Hb(2),r.uc("ngForOf",r.xc(32,Cs)),r.Hb(3),r.Mb("active",t.fabricCanvasHandler.elementProps.isBold)("selected","bold"==t.fabricCanvasHandler.elementProps.fontWeight),r.uc("disabled",!t.fabricCanvasHandler.elementProps.isBold),r.Hb(2),r.Mb("selected","italic"==t.fabricCanvasHandler.elementProps.fontStyle),r.Hb(2),r.Mb("selected",t.fabricCanvasHandler.elementProps.underline),r.Hb(2),r.Mb("selected",t.fabricCanvasHandler.elementProps.linethrough),r.Hb(3),r.uc("ngForOf",t.textAlignmentOptions),r.Hb(4),r.uc("ngModel",t.fabricCanvasHandler.elementProps.charSpacing),r.Hb(1),r.uc("ngModel",t.fabricCanvasHandler.elementProps.charSpacing),r.Hb(4),r.uc("ngModel",t.fabricCanvasHandler.elementProps.lineHeight),r.Hb(1),r.uc("ngModel",t.fabricCanvasHandler.elementProps.lineHeight))},directives:[T.f,T.j,Le.a,T.h,k.m,O.b,O.i,O.l,k.l,O.p,O.n,Ze.a],pipes:[ps.a],styles:[".text-props-wrapper[_ngcontent-%COMP%]   .panel-dropdown-menu[_ngcontent-%COMP%]{min-height:24rem;max-height:28rem}.text-props-wrapper[_ngcontent-%COMP%]   .panel-dropdown-menu[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]:hover   .delete-wrapper[_ngcontent-%COMP%]{display:block!important}.text-props-wrapper[_ngcontent-%COMP%]   .panel-dropdown-menu[_ngcontent-%COMP%]   .scrollableContainer[_ngcontent-%COMP%]{top:104px;overflow-y:auto}.text-props-wrapper[_ngcontent-%COMP%]   .panel-dropdown-menu[_ngcontent-%COMP%]   .scrollableContainer[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:600;font-size:10px;padding:8px 20px;width:100%}.text-props-wrapper[_ngcontent-%COMP%]   .delete-wrapper[_ngcontent-%COMP%]{display:none;right:4px;top:50%;transform:translateY(-50%)}.text-props-wrapper[_ngcontent-%COMP%]   .delete-wrapper[_ngcontent-%COMP%]:hover   .mat-icon[_ngcontent-%COMP%]{transition:all .3s;opacity:.7}.text-props-wrapper[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{padding:8px 12px}.text-props-wrapper[_ngcontent-%COMP%]   .font-img[_ngcontent-%COMP%]{max-width:140px;min-width:70px;display:block;margin:0 auto}.text-props-wrapper[_ngcontent-%COMP%]   .system-font-img[_ngcontent-%COMP%]{width:70px}"]}),e})();function _s(e,t){if(1&e&&(r.ac(0,"span",14),r.Qc(1),r.Zb()),2&e){const e=r.oc().$implicit;r.Hb(1),r.Rc(e.title)}}function ys(e,t){if(1&e){const e=r.bc();r.ac(0,"div",17),r.ac(1,"input",18),r.kc("ngModelChange",function(t){r.Ic(e);const a=r.oc().$implicit,n=r.oc().$implicit;return r.oc(3).fabricCanvasHandler.elementProps.imageEffects[a.id||n.id||n.title.toLowerCase()]=t})("input",function(){r.Ic(e);const t=r.oc(2).$implicit;return r.oc(3).applyImageEffect(t.id||t.title.toLowerCase())}),r.Zb(),r.ac(2,"input",19),r.kc("ngModelChange",function(t){r.Ic(e);const a=r.oc().$implicit,n=r.oc().$implicit;return r.oc(3).fabricCanvasHandler.elementProps.imageEffects[a.id||n.id||n.title.toLowerCase()]=t})("input",function(){r.Ic(e);const t=r.oc(2).$implicit;return r.oc(3).applyImageEffect(t.id||t.title.toLowerCase())}),r.Zb(),r.Zb()}if(2&e){const e=r.oc().$implicit,t=r.oc().$implicit,a=r.oc(3);r.Hb(1),r.vc("min",e.min),r.vc("max",e.max),r.vc("step",e.step),r.uc("ngModel",a.fabricCanvasHandler.elementProps.imageEffects[e.id||t.id||t.title.toLowerCase()]),r.Hb(1),r.uc("ngModel",a.fabricCanvasHandler.elementProps.imageEffects[e.id||t.id||t.title.toLowerCase()])}}function xs(e,t){if(1&e&&(r.ac(0,"div",15),r.Oc(1,ys,3,5,"div",16),r.Zb()),2&e){const e=t.$implicit;r.Hb(1),r.uc("ngIf","input"==e.type)}}function Hs(e,t){if(1&e&&(r.ac(0,"div",10),r.ac(1,"div",11),r.Oc(2,_s,2,1,"span",12),r.Oc(3,xs,2,1,"div",13),r.Zb(),r.Zb()),2&e){const e=t.$implicit;r.Hb(2),r.uc("ngIf",e.title),r.Hb(1),r.uc("ngForOf",e.options)}}function Ss(e,t){if(1&e&&(r.ac(0,"div",8),r.Oc(1,Hs,4,2,"div",9),r.Zb()),2&e){const e=r.oc().$implicit;r.uc("ngbCollapse",e.collapsed),r.Hb(1),r.uc("ngForOf",e.items)}}function ks(e,t){if(1&e&&(r.ac(0,"span",14),r.Qc(1),r.Zb()),2&e){const e=r.oc().$implicit;r.Hb(1),r.Rc(e.title)}}function Os(e,t){if(1&e){const e=r.bc();r.ac(0,"div",23),r.ac(1,"input",18),r.kc("ngModelChange",function(t){return r.Ic(e),r.oc(4).fabricCanvasHandler.elementProps.imageEffects.tintAlpha=t})("input",function(){return r.Ic(e),r.oc(4).applyImageEffect("blendcolor")}),r.Zb(),r.ac(2,"div",24),r.kc("colorPickerChange",function(t){return r.Ic(e),r.oc(4).fabricCanvasHandler.elementProps.imageEffects.tintColor=t})("colorPickerChange",function(){return r.Ic(e),r.oc(4).applyImageEffect("blendcolor")}),r.Zb(),r.Zb()}if(2&e){const e=t.$implicit,a=r.oc(4);r.Hb(1),r.vc("min",e.min),r.vc("max",e.max),r.vc("step",e.step),r.uc("ngModel",a.fabricCanvasHandler.elementProps.imageEffects.tintAlpha),r.Hb(1),r.Nc("background",a.fabricCanvasHandler.elementProps.imageEffects.tintColor),r.uc("cpPosition","top-left")("cpWidth","200px")("colorPicker",a.fabricCanvasHandler.elementProps.imageEffects.tintColor)}}function Is(e,t){if(1&e&&(r.ac(0,"div",10),r.ac(1,"div",21),r.Oc(2,ks,2,1,"span",12),r.Oc(3,Os,3,9,"div",22),r.Zb(),r.Zb()),2&e){const e=t.$implicit;r.Hb(2),r.uc("ngIf",e.title),r.Hb(1),r.uc("ngForOf",e.options)}}function Ps(e,t){if(1&e&&(r.ac(0,"div",20),r.Oc(1,Is,4,2,"div",9),r.Zb()),2&e){const e=r.oc().$implicit;r.uc("ngbCollapse",e.collapsed),r.Hb(1),r.uc("ngForOf",e.items)}}function Ts(e,t){if(1&e&&(r.ac(0,"span",30),r.Qc(1),r.Zb()),2&e){const e=r.oc().$implicit;r.Hb(1),r.Rc(e.title)}}function Es(e,t){if(1&e){const e=r.bc();r.ac(0,"div"),r.ac(1,"div",31),r.kc("click",function(){r.Ic(e);const a=t.$implicit;return r.oc(4).setImageBlendMode(a)}),r.ac(2,"span",32),r.Qc(3),r.Zb(),r.Zb(),r.Vb(4,"div",33),r.Zb()}if(2&e){const e=t.$implicit;r.Hb(3),r.Rc(e)}}function Fs(e,t){if(1&e&&(r.ac(0,"div",10),r.ac(1,"div",21),r.Oc(2,Ts,2,1,"span",25),r.ac(3,"div",26),r.ac(4,"button",27),r.ac(5,"span",4),r.Qc(6),r.pc(7,"extractNameFromUrl"),r.Zb(),r.Vb(8,"mat-icon",5),r.Zb(),r.ac(9,"div",28),r.Oc(10,Es,5,1,"div",29),r.Zb(),r.Zb(),r.Zb(),r.Zb()),2&e){const e=t.$implicit,a=r.oc(3);r.Hb(2),r.uc("ngIf",e.title),r.Hb(4),r.Rc(r.qc(7,3,a.fabricCanvasHandler.elementProps.imageBlendMode)),r.Hb(4),r.uc("ngForOf",e.modes)}}function As(e,t){if(1&e&&(r.ac(0,"div",20),r.Oc(1,Fs,11,5,"div",9),r.Zb()),2&e){const e=r.oc().$implicit;r.uc("ngbCollapse",e.collapsed),r.Hb(1),r.uc("ngForOf",e.items)}}function Ms(e,t){if(1&e){const e=r.bc();r.ac(0,"div",2),r.ac(1,"div",3),r.kc("click",function(){r.Ic(e);const a=t.$implicit;return r.oc().collapseEffectItem(a)}),r.ac(2,"span",4),r.Qc(3),r.Zb(),r.Vb(4,"mat-icon",5),r.Zb(),r.Oc(5,Ss,2,2,"div",6),r.Oc(6,Ps,2,2,"div",7),r.Oc(7,As,2,2,"div",7),r.Zb()}if(2&e){const e=t.$implicit;r.Hb(3),r.Rc(e.title),r.Hb(1),r.Mb("icon-opened",!e.collapsed),r.Hb(1),r.uc("ngIf","tint-image"!=e.id&&"advance-mode"!=e.id),r.Hb(1),r.uc("ngIf","tint-image"==e.id),r.Hb(1),r.uc("ngIf","advance-mode"==e.id)}}let Ds=(()=>{class e{constructor(e){this.fabricCanvasHandler=e,this.effectsList=[{id:"basic-adjustment",title:"Basic Adjustment",collapsed:!1,items:[{title:"Brightness",options:[{type:"input",min:-.5,max:.5,step:.01}]},{title:"Contrast",options:[{type:"input",min:-.5,max:.5,step:.01}]},{title:"Saturation",options:[{type:"input",min:-1,max:1,step:.001}]},{title:"Emboss",options:[{type:"input",min:0,max:1,step:.5}]},{title:"Hue",options:[{type:"input",min:-1,max:1,step:.01}]},{title:"Vibrance",options:[{type:"input",min:-1,max:1,step:.01}]},{title:"Sharpen",options:[{type:"input",min:0,max:1,step:.5}]}]},{id:"blur-effect",title:"Blur Effect",collapsed:!0,items:[{id:"blur",title:"Blur",options:[{type:"input",min:0,max:5,step:.1}]}]},{id:"film-grain",title:"Film Grain",collapsed:!0,items:[{id:"noise",title:"Noise",options:[{type:"input",min:0,max:200,step:1}]}]},{id:"pixelate",title:"Pixelate",collapsed:!0,items:[{id:"pixelate",title:"Normal",options:[{type:"input",min:0,max:200,step:1}]}]},{id:"tint-image",title:"Tint Image",collapsed:!0,items:[{id:"blendcolor",title:"Color Tint",options:[{id:"blendcolor",type:"input",min:0,max:1,step:.01}]}]},{id:"advance-mode",title:"Advance Mode",collapsed:!0,items:[{title:"Blend Modes",id:"blend-modes",modes:["Normal","Darken","Multiply","Color Burn","Lighten","Screen","Color Dodge","Overlay","Soft Light","Hard Light","Difference","Exclusion","Hue","Saturation","Color","Luminosity"]}]}]}ngOnInit(){}setImageBlendMode(e){this.fabricCanvasHandler.imageHandler.setImageBlendMode(e)}collapseEffectItem(e){for(let t of this.effectsList)t.collapsed=t.id!=e.id||!t.collapsed}applyImageEffect(e){this.fabricCanvasHandler.imageHandler.applyImageEffect(e)}}return e.\u0275fac=function(t){return new(t||e)(r.Ub(ke))},e.\u0275cmp=r.Ob({type:e,selectors:[["app-image-effects-section"]],decls:2,vars:1,consts:[[1,"effects-wrapper"],["class","effect-item d-flex flex-column",4,"ngFor","ngForOf"],[1,"effect-item","d-flex","flex-column"],[1,"effect-item-collapsible","d-flex","flex-row",3,"click"],[1,"flex-grow-1"],["svgIcon","arrow_down",1,"arrow-down-icon"],["class","px-2",3,"ngbCollapse",4,"ngIf"],[3,"ngbCollapse",4,"ngIf"],[1,"px-2",3,"ngbCollapse"],["class","effect-subitem d-flex flex-column",4,"ngFor","ngForOf"],[1,"effect-subitem","d-flex","flex-column"],[1,"d-flex","flex-column"],["class","effect-subitem-text",4,"ngIf"],["class","effect-subitem-options",4,"ngFor","ngForOf"],[1,"effect-subitem-text"],[1,"effect-subitem-options"],["class","d-flex flex-row align-items-center",4,"ngIf"],[1,"d-flex","flex-row","align-items-center"],["type","range",1,"form-control-range","custom-range","flex-grow-1",3,"ngModel","min","max","step","ngModelChange","input"],["type","text",1,"form-control","editor-form-control","form-control-panel","form-control-sm","text-input",3,"ngModel","ngModelChange","input"],[3,"ngbCollapse"],[1,"d-flex","flex-column","px-2"],["class","effect-subitem-options d-flex flex-row align-items-center",4,"ngFor","ngForOf"],[1,"effect-subitem-options","d-flex","flex-row","align-items-center"],[1,"bg-rect",3,"cpPosition","cpWidth","colorPicker","colorPickerChange"],["class","effect-subitem-text pb-2",4,"ngIf"],["ngbDropdown","",1,"panel-dropdown"],["ngbDropdownToggle","",1,"btn","d-flex","flex-row","align-items-baseline","btn-block","no-caret-dropdown"],["ngbDropdownMenu","",1,"panel-dropdown-menu","w-100","mt-2"],[4,"ngFor","ngForOf"],[1,"effect-subitem-text","pb-2"],["ngbDropdownItem","",1,"dropdown-item","d-flex","align-items-center",3,"click"],[1,"item-text","text-truncate","flex-grow-1","ml-2"],[1,"hr-border-bottom"]],template:function(e,t){1&e&&(r.ac(0,"div",0),r.Oc(1,Ms,8,6,"div",1),r.Zb()),2&e&&(r.Hb(1),r.uc("ngForOf",t.effectsList))},directives:[k.l,Le.a,k.m,T.d,O.p,O.b,O.i,O.l,Vn.a,T.f,T.j,T.h,T.g],pipes:[Re.a],styles:[""]}),e})();function js(e,t){if(1&e){const e=r.bc();r.ac(0,"div",5),r.kc("click",function(){r.Ic(e);const a=t.$implicit;return r.oc(2).applyImageFilter(a.id)}),r.ac(1,"div",6),r.Vb(2,"img",7),r.Zb(),r.ac(3,"span",8),r.Qc(4),r.pc(5,"titlecase"),r.Zb(),r.Zb()}if(2&e){const e=t.$implicit,a=r.oc(2);r.Hb(1),r.Mb("selected-filter",e.id==(null==a.fabricCanvasHandler.selectedImageFilter||null==a.fabricCanvasHandler.selectedImageFilter.type?null:a.fabricCanvasHandler.selectedImageFilter.type.toLowerCase())),r.Hb(1),r.Jb(e.class),r.uc("src",e.src,r.Lc),r.Hb(2),r.Rc(r.qc(5,6,e.id))}}function Ls(e,t){if(1&e&&(r.ac(0,"span",14),r.Qc(1),r.Zb()),2&e){const e=r.oc().$implicit;r.Hb(1),r.Rc(e.title)}}function Zs(e,t){if(1&e){const e=r.bc();r.ac(0,"div",11),r.Oc(1,Ls,2,1,"span",12),r.ac(2,"input",13),r.kc("ngModelChange",function(a){r.Ic(e);const n=t.$implicit,i=r.oc(3);return i.fabricCanvasHandler.elementProps.imageEffects[i.selectedFilter.id][n.id]=a})("input",function(){r.Ic(e);const t=r.oc(3);return t.controlFilterOptions(t.selectedFilter.id)}),r.Zb(),r.Zb()}if(2&e){const e=t.$implicit,a=r.oc(3);r.Hb(1),r.uc("ngIf",e.title),r.Hb(1),r.vc("min",e.min),r.vc("max",e.max),r.vc("step",e.step),r.uc("ngModel",a.fabricCanvasHandler.elementProps.imageEffects[a.selectedFilter.id][e.id])}}function Rs(e,t){if(1&e&&(r.ac(0,"div",9),r.Oc(1,Zs,3,5,"div",10),r.Zb()),2&e){const e=r.oc(2);r.Hb(1),r.uc("ngForOf",null==e.selectedFilter?null:e.selectedFilter.options)}}function zs(e,t){if(1&e&&(r.ac(0,"div",2),r.Oc(1,js,6,8,"div",3),r.Oc(2,Rs,2,1,"div",4),r.Zb()),2&e){const e=t.$implicit;r.Hb(1),r.uc("ngForOf",e.filters),r.Hb(1),r.uc("ngIf",e.selected&&e.extraOptions)}}let Bs=(()=>{class e{constructor(e){this.fabricCanvasHandler=e,this.imageFiltersList=[{id:"normal-grayscale-sepia",selected:!0,extraOptions:!1,filters:[{id:"normal",class:"default-filter",selected:!1,src:"assets/img/png/filters-2/image-filter.png"},{id:"grayscale",class:"grayscale-filter",selected:!0,src:"assets/img/png/filters-2/image-filter.png"},{id:"sepia",class:"sepia-filter",selected:!1,src:"assets/img/png/filters-2/image-filter.png",options:{intensity:1}}]},{id:"blackwhite-brownie-vintage",selected:!1,extraOptions:!1,filters:[{id:"blackwhite",class:"bnw-filter",selected:!1,src:"assets/img/png/filters-2/bnw.png"},{id:"brownie",class:"",selected:!1,src:"assets/img/png/filters-2/brownie.png"},{id:"vintage",class:"",selected:!1,src:"assets/img/png/filters-2/vintage.png"}]},{id:"kodachrome-technicolor-invert",selected:!1,extraOptions:!1,filters:[{id:"kodachrome",class:"",selected:!1,src:"assets/img/png/filters-2/kodachrome.png"},{id:"technicolor",class:"",selected:!1,src:"assets/img/png/filters-2/technicolor.png"},{id:"invert",class:"invertcolors-filter",selected:!1,src:"assets/img/png/filters-2/image-filter.png"}]},{id:"redify-greenify-bluify",selected:!1,extraOptions:!1,filters:[{id:"redify",class:"",selected:!1,src:"assets/img/png/filters-2/redify.png"},{id:"greenify",class:"",selected:!1,src:"assets/img/png/filters-2/greenify.png"},{id:"bluify",class:"",selected:!1,src:"assets/img/png/filters-2/bluify.png"}]},{id:"vignette",selected:!1,extraOptions:!0,filters:[{id:"vignette",class:"",selected:!1,src:"assets/img/png/filters-2/vignette.png",options:[{id:"size",title:"Size",type:"input",min:0,max:1,step:.01},{id:"amount",title:"Intensity",type:"input",min:0,max:1,step:.01}]}]}]}ngOnInit(){}applyImageFilter(e){this.selectFilter(e),this.fabricCanvasHandler.imageHandler.applyImageFilter(e)}controlFilterOptions(e){this.fabricCanvasHandler.imageHandler.applyImageFilter(e)}selectFilter(e){for(let t in this.imageFiltersList){let a=this.imageFiltersList[t];if(String(a.id).includes(e)){for(let t of a.filters)this.selectedFilter=t.id==e?t:null;a.selected=!0}else a.selected=!1}}}return e.\u0275fac=function(t){return new(t||e)(r.Ub(ke))},e.\u0275cmp=r.Ob({type:e,selectors:[["app-image-filters-section"]],decls:2,vars:1,consts:[[1,"image-filters-wrapper"],["style","margin-bottom: 12px","class","d-flex flex-row flex-wrap justify-content-between",4,"ngFor","ngForOf"],[1,"d-flex","flex-row","flex-wrap","justify-content-between",2,"margin-bottom","12px"],["style","cursor: pointer","class","filter d-flex flex-column",3,"click",4,"ngFor","ngForOf"],["class","w-100",4,"ngIf"],[1,"filter","d-flex","flex-column",2,"cursor","pointer",3,"click"],[1,"default-filter"],[3,"src"],[1,"filter-title","primary-text"],[1,"w-100"],["class","d-flex flex-row align-items-center",4,"ngFor","ngForOf"],[1,"d-flex","flex-row","align-items-center"],["class","option-title",4,"ngIf"],["type","range",1,"form-control-range","custom-range","flex-grow-1",3,"ngModel","min","max","step","ngModelChange","input"],[1,"option-title"]],template:function(e,t){1&e&&(r.ac(0,"div",0),r.Oc(1,zs,3,2,"div",1),r.Zb()),2&e&&(r.Hb(1),r.uc("ngForOf",t.imageFiltersList))},directives:[k.l,k.m,O.p,O.b,O.i,O.l],pipes:[k.s],styles:[".image-filters-wrapper[_ngcontent-%COMP%]   .filter-title[_ngcontent-%COMP%]{font-size:11px;font-weight:500;text-align:center;padding-top:4px}.image-filters-wrapper[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:86px;border-radius:4px}.image-filters-wrapper[_ngcontent-%COMP%]   .grayscale-filter[_ngcontent-%COMP%]{filter:grayscale(90%)}.image-filters-wrapper[_ngcontent-%COMP%]   .sepia-filter[_ngcontent-%COMP%]{filter:sepia(100%)}.image-filters-wrapper[_ngcontent-%COMP%]   .invertcolors-filter[_ngcontent-%COMP%]{filter:invert(100%)}.image-filters-wrapper[_ngcontent-%COMP%]   .default-filter[_ngcontent-%COMP%]{box-shadow:0 0 0 1px transparent,0 0 0 2px transparent;border-radius:4px}.image-filters-wrapper[_ngcontent-%COMP%]   .selected-filter[_ngcontent-%COMP%]{box-shadow:0 0 0 1px #5f58b7,0 0 0 2px #5f58b7}"]}),e})(),Us=(()=>{class e{constructor(e){this.fabricCanvasHandler=e,this.section="effects"}ngOnInit(){}changeSection(e){this.section!=e&&(this.section=e)}}return e.\u0275fac=function(t){return new(t||e)(r.Ub(ke))},e.\u0275cmp=r.Ob({type:e,selectors:[["app-image-effects-filters-mode-sidebar"]],decls:11,vars:6,consts:[[1,"image-effects-filters-wrapper"],[1,"d-flex","flex-row",2,"padding-top","12px"],[1,"default-integrations-provider","left-integration-wrapper","d-flex","flex-row","align-items-center","justify-content-center","w-100",3,"click"],[1,"default-integrations-provider","right-integration-wrapper","d-flex","flex-row","align-items-center","justify-content-center","w-100",3,"click"],[1,"scrollableContainer"],[3,"hidden"]],template:function(e,t){1&e&&(r.ac(0,"div",0),r.ac(1,"div",1),r.ac(2,"div",2),r.kc("click",function(){return t.changeSection("effects")}),r.ac(3,"span"),r.Qc(4,"Effects"),r.Zb(),r.Zb(),r.ac(5,"div",3),r.kc("click",function(){return t.changeSection("filters")}),r.ac(6,"span"),r.Qc(7,"Filters"),r.Zb(),r.Zb(),r.Zb(),r.ac(8,"div",4),r.Vb(9,"app-image-effects-section",5),r.Vb(10,"app-image-filters-section",5),r.Zb(),r.Zb()),2&e&&(r.Hb(2),r.Mb("active-integrations-provider","effects"===t.section),r.Hb(3),r.Mb("active-integrations-provider","filters"===t.section),r.Hb(4),r.uc("hidden","filters"==t.section),r.Hb(1),r.uc("hidden","effects"==t.section))},directives:[Ds,Bs],styles:[".image-effects-filters-wrapper[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-weight:500}.image-effects-filters-wrapper[_ngcontent-%COMP%]   .image-effects-wrapper[_ngcontent-%COMP%]   .effect-wrapper[_ngcontent-%COMP%]{padding-top:8px}.image-effects-filters-wrapper[_ngcontent-%COMP%]   .image-effects-wrapper[_ngcontent-%COMP%]   .effect-wrapper[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:12px;font-weight:500}.image-effects-filters-wrapper[_ngcontent-%COMP%]   .image-effects-wrapper[_ngcontent-%COMP%]   .effect-wrapper[_ngcontent-%COMP%]   .text-input[_ngcontent-%COMP%]{width:3rem;text-align:center;margin-left:12px}.image-effects-filters-wrapper[_ngcontent-%COMP%]   .image-filters-wrapper[_ngcontent-%COMP%]   .filter-title[_ngcontent-%COMP%]{font-size:11px;font-weight:500;text-align:center}.image-effects-filters-wrapper[_ngcontent-%COMP%]   .image-filters-wrapper[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:86px;border-radius:4px}.image-effects-filters-wrapper[_ngcontent-%COMP%]   .image-filters-wrapper[_ngcontent-%COMP%]   .grayscale-filter[_ngcontent-%COMP%]{filter:grayscale(90%)}.image-effects-filters-wrapper[_ngcontent-%COMP%]   .image-filters-wrapper[_ngcontent-%COMP%]   .sepia-filter[_ngcontent-%COMP%]{filter:sepia(100%)}.image-effects-filters-wrapper[_ngcontent-%COMP%]   .image-filters-wrapper[_ngcontent-%COMP%]   .invertcolors-filter[_ngcontent-%COMP%]{filter:invert(100%)}.image-effects-filters-wrapper[_ngcontent-%COMP%]   .image-blend-modes-wrapper[_ngcontent-%COMP%]   .panel-dropdown[_ngcontent-%COMP%]{padding-top:20px;padding-bottom:32px}.image-effects-filters-wrapper[_ngcontent-%COMP%]   .image-blend-modes-wrapper[_ngcontent-%COMP%]   .panel-dropdown-menu[_ngcontent-%COMP%]{max-height:300px;overflow-y:auto}"]}),e})(),Ns=(()=>{class e{constructor(e,t){this._utilsService=e,this.fabricCanvasHandler=t,this.setCanvasSizeEmitter=new r.o,this.sidebarSubscriptionsList=new p.a}ngOnInit(){this.sidebarSubscriptionsList.add(this._utilsService.activeSidebarItem.subscribe(e=>{var t;this.activeSidebarItem=e,this.activeSidebarItem&&(null===(t=this.activeSidebarItem)||void 0===t?void 0:t.previousSidebarItemId)||this.setCanvasSizeEmitter.emit({closeBtnClicked:!1,offset:-300})}))}ngOnDestroy(){this.sidebarSubscriptionsList.unsubscribe()}closeSidebar(){this.fabricCanvasHandler.toolSelected=null,this._utilsService.sendActiveSidebarItem(null),setTimeout(()=>{this.setCanvasSizeEmitter.emit({closeBtnClicked:!0})},300)}}return e.\u0275fac=function(t){return new(t||e)(r.Ub(xe),r.Ub(ke))},e.\u0275cmp=r.Ob({type:e,selectors:[["app-sidebar"]],inputs:{placeholderBGColor:"placeholderBGColor",formatCategoryObj:"formatCategoryObj",formatsList:"formatsList",allFontsList:"allFontsList"},outputs:{setCanvasSizeEmitter:"setCanvasSizeEmitter"},decls:22,vars:25,consts:[[1,"sidebar-panel"],["id","sidebar",1,"d-flex","flex-column"],[1,"sidebar-heading"],[1,"item-title","flex-grow-1"],[1,"icon-circle",3,"click"],["svgIcon","arrow-back"],[3,"placeholderBGColor","hidden","formatCategoryObj","formatsList"],[3,"placeholderBGColor","hidden"],[3,"hidden"]],template:function(e,t){1&e&&(r.ac(0,"div",0),r.ac(1,"div",1),r.ac(2,"div",2),r.ac(3,"span",3),r.Qc(4),r.Zb(),r.ac(5,"div",4),r.kc("click",function(){return t.closeSidebar()}),r.Vb(6,"mat-icon",5),r.Zb(),r.Zb(),r.ac(7,"div"),r.Vb(8,"app-search-templates-sidebar",6),r.Vb(9,"app-search-images",7),r.Vb(10,"app-text-templates-sidebar",8),r.Vb(11,"app-ai-copy-sidebar",8),r.Vb(12,"app-illustrations-sidebar",7),r.Vb(13,"app-mockups-sidebar",8),r.Vb(14,"app-brand-presets-sidebar",8),r.Vb(15,"app-elements-sidebar",7),r.Vb(16,"app-search-icons-sidebar",7),r.Vb(17,"app-color-palettes-sidebar",8),r.Vb(18,"app-user-files-sidebar",7),r.Vb(19,"app-object-color-border-mode-sidebar",8),r.Vb(20,"app-text-properties-mode-sidebar",8),r.Vb(21,"app-image-effects-filters-mode-sidebar",8),r.Zb(),r.Zb(),r.Zb()),2&e&&(r.Mb("sidebar--invisible",!t.activeSidebarItem),r.Hb(4),r.Rc(null==t.activeSidebarItem?null:t.activeSidebarItem.sidebarItemTitle),r.Hb(4),r.uc("placeholderBGColor",t.placeholderBGColor)("hidden","templates"!=(null==t.activeSidebarItem?null:t.activeSidebarItem.sidebarItemId))("formatCategoryObj",t.formatCategoryObj)("formatsList",t.formatsList),r.Hb(1),r.uc("placeholderBGColor",t.placeholderBGColor)("hidden","images"!=(null==t.activeSidebarItem?null:t.activeSidebarItem.sidebarItemId)),r.Hb(1),r.uc("hidden","text-templates"!=(null==t.activeSidebarItem?null:t.activeSidebarItem.sidebarItemId)),r.Hb(1),r.uc("hidden","ai-copy"!=(null==t.activeSidebarItem?null:t.activeSidebarItem.sidebarItemId)),r.Hb(1),r.uc("placeholderBGColor",t.placeholderBGColor)("hidden","illustrations"!=(null==t.activeSidebarItem?null:t.activeSidebarItem.sidebarItemId)),r.Hb(1),r.uc("hidden","mockups"!=(null==t.activeSidebarItem?null:t.activeSidebarItem.sidebarItemId)),r.Hb(1),r.uc("hidden","brandify"!=(null==t.activeSidebarItem?null:t.activeSidebarItem.sidebarItemId)),r.Hb(1),r.uc("placeholderBGColor",t.placeholderBGColor)("hidden","elements"!=(null==t.activeSidebarItem?null:t.activeSidebarItem.sidebarItemId)),r.Hb(1),r.uc("placeholderBGColor",t.placeholderBGColor)("hidden","icons"!=(null==t.activeSidebarItem?null:t.activeSidebarItem.sidebarItemId)),r.Hb(1),r.uc("hidden","blend"!=(null==t.activeSidebarItem?null:t.activeSidebarItem.sidebarItemId)),r.Hb(1),r.uc("placeholderBGColor",t.placeholderBGColor)("hidden","my-files"!=(null==t.activeSidebarItem?null:t.activeSidebarItem.sidebarItemId)),r.Hb(1),r.uc("hidden","fillOrBorder"!=(null==t.activeSidebarItem?null:t.activeSidebarItem.sidebarItemId)&&"groupColors"!=(null==t.activeSidebarItem?null:t.activeSidebarItem.sidebarItemId)),r.Hb(1),r.uc("hidden","textProps"!=(null==t.activeSidebarItem?null:t.activeSidebarItem.sidebarItemId)),r.Hb(1),r.uc("hidden","imageEffectProps"!=(null==t.activeSidebarItem?null:t.activeSidebarItem.sidebarItemId)))},directives:[Le.a,va,Aa,Ra,qa,nn,hn,Cn,On,zn,Jn,es,ds,ws,Us],styles:[""]}),e})();function Vs(e,t){if(1&e){const e=r.bc();r.ac(0,"div",54),r.kc("click",function(){r.Ic(e);const t=r.oc();return t.fabricCanvasHandler.setObjectEditingModeAndToggleSidebar(t.ToolSelected.FillOrBorder,"Fill/Border")}),r.Zb()}if(2&e){const e=r.oc();r.Nc("background-color",e.fabricCanvasHandler.elementProps.fill),r.Mb("tool-selected",e.fabricCanvasHandler.toolSelected===e.ToolSelected.FillOrBorder)}}function Ws(e,t){if(1&e){const e=r.bc();r.ac(0,"button",55),r.kc("click",function(){r.Ic(e);const a=t.$implicit;return r.oc().dropdownToolClickHandler(a.click,a.handler)}),r.Vb(1,"mat-icon",56),r.Zb()}if(2&e){const e=t.$implicit;r.vc("ngbTooltip",e.toolTip),r.Hb(1),r.vc("svgIcon",e.icon)}}function Gs(e,t){if(1&e){const e=r.bc();r.ac(0,"button",55),r.kc("click",function(){r.Ic(e);const a=t.$implicit;return r.oc().dropdownToolClickHandler(a.click,a.handler)}),r.Vb(1,"mat-icon",56),r.Zb()}if(2&e){const e=t.$implicit;r.vc("ngbTooltip",e.toolTip),r.Hb(1),r.vc("svgIcon",e.icon)}}function Qs(e,t){if(1&e){const e=r.bc();r.ac(0,"button",55),r.kc("click",function(){r.Ic(e);const a=t.$implicit;return r.oc().dropdownToolClickHandler(a.click,a.handler)}),r.Vb(1,"mat-icon",56),r.Zb()}if(2&e){const e=t.$implicit;r.vc("ngbTooltip",e.toolTip),r.Hb(1),r.vc("svgIcon",e.icon)}}function $s(e,t){if(1&e){const e=r.bc();r.ac(0,"button",49),r.kc("click",function(){return r.Ic(e),r.oc().fabricCanvasHandler.basicToolsHandler.groupElements()}),r.ac(1,"div",57),r.Vb(2,"mat-icon",58),r.Zb(),r.Zb()}if(2&e){const e=r.oc();r.Mb("obj-selected",e.fabricCanvasHandler.selected),r.uc("disabled",!e.fabricCanvasHandler.selected)}}function qs(e,t){if(1&e){const e=r.bc();r.ac(0,"button",49),r.kc("click",function(){return r.Ic(e),r.oc().fabricCanvasHandler.basicToolsHandler.unGroupElements()}),r.ac(1,"div",59),r.Vb(2,"mat-icon",60),r.Zb(),r.Zb()}if(2&e){const e=r.oc();r.Mb("obj-selected",e.fabricCanvasHandler.selected),r.uc("disabled",!e.fabricCanvasHandler.selected)}}let Ys=(()=>{class e{constructor(e){this.fabricCanvasHandler=e,this.KEYBOARD_SHORTCUTS=f.a.KEYBOARD_SHORTCUTS,this.ToolSelected=Se,this.dropdownTools={flip:[{icon:"flip-horizontally",toolTip:"Flip Horizontally",click:"flipHorizontal"},{icon:"flip-vertically",toolTip:"Flip Vertically",click:"flipVertical"}],layers:[{icon:"bring_forward",toolTip:"Bring Forward",click:"bringForward"},{icon:"bring_to_front",toolTip:"Bring To Front",click:"bringToFront"},{icon:"send_backward",toolTip:"Send Backward",click:"sendBackward"},{icon:"send_to_back",toolTip:"Send To Back",click:"sendToBack"}],alignment:[{icon:"align_left",toolTip:"Align Left",click:"left",handler:"alignElementHandler"},{icon:"align_horizontally",toolTip:"Align Horizontally",click:"centerHorizontal",handler:"alignElementHandler"},{icon:"align_right",toolTip:"Align Right",click:"right",handler:"alignElementHandler"},{icon:"align_top",toolTip:"Align Top",click:"top",handler:"alignElementHandler"},{icon:"align_vertically",toolTip:"Align Vertically",click:"centerVertical",handler:"alignElementHandler"},{icon:"align_bottom",toolTip:"Align Bottom",click:"bottom",handler:"alignElementHandler"}]}}ngOnInit(){}dropdownToolClickHandler(e,t){t?"alignElementHandler"===t&&this.fabricCanvasHandler.alignElementHandler.alignElement(e):this.fabricCanvasHandler.basicToolsHandler[e]()}dropDownStateChanged(e,t){this.fabricCanvasHandler.toolSelected!=t&&e?this.fabricCanvasHandler.toolSelectedFromTopToolbar(t):this.fabricCanvasHandler.toolSelected!=t||e||this.fabricCanvasHandler.toolSelectedFromTopToolbar(null)}}return e.\u0275fac=function(t){return new(t||e)(r.Ub(ke))},e.\u0275cmp=r.Ob({type:e,selectors:[["app-right-most-common-tools"]],decls:103,vars:72,consts:[[1,"d-flex","align-items-center"],[1,"position-relative"],[1,"btn-fill-wrapper",2,"margin-right","6px"],["class","bg-rect position-relative","placement","bottom","ngbTooltip","Color/Border",3,"tool-selected","background-color","click",4,"ngIf"],[1,"common-tools-wrapper"],["id","border-tool","ngbDropdown","","display","dynamic","placement","bottom-left",3,"openChange"],["placement","bottom","ngbTooltip","Border"],["ngbDropdownToggle","",1,"toolbar-button-neu",3,"disabled"],["svgIcon","border",1,"toolbar-icon"],["ngbDropdownMenu","",1,"tool-dropdown-menu",2,"width","18rem"],[1,"d-flex","flex-column","justify-content-start"],[1,"d-flex","flex-row","align-items-center"],["type","checkbox",3,"ngModel","change","ngModelChange"],[1,"primary-text",2,"font-size","14px","margin-left","22px","font-weight","600"],[1,"hr-separator","my-3"],[1,"secondary-text","flex-grow-1",2,"font-weight","500"],[1,"btn-fill-wrapper"],[1,"bg-rect",3,"cpPosition","cpWidth","colorPicker","cpDisabled","colorPickerChange"],[1,"slider-input-group"],[1,"secondary-text",2,"width","12rem"],["type","range","min","1","max","100","step","1","id","customRange2",1,"custom-range","flex-grow-1",3,"ngModel","ngModelChange","input"],["type","text",1,"form-control","editor-form-control","form-control-sm",3,"ngModel","ngModelChange","input"],["id","shadow-tool","ngbDropdown","","display","dynamic","placement","bottom-left",3,"openChange"],["placement","bottom","ngbTooltip","Shadow"],["svgIcon","shadow",1,"toolbar-icon"],[1,"slider-input-group","mt-1"],[1,"secondary-text"],["type","range","min","-100","max","100","step","1","id","customRange2",1,"custom-range","flex-grow-1",3,"ngModel","ngModelChange","input"],["type","range","min","0","max","100","step","1","id","customRange2",1,"custom-range","flex-grow-1",3,"ngModel","ngModelChange","input"],["id","opacity-tool","ngbDropdown","","display","dynamic","placement","bottom-left",3,"openChange"],["placement","bottom","ngbTooltip","Opacity"],["svgIcon","opacity",1,"toolbar-icon"],["ngbDropdownMenu","",1,"tool-dropdown-menu",2,"width","14rem"],[1,"secondary-text",2,"width","3.5rem"],["type","range","min","1","max","100","step","1",1,"form-control-range","custom-range","flex-grow-1",3,"ngModel","ngModelChange","input"],[1,"seperator"],["id","alignment-tool","ngbDropdown","","display","dynamic","placement","bottom-left",3,"openChange"],["placement","bottom","ngbTooltip","Alignment"],["svgIcon","align_vertically",1,"toolbar-icon"],["ngbDropdownMenu","",1,"tool-dropdown-menu"],[1,"grid-tool"],["class","toolbar-icon-btn","placement","bottom-right",3,"ngbTooltip","click",4,"ngFor","ngForOf"],["id","layers-tool","ngbDropdown","","display","dynamic","placement","bottom-left",3,"openChange"],["placement","bottom","ngbTooltip","Layers"],["svgIcon","layers",1,"toolbar-icon"],["id","flip-tool","ngbDropdown","","display","dynamic","placement","bottom-left",3,"openChange"],["placement","bottom","ngbTooltip","Flip"],["svgIcon","flip-horizontally",1,"toolbar-icon"],["class","toolbar-button-neu",3,"obj-selected","disabled","click",4,"ngIf"],[1,"toolbar-button-neu",3,"disabled","click"],["placement","bottom-right",3,"ngbTooltip"],["svgIcon","lock",1,"toolbar-icon"],["svgIcon","copy",1,"toolbar-icon"],["svgIcon","delete",1,"toolbar-icon"],["placement","bottom","ngbTooltip","Color/Border",1,"bg-rect","position-relative",3,"click"],["placement","bottom-right",1,"toolbar-icon-btn",3,"ngbTooltip","click"],[1,"toolbar-icon",3,"svgIcon"],["placement","bottom-right","ngbTooltip","Group"],["svgIcon","group",1,"toolbar-icon"],["placement","bottom-right","ngbTooltip","Ungroup Objects"],["svgIcon","ungroup",1,"toolbar-icon"]],template:function(e,t){1&e&&(r.ac(0,"div",0),r.ac(1,"div",1),r.ac(2,"div",2),r.Oc(3,Vs,1,4,"div",3),r.Zb(),r.Zb(),r.ac(4,"div",4),r.ac(5,"div",5),r.kc("openChange",function(e){return t.dropDownStateChanged(e,t.ToolSelected.Border)}),r.ac(6,"div",6),r.ac(7,"button",7),r.Vb(8,"mat-icon",8),r.Zb(),r.ac(9,"div",9),r.ac(10,"div",10),r.ac(11,"div",11),r.ac(12,"input",12),r.kc("change",function(){return t.fabricCanvasHandler.basicToolsHandler.toggleStroke()})("ngModelChange",function(e){return t.fabricCanvasHandler.elementProps.isStroke=e}),r.Zb(),r.ac(13,"span",13),r.Qc(14,"Add Borders"),r.Zb(),r.Zb(),r.Vb(15,"div",14),r.ac(16,"div",11),r.ac(17,"span",15),r.Qc(18,"Border Color"),r.Zb(),r.ac(19,"div",16),r.ac(20,"div",17),r.kc("colorPickerChange",function(e){return t.fabricCanvasHandler.elementProps.strokeColor=e})("colorPickerChange",function(){return t.fabricCanvasHandler.basicToolsHandler.setStrokeColor()}),r.Zb(),r.Zb(),r.Zb(),r.ac(21,"div",18),r.ac(22,"span",19),r.Qc(23,"Border Width"),r.Zb(),r.ac(24,"input",20),r.kc("ngModelChange",function(e){return t.fabricCanvasHandler.elementProps.strokeWidth=e})("input",function(){return t.fabricCanvasHandler.basicToolsHandler.setStrokeWidth()}),r.Zb(),r.ac(25,"input",21),r.kc("ngModelChange",function(e){return t.fabricCanvasHandler.elementProps.strokeWidth=e})("input",function(){return t.fabricCanvasHandler.basicToolsHandler.setStrokeWidth()}),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.ac(26,"div",22),r.kc("openChange",function(e){return t.dropDownStateChanged(e,t.ToolSelected.Shadow)}),r.ac(27,"div",23),r.ac(28,"button",7),r.Vb(29,"mat-icon",24),r.Zb(),r.ac(30,"div",9),r.ac(31,"div",10),r.ac(32,"div",11),r.ac(33,"input",12),r.kc("change",function(){return t.fabricCanvasHandler.basicToolsHandler.toggleShadow()})("ngModelChange",function(e){return t.fabricCanvasHandler.elementProps.isShadow=e}),r.Zb(),r.ac(34,"span",13),r.Qc(35,"Add Shadow"),r.Zb(),r.Zb(),r.Vb(36,"div",14),r.ac(37,"div",11),r.ac(38,"span",15),r.Qc(39,"Shadow Color"),r.Zb(),r.ac(40,"div",16),r.ac(41,"div",17),r.kc("colorPickerChange",function(e){return t.fabricCanvasHandler.elementProps.shadow.color=e})("colorPickerChange",function(){return t.fabricCanvasHandler.basicToolsHandler.setShadowProperties()}),r.Zb(),r.Zb(),r.Zb(),r.ac(42,"div",25),r.ac(43,"span",26),r.Qc(44,"X"),r.Zb(),r.ac(45,"input",27),r.kc("ngModelChange",function(e){return t.fabricCanvasHandler.elementProps.shadow.offsetX=e})("input",function(){return t.fabricCanvasHandler.basicToolsHandler.setShadowProperties()}),r.Zb(),r.ac(46,"input",21),r.kc("ngModelChange",function(e){return t.fabricCanvasHandler.elementProps.shadow.offsetX=e})("input",function(){return t.fabricCanvasHandler.basicToolsHandler.setShadowProperties()}),r.Zb(),r.Zb(),r.ac(47,"div",25),r.ac(48,"span",26),r.Qc(49,"Y"),r.Zb(),r.ac(50,"input",27),r.kc("ngModelChange",function(e){return t.fabricCanvasHandler.elementProps.shadow.offsetY=e})("input",function(){return t.fabricCanvasHandler.basicToolsHandler.setShadowProperties()}),r.Zb(),r.ac(51,"input",21),r.kc("ngModelChange",function(e){return t.fabricCanvasHandler.elementProps.shadow.offsetY=e})("input",function(){return t.fabricCanvasHandler.basicToolsHandler.setShadowProperties()}),r.Zb(),r.Zb(),r.ac(52,"div",25),r.ac(53,"span",26),r.Qc(54,"Blur"),r.Zb(),r.ac(55,"input",28),r.kc("ngModelChange",function(e){return t.fabricCanvasHandler.elementProps.shadow.blur=e})("input",function(){return t.fabricCanvasHandler.basicToolsHandler.setShadowProperties()}),r.Zb(),r.ac(56,"input",21),r.kc("ngModelChange",function(e){return t.fabricCanvasHandler.elementProps.shadow.blur=e})("input",function(){return t.fabricCanvasHandler.basicToolsHandler.setShadowProperties()}),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.ac(57,"div",29),r.kc("openChange",function(e){return t.dropDownStateChanged(e,t.ToolSelected.Opacity)}),r.ac(58,"div",30),r.ac(59,"button",7),r.Vb(60,"mat-icon",31),r.Zb(),r.ac(61,"div",32),r.ac(62,"div",18),r.ac(63,"span",33),r.Qc(64,"Opacity"),r.Zb(),r.ac(65,"input",34),r.kc("ngModelChange",function(e){return t.fabricCanvasHandler.elementProps.opacity=e})("input",function(){return t.fabricCanvasHandler.basicToolsHandler.setOpacity()}),r.Zb(),r.ac(66,"input",21),r.kc("ngModelChange",function(e){return t.fabricCanvasHandler.elementProps.opacity=e})("input",function(){return t.fabricCanvasHandler.basicToolsHandler.setOpacity()}),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Vb(67,"div",35),r.ac(68,"div",4),r.ac(69,"div",36),r.kc("openChange",function(e){return t.dropDownStateChanged(e,t.ToolSelected.Alignment)}),r.ac(70,"div",37),r.ac(71,"button",7),r.Vb(72,"mat-icon",38),r.Zb(),r.ac(73,"div",39),r.ac(74,"div",40),r.Oc(75,Ws,2,2,"button",41),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.ac(76,"div",42),r.kc("openChange",function(e){return t.dropDownStateChanged(e,t.ToolSelected.Layers)}),r.ac(77,"div",43),r.ac(78,"button",7),r.Vb(79,"mat-icon",44),r.Zb(),r.ac(80,"div",39),r.ac(81,"div",40),r.Oc(82,Gs,2,2,"button",41),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.ac(83,"div",45),r.kc("openChange",function(e){return t.dropDownStateChanged(e,t.ToolSelected.Flip)}),r.ac(84,"div",46),r.ac(85,"button",7),r.Vb(86,"mat-icon",47),r.Zb(),r.ac(87,"div",39),r.ac(88,"div",40),r.Oc(89,Qs,2,2,"button",41),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Vb(90,"div",35),r.ac(91,"div",4),r.Oc(92,$s,3,3,"button",48),r.Oc(93,qs,3,3,"button",48),r.ac(94,"button",49),r.kc("click",function(){return t.fabricCanvasHandler.basicToolsHandler.lockElement()}),r.ac(95,"div",50),r.Vb(96,"mat-icon",51),r.Zb(),r.Zb(),r.ac(97,"button",49),r.kc("click",function(){return t.fabricCanvasHandler.basicToolsHandler.cloneElement()}),r.ac(98,"div",50),r.Vb(99,"mat-icon",52),r.Zb(),r.Zb(),r.ac(100,"button",49),r.kc("click",function(){return t.fabricCanvasHandler.basicToolsHandler.deleteElement()}),r.ac(101,"div",50),r.Vb(102,"mat-icon",53),r.Zb(),r.Zb(),r.Zb(),r.Zb()),2&e&&(r.Hb(3),r.uc("ngIf","fill"==t.fabricCanvasHandler.elementProps.fillType&&"Image"!==t.fabricCanvasHandler.objectType&&"ActiveSelection"!==t.fabricCanvasHandler.objectType&&t.fabricCanvasHandler.selected),r.Hb(4),r.Mb("tool-selected",t.fabricCanvasHandler.toolSelected===t.ToolSelected.Border)("obj-selected",t.fabricCanvasHandler.selected),r.uc("disabled",!t.fabricCanvasHandler.selected),r.Hb(5),r.uc("ngModel",t.fabricCanvasHandler.elementProps.isStroke),r.Hb(8),r.Nc("background",t.fabricCanvasHandler.elementProps.strokeColor),r.uc("cpPosition","bottom-left")("cpWidth","200px")("colorPicker",t.fabricCanvasHandler.elementProps.strokeColor)("cpDisabled",!t.fabricCanvasHandler.elementProps.isStroke),r.Hb(4),r.uc("ngModel",t.fabricCanvasHandler.elementProps.strokeWidth),r.Hb(1),r.uc("ngModel",t.fabricCanvasHandler.elementProps.strokeWidth),r.Hb(3),r.Mb("tool-selected",t.fabricCanvasHandler.toolSelected===t.ToolSelected.Shadow)("obj-selected",t.fabricCanvasHandler.selected),r.uc("disabled",!t.fabricCanvasHandler.selected),r.Hb(5),r.uc("ngModel",t.fabricCanvasHandler.elementProps.isShadow),r.Hb(8),r.Nc("background",t.fabricCanvasHandler.elementProps.shadow.color),r.uc("cpPosition","bottom-left")("cpWidth","200px")("colorPicker",t.fabricCanvasHandler.elementProps.shadow.color)("cpDisabled",!t.fabricCanvasHandler.elementProps.isShadow),r.Hb(4),r.uc("ngModel",t.fabricCanvasHandler.elementProps.shadow.offsetX),r.Hb(1),r.uc("ngModel",t.fabricCanvasHandler.elementProps.shadow.offsetX),r.Hb(4),r.uc("ngModel",t.fabricCanvasHandler.elementProps.shadow.offsetY),r.Hb(1),r.uc("ngModel",t.fabricCanvasHandler.elementProps.shadow.offsetY),r.Hb(4),r.uc("ngModel",t.fabricCanvasHandler.elementProps.shadow.blur),r.Hb(1),r.uc("ngModel",t.fabricCanvasHandler.elementProps.shadow.blur),r.Hb(3),r.Mb("tool-selected",t.fabricCanvasHandler.toolSelected===t.ToolSelected.Opacity)("obj-selected",t.fabricCanvasHandler.selected),r.uc("disabled",!t.fabricCanvasHandler.selected),r.Hb(6),r.uc("ngModel",t.fabricCanvasHandler.elementProps.opacity),r.Hb(1),r.uc("ngModel",t.fabricCanvasHandler.elementProps.opacity),r.Hb(5),r.Mb("tool-selected",t.fabricCanvasHandler.toolSelected===t.ToolSelected.Alignment)("obj-selected",t.fabricCanvasHandler.selected),r.uc("disabled",!t.fabricCanvasHandler.selected),r.Hb(4),r.uc("ngForOf",t.dropdownTools.alignment),r.Hb(3),r.Mb("tool-selected",t.fabricCanvasHandler.toolSelected===t.ToolSelected.Layers)("obj-selected",t.fabricCanvasHandler.selected),r.uc("disabled",!t.fabricCanvasHandler.selected),r.Hb(4),r.uc("ngForOf",t.dropdownTools.layers),r.Hb(3),r.Mb("tool-selected",t.fabricCanvasHandler.toolSelected===t.ToolSelected.Flip)("obj-selected",t.fabricCanvasHandler.selected),r.uc("disabled",!t.fabricCanvasHandler.selected),r.Hb(4),r.uc("ngForOf",t.dropdownTools.flip),r.Hb(3),r.uc("ngIf",t.fabricCanvasHandler.selected&&t.fabricCanvasHandler.elementProps.groupButton),r.Hb(1),r.uc("ngIf",t.fabricCanvasHandler.selected&&t.fabricCanvasHandler.elementProps.unGroupButton),r.Hb(1),r.Mb("obj-selected",t.fabricCanvasHandler.selected),r.uc("disabled",!t.fabricCanvasHandler.selected),r.Hb(1),r.vc("ngbTooltip",t.KEYBOARD_SHORTCUTS.LOCK),r.Hb(2),r.Mb("obj-selected",t.fabricCanvasHandler.selected),r.uc("disabled",!t.fabricCanvasHandler.selected),r.Hb(1),r.vc("ngbTooltip",t.KEYBOARD_SHORTCUTS.DUPLICATE),r.Hb(2),r.Mb("obj-selected",t.fabricCanvasHandler.selected),r.uc("disabled",!t.fabricCanvasHandler.selected),r.Hb(1),r.vc("ngbTooltip",t.KEYBOARD_SHORTCUTS.DELETE))},directives:[k.m,T.f,T.q,T.j,Le.a,T.h,O.a,O.i,O.l,Vn.a,O.p,O.b,k.l],styles:[""]}),e})(),Xs=(()=>{class e{constructor(e){this.fabricCanvasHandler=e}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)(r.Ub(ke))},e.\u0275cmp=r.Ob({type:e,selectors:[["app-canvas-options"]],decls:18,vars:10,consts:[[1,"artboard-info","d-flex","align-items-center"],[1,"artboard-format-category"],[1,"seperator"],[1,"artboard-dimensions"],[1,"artboard-width-span"],[1,"artboard-width-value"],[1,"artboard-height-span"],[1,"artboard-height-value"],[1,"canvas-bg-wrapper","d-flex","align-items-center"],[1,"bg-rect",3,"cpPosition","cpWidth","colorPicker","colorPickerChange"]],template:function(e,t){1&e&&(r.ac(0,"div",0),r.ac(1,"span",1),r.Qc(2),r.Zb(),r.Vb(3,"div",2),r.ac(4,"div",3),r.ac(5,"span",4),r.Qc(6,"W: "),r.Zb(),r.ac(7,"span",5),r.Qc(8),r.Zb(),r.ac(9,"span",6),r.Qc(10,"H: "),r.Zb(),r.ac(11,"span",7),r.Qc(12),r.Zb(),r.Zb(),r.Vb(13,"div",2),r.ac(14,"div",8),r.ac(15,"div",9),r.kc("colorPickerChange",function(e){return t.fabricCanvasHandler.elementProps.canvasFill=e})("colorPickerChange",function(){return t.fabricCanvasHandler.basicToolsHandler.setCanvasFill()}),r.Zb(),r.ac(16,"span"),r.Qc(17,"BG Color"),r.Zb(),r.Zb(),r.Zb()),2&e&&(r.Hb(2),r.Rc((null==t.fabricCanvasHandler.dbEventsHandler||null==t.fabricCanvasHandler.dbEventsHandler.formatCategoryObj?null:t.fabricCanvasHandler.dbEventsHandler.formatCategoryObj.title)||"Custom Size"),r.Hb(6),r.Tc("",t.fabricCanvasHandler.drawableAreaCanvasSize.width," ",t.fabricCanvasHandler.docUnits,""),r.Hb(4),r.Tc("",t.fabricCanvasHandler.drawableAreaCanvasSize.height," ",t.fabricCanvasHandler.docUnits,""),r.Hb(3),r.Nc("background",t.fabricCanvasHandler.elementProps.canvasFill),r.uc("cpPosition","bottom-left")("cpWidth","200px")("colorPicker",t.fabricCanvasHandler.elementProps.canvasFill))},directives:[Vn.a],styles:[""]}),e})(),Js=(()=>{class e{constructor(e){this.fabricCanvasHandler=e}ngOnInit(){}setObjectWidth(e){isNaN(Number(e))||Number(e)<0||(this.fabricCanvasHandler.elementProps.scaledWidth=Number(e),this.fabricCanvasHandler.basicToolsHandler.setElementWidth())}setObjectHeight(e){isNaN(Number(e))||Number(e)<0||(this.fabricCanvasHandler.elementProps.scaledHeight=Number(e),this.fabricCanvasHandler.basicToolsHandler.setElementHeight())}}return e.\u0275fac=function(t){return new(t||e)(r.Ub(ke))},e.\u0275cmp=r.Ob({type:e,selectors:[["app-object-dimension-tools"]],decls:9,vars:2,consts:[[1,"obj-dimenions","d-flex","align-items-center",2,"padding-left","16px"],[1,"primary-text",2,"font-size","12px","font-weight","500"],["type","number",1,"form-control","editor-form-control","form-control-sm",2,"max-width","50px","text-align","center","margin-left","4px",3,"value","blur","keyup.enter"],["objectWidthInput",""],[1,"primary-text",2,"margin-left","14px","font-size","12px","font-weight","500"],["objectHeightInput",""]],template:function(e,t){if(1&e){const e=r.bc();r.ac(0,"div",0),r.ac(1,"span",1),r.Qc(2,"W:"),r.Zb(),r.ac(3,"input",2,3),r.kc("blur",function(){r.Ic(e);const a=r.Ec(4);return t.setObjectWidth(a.value)})("keyup.enter",function(){r.Ic(e);const a=r.Ec(4);return t.setObjectWidth(a.value)}),r.Zb(),r.ac(5,"span",4),r.Qc(6,"H:"),r.Zb(),r.ac(7,"input",2,5),r.kc("blur",function(){r.Ic(e);const a=r.Ec(8);return t.setObjectHeight(a.value)})("keyup.enter",function(){r.Ic(e);const a=r.Ec(8);return t.setObjectHeight(a.value)}),r.Zb(),r.Zb()}2&e&&(r.Hb(3),r.uc("value",t.fabricCanvasHandler.elementProps.scaledWidth),r.Hb(4),r.uc("value",t.fabricCanvasHandler.elementProps.scaledHeight))},styles:[""]}),e})();function Ks(e,t){1&e&&r.Vb(0,"div",13)}function eo(e,t){if(1&e){const e=r.bc();r.ac(0,"button",14),r.kc("click",function(){return r.Ic(e),r.oc(2).fabricCanvasHandler.basicToolsHandler.unlockAllElements()}),r.ac(1,"span",15),r.Qc(2,"Unlock Objects"),r.Zb(),r.Zb()}if(2&e){const e=r.oc(2);r.vc("ngbTooltip",e.KEYBOARD_SHORTCUTS.UNLOCK)}}function to(e,t){if(1&e&&(r.ac(0,"div",10),r.Vb(1,"app-canvas-options"),r.Oc(2,Ks,1,0,"div",11),r.Oc(3,eo,3,1,"button",12),r.Zb()),2&e){const e=r.oc();r.Hb(2),r.uc("ngIf",e.fabricCanvasHandler.lockedObjects),r.Hb(1),r.uc("ngIf",e.fabricCanvasHandler.lockedObjects)}}function ao(e,t){1&e&&r.Vb(0,"app-object-dimension-tools")}function no(e,t){if(1&e){const e=r.bc();r.ac(0,"div",21),r.ac(1,"div",22),r.kc("colorPickerChange",function(e){return t.$implicit.colorValue=e})("colorPickerChange",function(){r.Ic(e);const a=t.$implicit;return r.oc(2).fabricCanvasHandler.basicToolsHandler.setSVGGroupPathFill(a,a.colorValue)}),r.Zb(),r.Zb()}if(2&e){const e=t.$implicit;r.Hb(1),r.Nc("background",e.colorValue),r.uc("cpPosition","bottom")("cpWidth","200px")("colorPicker",e.colorValue)}}function io(e,t){if(1&e){const e=r.bc();r.ac(0,"div",16),r.kc("openChange",function(t){r.Ic(e);const a=r.oc();return a.dropDownStateChanged(t,a.ToolSelected.GroupColors)}),r.ac(1,"button",17),r.ac(2,"span",15),r.Qc(3,"Colors"),r.Zb(),r.Zb(),r.ac(4,"div",18),r.ac(5,"div",19),r.Oc(6,no,2,5,"div",20),r.Zb(),r.Zb(),r.Zb()}if(2&e){const e=r.oc();r.Hb(1),r.Mb("tool-selected",e.fabricCanvasHandler.toolSelected===e.ToolSelected.GroupColors),r.Hb(5),r.uc("ngForOf",null==e.fabricCanvasHandler||null==e.fabricCanvasHandler.elementProps?null:e.fabricCanvasHandler.elementProps.groupColors)}}function ro(e,t){1&e&&r.Vb(0,"span",32)}function so(e,t){if(1&e&&(r.ac(0,"button",30),r.Oc(1,ro,1,0,"span",31),r.ac(2,"span",15),r.Qc(3,"Edit Mockup Contents"),r.Zb(),r.Zb()),2&e){const e=r.oc(2);r.Mb("obj-selected",!e.fabricCanvasHandler.mockupsHandler.isSaving)("tool-selected",e.fabricCanvasHandler.toolSelected===e.ToolSelected.EditMockupContents),r.uc("disabled",e.fabricCanvasHandler.mockupsHandler.isSaving),r.Hb(1),r.uc("ngIf",e.fabricCanvasHandler.mockupsHandler.isSaving)}}function oo(e,t){if(1&e){const e=r.bc();r.ac(0,"div"),r.ac(1,"div",33),r.kc("click",function(){r.Ic(e);const a=t.index;return r.oc(2).editMockupContents(a)}),r.Vb(2,"img",34),r.ac(3,"span",35),r.Qc(4),r.Zb(),r.Zb(),r.Vb(5,"div",36),r.Zb()}if(2&e){const e=t.$implicit;r.Hb(2),r.uc("src",null==e.thumbnail?null:e.thumbnail.url,r.Lc),r.Hb(2),r.Rc(e.title)}}function co(e,t){if(1&e){const e=r.bc();r.ac(0,"div",23),r.ac(1,"div",24),r.ac(2,"button",25),r.kc("click",function(){return r.Ic(e),r.oc().fabricCanvasHandler.imageHandler.fitImageToCanvas()}),r.Vb(3,"mat-icon",26),r.Zb(),r.Zb(),r.ac(4,"div",16),r.kc("openChange",function(t){r.Ic(e);const a=r.oc();return a.dropDownStateChanged(t,a.ToolSelected.EditMockupContents)}),r.Oc(5,so,4,6,"button",27),r.ac(6,"div",28),r.Oc(7,oo,6,2,"div",29),r.Zb(),r.Zb(),r.Zb()}if(2&e){const e=r.oc();r.Hb(2),r.Mb("obj-selected",e.fabricCanvasHandler.selected),r.uc("disabled",!e.fabricCanvasHandler.selected),r.Hb(3),r.uc("ngIf",e.fabricCanvasHandler.elementProps.isMockup),r.Hb(2),r.uc("ngForOf",e.fabricCanvasHandler.elementProps.mockupData.sections)}}function lo(e,t){if(1&e){const e=r.bc();r.ac(0,"button",37),r.kc("click",function(){r.Ic(e);const t=r.oc();return t.fabricCanvasHandler.setObjectEditingModeAndToggleSidebar(t.ToolSelected.TextProps,"Text Properties")}),r.ac(1,"span",15),r.Qc(2,"Text Properties"),r.Zb(),r.Zb()}if(2&e){const e=r.oc();r.Mb("tool-selected",e.fabricCanvasHandler.toolSelected===e.ToolSelected.TextProps)}}function po(e,t){if(1&e){const e=r.bc();r.ac(0,"div",38),r.ac(1,"button",37),r.kc("click",function(){return r.Ic(e),r.oc().fabricCanvasHandler.imageCropHandler.finishCrop()}),r.ac(2,"span",15),r.Qc(3,"Done Cropping"),r.Zb(),r.Zb(),r.ac(4,"button",39),r.kc("click",function(){return r.Ic(e),r.oc().fabricCanvasHandler.imageCropHandler.cancelCrop()}),r.ac(5,"span",15),r.Qc(6,"Cancel Cropping"),r.Zb(),r.Zb(),r.Zb()}}function ho(e,t){1&e&&r.Vb(0,"span",48)}function uo(e,t){if(1&e){const e=r.bc();r.ac(0,"button",46),r.kc("click",function(){return r.Ic(e),r.oc(2).removeImageBackground()}),r.Oc(1,ho,1,0,"span",47),r.ac(2,"span",15),r.Qc(3,"Remove BG"),r.Zb(),r.Zb()}if(2&e){const e=r.oc(2);r.Mb("obj-selected",!e.fabricCanvasHandler.imageHandler.imageInBgRemoveProcess),r.uc("disabled",e.fabricCanvasHandler.imageHandler.imageInBgRemoveProcess),r.Hb(1),r.uc("ngIf",e.fabricCanvasHandler.imageHandler.imageInBgRemoveProcess)}}function bo(e,t){if(1&e){const e=r.bc();r.ac(0,"div",40),r.ac(1,"div",24),r.ac(2,"button",25),r.kc("click",function(){return r.Ic(e),r.oc().fabricCanvasHandler.imageHandler.fitImageToCanvas()}),r.Vb(3,"mat-icon",26),r.Zb(),r.ac(4,"button",41),r.kc("click",function(){r.Ic(e);const t=r.oc();return t.fabricCanvasHandler.setObjectEditingModeAndToggleSidebar(t.ToolSelected.ImageEffectProps,"Effects & Filters")}),r.Vb(5,"mat-icon",42),r.Zb(),r.ac(6,"button",43),r.kc("click",function(){return r.Ic(e),r.oc().fabricCanvasHandler.imageCropHandler.initCrop()}),r.Vb(7,"mat-icon",44),r.Zb(),r.Zb(),r.Oc(8,uo,4,4,"button",45),r.Zb()}if(2&e){const e=r.oc();r.Hb(2),r.Mb("obj-selected",e.fabricCanvasHandler.selected),r.uc("disabled",!e.fabricCanvasHandler.selected),r.Hb(2),r.Mb("tool-selected",e.fabricCanvasHandler.toolSelected===e.ToolSelected.ImageEffectProps)("obj-selected",e.fabricCanvasHandler.selected),r.uc("disabled",!e.fabricCanvasHandler.selected),r.Hb(2),r.Mb("obj-selected",e.fabricCanvasHandler.selected),r.uc("disabled",!e.fabricCanvasHandler.selected),r.Hb(2),r.uc("ngIf","Image"===e.fabricCanvasHandler.objectType)}}let go=(()=>{class e{constructor(e,t,a,n,i,r){this.fabricCanvasHandler=e,this._gaEventsService=t,this._editorService=a,this._userService=n,this._modalService=i,this._toastService=r,this.KEYBOARD_SHORTCUTS=f.a.KEYBOARD_SHORTCUTS,this.ToolSelected=Se}ngOnInit(){}editMockupContents(e){this._gaEventsService.eventEmitter("Editor Mockups Sidebar Edit","Edit Button Clicked","Edit Button Clicked"),this.fabricCanvasHandler.mockupsHandler.editMockupContents(this.fabricCanvasHandler.mainCanvasDivRef,e)}dropDownStateChanged(e,t){this.fabricCanvasHandler.toolSelected!=t&&e?this.fabricCanvasHandler.toolSelectedFromTopToolbar(t):this.fabricCanvasHandler.toolSelected!=t||e||this.fabricCanvasHandler.toolSelectedFromTopToolbar(null)}removeImageBackground(){this.fabricCanvasHandler.user?this.fabricCanvasHandler.imageHandler.removeImageBackground(this._userService,this.fabricCanvasHandler.user._id,this._modalService):this._modalService.open(ee,{size:"lg",centered:!0})}}return e.\u0275fac=function(t){return new(t||e)(r.Ub(ke),r.Ub(F.a),r.Ub(fe.a),r.Ub(P.a),r.Ub(T.k),r.Ub(E.a))},e.\u0275cmp=r.Ob({type:e,selectors:[["app-top-toolbar"]],decls:11,vars:7,consts:[[1,"top-toolbar-panel","d-flex","flex-row"],[1,"left-side","d-flex","flex-row","align-items-center","flex-grow-1"],["class","d-flex flex-row align-items-center",4,"ngIf"],[4,"ngIf"],["ngbDropdown","",3,"openChange",4,"ngIf"],["class","d-flex",4,"ngIf"],["class","toolbar-button-neu btn-text obj-selected",3,"tool-selected","click",4,"ngIf"],["style","padding-left: 16px","class","image-crop-wrapper d-flex",4,"ngIf"],["class","image-tools-wrapper d-flex",4,"ngIf"],[1,"right-side","d-flex","align-items-center"],[1,"d-flex","flex-row","align-items-center"],["class","seperator",4,"ngIf"],["style","margin-left: 0","class","toolbar-button-neu btn-text obj-selected",3,"ngbTooltip","click",4,"ngIf"],[1,"seperator"],[1,"toolbar-button-neu","btn-text","obj-selected",2,"margin-left","0",3,"ngbTooltip","click"],[1,"toolbar-icon","btn-text"],["ngbDropdown","",3,"openChange"],["ngbDropdownToggle","",1,"toolbar-button-neu","btn-text","obj-selected"],["ngbDropdownMenu","",1,"tool-dropdown-menu"],[1,"grid-tool"],["class","btn-fill-wrapper",4,"ngFor","ngForOf"],[1,"btn-fill-wrapper"],[1,"bg-rect",3,"cpPosition","cpWidth","colorPicker","colorPickerChange"],[1,"d-flex"],[1,"common-tools-wrapper",2,"margin-left","12px"],["ngbTooltip","Fit to Canvas",1,"toolbar-button-neu",3,"disabled","click"],["svgIcon","fit-to-canvas",1,"toolbar-icon"],["ngbDropdownToggle","","id","mockup-tool","style","margin-left: 6px","class","toolbar-button-neu btn-text obj-selected",3,"disabled","obj-selected","tool-selected",4,"ngIf"],["ngbDropdownMenu","",1,"tool-dropdown-menu",2,"width","18rem"],[4,"ngFor","ngForOf"],["ngbDropdownToggle","","id","mockup-tool",1,"toolbar-button-neu","btn-text","obj-selected",2,"margin-left","6px",3,"disabled"],["class","spinner-border spinner-border-sm mr-1",4,"ngIf"],[1,"spinner-border","spinner-border-sm","mr-1"],["ngbDropdownItem","",1,"dropdown-item","d-flex","align-items-center","p-0",2,"cursor","pointer",3,"click"],["alt","",2,"max-width","70px",3,"src"],[1,"item-text","primary-text","text-truncate","flex-grow-1","ml-2",2,"font-weight","600"],[1,"hr-border-bottom"],[1,"toolbar-button-neu","btn-text","obj-selected",3,"click"],[1,"image-crop-wrapper","d-flex",2,"padding-left","16px"],[1,"toolbar-button-neu","btn-text","obj-selected",2,"margin-left","6px",3,"click"],[1,"image-tools-wrapper","d-flex"],["ngbTooltip","Image Effects & Filters","id","image-filters-effects",1,"toolbar-button-neu",3,"disabled","click"],["svgIcon","image_filters",1,"toolbar-icon"],["id","crop-tool","ngbTooltip","Crop Image",1,"toolbar-button-neu",3,"disabled","click"],["svgIcon","image_crop",1,"toolbar-icon"],["style","margin-left: 6px","id","remove-image-background-tool","class","toolbar-button-neu btn-text obj-selected",3,"disabled","obj-selected","click",4,"ngIf"],["id","remove-image-background-tool",1,"toolbar-button-neu","btn-text","obj-selected",2,"margin-left","6px",3,"disabled","click"],["class","secondary-text spinner-border spinner-border-sm mr-1",4,"ngIf"],[1,"secondary-text","spinner-border","spinner-border-sm","mr-1"]],template:function(e,t){1&e&&(r.ac(0,"div",0),r.ac(1,"div",1),r.Oc(2,to,4,2,"div",2),r.Oc(3,ao,1,0,"app-object-dimension-tools",3),r.Oc(4,io,7,3,"div",4),r.Oc(5,co,8,5,"div",5),r.Oc(6,lo,3,2,"button",6),r.Oc(7,po,7,0,"div",7),r.Oc(8,bo,9,12,"div",8),r.Zb(),r.ac(9,"div",9),r.Vb(10,"app-right-most-common-tools"),r.Zb(),r.Zb()),2&e&&(r.Hb(2),r.uc("ngIf",!t.fabricCanvasHandler.selected),r.Hb(1),r.uc("ngIf",t.fabricCanvasHandler.selected&&!t.fabricCanvasHandler.imageCropHandler.isCrop),r.Hb(1),r.uc("ngIf",t.fabricCanvasHandler.selected&&"Group"===t.fabricCanvasHandler.objectType&&!t.fabricCanvasHandler.elementProps.isMockup),r.Hb(1),r.uc("ngIf",t.fabricCanvasHandler.selected&&"Group"===t.fabricCanvasHandler.objectType&&t.fabricCanvasHandler.elementProps.isMockup),r.Hb(1),r.uc("ngIf","Text"===t.fabricCanvasHandler.objectType),r.Hb(1),r.uc("ngIf",t.fabricCanvasHandler.imageCropHandler.isCrop),r.Hb(1),r.uc("ngIf","Image"===t.fabricCanvasHandler.objectType&&!t.fabricCanvasHandler.imageCropHandler.isCrop))},directives:[k.m,Ys,Xs,T.q,Js,T.f,T.j,T.h,k.l,Vn.a,Le.a,T.g],styles:[""]}),e})(),fo=(()=>{class e{constructor(e){this._dragDataService=e,this.dropData=new r.o}onDrop(e){e.preventDefault(),this.dropData.next(this._dragDataService.getData())}}return e.\u0275fac=function(t){return new(t||e)(r.Ub(Ca.a))},e.\u0275dir=r.Pb({type:e,selectors:[["","appCanvasDrop",""]],hostBindings:function(e,t){1&e&&r.kc("drop",function(e){return t.onDrop(e)})},outputs:{dropData:"appCanvasDrop"}}),e})();function vo(e,t){1&e&&r.Vb(0,"span",12)}function mo(e,t){if(1&e){const e=r.bc();r.ac(0,"div",1),r.ac(1,"div"),r.ac(2,"span",2),r.Qc(3,"Edit Mockup Contents"),r.Zb(),r.Zb(),r.ac(4,"div",3),r.ac(5,"div",4),r.Vb(6,"img",5),r.Zb(),r.ac(7,"div",6),r.ac(8,"div",7),r.ac(9,"span"),r.Qc(10,"Preview"),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.ac(11,"div",8),r.ac(12,"button",9),r.kc("click",function(){return r.Ic(e),r.oc().cancelEditingMockupContents()}),r.Qc(13," Cancel "),r.Zb(),r.ac(14,"button",10),r.kc("click",function(){return r.Ic(e),r.oc().doneEditingMockupContents()}),r.Oc(15,vo,1,0,"span",11),r.Qc(16," Done "),r.Zb(),r.Zb(),r.Zb()}if(2&e){const e=r.oc();r.Hb(6),r.uc("src",e.fabricCanvasHandler.mockupsHandler.finalRenderedImageSrc,r.Lc),r.Hb(6),r.uc("disabled",e.fabricCanvasHandler.mockupsHandler.isSaving),r.Hb(2),r.uc("disabled",e.fabricCanvasHandler.mockupsHandler.isSaving),r.Hb(1),r.uc("ngIf",e.fabricCanvasHandler.mockupsHandler.isSaving)}}let Co=(()=>{class e{constructor(e,t,a){this.fabricCanvasHandler=e,this._mockupService=t,this._gaEventsService=a}ngOnInit(){}cancelEditingMockupContents(){this.fabricCanvasHandler.mockupsHandler.cancelEditingMockupContents()}doneEditingMockupContents(){this._gaEventsService.eventEmitter("Editor Mockups Sidebar Done","Done Button Clicked","Done Button Clicked"),this.fabricCanvasHandler.mockupsHandler.doneEditingMockupContents(this._mockupService)}updateMockup(){var e,t;"template_designer"!=(null===(e=this.fabricCanvasHandler.user)||void 0===e?void 0:e.role)&&"admin_designer"!=(null===(t=this.fabricCanvasHandler.user)||void 0===t?void 0:t.role)||this.fabricCanvasHandler.mockupsHandler.updateMockup(this._mockupService,this.fabricCanvasHandler.user._id)}}return e.\u0275fac=function(t){return new(t||e)(r.Ub(ke),r.Ub(Ce),r.Ub(F.a))},e.\u0275cmp=r.Ob({type:e,selectors:[["app-mockup-right-panel"]],decls:1,vars:1,consts:[["class","mockup-edit-contents-wrapper d-flex flex-column align-items-center",4,"ngIf"],[1,"mockup-edit-contents-wrapper","d-flex","flex-column","align-items-center"],[1,"primary-text",2,"font-size","14px","font-weight","600","padding-top","12px"],[1,"mockup-preview-wrapper","position-relative","w-100",2,"margin-top","24px"],[1,"preview-box"],["alt","",3,"src"],[1,"d-flex","align-items-center","justify-content-center","preview-text-box","w-100","position-absolute"],[1,"primary-text",2,"font-size","12px","font-weight","500"],[1,"d-flex","flex-row","w-100",2,"margin-top","24px"],[1,"btn","panel-outline-button",2,"font-size","12px","font-weight","600","width","80px","margin-right","7px",3,"disabled","click"],[1,"btn","btn-primary",2,"font-size","12px","font-weight","600","width","107px",3,"disabled","click"],["class","white-text spinner-border spinner-border-sm mr-1",4,"ngIf"],[1,"white-text","spinner-border","spinner-border-sm","mr-1"]],template:function(e,t){1&e&&r.Oc(0,mo,17,4,"div",0),2&e&&r.uc("ngIf",t.fabricCanvasHandler.mockupsHandler.editingMockupContentsMode)},directives:[k.m],styles:[""]}),e})();function wo(e,t){if(1&e){const e=r.bc();r.ac(0,"div"),r.ac(1,"div",27),r.kc("click",function(){r.Ic(e);const a=t.$implicit,n=r.oc().$implicit;return r.oc(2).fabricCanvasHandler.pagesHandler.selectPageOption(n,a.id)}),r.ac(2,"span",28),r.Qc(3),r.Zb(),r.Zb(),r.Zb()}if(2&e){const e=t.$implicit;r.Hb(3),r.Rc(e.title)}}function _o(e,t){if(1&e){const e=r.bc();r.ac(0,"div",15),r.ac(1,"div",16),r.ac(2,"div",17),r.Vb(3,"mat-icon",18),r.Zb(),r.ac(4,"div",19),r.Oc(5,wo,4,1,"div",20),r.Zb(),r.Zb(),r.ac(6,"div",21),r.kc("click",function(){r.Ic(e);const a=t.$implicit;return r.oc(2).fabricCanvasHandler.pagesHandler.selectPage(a)}),r.ac(7,"input",22,23),r.kc("keyup.enter",function(){r.Ic(e);const a=t.$implicit,n=r.Ec(8);return r.oc(2).fabricCanvasHandler.pagesHandler.setPageName(n.value,a)})("blur",function(){r.Ic(e);const a=t.$implicit,n=r.Ec(8);return r.oc(2).fabricCanvasHandler.pagesHandler.setPageName(n.value,a)}),r.Zb(),r.ac(9,"div",24),r.ac(10,"div",25),r.Vb(11,"img",26),r.Zb(),r.Zb(),r.Zb(),r.Zb()}if(2&e){const e=t.$implicit,a=t.index,n=r.oc(2);r.Mb("active",n.fabricCanvasHandler.currentPageId==e.page_id),r.Hb(5),r.uc("ngForOf",n.pagesOptionsList),r.Hb(2),r.uc("title",e.page_name||"Edit Page Name")("placeholder","Page "+(a+1))("value",e.page_name),r.Hb(4),r.uc("src",e.page_thumbnail_base64,r.Lc)}}function yo(e,t){1&e&&(r.ac(0,"div",29),r.Vb(1,"img",30),r.ac(2,"span",31),r.Qc(3,"Add Pages!"),r.Zb(),r.ac(4,"span",32),r.Qc(5,"Make carousel ads, consistent campaigns and much more!"),r.Zb(),r.Zb())}function xo(e,t){if(1&e){const e=r.bc();r.ac(0,"div",1),r.ac(1,"div",2),r.ac(2,"div",3),r.ac(3,"div",4),r.kc("click",function(){return r.Ic(e),r.oc().fabricCanvasHandler.pagesHandler.pagesPanelToggle()}),r.Vb(4,"mat-icon",5),r.Zb(),r.Zb(),r.ac(5,"div",6),r.ac(6,"span",7),r.Qc(7,"Pages"),r.Zb(),r.ac(8,"span",8),r.Qc(9),r.Zb(),r.Zb(),r.Zb(),r.ac(10,"div",9),r.Oc(11,_o,12,7,"div",10),r.Oc(12,yo,6,0,"div",11),r.Zb(),r.ac(13,"div",12),r.ac(14,"button",13),r.kc("click",function(){return r.Ic(e),r.oc().fabricCanvasHandler.pagesHandler.addPage()}),r.Vb(15,"mat-icon",14),r.Qc(16," Add New Page "),r.Zb(),r.Zb(),r.Zb()}if(2&e){const e=r.oc();r.Hb(9),r.Rc(null==e.fabricCanvasHandler.dbEventsHandler.userDesign||null==e.fabricCanvasHandler.dbEventsHandler.userDesign.pages?null:e.fabricCanvasHandler.dbEventsHandler.userDesign.pages.length),r.Hb(2),r.uc("ngForOf",null==e.fabricCanvasHandler.dbEventsHandler.userDesign?null:e.fabricCanvasHandler.dbEventsHandler.userDesign.pages),r.Hb(1),r.uc("ngIf",1==(null==e.fabricCanvasHandler.dbEventsHandler.userDesign?null:e.fabricCanvasHandler.dbEventsHandler.userDesign.pages.length))}}let Ho=(()=>{class e{constructor(e){this.fabricCanvasHandler=e,this.pagesOptionsList=[{title:"Move Up",id:"move-up"},{title:"Move Down",id:"move-down"},{title:"Duplicate Page",id:"duplicate-page"},{title:"Remove Page",id:"remove-page"}]}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)(r.Ub(ke))},e.\u0275cmp=r.Ob({type:e,selectors:[["app-pages-right-panel"]],decls:1,vars:1,consts:[["class","pages-panel-wrapper",4,"ngIf"],[1,"pages-panel-wrapper"],[1,"pages-heading","d-flex","flex-row","align-items-center"],[1,"flex-grow-1"],[1,"icon-circle",3,"click"],["svgIcon","arrow-back"],[1,"d-flex","flex-row"],[1,"flex-grow-1","primary-text","headline","mr-2"],[1,"primary-text","pages-length"],[1,"scroll-container"],["class","page-wrapper",3,"active",4,"ngFor","ngForOf"],["class","add-pages-icon-wrapper",4,"ngIf"],[1,"add-btn-wrapper","position-absolute","w-100",2,"bottom","0","padding","10px"],[1,"btn","btn-primary","btn-block","d-flex","align-items-center","justify-content-center",3,"click"],["svgIcon","zoom_in"],[1,"page-wrapper"],["ngbDropdown","",1,"page-options-wrapper","position-absolute"],["ngbDropdownToggle",""],["svgIcon","dots_options"],["ngbDropdownMenu","",1,"panel-dropdown-menu","w-100","mt-2",2,"min-width","150px"],[4,"ngFor","ngForOf"],[3,"click"],["type","text",1,"page-name-input","text-truncate",3,"title","placeholder","value","keyup.enter","blur"],["pageName",""],[1,"img-container","position-relative"],[2,"position","relative","height","100%","width","100%","align-items","center","justify-content","center","display","flex"],["alt","",3,"src"],["ngbDropdownItem","",1,"dropdown-item","d-flex","align-items-center",3,"click"],[1,"item-text","text-truncate","flex-grow-1","ml-2"],[1,"add-pages-icon-wrapper"],["src","assets/img/svg/add-pages.svg","alt",""],[1,"title","primary-text"],[1,"sub-text","secondary-text"]],template:function(e,t){1&e&&r.Oc(0,xo,17,3,"div",0),2&e&&r.uc("ngIf",!t.fabricCanvasHandler.mockupsHandler.editingMockupContentsMode&&t.fabricCanvasHandler.pagesHandler.pagesPanelShown)},directives:[k.m,Le.a,k.l,T.f,T.j,T.h,T.g],styles:[""]}),e})();const So=["mainCanvasDiv"];function ko(e,t){1&e&&(r.ac(0,"div",37),r.Vb(1,"div",38),r.Zb())}function Oo(e,t){if(1&e){const e=r.bc();r.ac(0,"div",39),r.kc("mousemove",function(t){return r.Ic(e),r.oc().onMouseMoveEyeDropperWrapper(t)})("click",function(){return r.Ic(e),r.oc().applyEyeDropperColorToElement()}),r.ac(1,"div",40),r.ac(2,"span",41),r.Qc(3),r.Zb(),r.Zb(),r.Zb()}if(2&e){const e=r.oc();r.Hb(1),r.Nc("right",e.fabricCanvasHandler.mockupsHandler.editingMockupContentsMode?240:20,"px")("background-color",e.fabricCanvasHandler.eyeDropperHandler.rgbaColor),r.Hb(2),r.Rc(e.fabricCanvasHandler.eyeDropperHandler.hexCode)}}function Io(e,t){if(1&e){const e=r.bc();r.ac(0,"div",42),r.kc("click",function(){return r.Ic(e),r.oc().fabricCanvasHandler.pagesHandler.pagesPanelToggle()}),r.ac(1,"button",43),r.nc(),r.ac(2,"svg",44),r.Vb(3,"rect",45),r.Vb(4,"rect",46),r.Vb(5,"rect",47),r.Zb(),r.Qc(6," Pages "),r.Zb(),r.Zb()}}let Po=(()=>{class e{constructor(e,t,a,n,i,r,s,o,c,l,d,h,b,g,v,m,C,w,_,y){this.fabricCanvasHandler=e,this._gaEventsService=t,this._router=a,this._route=n,this._templateService=i,this._utilsService=r,this._linkService=s,this._mockupService=o,this._editorService=c,this._userService=l,this._editorBrandPresetService=d,this._helpersService=h,this._localStorageService=b,this._changeDetectorRef=g,this._toastService=v,this._imagesService=m,this._modalService=C,this.matIconRegistry=w,this.domSanitizer=_,this.introJS=Pe(),this.placeholderBGColor=f.a.COLORS.placeholderImageLightBase64,this.KEYBOARD_SHORTCUTS=f.a.KEYBOARD_SHORTCUTS,this.defaultCanvasOptions=f.a.DEFAULT_CANVAS_OPTIONS,this.editorSubscriptionsList=new p.a,y.openDelay=500,y.container="body",this.matIconRegistry.addSvgIconSet(this.domSanitizer.bypassSecurityTrustResourceUrl("assets/icons/editor-page-icons-v10.svg?v=11")),this.matIconRegistry.addSvgIconSet(this.domSanitizer.bypassSecurityTrustResourceUrl("assets/icons/home-header-icons-v3.svg")),this.matIconRegistry.addSvgIconSet(this.domSanitizer.bypassSecurityTrustResourceUrl("assets/icons/sidebar-icons-v3.svg")),this.fabricCanvasHandler.init({canvasDefaultBackground:this.defaultCanvasOptions.backgroundColor,objectPropertiesToInclude:u,mainCanvasDivRef:this.mainCanvasDivRef}),this.fabricCanvasHandler.initHandler()}ngOnInit(){function e(e,t){if(t){if(t.toLive)return e+": url(#SVGID_"+t.id+"); ";var a=new l.fabric.Color(t),n=e+": "+a.toRgb()+"; ",i=a.getAlpha();return 1!==i&&(n+=e+"-opacity: "+i.toString()+"; "),n}return e+": none; "}this._helpersService.addNumericJsScript(),this.fabricCanvasHandler.currentWorkspace=this._userService.getCurrentUserWorkspace(),l.fabric.StaticCanvas.prototype._renderOverlay=function(e){null!==e.canvas.id&&""!==e.canvas.id?(this.fire("before:overlay:render"),this._renderBackgroundOrOverlay(e,"overlay"),this.fire("after:overlay:render")):this._renderBackgroundOrOverlay(e,"overlay")},l.fabric.StaticCanvas.prototype._renderBackground=function(e){this.fire("before:background:render"),this._renderBackgroundOrOverlay(e,"background"),this.fire("after:background:render")},Ae(),Me(),l.fabric.Object.prototype.getSvgStyles=function(t){var a=this.fillRule?this.fillRule:"nonzero",n=this.strokeWidth?this.strokeWidth:"0",i=this.strokeDashArray?this.strokeDashArray.join(" "):"none",r=this.strokeDashOffset?this.strokeDashOffset:"0",s=this.strokeLineCap?this.strokeLineCap:"butt",o=this.strokeLineJoin?this.strokeLineJoin:"miter",c=this.strokeMiterLimit?this.strokeMiterLimit:"4",l=void 0!==this.opacity?this.opacity:"1",d=this.visible?"":" visibility: hidden;",p=t?"":this.getSvgFilter(),h=e("fill",this.fill);return[e("stroke",this.stroke),"stroke-width: ",n,"; ","stroke-dasharray: ",i,"; ","stroke-linecap: ",s,"; ","stroke-dashoffset: ",r,"; ","stroke-linejoin: ",o,"; ","stroke-miterlimit: ",c,"; ","is-custom-font: ",this.isCustomFont?this.isCustomFont:"none","; ","font-file-url: ",this.fontFileUrl?this.fontFileUrl:"none","; ",h,"fill-rule: ",a,"; ","opacity: ",l,";",p,d].join("")},this.setUserRoleAndCredentials(),this.createUserFontsLink(),this.utilsDataSubscriptions(),this.imageUploadingSubscriptions(),this.getStartedImageSubscription(),this.fabricCanvasHandler.dbEventsHandler.formatsList=this._templateService.getAllFormatsList(),this.initCanvas()}ngAfterViewInit(){let e="custom-size";this.fabricCanvasHandler.mainCanvasDivRef=this.mainCanvasDivRef,Object(h.a)(this._route.params,this._route.queryParams,(e,t)=>({params:e,qparams:t})).subscribe(t=>{let a="custom-size";a=void 0!==t.qparams.width&&void 0!==t.qparams.height&&void 0===t.qparams.format_category?"custom-size":void 0!==t.params["template-id"]&&void 0!==t.qparams.templateType?"text-template-id":void 0!==t.params["template-id"]?"template-id":void 0!==t.params["design-id"]?"design-id":void 0!==t.params["illustration-id"]?"illustration-id":void 0!==t.params["svg-id"]?"svg-url":"default",void 0!==t.qparams.width&&void 0!==t.qparams.height&&void 0!==t.params["mockup-id"]&&(a="mockup-id"),console.log(t),console.log(a),Fe()(t.params)&&void 0===t.qparams.width&&void 0===t.qparams.height&&this._modalService.open(et,{size:"xl",centered:!0}),void 0!==t.qparams.units&&(this.fabricCanvasHandler.docUnits=t.qparams.units),"default"===a&&(e="facebook-post"),void 0!==t.qparams.format_category&&(e=t.qparams.format_category),"true"==t.qparams.resize?this.initResizeCanvasTemplate(t.qparams.width,t.qparams.height,e):(this.fabricCanvasHandler.dbEventsHandler.setFormatCategoryId(e),this.initCanvasTemplate(a,t))}),this.fabricCanvasHandler.guidelinesHanlder.initAligningGuidelines(this.fabricCanvasHandler.getCurrentFabricCanvas()),this.fabricCanvasHandler.guidelinesHanlder.initCenteringGuidelines(this.fabricCanvasHandler.getCurrentFabricCanvas(),this.mainCanvasDivRef.nativeElement),this.fabricCanvasHandler.canvasEventListenersHandler.initCanvasEventListeners(),this.fabricCanvasHandler.getCurrentFabricCanvas().requestRenderAll()}createUserFontsLink(){this.user&&this._linkService.createLink(`${b.a.apiUrl}/api/fonts/users/${this.user._id}/fonts.css?workspace_id=${this._userService.getCurrentUserWorkspaceId()}`)}imageUploadingSubscriptions(){this.editorSubscriptionsList.add(this._utilsService.addUploadsToCanvas.subscribe(e=>Object(c.a)(this,void 0,void 0,function*(){e.uploadStatus===d.g.InProgress?this.fabricCanvasHandler.imageHandler.addImage(e.src,e):e.uploadStatus===d.g.UploadedSuccessfully?(yield this.fabricCanvasHandler.imageHandler.changeImageSrcToCDN(e.src,e.imageObjectToBeHandled,this.fabricCanvasHandler.currentCanvasId),this.fabricCanvasHandler.canvasEventListenersHandler.triggersWhenCanvasUpdated()):(this.fabricCanvasHandler.getCurrentFabricCanvas().remove(e.imageObjectToBeHandled),this.fabricCanvasHandler.getCurrentFabricCanvas().requestRenderAll(),this.fabricCanvasHandler.canvasEventListenersHandler.triggersWhenCanvasUpdated())})))}getStartedImageSubscription(){this.editorSubscriptionsList.add(this._utilsService.getStartedImage.subscribe(e=>Object(c.a)(this,void 0,void 0,function*(){console.log("getStartedImage"),console.log(e),this.fabricCanvasHandler.dbEventsHandler.setFormatCategoryId("custom-size"),this.initCanvasTemplate("custom-size",{qparams:{width:e.width,height:e.height},params:{}}),e.isVectorImage?setTimeout(()=>{this.fabricCanvasHandler.vectorHandler.loadSVGFromString(e.src,null,1,"grouped",!0)},1e3):e.isVectorImage||this.fabricCanvasHandler.imageHandler.addImage(e.src)})))}onElementDrop(e){e&&("user-file"===e.dragType?this._utilsService.sendDataToSend("image/svg+xml"===e.asset.mime_type?{type:"add-vector",objectData:e.asset.original_asset_details.url}:{type:"add-image",objectData:{source:"s3",urls:{url:e.asset.original_asset_details.url}}}):"illustration"===e.dragType?this._utilsService.sendDataToSend({type:"add-vector",objectData:e.vectorURL}):"sidebar-element"===e.dragType?e.element.thumbnail_url.includes(".svg")?this._editorService.downloadSVGFileFromS3(e.element.thumbnail_url).subscribe(e=>{this.fabricCanvasHandler.vectorHandler.loadSVGFromString(e,null)},e=>{throw e}):e.element.thumbnail_url.includes(".png")&&this.fabricCanvasHandler.imageHandler.addImage(e.element.image_url):this._utilsService.sendDataToSend("sidebar-icon"===e.dragType?{type:"add-svg-icon",objectData:e}:"add-text"===e.dragType?{type:e.dragType,objectData:e.textType}:"add-mockup"===e.dragType?{type:e.dragType,objectData:e.mockup}:{type:e.dragType,objectData:e}))}onDrop(e){e&&e.target.files.length>0&&(this._utilsService.sendActiveSidebarItem({previousSidebarItemId:null,previousSidebarItemTitle:null,previousSidebarItemType:null,sidebarItemId:f.a.SIDEBAR_ITEMS.MY_FILES.id,sidebarItemTitle:f.a.SIDEBAR_ITEMS.MY_FILES.title,sidebarItemType:f.a.SIDEBAR_ITEM_TYPES.DefaultSidebarItem}),this._utilsService.sendReadAssetFiles(e))}utilsDataSubscriptions(){this.editorSubscriptionsList.add(this._utilsService.dataToSend.subscribe(e=>{if("blend"===e.type)this.fabricCanvasHandler.blendsHandler.setBlend(e.objectData,e.options.isPreview);else if("previous-blend"===e.type)this.fabricCanvasHandler.blendsHandler.setPreviousBlend();else if("add-text"===e.type)this.fabricCanvasHandler.textElementHandler.addTextHeadline(e.objectData);else if("set-font-family"===e.type)this.fabricCanvasHandler.textElementHandler.setFontFamily(e.objectData);else if("font-family-preview"===e.type)this.fabricCanvasHandler.textElementHandler.setFontFamily(e.objectData,!0);else if("previous-font-family"===e.type)this.fabricCanvasHandler.textElementHandler.restoreFontFamily(e.objectData);else if("add-image"===e.type)"pexels"==e.objectData.source?this.fabricCanvasHandler.imageHandler.addImage(e.objectData.urls.large2x):"unsplash"==e.objectData.source?(this.fabricCanvasHandler.imageHandler.addImage(e.objectData.urls.raw+"&w=1200&q=80&fm=jpg&crop=entropy&cs=tinysrgb&fit=max"),this._imagesService.triggerUnsplashDownloadPhoto(e.objectData.photoId).subscribe(e=>{})):"pixabay"==e.objectData.source?this._imagesService.uploadPixabayPhoto(e.objectData.urls.largeImageURL).subscribe(e=>{this.fabricCanvasHandler.imageHandler.addImage(e.imageURL)},e=>{throw this._toastService.show("An unexpected error occurred, could not download photo",{classname:"bg-danger text-light",delay:5e3}),e}):"s3"==e.objectData.source&&this.fabricCanvasHandler.imageHandler.addImage(e.objectData.urls.url);else if("add-template"===e.type){let t=this.fabricCanvasHandler.basicToolsHandler.removeAbnormalValuesFromJSON(this.fabricCanvasHandler.getCurrentFabricCanvas().toDatalessJSON(this.fabricCanvasHandler.objectPropertiesToInclude)),a={pageId:this.fabricCanvasHandler.currentPageId,designData:this.fabricCanvasHandler.dbEventsHandler.cloneDesignObjectAndRemoveProps()};this.fabricCanvasHandler.getCurrentFabricCanvas().clear(),this.fabricCanvasHandler.getCurrentFabricCanvas().backgroundColor=this.defaultCanvasOptions.backgroundColor,this.setIsDesignLoading(!0),this._templateService.getTemplateByTemplateId(e.objectData).subscribe(e=>Object(c.a)(this,void 0,void 0,function*(){this.fabricCanvasHandler.dbEventsHandler.formatCategoryId==e.format_category?this.fabricCanvasHandler.loadFontsAndThenJSONToCanvas(e.pages,e.pages[0].page_editor_json,!1,!0,()=>{this.setIsDesignLoading(!1);let e=this.fabricCanvasHandler.basicToolsHandler.removeAbnormalValuesFromJSON(this.fabricCanvasHandler.getCurrentFabricCanvas().toDatalessJSON(this.fabricCanvasHandler.objectPropertiesToInclude));this.fabricCanvasHandler.historyHandlerV.debouncedHistory([],[],[],{oldCanvas:{oldCanvasJSON:t},newCanvas:{newCanvasJSON:e}},y.CanvasJSON)}):(this.fabricCanvasHandler.dbEventsHandler.setFormatCategoryId(e.format_category),this.addTemplateDataToCanvas(e,a))}))}else"add-text-template"===e.type?this._editorService.getTextTemplateByTemplateId(e.objectData).subscribe(e=>{this.fabricCanvasHandler.loadFontsAndThenJSONToCanvas(null,e.canvas_doc_json.editor_json,!0,!0,()=>{})}):"add-mockup"===e.type?this.fabricCanvasHandler.mockupsHandler.addMockupImageToCanvas(e.objectData):"add-vector"===e.type?this._editorService.downloadSVGFileFromS3(e.objectData).subscribe(t=>{this.fabricCanvasHandler.vectorHandler.loadSVGFromString(t,e.objectData)},e=>{throw e}):"add-svg-string"===e.type?this.fabricCanvasHandler.vectorHandler.isSVGString(e.objectData)&&this.fabricCanvasHandler.vectorHandler.loadSVGFromString(e.objectData,null):"add-svg-icon"===e.type?this._editorService.downloadIconByDownloadUrl(e.objectData.iconURL,e.objectData.iconsProvider).subscribe(e=>{this.fabricCanvasHandler.vectorHandler.loadSVGFromString(e,null)},e=>{throw e}):"apply-brand-preset"===e.type&&this.fabricCanvasHandler.brandPresetHandler.applyBrandPresetToCanvas(e.objectData,this._editorService)})).add(this._utilsService.isDarkTheme.subscribe(e=>{this.placeholderBGColor=e?f.a.COLORS.placeholderImageDarkBase64:f.a.COLORS.placeholderImageLightBase64}))}setUserRoleAndCredentials(){this.editorSubscriptionsList.add(this._userService.user.subscribe(e=>{this.user=e,this.fabricCanvasHandler.user=this.user,this.user&&(this.getBrandPresetsFromAPI(),this.getUserDownloadsLimit())}))}getUserDownloadsLimit(){var e;this._editorService.getUserDownloadsLimit(this.user._id,(null===(e=this.fabricCanvasHandler.currentWorkspace)||void 0===e?void 0:e._id)||"").then(e=>{console.log(e),"limited"===e.code&&(this.fabricCanvasHandler.downloadHandler.downloadLimits="limited",this.fabricCanvasHandler.downloadHandler.totalDownloadCreditsPerMonth=e.totalDownloadCreditsPerMonth,this.fabricCanvasHandler.downloadHandler.creditsRemaining=e.creditsRemaining)}).catch(()=>{})}initCanvas(){l.fabric.textureSize=4096,l.fabric.perfLimitSizeTotal=3097152,l.fabric.disableStyleCopyPaste=!0,l.fabric.Object.prototype.borderScaleFactor=2.5,l.fabric.Object.prototype.objectCaching=!1,l.fabric.Object.prototype.noScaleCache=!1,l.fabric.Object.prototype.lockScalingFlip=!0,l.fabric.Object.prototype.hasRotatingPoint=!0,l.fabric.Object.prototype.transparentCorners=!1,l.fabric.Object.prototype.cornerColor="rgb(255,255,255)",l.fabric.Object.prototype.cornerSize=14,l.fabric.Object.prototype.cornerStrokeColor="#5F58B7",l.fabric.Object.prototype.borderColor="#5F58B7",l.fabric.Object.prototype.cornerStyle="circle",l.fabric.Object.prototype.borderOpacityWhenMoving=.5,l.fabric.Object.prototype.snapAngle=90,l.fabric.Object.prototype.snapThreshold=3,l.fabric.Object.NUM_FRACTION_DIGITS=4,this.fabricCanvasHandler.currentCanvasId=f.a.MAIN_CANVAS,this.fabricCanvasHandler.canvas[f.a.MAIN_CANVAS]=new l.fabric.Canvas("editor-canvas",this.defaultCanvasOptions),this.fabricCanvasHandler.getCurrentFabricCanvas().setBackgroundColor(this.defaultCanvasOptions.backgroundColor,this.fabricCanvasHandler.getCurrentFabricCanvas().renderAll.bind(this.fabricCanvasHandler.getCurrentFabricCanvas())),this.fabricCanvasHandler.getCurrentFabricCanvas().renderAll()}getBrandPresetsFromAPI(){this.user&&this._editorBrandPresetService.getWorkspaceBrandPresets(this._userService.getCurrentUserWorkspaceId(),this.user._id).then(e=>{this._editorBrandPresetService.setBrandPresetsList(e)}).catch(e=>{})}editMockupContents(){}setThemeOfEditor(e){let t="dark-theme"===e;this._utilsService.toggleEditorTheme(t),this.fabricCanvasHandler.isDarkTheme=t,this.fabricCanvasHandler.getCurrentFabricCanvas().requestRenderAll();let a=t?"Dark theme enabled":"Light theme enabled";this._gaEventsService.eventEmitter("Editor Theme",a,a)}setIsDesignLoading(e){this.fabricCanvasHandler.isDesignLoading=e,this._changeDetectorRef.detectChanges()}initCanvasTemplate(e,t){var a,n,i,r,s,o,p,h,u,b,g,v,m;let C=t.qparams.width,w=t.qparams.height,_=t.params["template-id"],y=t.params["design-id"],x=t.qparams.illustrationURL,H=t.params["mockup-id"],S=t.qparams.svgURL,k=ge();if(this.fabricCanvasHandler.currentPageId=k,"cm"==this.fabricCanvasHandler.docUnits&&(C=Math.round(Number(l.fabric.util.parseUnit(`${C}cm`))),w=Math.round(Number(l.fabric.util.parseUnit(`${w}cm`)))),this.fabricCanvasHandler.dbEventsHandler.userDesign=new d.i(this._userService.getUserId(),this._userService.getCurrentUserWorkspaceId(),this.fabricCanvasHandler.dbEventsHandler.formatCategoryId,k,(null===(n=null===(a=this.fabricCanvasHandler.dbEventsHandler.formatCategoryObj)||void 0===a?void 0:a.dimensions)||void 0===n?void 0:n.doc_width)||C,(null===(r=null===(i=this.fabricCanvasHandler.dbEventsHandler.formatCategoryObj)||void 0===i?void 0:i.dimensions)||void 0===r?void 0:r.doc_height)||w,this.fabricCanvasHandler.docUnits),this.fabricCanvasHandler.dbEventsHandler.templateDesign=new d.f(this._userService.getUserId(),this.fabricCanvasHandler.dbEventsHandler.formatCategoryId,k,(null===(o=null===(s=this.fabricCanvasHandler.dbEventsHandler.formatCategoryObj)||void 0===s?void 0:s.dimensions)||void 0===o?void 0:o.doc_width)||C,(null===(h=null===(p=this.fabricCanvasHandler.dbEventsHandler.formatCategoryObj)||void 0===p?void 0:p.dimensions)||void 0===h?void 0:h.doc_height)||w,this.fabricCanvasHandler.docUnits),this.setCanvasSizeAndClipCanvasAndUpdateViewportAndInitDBVariables(null,!1,(null===(b=null===(u=this.fabricCanvasHandler.dbEventsHandler.formatCategoryObj)||void 0===u?void 0:u.dimensions)||void 0===b?void 0:b.doc_width)||C,(null===(v=null===(g=this.fabricCanvasHandler.dbEventsHandler.formatCategoryObj)||void 0===g?void 0:g.dimensions)||void 0===v?void 0:v.doc_height)||w),this.fabricCanvasHandler.getCurrentFabricCanvas().backgroundColor=this.fabricCanvasHandler.canvasDefaultBackground,this.initCanvasBackgroundColor(),"template-id"==e)this.setIsDesignLoading(!0),this._templateService.getTemplateByTemplateId(_).subscribe(e=>Object(c.a)(this,void 0,void 0,function*(){if(!e)return this.setIsDesignLoading(!1),void this._router.navigate(["/editor/design/not-found"]);this.setCanvasSizeAndClipCanvasAndUpdateViewportAndInitDBVariables(e,!1),this.fabricCanvasHandler.currentPageId=e.pages[0].page_id,this._helpersService.setTitleAndDescription(`${e.template_name} - ${this.fabricCanvasHandler.dbEventsHandler.formatCategoryObj.dimensions.doc_width} x ${this.fabricCanvasHandler.dbEventsHandler.formatCategoryObj.dimensions.doc_height} ${this.fabricCanvasHandler.dbEventsHandler.formatCategoryObj.dimensions.units}`,null),this.fabricCanvasHandler.loadFontsAndThenJSONToCanvas(this.fabricCanvasHandler.dbEventsHandler.userDesign.pages,this.fabricCanvasHandler.getCurrentPage().page_editor_json,!1,!0,()=>{this.setIsDesignLoading(!1),this.fabricCanvasHandler.pagesHandler.generatePageThumbnails()})}),e=>{if(this.fabricCanvasHandler.isDesignLoading=!1,500!==e.status)throw e;this._router.navigate(["/editor/design/not-found"])});else if("text-template-id"==e)this.setIsDesignLoading(!0),this._editorService.getTextTemplateByTemplateId(_).subscribe(e=>Object(c.a)(this,void 0,void 0,function*(){console.log(e),this.setCanvasSizeAndClipCanvasAndUpdateViewportAndInitDBVariables(e,!1),this._helpersService.setTitleAndDescription(e.template_name,null),this.fabricCanvasHandler.loadFontsAndThenJSONToCanvas(null,this.fabricCanvasHandler.dbEventsHandler.templateDesign.canvas_doc_json.editor_json,!1,!0,()=>{this.setIsDesignLoading(!1)})}));else if("design-id"==e)this.setIsDesignLoading(!0),this._editorService.getUserDesignById(y).subscribe(e=>Object(c.a)(this,void 0,void 0,function*(){if(!e)return this.setIsDesignLoading(!1),void this._router.navigate(["/editor/design/not-found"]);this.setCanvasSizeAndClipCanvasAndUpdateViewportAndInitDBVariables(e,!0),this.fabricCanvasHandler.currentPageId=e.pages[0].page_id,this._helpersService.setTitleAndDescription(e.design_name,null),this.fabricCanvasHandler.loadFontsAndThenJSONToCanvas(this.fabricCanvasHandler.dbEventsHandler.userDesign.pages,this.fabricCanvasHandler.getCurrentPage().page_editor_json,!1,!0,()=>{this.setIsDesignLoading(!1),this.fabricCanvasHandler.pagesHandler.generatePageThumbnails()})}),e=>{if(this.fabricCanvasHandler.isDesignLoading=!1,500!==e.status)throw e;this._router.navigate(["/editor/design/not-found"])});else if("mockup-id"==e)this._utilsService.sendActiveSidebarItem({previousSidebarItemId:null,previousSidebarItemTitle:null,previousSidebarItemType:null,sidebarItemId:f.a.SIDEBAR_ITEMS.MOCKUPS.id,sidebarItemTitle:f.a.SIDEBAR_ITEMS.MOCKUPS.title,sidebarItemType:f.a.SIDEBAR_ITEM_TYPES.DefaultSidebarItem}),this.setIsDesignLoading(!0),this._mockupService.getMockupById(H).subscribe(e=>Object(c.a)(this,void 0,void 0,function*(){if(!e)return this.setIsDesignLoading(!1),void this._router.navigate(["/editor/design/not-found"]);this.setIsDesignLoading(!1),this.fabricCanvasHandler.mockupsHandler.addMockupImageToCanvas(e),this.setAndStartWalkthroughSteps(f.a.EDITOR_TOOLS_REF_IDS.MOCKUP_TOOL)}),e=>{if(this.fabricCanvasHandler.isDesignLoading=!1,500!==e.status)throw e;this._router.navigate(["/editor/design/not-found"])});else if("illustration-id"==e)this.setIsDesignLoading(!0),this._editorService.downloadSVGFileFromS3(x).subscribe(e=>{this.fabricCanvasHandler.vectorHandler.loadSVGFromString(e,x),this.setIsDesignLoading(!1)},e=>{throw this.fabricCanvasHandler.isDesignLoading=!1,e});else if("svg-url"==e)this.setIsDesignLoading(!0),this._editorService.downloadSVGFileFromS3(S).subscribe(e=>{this.fabricCanvasHandler.vectorHandler.loadSVGFromString(e,x,.9,"grouped",!0),this.setIsDesignLoading(!1)},e=>{throw this.fabricCanvasHandler.isDesignLoading=!1,e});else{if(t.qparams.refId===f.a.EDITOR_PAGE_REF_ID){let e=JSON.parse(this._localStorageService.getItem(f.a.IMAGE_UPLOAD_FEATURE_PAGE_LOCALSTORAGE)),a=JSON.parse(this._localStorageService.getItem(f.a.SVG_UPLOAD_FEATURE_PAGE_LOCALSTORAGE));e&&(this.fabricCanvasHandler.imageHandler.addImage(e.url),this._localStorageService.removeItem(f.a.IMAGE_UPLOAD_FEATURE_PAGE_LOCALSTORAGE)),a&&setTimeout(()=>{this.fabricCanvasHandler.vectorHandler.loadSVGFromString(a.svgData,null,1,"grouped",!0),this._localStorageService.removeItem(f.a.SVG_UPLOAD_FEATURE_PAGE_LOCALSTORAGE)},2e3),t.qparams.toolRefId===f.a.EDITOR_TOOLS_REF_IDS.IMAGE_SIDEBAR?this._utilsService.sendActiveSidebarItem({previousSidebarItemId:null,previousSidebarItemTitle:null,previousSidebarItemType:null,sidebarItemId:f.a.SIDEBAR_ITEMS.IMAGES.id,sidebarItemTitle:f.a.SIDEBAR_ITEMS.IMAGES.title,sidebarItemType:f.a.SIDEBAR_ITEM_TYPES.DefaultSidebarItem}):t.qparams.toolRefId===f.a.EDITOR_TOOLS_REF_IDS.TEXT_SIDEBAR?this._utilsService.sendActiveSidebarItem({previousSidebarItemId:null,previousSidebarItemTitle:null,previousSidebarItemType:null,sidebarItemId:f.a.SIDEBAR_ITEMS.TEXT.id,sidebarItemTitle:f.a.SIDEBAR_ITEMS.TEXT.title,sidebarItemType:f.a.SIDEBAR_ITEM_TYPES.DefaultSidebarItem}):t.qparams.toolRefId===f.a.EDITOR_TOOLS_REF_IDS.MY_FILES_SIDEBAR?this._utilsService.sendActiveSidebarItem({previousSidebarItemId:null,previousSidebarItemTitle:null,previousSidebarItemType:null,sidebarItemId:f.a.SIDEBAR_ITEMS.MY_FILES.id,sidebarItemTitle:f.a.SIDEBAR_ITEMS.MY_FILES.title,sidebarItemType:f.a.SIDEBAR_ITEM_TYPES.DefaultSidebarItem}):t.qparams.toolRefId===f.a.EDITOR_TOOLS_REF_IDS.ICONS_SIDEBAR?this._utilsService.sendActiveSidebarItem({previousSidebarItemId:null,previousSidebarItemTitle:null,previousSidebarItemType:null,sidebarItemId:f.a.SIDEBAR_ITEMS.ICONS.id,sidebarItemTitle:f.a.SIDEBAR_ITEMS.ICONS.title,sidebarItemType:f.a.SIDEBAR_ITEM_TYPES.DefaultSidebarItem}):t.qparams.toolRefId===f.a.EDITOR_TOOLS_REF_IDS.IMAGE_FILTERS_EFFECTS?(this.setAndStartWalkthroughSteps(t.qparams.toolRefId),this.fabricCanvasHandler.setObjectEditingModeAndToggleSidebar(Se.ImageEffectProps,"Effects & Filters")):(this.setAndStartWalkthroughSteps(t.qparams.toolRefId),t.qparams.toolRefId!==f.a.EDITOR_TOOLS_REF_IDS.FLIP_TOOL&&t.qparams.toolRefId!==f.a.EDITOR_TOOLS_REF_IDS.ZOOM_TOOL&&t.qparams.toolRefId!==f.a.EDITOR_TOOLS_REF_IDS.BORDER_TOOL&&t.qparams.toolRefId!==f.a.EDITOR_TOOLS_REF_IDS.CROP_TOOL&&t.qparams.toolRefId!==f.a.EDITOR_TOOLS_REF_IDS.OPACITY_TOOL||this._utilsService.sendActiveSidebarItem({previousSidebarItemId:null,previousSidebarItemTitle:null,previousSidebarItemType:null,sidebarItemId:f.a.SIDEBAR_ITEMS.IMAGES.id,sidebarItemTitle:f.a.SIDEBAR_ITEMS.IMAGES.title,sidebarItemType:f.a.SIDEBAR_ITEM_TYPES.DefaultSidebarItem}))}"custom-size"===this.fabricCanvasHandler.dbEventsHandler.formatCategoryId&&"user"==(null===(m=this.user)||void 0===m?void 0:m.role)&&(this.fabricCanvasHandler.dbEventsHandler.saveState=f.a.DESIGN_UNSAVED,this.fabricCanvasHandler.canvasEventListenersHandler.triggerSaveUserDesignToDB(),this.fabricCanvasHandler.canvasEventListenersHandler.onThumbnailGeneration()),this._changeDetectorRef.detectChanges()}}initResizeCanvasTemplate(e,t,a){var n,i,r,s,o,l,p,h,u,b,g,v,m,C;return Object(c.a)(this,void 0,void 0,function*(){let c=JSON.parse(this._localStorageService.getItem("resizeJson"));this.setIsDesignLoading(!0);let w=null==c?void 0:c.design;this.fabricCanvasHandler.dbEventsHandler.saveState="Unsaved",this.fabricCanvasHandler.dbEventsHandler.setFormatCategoryId(a),this.fabricCanvasHandler.setDrawableAreaCanvasSize(e||1e3,t||1e3),this.fabricCanvasHandler.setPreviousDrawableAreaCanvasSize(JSON.parse(this._localStorageService.getItem("resizeJson")).originalTemplateDimensions.width,JSON.parse(this._localStorageService.getItem("resizeJson")).originalTemplateDimensions.height),this.fabricCanvasHandler.workAreaHandler.setCanvasSize(null,!0),this.fabricCanvasHandler.zoomPanHandler.updateViewport(),this.fabricCanvasHandler.getCurrentFabricCanvas().calcOffset(),this.fabricCanvasHandler.getCurrentFabricCanvas().backgroundColor=this.fabricCanvasHandler.canvasDefaultBackground;let _=ge();this.fabricCanvasHandler.dbEventsHandler.userDesign=new d.i(this._userService.getUserId(),this._userService.getCurrentUserWorkspaceId(),this.fabricCanvasHandler.dbEventsHandler.formatCategoryId,_,(null===(i=null===(n=this.fabricCanvasHandler.dbEventsHandler.formatCategoryObj)||void 0===n?void 0:n.dimensions)||void 0===i?void 0:i.doc_width)||e,(null===(s=null===(r=this.fabricCanvasHandler.dbEventsHandler.formatCategoryObj)||void 0===r?void 0:r.dimensions)||void 0===s?void 0:s.doc_height)||t,this.fabricCanvasHandler.docUnits),this.fabricCanvasHandler.dbEventsHandler.templateDesign=new d.f(this._userService.getUserId(),this.fabricCanvasHandler.dbEventsHandler.formatCategoryId,_,(null===(l=null===(o=this.fabricCanvasHandler.dbEventsHandler.formatCategoryObj)||void 0===o?void 0:o.dimensions)||void 0===l?void 0:l.doc_width)||e,(null===(h=null===(p=this.fabricCanvasHandler.dbEventsHandler.formatCategoryObj)||void 0===p?void 0:p.dimensions)||void 0===h?void 0:h.doc_height)||t,this.fabricCanvasHandler.docUnits),this.fabricCanvasHandler.dbEventsHandler.userDesign.setUserDesignData({format_category:this.fabricCanvasHandler.dbEventsHandler.formatCategoryId,workspace_id:this._userService.getCurrentUserWorkspaceId(),design_name:`${w.design_name}`,user_id:this._userService.getUserId(),pages:c.design.pages,is_pro:c.design.is_pro,canvas_doc_json:{doc_width:(null===(b=null===(u=this.fabricCanvasHandler.dbEventsHandler.formatCategoryObj)||void 0===u?void 0:u.dimensions)||void 0===b?void 0:b.doc_width)||e,doc_height:(null===(v=null===(g=this.fabricCanvasHandler.dbEventsHandler.formatCategoryObj)||void 0===g?void 0:g.dimensions)||void 0===v?void 0:v.doc_height)||t,doc_units:c.design.canvas_doc_json.doc_units}}),this._helpersService.setTitleAndDescription(this.fabricCanvasHandler.dbEventsHandler.userDesign.design_name,null),"admin_designer"!==(null===(m=this.user)||void 0===m?void 0:m.role)&&"template_designer"!==(null===(C=this.user)||void 0===C?void 0:C.role)||(this.fabricCanvasHandler.dbEventsHandler.templateDesign.tags=c.templateData.tags,this.fabricCanvasHandler.dbEventsHandler.templateDesign.template_name=c.templateData.templateName,this.fabricCanvasHandler.dbEventsHandler.templateDesign.template_desc=c.templateData.templateDescription),this.initCanvasBackgroundColor();let y=new Oe(this.fabricCanvasHandler.previousdrawableAreaCanvasSize.width,this.fabricCanvasHandler.previousdrawableAreaCanvasSize.height),x=new Oe(this.fabricCanvasHandler.drawableAreaCanvasSize.width,this.fabricCanvasHandler.drawableAreaCanvasSize.height),H={x:Number(x.width/y.width),y:Number(x.height/y.height)};for(let e of w.pages)yield this.fabricCanvasHandler.templateResizeHandler.resizeAndScaleObjectsAccordingToCanvasSize(e,H,y,x);this.fabricCanvasHandler.currentPageId=this.fabricCanvasHandler.dbEventsHandler.userDesign.pages[0].page_id,setTimeout(()=>{this.fabricCanvasHandler.getCurrentFabricCanvas().clear(),this.fabricCanvasHandler.loadFontsAndThenJSONToCanvas(this.fabricCanvasHandler.dbEventsHandler.userDesign.pages,this.fabricCanvasHandler.getCurrentPage().page_editor_json,!1,!0,()=>{var e;this.setIsDesignLoading(!1),"user"==(null===(e=this.user)||void 0===e?void 0:e.role)&&(this.fabricCanvasHandler.dbEventsHandler.saveState=f.a.DESIGN_UNSAVED,this.fabricCanvasHandler.canvasEventListenersHandler.triggerSaveUserDesignToDB(),this.fabricCanvasHandler.pagesHandler.generatePageThumbnails())})},1e3),"custom-size"!=this.fabricCanvasHandler.dbEventsHandler.formatCategoryId&&this._utilsService.sendActiveSidebarItem({previousSidebarItemId:null,previousSidebarItemTitle:null,previousSidebarItemType:null,sidebarItemId:f.a.SIDEBAR_ITEMS.TEMPLATES.id,sidebarItemTitle:f.a.SIDEBAR_ITEMS.TEMPLATES.title,sidebarItemType:f.a.SIDEBAR_ITEM_TYPES.DefaultSidebarItem})})}setCanvasSizeAndClipCanvasAndUpdateViewportAndInitDBVariables(e,t,a=1e3,n=1e3){var i,r;a=(null===(i=null==e?void 0:e.canvas_doc_json)||void 0===i?void 0:i.doc_width)||a,n=(null===(r=null==e?void 0:e.canvas_doc_json)||void 0===r?void 0:r.doc_height)||n,this.fabricCanvasHandler.setDrawableAreaCanvasSize(a,n),this.fabricCanvasHandler.setPreviousDrawableAreaCanvasSize(a,n),e?(this.fabricCanvasHandler.dbEventsHandler.setFormatCategoryId(e.format_category),this.fabricCanvasHandler.docUnits=e.canvas_doc_json.doc_units,this.fabricCanvasHandler.dbEventsHandler.isProTemplate=e.is_pro):this.fabricCanvasHandler.workAreaHandler.setCanvasSize(null,!0),e&&t?this.fabricCanvasHandler.dbEventsHandler.userDesign.setUserDesignData(e):e&&!t&&(this.fabricCanvasHandler.dbEventsHandler.templateDesign.setTemplateDesignData(e),this.fabricCanvasHandler.dbEventsHandler.userDesign.setUserDesignData({format_category:e.format_category,workspace_id:this._userService.getCurrentUserWorkspaceId(),design_name:`${e.template_name} - ${this.fabricCanvasHandler.dbEventsHandler.formatCategoryObj.dimensions.doc_width} x ${this.fabricCanvasHandler.dbEventsHandler.formatCategoryObj.dimensions.doc_height} ${this.fabricCanvasHandler.dbEventsHandler.formatCategoryObj.dimensions.units}`,user_id:this._userService.getUserId(),pages:e.pages,is_pro:e.is_pro,canvas_doc_json:{doc_width:e.canvas_doc_json.doc_width,doc_height:e.canvas_doc_json.doc_height,doc_units:e.canvas_doc_json.doc_units}})),this.fabricCanvasHandler.zoomPanHandler.updateViewport(),this.fabricCanvasHandler.getCurrentFabricCanvas().calcOffset(),"custom-size"!=this.fabricCanvasHandler.dbEventsHandler.formatCategoryId&&this._utilsService.sendActiveSidebarItem({previousSidebarItemId:null,previousSidebarItemTitle:null,previousSidebarItemType:null,sidebarItemId:f.a.SIDEBAR_ITEMS.TEMPLATES.id,sidebarItemTitle:f.a.SIDEBAR_ITEMS.TEMPLATES.title,sidebarItemType:f.a.SIDEBAR_ITEM_TYPES.DefaultSidebarItem})}ngOnDestroy(){this._utilsService.sendActiveSidebarItem({previousSidebarItemId:null,previousSidebarItemTitle:null,previousSidebarItemType:null,sidebarItemId:f.a.SIDEBAR_ITEMS.TEMPLATES.id,sidebarItemTitle:f.a.SIDEBAR_ITEMS.TEMPLATES.title,sidebarItemType:f.a.SIDEBAR_ITEM_TYPES.DefaultSidebarItem}),this.editorSubscriptionsList.unsubscribe(),this.fabricCanvasHandler.canvasEventListenersHandler.detachCanvasEventListeners()}addTemplateDataToCanvas(e,t){this.setCanvasSizeAndClipCanvasAndUpdateViewportAndInitDBVariables(e,!1),this.fabricCanvasHandler.currentPageId=e.pages[0].page_id,this.fabricCanvasHandler.loadFontsAndThenJSONToCanvas(this.fabricCanvasHandler.dbEventsHandler.userDesign.pages,this.fabricCanvasHandler.getCurrentPage().page_editor_json,!1,!0,()=>{this.setIsDesignLoading(!1),this.fabricCanvasHandler.pagesHandler.generatePageThumbnails();let e={pageId:this.fabricCanvasHandler.currentPageId,designData:this.fabricCanvasHandler.dbEventsHandler.cloneDesignObjectAndRemoveProps()};this.fabricCanvasHandler.historyHandlerV.debouncedHistory([],[],[],{oldDesignData:t,newDesignData:e},y.ChangedDesign)})}onRightClick(e){return!1}onResize(e){setTimeout(()=>{this.fabricCanvasHandler.zoomPanHandler.fitCanvasToScreen()},500)}onKeyDownHandler(e){this.fabricCanvasHandler.keyboardEventHandler.onKeyDown(e)}onKeyUpHandler(e){this.fabricCanvasHandler.keyboardEventHandler.onKeyUp(e)}fitCanvasToScreen(){this.fabricCanvasHandler.zoomPanHandler.fitCanvasToScreen()}setCanvasSizeEmitter(e){setTimeout(()=>{this.fabricCanvasHandler.zoomPanHandler.fitCanvasToScreen()},500)}initCanvasBackgroundColor(){this.fabricCanvasHandler.elementProps.canvasFill=this.fabricCanvasHandler.getCurrentFabricCanvas().backgroundColor||this.fabricCanvasHandler.canvasDefaultBackground,this._changeDetectorRef.detectChanges()}onMouseMoveEyeDropperWrapper(e){this.fabricCanvasHandler.eyeDropperHandler.getColorFromCanvas(e)}applyEyeDropperColorToElement(){"fill"===this.fabricCanvasHandler.basicToolsHandler.objectFillOrBorderMode||null==this.fabricCanvasHandler.basicToolsHandler.objectFillOrBorderMode?this.fabricCanvasHandler.eyeDropperHandler.applyEyeDropperColorToElementFill():this.fabricCanvasHandler.eyeDropperHandler.applyEyeDropperColorToElementBorderColor()}updateCanvasBackgroundColor(e){this.fabricCanvasHandler.elementProps.canvasFill=e||this.fabricCanvasHandler.canvasDefaultBackground}setAndStartWalkthroughSteps(e){let t,a=2e3;for(let n in f.a.EDITOR_TOOLS_REF_IDS)e==f.a.EDITOR_TOOLS_REF_IDS[n]&&(t=n);if(t&&(t=t.replace(/_/g,"-").toLowerCase(),Te[t])){if("crop-tool"!=t&&"remove-image-background-tool"!=t&&"image-filters-effects"!=t&&"mockup-tool"!=t||(a=3e3),"mockup-tool"==t){if(JSON.parse(this._localStorageService.getItem("mockupToolWalkthrough")))return;this._localStorageService.setItem("mockupToolWalkthrough","true")}setTimeout(()=>{this.introJS.setOptions({showBullets:!1,position:"right",tooltipClass:"px-walkthrough",steps:[{element:document.querySelector(`#${t}`),intro:Te[t].intro}]}).start()},a)}}}return e.\u0275fac=function(t){return new(t||e)(r.Ub(ke),r.Ub(F.a),r.Ub(n.f),r.Ub(n.a),r.Ub(ve.a),r.Ub(xe),r.Ub(tt),r.Ub(Ce),r.Ub(fe.a),r.Ub(P.a),r.Ub(at),r.Ub(He.a),r.Ub(ye.a),r.Ub(r.h),r.Ub(E.a),r.Ub(nt),r.Ub(T.k),r.Ub(Le.c),r.Ub(it.b),r.Ub(T.r))},e.\u0275cmp=r.Ob({type:e,selectors:[["app-editor"]],viewQuery:function(e,t){if(1&e&&r.Wc(So,1),2&e){let e;r.Dc(e=r.lc())&&(t.mainCanvasDivRef=e.first)}},hostBindings:function(e,t){1&e&&r.kc("resize",function(e){return t.onResize(e)},!1,r.Hc)("keydown",function(e){return t.onKeyDownHandler(e)},!1,r.Gc)("keyup",function(e){return t.onKeyUpHandler(e)},!1,r.Gc)},decls:48,vars:24,consts:[[1,"editor-screen-sm"],[1,"mt-1"],[1,"px-editor","h-100","d-flex","flex-column"],[3,"user","KEYBOARD_SHORTCUTS"],[1,"sidebar-curve-top","d-flex","flex-row","flex-grow-1","overflow-hidden","position-relative"],[1,"panel","left-panel","mousescroll","d-flex","flex-column"],[2,"z-index","100",3,"formatsList","formatCategoryObj","placeholderBGColor","allFontsList","setCanvasSizeEmitter"],["sidebarRef",""],[1,"panel","right-panel","overflow-hidden","position-relative","d-flex","flex-column","flex-grow-1"],["class","design-loader-wrapper",4,"ngIf"],[1,"artboard-area","d-flex","flex-row","flex-grow-1"],["mainCanvasDiv",""],[1,"artboard-div","d-flex","flex-row","flex-grow-1",2,"width","100%","height","100%","position","relative",3,"contextmenu","appCanvasDrop","appDropZone"],[1,"transparency-blocks",3,"hidden"],["id","editor-canvas"],["id","mockup-canvas"],["id","webgl-canvas"],[2,"position","absolute","top","0","right","0","background-color","aliceblue","display","none"],["id","mockup-preview-canvas","width","200","height","200"],["class","eye-dropper-wrapper",3,"mousemove","click",4,"ngIf"],[1,"bottom-toolbar-panel"],[1,"left-side","position-absolute","d-flex"],["id","zoom-tool",1,"zoom-options-wrapper"],[1,"toolbar-icon-btn",2,"padding","2px 2px"],["svgIcon","zoom-out","placement","top-left",1,"toolbar-icon","zoom-out-icon",3,"ngbTooltip","click"],["type","range","min","0.1","max","20","step","0.1",1,"custom-range","flex-grow-1",2,"margin","0px 8px",3,"ngModel","ngModelChange","input"],["svgIcon","zoom-in","placement","top-left",1,"toolbar-icon","zoom-in-icon",3,"ngbTooltip","click"],[1,"primary-text",2,"margin","0px 15px","font-weight","600","font-size","11px"],["svgIcon","fit_zoom","placement","top",1,"toolbar-icon","fit-zoom-icon",3,"ngbTooltip","click"],[1,"dark-light-theme-toggle-wrapper"],["role","group","aria-label","Dark theme toggle",1,"btn-group","btn-group-theme-toggle"],["ngbTooltip","Light Mode","type","button",1,"btn","btn-light-theme",3,"click"],["svgIcon","light-theme",1,"toolbar-icon"],["ngbTooltip","Dark Mode","type","button",1,"btn","btn-dark-theme",3,"click"],["svgIcon","dark-theme",1,"toolbar-icon"],[1,"right-side","position-absolute","d-flex"],["class","pages-btn-wrapper",3,"click",4,"ngIf"],[1,"design-loader-wrapper"],[1,"px-loader-1"],[1,"eye-dropper-wrapper",3,"mousemove","click"],[1,"eye-dropper"],[2,"color","white","position","relative","top","24px","text-shadow","1px 1px 4px black","font-weight","600","text-align","center","letter-spacing","0.5px"],[1,"pages-btn-wrapper",3,"click"],[1,"btn","btn-lg","d-flex","align-items-center"],["width","20","height","23","viewBox","0 0 20 23","fill","none","xmlns","http://www.w3.org/2000/svg",2,"margin-right","10px"],["x","0.75","y","6.20459","width","18.5","height","15.7727","rx","1.25","stroke","#5F58B7","stroke-width","1.5"],["x","1.81818","y","2.72705","width","16.3636","height","1.36364","rx","0.681818","fill","#5F58B7"],["x","3.63635","width","12.7273","height","1.36364","rx","0.681818","fill","#5F58B7"]],template:function(e,t){1&e&&(r.ac(0,"div",0),r.ac(1,"span"),r.Qc(2,"Your screen is too small. Pixelied works best with desktop devices."),r.Zb(),r.ac(3,"span",1),r.Qc(4,"Please use a desktop device to access the Pixelied editor."),r.Zb(),r.Zb(),r.ac(5,"div",2),r.Vb(6,"app-editor-navbar",3),r.ac(7,"div",4),r.ac(8,"div",5),r.Vb(9,"app-sidebar-items-list"),r.Zb(),r.ac(10,"app-sidebar",6,7),r.kc("setCanvasSizeEmitter",function(e){return t.setCanvasSizeEmitter(e)}),r.Zb(),r.ac(12,"div",8),r.Vb(13,"app-top-toolbar"),r.Oc(14,ko,2,0,"div",9),r.ac(15,"div",10,11),r.ac(17,"div",12),r.kc("contextmenu",function(e){return t.onRightClick(e)})("appCanvasDrop",function(e){return t.onElementDrop(e)})("appDropZone",function(e){return t.onDrop(e)}),r.ac(18,"div",13),r.Vb(19,"canvas",14),r.Zb(),r.ac(20,"div",13),r.Vb(21,"canvas",15),r.Vb(22,"canvas",16),r.Zb(),r.ac(23,"div",17),r.Vb(24,"canvas",18),r.Zb(),r.Oc(25,Oo,4,5,"div",19),r.Vb(26,"app-mockup-right-panel"),r.Vb(27,"app-pages-right-panel"),r.Zb(),r.Zb(),r.ac(28,"div",20),r.ac(29,"div",21),r.ac(30,"div",22),r.ac(31,"button",23),r.ac(32,"mat-icon",24),r.kc("click",function(){return t.fabricCanvasHandler.zoomPanHandler.setZoom("zoomOut")}),r.Zb(),r.Zb(),r.ac(33,"input",25),r.kc("ngModelChange",function(e){return t.fabricCanvasHandler.zoomOptions.level=e})("input",function(){return t.fabricCanvasHandler.zoomPanHandler.zoomByInputRange()}),r.Zb(),r.ac(34,"button",23),r.ac(35,"mat-icon",26),r.kc("click",function(){return t.fabricCanvasHandler.zoomPanHandler.setZoom("zoomIn")}),r.Zb(),r.Zb(),r.ac(36,"span",27),r.Qc(37),r.Zb(),r.ac(38,"button",23),r.ac(39,"mat-icon",28),r.kc("click",function(){return t.fitCanvasToScreen()}),r.Zb(),r.Zb(),r.Zb(),r.ac(40,"div",29),r.ac(41,"div",30),r.ac(42,"button",31),r.kc("click",function(){return t.setThemeOfEditor("light-theme")}),r.Vb(43,"mat-icon",32),r.Zb(),r.ac(44,"button",33),r.kc("click",function(){return t.setThemeOfEditor("dark-theme")}),r.Vb(45,"mat-icon",34),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.ac(46,"div",35),r.Oc(47,Io,7,0,"div",36),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb()),2&e&&(r.Hb(5),r.Mb("dark-theme",t.fabricCanvasHandler.isDarkTheme)("light-theme",!t.fabricCanvasHandler.isDarkTheme),r.Hb(1),r.uc("user",t.user)("KEYBOARD_SHORTCUTS",t.KEYBOARD_SHORTCUTS),r.Hb(4),r.uc("formatsList",t.fabricCanvasHandler.dbEventsHandler.formatsList)("formatCategoryObj",t.fabricCanvasHandler.dbEventsHandler.formatCategoryObj)("placeholderBGColor",t.placeholderBGColor)("allFontsList",t.fabricCanvasHandler.allFontsList),r.Hb(4),r.uc("ngIf",t.fabricCanvasHandler.isDesignLoading),r.Hb(4),r.uc("hidden",!t.fabricCanvasHandler.isMainCanvas),r.Hb(2),r.uc("hidden",t.fabricCanvasHandler.isMainCanvas),r.Hb(5),r.uc("ngIf",t.fabricCanvasHandler.eyeDropperHandler.eyeDropperMode),r.Hb(7),r.vc("ngbTooltip",t.KEYBOARD_SHORTCUTS.ZOOM_OUT),r.Hb(1),r.uc("ngModel",t.fabricCanvasHandler.zoomOptions.level),r.Hb(2),r.vc("ngbTooltip",t.KEYBOARD_SHORTCUTS.ZOOM_IN),r.Hb(2),r.Rc(t.fabricCanvasHandler.zoomOptions.percentage),r.Hb(2),r.vc("ngbTooltip",t.KEYBOARD_SHORTCUTS.FIT_ZOOM),r.Hb(3),r.Mb("theme-active",!t.fabricCanvasHandler.isDarkTheme),r.Hb(2),r.Mb("theme-active",t.fabricCanvasHandler.isDarkTheme),r.Hb(3),r.uc("ngIf",!t.fabricCanvasHandler.pagesHandler.pagesPanelShown&&!t.fabricCanvasHandler.mockupsHandler.editingMockupContentsMode))},directives:[oa,la,Ns,go,k.m,fo,Pr,Co,Ho,Le.a,T.q,O.p,O.b,O.i,O.l],styles:[':root{--top-toolbar-height:52px}@media screen and (max-width:1270px){:root{--top-toolbar-height:92px}}.light-theme{--px-logo-bg-color:#161616;--px-logo-path-color:#e1dfff;--navbar-button-bg-color:#5f58b7;--sidebar-item-default-color:#626570;--panel-hr-separator-color:rgba(0,0,0,0.1);--type-policy-brightness:brightness(1);--editor-page-bg-color:#fff;--top-toolbar-bg-color:#f0f0f3;--placeholder-bg-color:#eef0f6;--shape-icon-bg-color:#eef0f6;--images-provider-default-bg-color:#eef0f6;--images-provider-active-bg-color:#000;--workspace-name-bg-color:#e1e3e9;--input-hover-bg-color:#e2e2e8;--text-primary-color:#000;--text-secondary-color:#626570;--text-tertiary-color:#656d86;--toolbar-button-neu-bg-color:#f0f0f3;--toolbar-button-icon-default-color:#a6acbe;--toolbar-button-neu-default-box-shadow:-1px -1px 3px #fff,1.5px 1.5px 3px rgba(174,174,192,0.4);--toolbar-button-neu-hover-box-shadow:-2px -2px 4px #fff,2.5px 2.5px 4px rgba(174,174,192,0.4);--toolbar-button-neu-inset-box-shadow:inset -2px -2px 1px hsla(0,0%,100%,0.7),inset 1px 1px 1px rgba(174,174,192,0.55);--toolbar-button-icon-obj-selected-color:#626570;--toolbar-button-icon-tool-selected-color:#5f58b7;--panel-border:0.2px solid rgba(166,172,190,0.3);--sidebar-item-open-bg-color:rgba(95,88,183,0.15);--sidebar-item-open-text-color:#5f58b7;--panel-selected-icon-color:#5f58b7;--dropdown-box-shadow:0px 4px 8px rgba(31,31,31,0.08);--font-img-color:invert(0);--unsplash-provider-color:#000}.dark-theme{--px-logo-bg-color:#5f58b7;--px-logo-path-color:#fff;--navbar-button-bg-color:#6f6abf;--sidebar-item-default-color:#656d86;--panel-hr-separator-color:hsla(0,0%,100%,0.1);--type-policy-brightness:brightness(4);--editor-page-bg-color:#161a25;--top-toolbar-bg-color:#232734;--placeholder-bg-color:#232734;--shape-icon-bg-color:rgba(95,88,183,0.3);--images-provider-default-bg-color:#303544;--images-provider-active-bg-color:#5f58b7;--workspace-name-bg-color:#303544;--input-hover-bg-color:#2d3243;--text-primary-color:#fff;--text-secondary-color:#a6acbe;--text-tertiary-color:#a6acbe;--toolbar-button-neu-bg-color:#232734;--toolbar-button-icon-default-color:#626570;--toolbar-button-neu-default-box-shadow:-1px -1px 3px #373b4b,1.5px 1.5px 3px rgba(4,6,11,0.34);--toolbar-button-neu-hover-box-shadow:-2px -2px 4px #373b4b,2.5px 2.5px 4px rgba(4,6,11,0.34);--toolbar-button-neu-inset-box-shadow:inset -2px -2px 1px rgba(55,59,75,0.7),inset 1px 1px 1px rgba(4,6,11,0.55);--toolbar-button-icon-obj-selected-color:#a6acbe;--toolbar-button-icon-tool-selected-color:#958eee;--panel-border:0.2px solid rgba(48,53,68,0.5);--sidebar-item-open-bg-color:#3c3964;--sidebar-item-open-text-color:#fff;--panel-selected-icon-color:#fff;--dropdown-box-shadow:0px 4px 8px hsla(0,0%,5%,0.5);--font-img-color:invert(1);--unsplash-provider-color:#fff}::-webkit-scrollbar-corner{background:transparent}::-webkit-scrollbar-track{border-radius:10px;background-color:transparent}.help-content::-webkit-scrollbar-track{margin:85px 10px 10px}::-webkit-scrollbar{width:8px;height:8px;border-radius:10px;background-color:var(--top-toolbar-bg-color)}::-webkit-scrollbar-thumb{border-radius:20px;background-color:rgba(71,77,95,.8);-webkit-transition:all .5s;transition:all .5s}::-webkit-scrollbar-thumb:hover{background-color:#474d5f}.fill-border-colorpicker~color-picker .color-picker{background-color:transparent;z-index:1000;border:1px solid transparent!important;border-radius:6px;box-shadow:none!important}.fill-border-colorpicker~color-picker .color-picker .box,.fill-border-colorpicker~color-picker .color-picker .right{padding-left:0;padding-right:0}.fill-border-colorpicker~color-picker .color-picker .alpha,.fill-border-colorpicker~color-picker .color-picker .cmyk-text,.fill-border-colorpicker~color-picker .color-picker .hex-text,.fill-border-colorpicker~color-picker .color-picker .hsla-text,.fill-border-colorpicker~color-picker .color-picker .rgba-text{padding:4px 0;font-weight:700}.fill-border-colorpicker~color-picker .color-picker .alpha .box,.fill-border-colorpicker~color-picker .color-picker .cmyk-text .box,.fill-border-colorpicker~color-picker .color-picker .hex-text .box,.fill-border-colorpicker~color-picker .color-picker .hsla-text .box,.fill-border-colorpicker~color-picker .color-picker .rgba-text .box{padding:0 20px 8px 0}.fill-border-colorpicker~color-picker .color-picker .alpha .box div,.fill-border-colorpicker~color-picker .color-picker .cmyk-text .box div,.fill-border-colorpicker~color-picker .color-picker .hex-text .box div,.fill-border-colorpicker~color-picker .color-picker .hsla-text .box div,.fill-border-colorpicker~color-picker .color-picker .rgba-text .box div{color:var(--text-primary-color)}.fill-border-colorpicker~color-picker .color-picker .alpha .box input,.fill-border-colorpicker~color-picker .color-picker .cmyk-text .box input,.fill-border-colorpicker~color-picker .color-picker .hex-text .box input,.fill-border-colorpicker~color-picker .color-picker .hsla-text .box input,.fill-border-colorpicker~color-picker .color-picker .rgba-text .box input{background-color:var(--editor-page-bg-color);color:var(--sidebar-item-default-color);font-weight:600;border:var(--panel-border);transition:all .2s}.fill-border-colorpicker~color-picker .color-picker .alpha .box input:hover,.fill-border-colorpicker~color-picker .color-picker .cmyk-text .box input:hover,.fill-border-colorpicker~color-picker .color-picker .hex-text .box input:hover,.fill-border-colorpicker~color-picker .color-picker .hsla-text .box input:hover,.fill-border-colorpicker~color-picker .color-picker .rgba-text .box input:hover{border:.5px solid var(--text-tertiary-color)}.fill-border-colorpicker~color-picker .color-picker .alpha .box input:focus,.fill-border-colorpicker~color-picker .color-picker .cmyk-text .box input:focus,.fill-border-colorpicker~color-picker .color-picker .hex-text .box input:focus,.fill-border-colorpicker~color-picker .color-picker .hsla-text .box input:focus,.fill-border-colorpicker~color-picker .color-picker .rgba-text .box input:focus{background-color:var(--editor-page-bg-color);color:var(--text-primary-color);border:.5px solid #5f58b7}.fill-border-colorpicker~color-picker .color-picker .type-policy{right:0;filter:var(--type-policy-brightness)}.px-editor-navbar{height:62px;padding:0}.px-editor-navbar .navbar-brand{margin-right:0;padding:11px 20px}.px-editor-navbar .navbar-brand svg #logo-bg{fill:var(--px-logo-bg-color)}.px-editor-navbar .navbar-brand svg #logo-path{fill:var(--px-logo-path-color)}.px-editor-navbar .px-navbar-contents{width:100%}.px-editor-navbar .px-navbar-contents button{padding:9px 15px;border-radius:6px;font-weight:600}.px-editor-navbar .px-navbar-contents .left-side-contents .btn-resize{transition:all .3s}.px-editor-navbar .px-navbar-contents .left-side-contents .user-workspace{padding:20px 16px;height:100%;font-weight:500;background-color:var(--workspace-name-bg-color);color:var(--text-primary-color);display:flex;align-items:baseline;max-width:200px}.px-editor-navbar .px-navbar-contents .left-side-contents .resize-dropdown-menu{z-index:1100;min-width:24rem;margin-top:14px}.px-editor-navbar .px-navbar-contents .left-side-contents .resize-dropdown-menu .form-control-panel,.px-editor-navbar .px-navbar-contents .left-side-contents .resize-dropdown-menu button{height:40px}.px-editor-navbar .px-navbar-contents .left-side-contents .resize-dropdown-menu .dropdown-toggle,.px-editor-navbar .px-navbar-contents .left-side-contents .resize-dropdown-menu .form-control-panel{font-size:12px;font-weight:500}.px-editor-navbar .px-navbar-contents .left-side-contents .resize-dropdown-menu .form-check-label{font-size:14px;font-weight:700;-webkit-user-select:none;-moz-user-select:none;user-select:none}.px-editor-navbar .px-navbar-contents .left-side-contents .file-menu-dropdown.show .file-btn{background-color:var(--workspace-name-bg-color)}.px-editor-navbar .px-navbar-contents .left-side-contents .file-menu-dropdown .file-btn{color:var(--navbar-button-bg-color)}.px-editor-navbar .px-navbar-contents .left-side-contents .file-menu-dropdown .file-btn.show,.px-editor-navbar .px-navbar-contents .left-side-contents .file-menu-dropdown .file-btn:hover{background-color:var(--workspace-name-bg-color)}.px-editor-navbar .px-navbar-contents .left-side-contents .file-menu-dropdown .file-header{padding:14px 24px}.px-editor-navbar .px-navbar-contents .left-side-contents .file-menu-dropdown .file-header .format-title{font-size:14px;font-weight:600}.px-editor-navbar .px-navbar-contents .left-side-contents .file-menu-dropdown .file-header .size-text{font-size:12px;font-weight:600;padding-top:4px}.px-editor-navbar .px-navbar-contents .right-side-contents{padding-right:20px}.px-editor-navbar .px-navbar-contents .right-side-contents .btn-download .download-icon{width:18px;height:18px;color:#5f58b7}.px-editor-navbar .px-navbar-contents .right-side-contents .saved-cloud-icon{color:#12e48b}.px-editor-navbar .px-navbar-contents .right-side-contents .download-dropdown-menu{z-index:10000;padding:0;min-width:16rem;margin-top:4px}.px-editor-navbar .px-navbar-contents .right-side-contents .download-dropdown-menu .option-header{font-size:12px;font-weight:600;margin-bottom:10px}.px-editor-navbar .px-navbar-contents .right-side-contents .pages-panel-dropdown .panel-dropdown-menu{max-height:250px;overflow-y:auto}.px-editor-navbar .px-navbar-contents .toolbar-icon-btn{cursor:default;border-radius:6px;padding:7px}.px-editor-navbar .px-navbar-contents .toolbar-icon-btn.active{cursor:pointer}.px-editor-navbar .px-navbar-contents .toolbar-icon-btn.active:hover{background-color:var(--placeholder-bg-color)}.px-editor-navbar .px-navbar-contents .toolbar-icon-btn.active .toolbar-icon{opacity:1}.px-editor-navbar .px-navbar-contents .toolbar-icon-btn .toolbar-icon{color:var(--text-primary-color);transition:all .3s;opacity:.3}.editor-screen-sm{z-index:10000;width:100%;height:100%;position:absolute;left:0;top:0;color:#fff;background:#18171a;justify-content:center;align-items:center;text-align:center;display:none;flex-direction:column;padding:25px}.editor-screen-sm span{font-weight:500}@media screen and (max-width:1000px){.editor-screen-sm{display:flex}}.px-editor{background-color:var(--editor-page-bg-color)}.px-editor .pixabay-provider-color{color:#02be6e}.px-editor .unsplash-provider-color{color:var(--unsplash-provider-color)}.px-editor .primary-text{color:var(--text-primary-color)}.px-editor .secondary-text{color:var(--text-secondary-color)}.px-editor .tertiary-text{color:var(--text-tertiary-color)}.px-editor .primary-text-icon-color{color:var(--text-primary-color)}.px-editor .primary-text-icon-color svg path{fill:var(--text-primary-color)}.px-editor .primary-color{color:#5f58b7}.px-editor .sidebar-curve-top{background-color:var(--top-toolbar-bg-color)}.px-editor .tool-options-grid-row{display:grid;grid-template-columns:repeat(auto-fill,minmax(30px,1fr));grid-auto-flow:column;gap:6px;align-items:center}.px-editor .font-img{filter:var(--font-img-color)}.px-editor .colors-list{display:flex;flex-wrap:wrap;gap:4px}.px-editor .colors-list .color-box{background-color:grey;border:.5px solid rgba(174,174,192,.5);border-radius:6px;height:42px;width:42px;cursor:pointer;transition:transform .2s}.px-editor .colors-list .color-box:hover{transform:scale(1.1)}.px-editor .colors-list .color-box.color-selected{border:5px solid rgba(174,174,192,.5)}.px-editor .hr-border-top{border-top:1px solid var(--panel-hr-separator-color)}.px-editor .hr-border-bottom{border-bottom:1px solid var(--panel-hr-separator-color)}.px-editor .hr-separator{height:1px;width:100%;border-top:1px solid var(--panel-hr-separator-color)}.px-editor .left-panel-scrollable-container-padding{padding:0 10px 18px 18px}.px-editor .artboard-area{height:calc(100% - var(--top-toolbar-height));background-color:var(--workspace-name-bg-color)}.px-editor .artboard-area .eye-dropper-wrapper{position:absolute;height:100%;width:100%}.px-editor .artboard-area .eye-dropper-wrapper .eye-dropper{display:flex;flex-direction:column;justify-content:flex-end;transition:all .1s;width:80px;height:80px;border:1px solid rgba(0,0,0,.2);border-radius:10rem;position:absolute;top:20px;right:20px}.px-editor .artboard-area .transparency-blocks{background-size:22px;background-image:url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAiIGhlaWdodD0iMzAiIHZpZXdCb3g9IjAgMCAzMCAzMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTAuMDU0ODA5NiAwLjA1MjkxNzVIMTUuMDA1N1YxNS4wMDM4SDAuMDU0ODA5NlYwLjA1MjkxNzVaTTE1LjAwNTcgMTQuOTk2MkgyOS45NDlWMjkuOTQzM0gxNS4wMDU3VjE0Ljk5NjJaIiBmaWxsPSIjRUVFRkYwIi8+CjxwYXRoIGQ9Ik0yOS45NDcxIDAuMDUxMDI1NEwyOS45NDcxIDE1LjAwMTlMMTQuOTk2MiAxNS4wMDE5TDE0Ljk5NjIgMC4wNTEwMjU0TDI5Ljk0NzEgMC4wNTEwMjU0Wk0xNS4wMDM4IDE1LjAwMTlMMTUuMDAzOCAyOS45NDUyTDAuMDU2NjgyMyAyOS45NDUyTDAuMDU2NjgyMyAxNS4wMDE5TDE1LjAwMzggMTUuMDAxOVoiIGZpbGw9IndoaXRlIi8+Cjwvc3ZnPgo=)}.px-editor .dropdown-toggle:after{display:none}.left-panel{z-index:1000;width:80px;min-width:80px;overflow-y:auto}.left-panel,.sidebar-panel{border-right:var(--panel-border);border-top:var(--panel-border);background-color:var(--editor-page-bg-color)}.sidebar-panel{position:relative;border-top-right-radius:40px;display:flex;width:100%;height:100%;align-items:stretch;padding:18px;min-width:330px;max-width:330px;transition:all .15s}.sidebar-panel #sidebar{width:100%}.sidebar-panel .sidebar-heading{display:flex;align-items:center}.sidebar-panel .sidebar-heading .item-title{padding-left:4px;font-size:22px;font-weight:600;color:var(--text-primary-color)}.sidebar-panel .sidebar-heading .icon-circle{cursor:pointer;background-color:var(--shape-icon-bg-color);border-radius:44px;width:42px;height:42px;display:flex;align-items:center;justify-content:center}.sidebar-panel .sidebar-heading .icon-circle .mat-icon{color:#958eee;width:18px;height:24px}.sidebar-panel .active-integrations-provider{color:#fff!important;background-color:var(--images-provider-active-bg-color)!important}.sidebar-panel .default-integrations-provider{padding:12px;background-color:var(--images-provider-default-bg-color);color:var(--text-secondary-color);transition:all .3s}.sidebar-panel .default-integrations-provider.left-integration-wrapper{border-top-left-radius:6px;border-bottom-left-radius:6px}.sidebar-panel .default-integrations-provider.right-integration-wrapper{border-top-right-radius:6px;border-bottom-right-radius:6px}.sidebar-panel .default-integrations-provider:hover{cursor:pointer}.sidebar-panel .default-integrations-provider span{font-size:14px;font-weight:500}.sidebar-panel .default-integrations-provider .icon{width:18px;height:18px;font-size:12px}.sidebar-panel .provider-text{padding:12px 0;font-size:11px;color:var(--text-secondary-color)}.sidebar-panel .provider-text a{font-weight:500}.sidebar-panel .scrollableContainer{position:absolute;top:0;bottom:0;left:0;right:0;overflow-y:scroll;overflow-x:hidden;padding:0 10px 18px 18px}.sidebar-panel .scrollableContainer .img-container{position:absolute;top:0;left:0;width:100%;height:100%}.sidebar-panel .scrollableContainer .img-container .img-thumb{transition:all .3s;background-color:var(--placeholder-bg-color);width:100%;height:100%;box-shadow:0 0 0 .5px rgba(0,0,0,.1),0 0 0 0 rgba(0,0,0,.1);border-radius:6px}.sidebar-panel .scrollableContainer .img-container .img-thumb:hover{cursor:pointer;box-shadow:0 0 0 1px #5f58b7,0 0 0 2px #5f58b7}.sidebar-panel .scrollableContainer .img-container .template-subscription{position:absolute;top:0;right:0;margin:4px}.sidebar-panel .scrollableContainer .img-container .template-subscription.is-pro{display:flex;background-color:rgba(0,0,0,.45);padding:4px;border-radius:2px}.sidebar-panel .scrollableContainer .img-container .template-subscription.is-pro img,.sidebar-panel .scrollableContainer .img-container .template-subscription.is-pro svg{width:14px;height:14px}.sidebar-panel .search-query{position:relative}.sidebar-panel .search-query .search-icon{display:flex;height:100%;align-items:center;position:absolute;cursor:pointer;left:16px}.sidebar-panel .search-query .search-icon .icon{width:20px;height:20px;font-size:12px;color:var(--text-primary-color)}.sidebar-panel .search-query .search-icon svg line,.sidebar-panel .search-query .search-icon svg path{stroke:var(--text-primary-color)!important}.sidebar-panel .search-query-text{font-size:12px;font-weight:500;color:var(--text-primary-color);padding:12px 0}.sidebar-panel .search-templates-wrapper .panel-dropdown-menu{min-height:24rem;max-height:28rem;overflow-y:auto}.sidebar-panel .search-templates-wrapper .scrollableContainer{top:14.3rem}.sidebar-panel .search-images-wrapper{padding-top:12px}.sidebar-panel .search-images-wrapper .scrollableContainer{top:13.6rem}.sidebar-panel .search-images-wrapper .img-container{position:relative;margin-bottom:20px;transition:all .3s}.sidebar-panel .search-images-wrapper .img-container:hover{cursor:pointer;opacity:.8!important}.sidebar-panel .search-images-wrapper .img-container:hover .info-icon-container{transition:all .3s;display:block!important}.sidebar-panel .search-images-wrapper .img-container img{width:100%;border-radius:6px;transition:all .3s}.sidebar-panel .search-images-wrapper .img-container .attribution-container{position:absolute;bottom:0;left:0;height:25%;width:100%;opacity:1}.sidebar-panel .search-images-wrapper .img-container .attribution-container .photo-attribution{font-size:.7em;background-color:#000;color:#fff;position:absolute;width:100%;bottom:0;left:0;padding:4px;display:none;z-index:5;transition:all .3s}.sidebar-panel .search-images-wrapper .img-container .attribution-container .photo-attribution:hover{display:block!important}.sidebar-panel .search-images-wrapper .img-container .attribution-container .photo-attribution a{color:#fff!important;text-decoration:underline}.sidebar-panel .search-images-wrapper .img-container .attribution-container .info-icon-container{position:absolute;bottom:0;z-index:1;padding:3px;display:none;transition:all .3s}.sidebar-panel .search-images-wrapper .img-container .attribution-container .info-icon-container:hover~.photo-attribution{display:block!important}.sidebar-panel .search-images-wrapper .search-query{margin-top:12px}.sidebar-panel .brand-presets-wrapper .scrollableContainer{top:8rem}.sidebar-panel .brand-presets-wrapper .brand-preset-wrapper{border:2px solid var(--panel-hr-separator-color)}.sidebar-panel .brand-presets-wrapper .brand-preset-wrapper .img-logo-wrapper{background-color:var(--placeholder-bg-color)}.sidebar-panel .brand-presets-wrapper .brand-preset-wrapper .logo-placement{background-color:var(--placeholder-bg-color);color:var(--text-secondary-color)}.sidebar-panel .brand-presets-wrapper .brand-preset-wrapper .font-name{color:var(--text-primary-color)}.sidebar-panel .elements-wrapper{margin-top:14px}.sidebar-panel .elements-wrapper .scrollableContainer{top:10.5rem}.sidebar-panel .elements-wrapper .scrollableContainer .img-container{position:relative;width:auto;height:auto;margin-bottom:10px}.sidebar-panel .elements-wrapper .scrollableContainer .img-container img{-o-object-fit:contain;object-fit:contain;width:65px;height:65px;padding:4px;background-color:var(--placeholder-bg-color)}.sidebar-panel .elements-wrapper .scrollableContainer .img-container img:hover{cursor:pointer;background-color:var(--input-hover-bg-color)}.sidebar-panel .icons-wrapper{margin-top:14px}.sidebar-panel .icons-wrapper .scrollableContainer{top:13.6rem}.sidebar-panel .icons-wrapper .img-container{position:relative;width:auto;height:auto;margin-bottom:10px}.sidebar-panel .icons-wrapper .img-container .img-thumb{width:65px;padding:4px;background-color:var(--placeholder-bg-color)}.sidebar-panel .icons-wrapper .img-container .img-thumb:hover{cursor:pointer;background-color:var(--input-hover-bg-color)}.sidebar-panel .mockups-wrapper{margin-top:14px}.sidebar-panel .mockups-wrapper .scrollableContainer{top:12.2rem}.sidebar-panel .mockups-wrapper .img-container{border-radius:6px;margin-bottom:16px;height:auto;width:47%;background-color:var(--placeholder-bg-color)}.sidebar-panel .mockups-wrapper .img-container .img-thumb{-o-object-fit:cover;object-fit:cover}.sidebar-panel .mockups-wrapper .img-container:hover{background-color:var(--input-hover-bg-color)}.sidebar-panel .color-palettes-wrapper .scrollableContainer{top:10rem}.sidebar-panel .color-palettes-wrapper .scrollableContainer .color-palette-wrapper{border:2px solid var(--panel-hr-separator-color)}.sidebar-panel .color-palettes-wrapper .scrollableContainer .color-palette-wrapper .color{border:1px solid var(--panel-hr-separator-color)}.sidebar-panel .illustrations-wrapper{margin-top:14px}.sidebar-panel .illustrations-wrapper .scrollableContainer{top:10.5rem}.sidebar-panel .illustrations-wrapper .panel-dropdown-menu{min-height:24rem;max-height:28rem;overflow-y:auto}.sidebar-panel .illustrations-wrapper .img-container{position:relative;width:auto;height:auto;margin-bottom:14px;transition:all .3s}.sidebar-panel .illustrations-wrapper .img-container .img-thumb{background-color:var(--placeholder-bg-color);width:139px;height:130px;padding:4px;border-radius:6px}.sidebar-panel .illustrations-wrapper .img-container .img-thumb:hover{cursor:pointer;background-color:var(--input-hover-bg-color)}.sidebar-panel .text-templates-sidebar-wrapper .scrollableContainer{top:72px}.sidebar-panel .text-templates-sidebar-wrapper .scrollableContainer .section-heading{padding:24px 0;font-size:16px;font-weight:600;color:var(--text-primary-color)}.sidebar-panel .text-templates-sidebar-wrapper .scrollableContainer .add-text-wrapper .add-text-title{color:var(--text-primary-color);background-color:var(--placeholder-bg-color);padding:10px;margin:4px 0;border-radius:6px;transition:all .3s}.sidebar-panel .text-templates-sidebar-wrapper .scrollableContainer .add-text-wrapper .add-text-title:hover{cursor:pointer;background-color:var(--input-hover-bg-color)}.sidebar-panel .text-templates-sidebar-wrapper .scrollableContainer .text-templates-wrapper{display:flex;flex-direction:row}.sidebar-panel .text-templates-sidebar-wrapper .scrollableContainer .text-templates-wrapper .column{display:flex;flex-direction:column;width:100%}.sidebar-panel .text-templates-sidebar-wrapper .scrollableContainer .text-templates-wrapper .column .img-container{position:relative;width:auto;height:auto;box-shadow:0 0 0 1px var(--panel-hr-separator-color),0 0 0 2px var(--panel-hr-separator-color);border-radius:4px;transition:all .3s}.sidebar-panel .text-templates-sidebar-wrapper .scrollableContainer .text-templates-wrapper .column .img-container:hover{cursor:pointer;box-shadow:0 0 0 1px #5f58b7,0 0 0 2px #5f58b7}.sidebar-panel .text-templates-sidebar-wrapper .scrollableContainer .text-templates-wrapper .column .img-container img{border-radius:6px}.sidebar-panel .user-files-wrapper .scrollableContainer{top:76px;padding:0}.sidebar-panel .user-files-wrapper .scrollableContainer .drop-box{border:2px dashed var(--sidebar-item-default-color)}.sidebar-panel .user-files-wrapper .scrollableContainer .img-container .img-thumb{background-color:var(--placeholder-bg-color)}.sidebar-panel .user-files-wrapper .scrollableContainer .img-container .img-thumb:hover{background-color:var(--input-hover-bg-color)}.sidebar-panel .ai-copy-wrapper .scrollableContainer{top:17rem}.sidebar-panel .ai-copy-wrapper .suggestions-wrapper{display:grid;gap:12px}.sidebar-panel .ai-copy-wrapper .suggestions-wrapper .suggestion-text{padding:12px;background-color:var(--top-toolbar-bg-color);border-radius:6px;font-size:12px;line-height:16px;color:var(--text-primary-color)}.sidebar-panel .ai-copy-wrapper .suggestions-wrapper .suggestion-text .options-wrapper{display:none;bottom:0;right:0;background-color:var(--top-toolbar-bg-color);border-radius:4px;padding:1px 4px;box-shadow:var(--dropdown-box-shadow);grid-template-columns:1fr 1fr;gap:4px}.sidebar-panel .ai-copy-wrapper .suggestions-wrapper .suggestion-text .options-wrapper .mat-icon{cursor:pointer;transition:all .3s}.sidebar-panel .ai-copy-wrapper .suggestions-wrapper .suggestion-text .options-wrapper .mat-icon:hover{color:gray}.sidebar-panel .ai-copy-wrapper .suggestions-wrapper .suggestion-text .options-wrapper .add-to-canvas-icon{width:16px}.sidebar-panel .ai-copy-wrapper .suggestions-wrapper .suggestion-text .options-wrapper .copy-text-icon{width:18px}.sidebar-panel .ai-copy-wrapper .suggestions-wrapper .suggestion-text:hover .options-wrapper{display:grid}.sidebar-panel .text-props-wrapper{margin-top:14px}.sidebar-panel .text-props-wrapper .panel-button-setting{color:var(--text-secondary-color);padding:2px;border-radius:4px;cursor:default}.sidebar-panel .text-props-wrapper .panel-button-setting.selected{color:var(--panel-selected-icon-color);background-color:var(--shape-icon-bg-color)}.sidebar-panel .text-props-wrapper .panel-button-setting.active{cursor:pointer}.sidebar-panel .text-props-wrapper .panel-button-setting.active:hover{color:var(--panel-selected-icon-color);background-color:var(--shape-icon-bg-color)}.sidebar-panel .image-effects-filters-wrapper .scrollableContainer{top:8.3rem}.sidebar-panel .image-effects-filters-wrapper .scrollableContainer .effect-item-collapsible{cursor:pointer;-webkit-user-select:none;-moz-user-select:none;user-select:none;background-color:var(--top-toolbar-bg-color);color:var(--text-primary-color);padding:12px 16px;border-radius:4px;margin-bottom:8px;font-weight:500;font-size:15px}.sidebar-panel .image-effects-filters-wrapper .scrollableContainer .effect-item-collapsible:hover{background-color:var(--input-hover-bg-color)}.sidebar-panel .image-effects-filters-wrapper .scrollableContainer .effect-item-collapsible .arrow-down-icon{transition:transform .3s;color:#958eee}.sidebar-panel .image-effects-filters-wrapper .scrollableContainer .effect-item-collapsible .icon-opened{transform:rotate(180deg)}.sidebar-panel .image-effects-filters-wrapper .scrollableContainer .effect-subitem{padding-top:8px}.sidebar-panel .image-effects-filters-wrapper .scrollableContainer .effect-subitem:last-child{padding-bottom:12px}.sidebar-panel .image-effects-filters-wrapper .scrollableContainer .effect-subitem .effect-subitem-text{font-size:12px;color:var(--text-secondary-color)}.sidebar-panel .image-effects-filters-wrapper .scrollableContainer .effect-subitem .effect-subitem-options .text-input{width:3rem;text-align:center;margin-left:12px}.sidebar-panel .image-effects-filters-wrapper .scrollableContainer .effect-subitem .bg-rect{cursor:pointer;width:32px;height:32px;border-radius:6px;margin-left:12px;border:1px solid rgba(166,172,190,.45);z-index:1040}.sidebar-panel .image-effects-filters-wrapper .scrollableContainer .effect-subitem .panel-dropdown-menu{max-height:300px;overflow-y:auto}.sidebar-panel .image-effects-filters-wrapper .scrollableContainer .image-filters-wrapper .text-input{width:3rem;text-align:center;margin-left:12px}.sidebar-panel .image-effects-filters-wrapper .scrollableContainer .image-filters-wrapper .option-title{color:var(--text-secondary-color);font-size:12px;min-width:4rem}.sidebar-panel .fill-border-wrapper .scrollableContainer{top:70px}.sidebar-panel .fill-border-wrapper .scrollableContainer .panel-button-setting{color:var(--text-secondary-color);padding:2px;border-radius:4px;cursor:default}.sidebar-panel .fill-border-wrapper .scrollableContainer .panel-button-setting.selected{color:var(--panel-selected-icon-color);background-color:var(--shape-icon-bg-color)}.sidebar-panel .fill-border-wrapper .scrollableContainer .panel-button-setting.active{cursor:pointer}.sidebar-panel .fill-border-wrapper .scrollableContainer .panel-button-setting.active:hover{color:var(--panel-selected-icon-color);background-color:var(--shape-icon-bg-color)}.sidebar--invisible{margin-left:-330px}.sidebar-section-button{padding:11px 0}.sidebar-section-button span{font-size:10px;font-weight:500;line-height:.9;text-align:center;margin-top:4px}.sidebar-section-button .toolbar-icon,.sidebar-section-button span{color:var(--sidebar-item-default-color)}.sidebar-section-button:hover{cursor:pointer}.sidebar-section-button:hover .toolbar-icon,.sidebar-section-button:hover span{transition:all .2s;color:var(--text-primary-color)}.sidebar-section-button.open{background-color:var(--sidebar-item-open-bg-color);border-bottom-right-radius:10px}.sidebar-section-button.open:not(:first-child){border-top-right-radius:10px}.sidebar-section-button.open .toolbar-icon,.sidebar-section-button.open span{color:var(--sidebar-item-open-text-color)}.sidebar-section-button.open .active-rect{display:block}.sidebar-section-button .active-rect{transition:all .3s;display:none;left:0;top:0;width:6px;height:59px;background-color:#5f58b7}.bottom-toolbar-panel .left-side{left:12px;bottom:12px}.bottom-toolbar-panel .left-side .zoom-options-wrapper{height:42px;padding:8px;background-color:var(--editor-page-bg-color);box-shadow:var(--dropdown-box-shadow);border-radius:6px;display:flex;align-items:center}.bottom-toolbar-panel .left-side .zoom-options-wrapper .zoom-in-icon,.bottom-toolbar-panel .left-side .zoom-options-wrapper .zoom-out-icon{color:#6f6abf;width:14px}.bottom-toolbar-panel .left-side .zoom-options-wrapper .fit-zoom-icon{color:var(--text-secondary-color);width:18px}.bottom-toolbar-panel .left-side .dark-light-theme-toggle-wrapper{padding-left:10px}.bottom-toolbar-panel .left-side .dark-light-theme-toggle-wrapper .btn-group-theme-toggle{box-shadow:var(--dropdown-box-shadow);height:42px;border-radius:6px}.bottom-toolbar-panel .left-side .dark-light-theme-toggle-wrapper .btn-group-theme-toggle .btn-light-theme{border-top-right-radius:0;border-bottom-right-radius:0}.bottom-toolbar-panel .left-side .dark-light-theme-toggle-wrapper .btn-group-theme-toggle .btn-dark-theme{border-top-left-radius:0;border-bottom-left-radius:0}.bottom-toolbar-panel .left-side .dark-light-theme-toggle-wrapper .btn-group-theme-toggle button{border:1px solid var(--editor-page-bg-color);background-color:var(--editor-page-bg-color);color:var(--text-tertiary-color);padding:6px 8px;border-radius:6px}.bottom-toolbar-panel .left-side .dark-light-theme-toggle-wrapper .btn-group-theme-toggle button .mat-icon{width:26px;height:26px}.bottom-toolbar-panel .left-side .dark-light-theme-toggle-wrapper .btn-group-theme-toggle button.theme-active{background-color:#5f58b7;border-color:#5f58b7;color:#fff}.bottom-toolbar-panel .right-side{right:12px;bottom:12px}.bottom-toolbar-panel .right-side .pages-btn-wrapper{box-shadow:var(--dropdown-box-shadow)}.bottom-toolbar-panel .right-side .pages-btn-wrapper button{font-weight:600;background-color:var(--editor-page-bg-color);color:var(--text-primary-color);font-size:12px;padding:8px;height:42px;border-radius:6px}.top-toolbar-panel{height:var(--top-toolbar-height);min-height:var(--top-toolbar-height);background-color:var(--top-toolbar-bg-color)}@media screen and (max-width:1270px){.top-toolbar-panel{flex-direction:column!important;flex-wrap:wrap}.top-toolbar-panel .left-side{border-bottom:1px solid var(--panel-hr-separator-color)}.top-toolbar-panel .right-side{padding-left:18px;flex-grow:1}}.top-toolbar-panel .right-side{margin-right:26px}.top-toolbar-panel .seperator{height:20px;margin:0 12px;border-left:1px solid rgba(166,172,190,.45)}.top-toolbar-panel .common-tools-wrapper{display:grid;grid-template-columns:repeat(auto-fill,minmax(30px,1fr));grid-auto-flow:column;gap:6px;align-items:center}.artboard-info{font-size:12px;padding-left:22px;font-weight:500}.artboard-info .artboard-dimensions,.artboard-info .artboard-format-category{color:var(--text-primary-color)}.artboard-info .artboard-dimensions .artboard-width-value{padding-left:8px;padding-right:8px;color:var(--text-secondary-color)}.artboard-info .artboard-dimensions .artboard-height-value{padding-left:8px;color:var(--text-secondary-color)}.btn-fill-wrapper .bg-rect,.canvas-bg-wrapper .bg-rect{width:30px;height:30px;border:1px solid rgba(166,172,190,.45);border-radius:4px;transition:all .1s;cursor:pointer;z-index:1040}.btn-fill-wrapper .bg-rect.tool-selected,.btn-fill-wrapper .bg-rect:hover,.canvas-bg-wrapper .bg-rect.tool-selected,.canvas-bg-wrapper .bg-rect:hover{border:4px solid rgba(166,172,190,.45)}.btn-fill-wrapper span,.canvas-bg-wrapper span{font-weight:600;color:var(--text-primary-color);padding-left:8px}.toolbar-button-neu{position:relative;background-color:var(--toolbar-button-neu-bg-color);box-shadow:var(--toolbar-button-neu-default-box-shadow);border-radius:5px;padding:3px;transition:all .3s;cursor:default}.toolbar-button-neu .toolbar-icon{color:var(--toolbar-button-icon-default-color)}.toolbar-button-neu.btn-text{display:flex;align-items:center;height:30px;padding:0 12px;margin-left:12px}.toolbar-button-neu.btn-text span{font-size:12px;font-weight:600}.toolbar-button-neu.obj-selected .toolbar-icon{color:var(--toolbar-button-icon-obj-selected-color)}.toolbar-button-neu.obj-selected:hover{box-shadow:var(--toolbar-button-neu-hover-box-shadow)}.toolbar-button-neu.obj-selected:hover .toolbar-icon{color:var(--toolbar-button-icon-tool-selected-color)}.toolbar-button-neu.obj-selected:active{box-shadow:var(--toolbar-button-neu-hover-box-shadow)}.toolbar-button-neu.obj-selected:active:before{content:"";position:absolute;top:1.25px;left:1.25px;width:calc(100% - 2.5px);height:calc(100% - 2.5px);border-radius:4px;box-shadow:var(--toolbar-button-neu-inset-box-shadow)}.toolbar-button-neu.tool-selected{box-shadow:var(--toolbar-button-neu-hover-box-shadow)}.toolbar-button-neu.tool-selected .toolbar-icon{color:var(--toolbar-button-icon-tool-selected-color)}.toolbar-button-neu.tool-selected:before{content:"";position:absolute;top:1.25px;left:1.25px;width:calc(100% - 2.5px);height:calc(100% - 2.5px);border-radius:4px;box-shadow:var(--toolbar-button-neu-inset-box-shadow)}.tool-dropdown-menu{padding:10px 16px;border-radius:6px;background-color:var(--editor-page-bg-color);min-width:0;border:none;box-shadow:var(--dropdown-box-shadow)}.tool-dropdown-menu .dropdown-item{padding:14px 20px;color:var(--text-primary-color);font-weight:500;-webkit-user-select:none;-moz-user-select:none;user-select:none}.tool-dropdown-menu .dropdown-item:hover{cursor:pointer;background-color:var(--top-toolbar-bg-color)}.tool-dropdown-menu .grid-tool{display:grid;grid-template-columns:repeat(auto-fill,minmax(30px,1fr));grid-auto-flow:column;gap:6px;align-items:center}.tool-dropdown-menu .grid-tool .toolbar-icon-btn{border-radius:4px;padding:3px;transition:all .3s;color:var(--toolbar-button-icon-obj-selected-color)}.tool-dropdown-menu .grid-tool .toolbar-icon-btn:focus,.tool-dropdown-menu .grid-tool .toolbar-icon-btn:hover{background-color:var(--placeholder-bg-color)}.tool-dropdown-menu .grid-tool .toolbar-icon-btn:focus .toolbar-icon,.tool-dropdown-menu .grid-tool .toolbar-icon-btn:hover .toolbar-icon{color:#5f58b7}.tool-dropdown-menu .slider-input-group{display:flex;flex-direction:row;align-items:center}.tool-dropdown-menu .slider-input-group span{font-weight:500;width:3rem;font-size:12px;padding-right:8px}.tool-dropdown-menu .slider-input-group input[type=text]{width:3rem;height:1.5rem;text-align:center}.tool-dropdown-menu .slider-input-group input[type=range]{margin-right:8px}.panel-dropdown .btn.dropdown-toggle,.panel-dropdown button.dropdown-toggle{padding:12px 16px;border-radius:6px;text-align:left;font-size:16px;font-weight:500;background-color:var(--top-toolbar-bg-color);color:var(--text-primary-color)}.panel-dropdown .btn.dropdown-toggle:hover,.panel-dropdown button.dropdown-toggle:hover{background-color:var(--input-hover-bg-color)}.panel-dropdown .arrow-down-icon{color:#958eee}.panel-dropdown-menu{border-radius:6px;background-color:var(--top-toolbar-bg-color);min-width:0;border:none;box-shadow:0 4px 8px rgba(31,31,31,.08)}.panel-dropdown-menu .dropdown-item{padding:14px 20px;color:var(--text-primary-color);font-weight:500;-webkit-user-select:none;-moz-user-select:none;user-select:none}.panel-dropdown-menu .dropdown-item:hover{cursor:pointer}.panel-dropdown-menu .dropdown-item:hover,.top-level-dropdown.show .dropdown-toggle .dropdown-item:first-child{background-color:var(--input-hover-bg-color)}.navbar-dropdown-menu{background-color:var(--editor-page-bg-color)!important}.editor-form-control{background-color:var(--editor-page-bg-color);color:var(--sidebar-item-default-color);font-weight:600;border:var(--panel-border);transition:all .2s}.editor-form-control:hover{border:.5px solid var(--text-tertiary-color)}.editor-form-control:focus{background-color:var(--editor-page-bg-color);color:var(--text-primary-color);border:.5px solid #5f58b7}.editor-form-control.form-control-panel{border:1.5px solid var(--images-provider-default-bg-color);background-color:var(--top-toolbar-bg-color)}.editor-form-control.form-control-panel::-moz-placeholder{color:var(--text-secondary-color)}.editor-form-control.form-control-panel::placeholder{color:var(--text-secondary-color)}.editor-form-control.form-control-panel:hover{border:1.5px solid var(--text-tertiary-color)}.editor-form-control.form-control-panel:focus{border:1.5px solid #5f58b7}.editor-form-control.form-control-panel.form-control-lg{font-size:14px;height:50px;padding:8px 44px;font-weight:500}.editor-form-control.form-control-design-name{font-weight:400;font-size:13px;text-align:center;background-color:var(--top-toolbar-bg-color);border:none;width:200px}.panel-outline-button{background-color:transparent;border-color:var(--text-secondary-color);color:var(--text-secondary-color)}.panel-outline-button:hover{color:var(--text-secondary-color);background-color:var(--input-hover-bg-color)}.btn-upgrade{padding:9px 28px!important;background:linear-gradient(96.77deg,#ffcc12,#ff900d 126.78%);color:#fff;font-weight:600}.btn-upgrade:hover{color:#fff;background:linear-gradient(96.77deg,#f8c200,#f38300 126.78%)}.btn-navbar{background-color:var(--navbar-button-bg-color)}input[type=range]{width:100%;margin:4.5px 0;background-color:transparent;-webkit-appearance:none}input[type=range]:focus{outline:none}input[type=range]::-webkit-slider-runnable-track{background:var(--images-provider-default-bg-color);border:0;border-radius:25px;width:100%;height:5px;cursor:pointer}input[type=range]::-webkit-slider-thumb{margin-top:-4.5px;width:14px;height:14px;background:#6f6abf;box-shadow:0 0 0 1.8px #eef0f6,0 0 0 0 #eef0f6;border-radius:50px;cursor:pointer;-webkit-appearance:none}input[type=range]:focus::-webkit-slider-runnable-track{background:var(--images-provider-default-bg-color)}input[type=range]::-moz-range-track{background:var(--images-provider-default-bg-color);border:0;border-radius:25px;width:100%;height:5px;cursor:pointer}input[type=range]::-moz-range-thumb{width:14px;height:14px;background:#6f6abf;box-shadow:0 0 0 1.8px #eef0f6,0 0 0 0 #eef0f6;border-radius:50px;cursor:pointer}input[type=range]::-ms-track{background:transparent;border-color:transparent;border-width:5.5px 0;color:transparent;width:100%;height:5px;cursor:pointer}input[type=range]::-ms-fill-lower{background:#191d2b;border:0;border-radius:50px}input[type=range]::-ms-fill-upper{background:var(--images-provider-default-bg-color);border:0;border-radius:50px}input[type=range]::-ms-thumb{width:14px;height:14px;background:#6f6abf;box-shadow:0 0 0 1.8px #eef0f6,0 0 0 0 #eef0f6;border-radius:50px;cursor:pointer;margin-top:0}input[type=range]:focus::-ms-fill-lower{background:var(--images-provider-default-bg-color)}input[type=range]:focus::-ms-fill-upper{background:#2b334b}@supports (-ms-ime-align:auto){input[type=range]{margin:0}}.mockup-edit-contents-wrapper,.pages-panel-wrapper{border-top:var(--panel-border);max-width:220px;width:100%;position:absolute;padding:14px;top:0;right:0;height:100%;overflow-y:auto;border-top-left-radius:40px;background-color:var(--editor-page-bg-color)}.mockup-edit-contents-wrapper{border-right:var(--panel-border)}.mockup-edit-contents-wrapper .preview-box{border:3px solid var(--workspace-name-bg-color);border-radius:6px;padding:26px 0 52px}.mockup-edit-contents-wrapper .preview-text-box{height:30px;background-color:var(--workspace-name-bg-color);bottom:0;border-bottom-left-radius:6px;border-bottom-right-radius:6px}.pages-panel-wrapper{padding:0;overflow-y:hidden;border-left:var(--panel-border)}.pages-panel-wrapper .pages-heading{padding:15px}.pages-panel-wrapper .pages-heading .icon-circle{cursor:pointer;background-color:var(--shape-icon-bg-color);border-radius:44px;width:32px;height:32px;display:flex;align-items:center;justify-content:center}.pages-panel-wrapper .pages-heading .icon-circle .mat-icon{transform:rotate(180deg);color:#958eee;width:15px;height:24px}.pages-panel-wrapper .pages-heading .headline{font-weight:600}.pages-panel-wrapper .pages-heading .pages-length{padding:2px 8px;background-color:var(--images-provider-default-bg-color);font-weight:600;font-size:12px;border-radius:4px;color:var(--toolbar-button-icon-tool-selected-color)}.pages-panel-wrapper .scroll-container{padding:0 15px 4rem;position:absolute;top:64px;bottom:0;left:0;right:0;overflow-y:scroll;overflow-x:hidden}.pages-panel-wrapper .scroll-container .page-wrapper{position:relative;padding-top:14px;cursor:pointer}.pages-panel-wrapper .scroll-container .page-wrapper:hover .page-name-input{background-color:var(--sidebar-item-default-color);color:#fff}.pages-panel-wrapper .scroll-container .page-wrapper:hover .page-name-input::-moz-placeholder{color:#d3d3d3}.pages-panel-wrapper .scroll-container .page-wrapper:hover .page-name-input::placeholder{color:#d3d3d3}.pages-panel-wrapper .scroll-container .page-wrapper:hover .img-container{background-color:var(--images-provider-default-bg-color);border:4px solid var(--sidebar-item-default-color)}.pages-panel-wrapper .scroll-container .page-wrapper:hover .page-options-wrapper{display:block}.pages-panel-wrapper .scroll-container .page-wrapper.active .page-name-input{background-color:var(--toolbar-button-icon-tool-selected-color);color:#fff}.pages-panel-wrapper .scroll-container .page-wrapper.active .page-name-input::-moz-placeholder{color:#d3d3d3}.pages-panel-wrapper .scroll-container .page-wrapper.active .page-name-input::placeholder{color:#d3d3d3}.pages-panel-wrapper .scroll-container .page-wrapper.active .img-container{background-color:var(--images-provider-default-bg-color);border:4px solid var(--toolbar-button-icon-tool-selected-color)}.pages-panel-wrapper .scroll-container .page-wrapper .page-name-input{display:block;float:right;text-align:right;max-width:90px;border:none;outline:none;padding:2px 9px;font-size:10px;border-radius:6px;border-bottom-left-radius:0;border-bottom-right-radius:0;font-weight:700;color:var(--text-tertiary-color);transition:all .3s;background-color:transparent}.pages-panel-wrapper .scroll-container .page-wrapper .page-name-input::-moz-placeholder{color:var(--text-tertiary-color)}.pages-panel-wrapper .scroll-container .page-wrapper .page-name-input::placeholder{color:var(--text-tertiary-color)}.pages-panel-wrapper .scroll-container .page-wrapper .img-container{height:108px;min-height:108px;width:100%;display:flex;align-items:center;justify-content:center;padding:12px;border:4px solid transparent;border-radius:12px;border-top-right-radius:0;transition:all .3s}.pages-panel-wrapper .scroll-container .page-wrapper .img-container img{-o-object-fit:contain;object-fit:contain;overflow:hidden;border:2px solid rgba(166,172,190,.5);height:100%;background-size:12px;background-image:url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAiIGhlaWdodD0iMzAiIHZpZXdCb3g9IjAgMCAzMCAzMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTAuMDU0ODA5NiAwLjA1MjkxNzVIMTUuMDA1N1YxNS4wMDM4SDAuMDU0ODA5NlYwLjA1MjkxNzVaTTE1LjAwNTcgMTQuOTk2MkgyOS45NDlWMjkuOTQzM0gxNS4wMDU3VjE0Ljk5NjJaIiBmaWxsPSIjRUVFRkYwIi8+CjxwYXRoIGQ9Ik0yOS45NDcxIDAuMDUxMDI1NEwyOS45NDcxIDE1LjAwMTlMMTQuOTk2MiAxNS4wMDE5TDE0Ljk5NjIgMC4wNTEwMjU0TDI5Ljk0NzEgMC4wNTEwMjU0Wk0xNS4wMDM4IDE1LjAwMTlMMTUuMDAzOCAyOS45NDUyTDAuMDU2NjgyMyAyOS45NDUyTDAuMDU2NjgyMyAxNS4wMDE5TDE1LjAwMzggMTUuMDAxOVoiIGZpbGw9IndoaXRlIi8+Cjwvc3ZnPgo=)}.pages-panel-wrapper .scroll-container .page-wrapper .page-options-wrapper{display:none;top:40px;right:8px;z-index:10}.pages-panel-wrapper .scroll-container .page-wrapper .page-options-wrapper:hover .mat-icon{color:#5f58b7}.pages-panel-wrapper .scroll-container .page-wrapper .page-options-wrapper .dropdown-toggle{-webkit-user-select:none;-moz-user-select:none;user-select:none;display:flex;align-items:center;justify-content:center;width:24px;height:24px;text-align:center;background-color:#fff;padding:4px;border-radius:4px;box-shadow:0 0 4px 2px rgba(60,57,100,.16)}.pages-panel-wrapper .scroll-container .page-wrapper .page-options-wrapper .mat-icon{transition:all .3s;height:16px;width:8px;font-size:8px}.pages-panel-wrapper .scroll-container .page-wrapper .page-options-wrapper .dropdown-item{padding:6px 16px;font-size:12px}.pages-panel-wrapper .add-pages-icon-wrapper{width:100%;padding:30px 15px;text-align:center}.pages-panel-wrapper .add-pages-icon-wrapper .title{font-weight:600}.pages-panel-wrapper .add-pages-icon-wrapper .sub-text{font-size:12px;padding-top:12px}.pages-panel-wrapper .add-btn-wrapper{z-index:11;background-color:var(--editor-page-bg-color)}.pages-panel-wrapper .add-btn-wrapper .btn{height:40px}.pages-panel-wrapper .add-btn-wrapper .btn .mat-icon{width:20px;height:20px;font-size:12px;margin-right:4px}.container-fluid{padding-left:0;padding-right:0}.chip{cursor:pointer}.chip span{background:#5d5d5d;padding:4px;border-radius:2px;color:#fff;font-size:14px}'],encapsulation:2}),e})();const To=[{path:"",children:[{path:"",data:{title:"Upload Image Online - Free Image Uploader",description:"Upload images online using our free & quick image upload tool. Use our photo editing toolkit to resize, crop, flip, change color & background - all in seconds!"},component:Po},{path:"template/:template-id",data:{canonical:"https://pixelied.com/editor",title:"Editor - Pixelied","og:title":"Editor - Pixelied"},component:Po},{path:"text-template/:template-id",data:{canonical:"https://pixelied.com/editor",title:"Editor - Pixelied","og:title":"Editor - Pixelied"},component:Po,canActivate:[i.a]},{path:"design/not-found",component:o,data:{canonical:"https://pixelied.com/editor/design/not-found"}},{path:"design/:design-id",component:Po,data:{canonical:"https://pixelied.com/editor",title:"Editor - Pixelied","og:title":"Editor - Pixelied"},canActivate:[i.a]},{path:"mockup/:mockup-id",component:Po,data:{canonical:"https://pixelied.com/editor",title:"Editor - Pixelied","og:title":"Editor - Pixelied"}},{path:"illustration/:illustration-id",component:Po,data:{canonical:"https://pixelied.com/editor",title:"Editor - Pixelied","og:title":"Editor - Pixelied"},canActivate:[i.a]},{path:"svg/:svg-id",component:Po,data:{canonical:"https://pixelied.com/editor",title:"Editor - Pixelied","og:title":"Editor - Pixelied"}}]}];let Eo=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.Sb({type:e}),e.\u0275inj=r.Rb({imports:[[n.i.forChild(To)],n.i]}),e})();var Fo=a("PCNd");let Ao=(()=>{class e{constructor(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.Sb({type:e}),e.\u0275inj=r.Rb({providers:[tt,xe,nt,Ce,Pn,Nn,at,ke,za],imports:[[Eo,Fo.a,mr.forRoot({autoFocus:!0})]]}),e})()},BiGR:function(e,t,a){var n=a("nmnc"),i=a("03A+"),r=a("Z0cm"),s=n?n.isConcatSpreadable:void 0;e.exports=function(e){return r(e)||i(e)||!!(s&&e&&e[s])}},BkRI:function(e,t,a){var n=a("OBhP");e.exports=function(e){return n(e,5)}},"Dw+G":function(e,t,a){var n=a("juv8"),i=a("mTTR");e.exports=function(e,t){return e&&n(t,i(t),e)}},DzJC:function(e,t,a){var n=a("sEfC"),i=a("GoyQ");e.exports=function(e,t,a){var r=!0,s=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return i(a)&&(r="leading"in a?!!a.leading:r,s="trailing"in a?!!a.trailing:s),n(e,t,{leading:r,maxWait:t,trailing:s})}},"E+oP":function(e,t,a){var n=a("A90E"),i=a("QqLw"),r=a("03A+"),s=a("Z0cm"),o=a("MMmD"),c=a("DSRE"),l=a("6sVZ"),d=a("c6wG"),p=Object.prototype.hasOwnProperty;e.exports=function(e){if(null==e)return!0;if(o(e)&&(s(e)||"string"==typeof e||"function"==typeof e.splice||c(e)||d(e)||r(e)))return!e.length;var t=i(e);if("[object Map]"==t||"[object Set]"==t)return!e.size;if(l(e))return!n(e).length;for(var a in e)if(p.call(e,a))return!1;return!0}},EA7m:function(e,t,a){var n=a("zZ0H"),i=a("Ioao"),r=a("wclG");e.exports=function(e,t){return r(i(e,t,n),e+"")}},EEGq:function(e,t,a){var n=a("juv8"),i=a("oCl/");e.exports=function(e,t){return n(e,i(e),t)}},G6z8:function(e,t,a){var n=a("fR/l"),i=a("oCl/"),r=a("mTTR");e.exports=function(e){return n(e,r,i)}},Gi0A:function(e,t,a){var n=a("QqLw"),i=a("ExA7");e.exports=function(e){return i(e)&&"[object Map]"==n(e)}},IWTy:function(e,t,a){var n=a("yue5");e.exports=function(e,t,a){for(var i=-1,r=e.criteria,s=t.criteria,o=r.length,c=a.length;++i<o;){var l=n(r[i],s[i]);if(l)return i>=c?l:l*("desc"==a[i]?-1:1)}return e.index-t.index}},Ioao:function(e,t,a){var n=a("heNW"),i=Math.max;e.exports=function(e,t,a){return t=i(void 0===t?e.length-1:t,0),function(){for(var r=arguments,s=-1,o=i(r.length-t,0),c=Array(o);++s<o;)c[s]=r[t+s];s=-1;for(var l=Array(t+1);++s<t;)l[s]=r[s];return l[t]=a(c),n(e,this,l)}}},JC6p:function(e,t,a){var n=a("cq/+"),i=a("7GkX");e.exports=function(e,t){return e&&n(e,t,i)}},LcsW:function(e,t,a){var n=a("kekF")(Object.getPrototypeOf,Object);e.exports=n},MrPd:function(e,t,a){var n=a("hypo"),i=a("ljhN"),r=Object.prototype.hasOwnProperty;e.exports=function(e,t,a){var s=e[t];r.call(e,t)&&i(s,a)&&(void 0!==a||t in e)||n(e,t,a)}},O0oS:function(e,t,a){var n=a("Cwc5"),i=function(){try{var e=n(Object,"defineProperty");return e({},"",{}),e}catch(t){}}();e.exports=i},OBhP:function(e,t,a){var n=a("fmRc"),i=a("gFfm"),r=a("MrPd"),s=a("WwFo"),o=a("Dw+G"),c=a("5Tg0"),l=a("Q1l4"),d=a("VOtZ"),p=a("EEGq"),h=a("qZTm"),u=a("G6z8"),b=a("QqLw"),g=a("yHx3"),f=a("wrZu"),v=a("+iFO"),m=a("Z0cm"),C=a("DSRE"),w=a("zEVN"),_=a("GoyQ"),y=a("1+5i"),x=a("7GkX"),H=a("mTTR"),S={};S["[object Arguments]"]=S["[object Array]"]=S["[object ArrayBuffer]"]=S["[object DataView]"]=S["[object Boolean]"]=S["[object Date]"]=S["[object Float32Array]"]=S["[object Float64Array]"]=S["[object Int8Array]"]=S["[object Int16Array]"]=S["[object Int32Array]"]=S["[object Map]"]=S["[object Number]"]=S["[object Object]"]=S["[object RegExp]"]=S["[object Set]"]=S["[object String]"]=S["[object Symbol]"]=S["[object Uint8Array]"]=S["[object Uint8ClampedArray]"]=S["[object Uint16Array]"]=S["[object Uint32Array]"]=!0,S["[object Error]"]=S["[object Function]"]=S["[object WeakMap]"]=!1,e.exports=function e(t,a,k,O,I,P){var T,E=1&a,F=2&a,A=4&a;if(k&&(T=I?k(t,O,I,P):k(t)),void 0!==T)return T;if(!_(t))return t;var M=m(t);if(M){if(T=g(t),!E)return l(t,T)}else{var D=b(t),j="[object Function]"==D||"[object GeneratorFunction]"==D;if(C(t))return c(t,E);if("[object Object]"==D||"[object Arguments]"==D||j&&!I){if(T=F||j?{}:v(t),!E)return F?p(t,o(T,t)):d(t,s(T,t))}else{if(!S[D])return I?t:{};T=f(t,D,E)}}P||(P=new n);var L=P.get(t);if(L)return L;P.set(t,T),y(t)?t.forEach(function(n){T.add(e(n,a,k,n,t,P))}):w(t)&&t.forEach(function(n,i){T.set(i,e(n,a,k,i,t,P))});var Z=M?void 0:(A?F?u:h:F?H:x)(t);return i(Z||t,function(n,i){Z&&(n=t[i=n]),r(T,i,e(n,a,k,i,t,P))}),T}},Q1l4:function(e,t){e.exports=function(e,t){var a=-1,n=e.length;for(t||(t=Array(n));++a<n;)t[a]=e[a];return t}},QIyF:function(e,t,a){var n=a("Kz5y");e.exports=function(){return n.Date.now()}},QcOe:function(e,t,a){var n=a("GoyQ"),i=a("6sVZ"),r=a("7Ix3"),s=Object.prototype.hasOwnProperty;e.exports=function(e){if(!n(e))return r(e);var t=i(e),a=[];for(var o in e)("constructor"!=o||!t&&s.call(e,o))&&a.push(o);return a}},"R5/Y":function(e,t,a){var n;n=function(){"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}var t=function(){var e={};return function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"introjs-stamp";return e[a]=e[a]||0,void 0===t[a]&&(t[a]=e[a]++),t[a]}}();function a(e,t,a){if(e)for(var n=0,i=e.length;n<i;n++)t(e[n],n);"function"==typeof a&&a()}var n=new function(){var e="introjs_event";this._id=function(e,a,n,i){return a+t(n)+(i?"_".concat(t(i)):"")},this.on=function(t,a,n,i,r){var s=this._id.apply(this,arguments),o=function(e){return n.call(i||t,e||window.event)};"addEventListener"in t?t.addEventListener(a,o,r):"attachEvent"in t&&t.attachEvent("on".concat(a),o),t[e]=t[e]||{},t[e][s]=o},this.off=function(t,a,n,i,r){var s=this._id.apply(this,arguments),o=t[e]&&t[e][s];o&&("removeEventListener"in t?t.removeEventListener(a,o,r):"detachEvent"in t&&t.detachEvent("on".concat(a),o),t[e][s]=null)}},i="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function r(e,t){return e(t={exports:{}},t.exports),t.exports}var s,o,c=function(e){return e&&e.Math==Math&&e},l=c("object"==typeof globalThis&&globalThis)||c("object"==typeof window&&window)||c("object"==typeof self&&self)||c("object"==typeof i&&i)||function(){return this}()||Function("return this")(),d=function(e){try{return!!e()}catch(t){return!0}},p=!d(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}),h=Function.prototype.call,u=h.bind?h.bind(h):function(){return h.apply(h,arguments)},b={}.propertyIsEnumerable,g=Object.getOwnPropertyDescriptor,f={f:g&&!b.call({1:2},1)?function(e){var t=g(this,e);return!!t&&t.enumerable}:b},v=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},m=Function.prototype,C=m.bind,w=m.call,_=C&&C.bind(w),y=C?function(e){return e&&_(w,e)}:function(e){return e&&function(){return w.apply(e,arguments)}},x=y({}.toString),H=y("".slice),S=function(e){return H(x(e),8,-1)},k=l.Object,O=y("".split),I=d(function(){return!k("z").propertyIsEnumerable(0)})?function(e){return"String"==S(e)?O(e,""):k(e)}:k,P=l.TypeError,T=function(e){if(null==e)throw P("Can't call method on "+e);return e},E=function(e){return I(T(e))},F=function(e){return"function"==typeof e},A=function(e){return"object"==typeof e?null!==e:F(e)},M=function(e){return F(e)?e:void 0},D=function(e,t){return arguments.length<2?M(l[e]):l[e]&&l[e][t]},j=y({}.isPrototypeOf),L=D("navigator","userAgent")||"",Z=l.process,R=l.Deno,z=Z&&Z.versions||R&&R.version,B=z&&z.v8;B&&(o=(s=B.split("."))[0]>0&&s[0]<4?1:+(s[0]+s[1])),!o&&L&&(!(s=L.match(/Edge\/(\d+)/))||s[1]>=74)&&(s=L.match(/Chrome\/(\d+)/))&&(o=+s[1]);var U=o,N=!!Object.getOwnPropertySymbols&&!d(function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&U&&U<41}),V=N&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,W=l.Object,G=V?function(e){return"symbol"==typeof e}:function(e){var t=D("Symbol");return F(t)&&j(t.prototype,W(e))},Q=l.String,$=function(e){try{return Q(e)}catch(t){return"Object"}},q=l.TypeError,Y=function(e){if(F(e))return e;throw q($(e)+" is not a function")},X=function(e,t){var a=e[t];return null==a?void 0:Y(a)},J=l.TypeError,K=Object.defineProperty,ee=function(e,t){try{K(l,e,{value:t,configurable:!0,writable:!0})}catch(a){l[e]=t}return t},te=l["__core-js_shared__"]||ee("__core-js_shared__",{}),ae=r(function(e){(e.exports=function(e,t){return te[e]||(te[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.19.1",mode:"global",copyright:"\xa9 2021 Denis Pushkarev (zloirock.ru)"})}),ne=l.Object,ie=function(e){return ne(T(e))},re=y({}.hasOwnProperty),se=Object.hasOwn||function(e,t){return re(ie(e),t)},oe=0,ce=Math.random(),le=y(1..toString),de=function(e){return"Symbol("+(void 0===e?"":e)+")_"+le(++oe+ce,36)},pe=ae("wks"),he=l.Symbol,ue=he&&he.for,be=V?he:he&&he.withoutSetter||de,ge=function(e){if(!se(pe,e)||!N&&"string"!=typeof pe[e]){var t="Symbol."+e;pe[e]=N&&se(he,e)?he[e]:V&&ue?ue(t):be(t)}return pe[e]},fe=l.TypeError,ve=ge("toPrimitive"),me=function(e){var t=function(e,t){if(!A(e)||G(e))return e;var a,n=X(e,ve);if(n){if(void 0===t&&(t="default"),a=u(n,e,t),!A(a)||G(a))return a;throw fe("Can't convert object to primitive value")}return void 0===t&&(t="number"),function(e,t){var a,n;if("string"===t&&F(a=e.toString)&&!A(n=u(a,e)))return n;if(F(a=e.valueOf)&&!A(n=u(a,e)))return n;if("string"!==t&&F(a=e.toString)&&!A(n=u(a,e)))return n;throw J("Can't convert object to primitive value")}(e,t)}(e,"string");return G(t)?t:t+""},Ce=l.document,we=A(Ce)&&A(Ce.createElement),_e=function(e){return we?Ce.createElement(e):{}},ye=!p&&!d(function(){return 7!=Object.defineProperty(_e("div"),"a",{get:function(){return 7}}).a}),xe=Object.getOwnPropertyDescriptor,He={f:p?xe:function(e,t){if(e=E(e),t=me(t),ye)try{return xe(e,t)}catch(a){}if(se(e,t))return v(!u(f.f,e,t),e[t])}},Se=l.String,ke=l.TypeError,Oe=function(e){if(A(e))return e;throw ke(Se(e)+" is not an object")},Ie=l.TypeError,Pe=Object.defineProperty,Te={f:p?Pe:function(e,t,a){if(Oe(e),t=me(t),Oe(a),ye)try{return Pe(e,t,a)}catch(n){}if("get"in a||"set"in a)throw Ie("Accessors not supported");return"value"in a&&(e[t]=a.value),e}},Ee=p?function(e,t,a){return Te.f(e,t,v(1,a))}:function(e,t,a){return e[t]=a,e},Fe=y(Function.toString);F(te.inspectSource)||(te.inspectSource=function(e){return Fe(e)});var Ae,Me,De,je=te.inspectSource,Le=l.WeakMap,Ze=F(Le)&&/native code/.test(je(Le)),Re=ae("keys"),ze=function(e){return Re[e]||(Re[e]=de(e))},Be={},Ue=l.TypeError;if(Ze||te.state){var Ne=te.state||(te.state=new(0,l.WeakMap)),Ve=y(Ne.get),We=y(Ne.has),Ge=y(Ne.set);Ae=function(e,t){if(We(Ne,e))throw new Ue("Object already initialized");return t.facade=e,Ge(Ne,e,t),t},Me=function(e){return Ve(Ne,e)||{}},De=function(e){return We(Ne,e)}}else{var Qe=ze("state");Be[Qe]=!0,Ae=function(e,t){if(se(e,Qe))throw new Ue("Object already initialized");return t.facade=e,Ee(e,Qe,t),t},Me=function(e){return se(e,Qe)?e[Qe]:{}},De=function(e){return se(e,Qe)}}var $e={set:Ae,get:Me,has:De,enforce:function(e){return De(e)?Me(e):Ae(e,{})},getterFor:function(e){return function(t){var a;if(!A(t)||(a=Me(t)).type!==e)throw Ue("Incompatible receiver, "+e+" required");return a}}},qe=Function.prototype,Ye=p&&Object.getOwnPropertyDescriptor,Xe=se(qe,"name"),Je={EXISTS:Xe,PROPER:Xe&&"something"===(function(){}).name,CONFIGURABLE:Xe&&(!p||p&&Ye(qe,"name").configurable)},Ke=r(function(e){var t=Je.CONFIGURABLE,a=$e.get,n=$e.enforce,i=String(String).split("String");(e.exports=function(e,a,r,s){var o,c=!!s&&!!s.unsafe,d=!!s&&!!s.enumerable,p=!!s&&!!s.noTargetGet,h=s&&void 0!==s.name?s.name:a;F(r)&&("Symbol("===String(h).slice(0,7)&&(h="["+String(h).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!se(r,"name")||t&&r.name!==h)&&Ee(r,"name",h),(o=n(r)).source||(o.source=i.join("string"==typeof h?h:""))),e!==l?(c?!p&&e[a]&&(d=!0):delete e[a],d?e[a]=r:Ee(e,a,r)):d?e[a]=r:ee(a,r)})(Function.prototype,"toString",function(){return F(this)&&a(this).source||je(this)})}),et=Math.ceil,tt=Math.floor,at=function(e){var t=+e;return t!=t||0===t?0:(t>0?tt:et)(t)},nt=Math.max,it=Math.min,rt=function(e,t){var a=at(e);return a<0?nt(a+t,0):it(a,t)},st=Math.min,ot=function(e){return e>0?st(at(e),9007199254740991):0},ct=function(e){return ot(e.length)},lt=function(e){return function(t,a,n){var i,r=E(t),s=ct(r),o=rt(n,s);if(e&&a!=a){for(;s>o;)if((i=r[o++])!=i)return!0}else for(;s>o;o++)if((e||o in r)&&r[o]===a)return e||o||0;return!e&&-1}},dt={includes:lt(!0),indexOf:lt(!1)},pt=dt.indexOf,ht=y([].push),ut=function(e,t){var a,n=E(e),i=0,r=[];for(a in n)!se(Be,a)&&se(n,a)&&ht(r,a);for(;t.length>i;)se(n,a=t[i++])&&(~pt(r,a)||ht(r,a));return r},bt=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],gt=bt.concat("length","prototype"),ft={f:Object.getOwnPropertyNames||function(e){return ut(e,gt)}},vt={f:Object.getOwnPropertySymbols},mt=y([].concat),Ct=D("Reflect","ownKeys")||function(e){var t=ft.f(Oe(e)),a=vt.f;return a?mt(t,a(e)):t},wt=function(e,t){for(var a=Ct(t),n=Te.f,i=He.f,r=0;r<a.length;r++){var s=a[r];se(e,s)||n(e,s,i(t,s))}},_t=/#|\.prototype\./,yt=function(e,t){var a=Ht[xt(e)];return a==kt||a!=St&&(F(t)?d(t):!!t)},xt=yt.normalize=function(e){return String(e).replace(_t,".").toLowerCase()},Ht=yt.data={},St=yt.NATIVE="N",kt=yt.POLYFILL="P",Ot=yt,It=He.f,Pt=function(e,t){var a,n,i,r,s,o=e.target,c=e.global,d=e.stat;if(a=c?l:d?l[o]||ee(o,{}):(l[o]||{}).prototype)for(n in t){if(r=t[n],i=e.noTargetGet?(s=It(a,n))&&s.value:a[n],!Ot(c?n:o+(d?".":"#")+n,e.forced)&&void 0!==i){if(typeof r==typeof i)continue;wt(r,i)}(e.sham||i&&i.sham)&&Ee(r,"sham",!0),Ke(a,n,r,e)}},Tt={};Tt[ge("toStringTag")]="z";var Et,Ft="[object z]"===String(Tt),At=ge("toStringTag"),Mt=l.Object,Dt="Arguments"==S(function(){return arguments}()),jt=Ft?S:function(e){var t,a,n;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(a=function(e,t){try{return e[t]}catch(a){}}(t=Mt(e),At))?a:Dt?S(t):"Object"==(n=S(t))&&F(t.callee)?"Arguments":n},Lt=l.String,Zt=function(e){if("Symbol"===jt(e))throw TypeError("Cannot convert a Symbol value to a string");return Lt(e)},Rt=function(){var e=Oe(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t},zt=l.RegExp,Bt={UNSUPPORTED_Y:d(function(){var e=zt("a","y");return e.lastIndex=2,null!=e.exec("abcd")}),BROKEN_CARET:d(function(){var e=zt("^r","gy");return e.lastIndex=2,null!=e.exec("str")})},Ut=Object.keys||function(e){return ut(e,bt)},Nt=p?Object.defineProperties:function(e,t){Oe(e);for(var a,n=E(t),i=Ut(t),r=i.length,s=0;r>s;)Te.f(e,a=i[s++],n[a]);return e},Vt=D("document","documentElement"),Wt=ze("IE_PROTO"),Gt=function(){},Qt=function(e){return"<script>"+e+"<\/script>"},$t=function(e){e.write(Qt("")),e.close();var t=e.parentWindow.Object;return e=null,t},qt=function(){try{Et=new ActiveXObject("htmlfile")}catch(n){}var e,t;qt="undefined"!=typeof document?document.domain&&Et?$t(Et):((t=_e("iframe")).style.display="none",Vt.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(Qt("document.F=Object")),e.close(),e.F):$t(Et);for(var a=bt.length;a--;)delete qt.prototype[bt[a]];return qt()};Be[Wt]=!0;var Yt,Xt,Jt=Object.create||function(e,t){var a;return null!==e?(Gt.prototype=Oe(e),a=new Gt,Gt.prototype=null,a[Wt]=e):a=qt(),void 0===t?a:Nt(a,t)},Kt=l.RegExp,ea=d(function(){var e=Kt(".","s");return!(e.dotAll&&e.exec("\n")&&"s"===e.flags)}),ta=l.RegExp,aa=d(function(){var e=ta("(?<a>b)","g");return"b"!==e.exec("b").groups.a||"bc"!=="b".replace(e,"$<a>c")}),na=$e.get,ia=ae("native-string-replace",String.prototype.replace),ra=RegExp.prototype.exec,sa=ra,oa=y("".charAt),ca=y("".indexOf),la=y("".replace),da=y("".slice),pa=(Xt=/b*/g,u(ra,Yt=/a/,"a"),u(ra,Xt,"a"),0!==Yt.lastIndex||0!==Xt.lastIndex),ha=Bt.UNSUPPORTED_Y||Bt.BROKEN_CARET,ua=void 0!==/()??/.exec("")[1];(pa||ua||ha||ea||aa)&&(sa=function(e){var t,a,n,i,r,s,o,c=this,l=na(c),d=Zt(e),p=l.raw;if(p)return p.lastIndex=c.lastIndex,t=u(sa,p,d),c.lastIndex=p.lastIndex,t;var h=l.groups,b=ha&&c.sticky,g=u(Rt,c),f=c.source,v=0,m=d;if(b&&(g=la(g,"y",""),-1===ca(g,"g")&&(g+="g"),m=da(d,c.lastIndex),c.lastIndex>0&&(!c.multiline||c.multiline&&"\n"!==oa(d,c.lastIndex-1))&&(f="(?: "+f+")",m=" "+m,v++),a=new RegExp("^(?:"+f+")",g)),ua&&(a=new RegExp("^"+f+"$(?!\\s)",g)),pa&&(n=c.lastIndex),i=u(ra,b?a:c,m),b?i?(i.input=da(i.input,v),i[0]=da(i[0],v),i.index=c.lastIndex,c.lastIndex+=i[0].length):c.lastIndex=0:pa&&i&&(c.lastIndex=c.global?i.index+i[0].length:n),ua&&i&&i.length>1&&u(ia,i[0],a,function(){for(r=1;r<arguments.length-2;r++)void 0===arguments[r]&&(i[r]=void 0)}),i&&h)for(i.groups=s=Jt(null),r=0;r<h.length;r++)s[(o=h[r])[0]]=i[o[1]];return i});var ba=sa;Pt({target:"RegExp",proto:!0,forced:/./.exec!==ba},{exec:ba});var ga=ge("species"),fa=RegExp.prototype,va=function(e,t,a,n){var i=ge(e),r=!d(function(){var t={};return t[i]=function(){return 7},7!=""[e](t)}),s=r&&!d(function(){var t=!1,a=/a/;return"split"===e&&((a={}).constructor={},a.constructor[ga]=function(){return a},a.flags="",a[i]=/./[i]),a.exec=function(){return t=!0,null},a[i](""),!t});if(!r||!s||a){var o=y(/./[i]),c=t(i,""[e],function(e,t,a,n,i){var s=y(e),c=t.exec;return c===ba||c===fa.exec?r&&!i?{done:!0,value:o(t,a,n)}:{done:!0,value:s(a,t,n)}:{done:!1}});Ke(String.prototype,e,c[0]),Ke(fa,i,c[1])}n&&Ee(fa[i],"sham",!0)},ma=y("".charAt),Ca=y("".charCodeAt),wa=y("".slice),_a=function(e){return function(t,a){var n,i,r=Zt(T(t)),s=at(a),o=r.length;return s<0||s>=o?e?"":void 0:(n=Ca(r,s))<55296||n>56319||s+1===o||(i=Ca(r,s+1))<56320||i>57343?e?ma(r,s):n:e?wa(r,s,s+2):i-56320+(n-55296<<10)+65536}},ya=(_a(!1),_a(!0)),xa=function(e,t,a){return t+(a?ya(e,t).length:1)},Ha=l.TypeError,Sa=function(e,t){var a=e.exec;if(F(a)){var n=u(a,e,t);return null!==n&&Oe(n),n}if("RegExp"===S(e))return u(ba,e,t);throw Ha("RegExp#exec called on incompatible receiver")};va("match",function(e,t,a){return[function(t){var a=T(this),n=null==t?void 0:X(t,e);return n?u(n,t,a):new RegExp(t)[e](Zt(a))},function(e){var n=Oe(this),i=Zt(e),r=a(t,n,i);if(r.done)return r.value;if(!n.global)return Sa(n,i);var s=n.unicode;n.lastIndex=0;for(var o,c=[],l=0;null!==(o=Sa(n,i));){var d=Zt(o[0]);c[l]=d,""===d&&(n.lastIndex=xa(i,ot(n.lastIndex),s)),l++}return 0===l?null:c}]});var ka=Array.isArray||function(e){return"Array"==S(e)},Oa=function(e,t,a){var n=me(t);n in e?Te.f(e,n,v(0,a)):e[n]=a},Ia=function(){},Pa=[],Ta=D("Reflect","construct"),Ea=/^\s*(?:class|function)\b/,Fa=y(Ea.exec),Aa=!Ea.exec(Ia),Ma=function(e){if(!F(e))return!1;try{return Ta(Ia,Pa,e),!0}catch(t){return!1}},Da=!Ta||d(function(){var e;return Ma(Ma.call)||!Ma(Object)||!Ma(function(){e=!0})||e})?function(e){if(!F(e))return!1;switch(jt(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}return Aa||!!Fa(Ea,je(e))}:Ma,ja=ge("species"),La=l.Array,Za=function(e,t){return new(function(e){var t;return ka(e)&&(Da(t=e.constructor)&&(t===La||ka(t.prototype))||A(t)&&null===(t=t[ja]))&&(t=void 0),void 0===t?La:t}(e))(0===t?0:t)},Ra=ge("species"),za=function(e){return U>=51||!d(function(){var t=[];return(t.constructor={})[Ra]=function(){return{foo:1}},1!==t[e](Boolean).foo})},Ba=ge("isConcatSpreadable"),Ua=l.TypeError,Na=U>=51||!d(function(){var e=[];return e[Ba]=!1,e.concat()[0]!==e}),Va=za("concat"),Wa=function(e){if(!A(e))return!1;var t=e[Ba];return void 0!==t?!!t:ka(e)};Pt({target:"Array",proto:!0,forced:!Na||!Va},{concat:function(e){var t,a,n,i,r,s=ie(this),o=Za(s,0),c=0;for(t=-1,n=arguments.length;t<n;t++)if(Wa(r=-1===t?s:arguments[t])){if(c+(i=ct(r))>9007199254740991)throw Ua("Maximum allowed index exceeded");for(a=0;a<i;a++,c++)a in r&&Oa(o,c,r[a])}else{if(c>=9007199254740991)throw Ua("Maximum allowed index exceeded");Oa(o,c++,r)}return o.length=c,o}}),Ft||Ke(Object.prototype,"toString",Ft?{}.toString:function(){return"[object "+jt(this)+"]"},{unsafe:!0});var Ga=Je.PROPER,Qa=RegExp.prototype,$a=Qa.toString,qa=y(Rt);(d(function(){return"/a/b"!=$a.call({source:"a",flags:"b"})})||Ga&&"toString"!=$a.name)&&Ke(RegExp.prototype,"toString",function(){var e=Oe(this),t=Zt(e.source),a=e.flags;return"/"+t+"/"+Zt(void 0===a&&j(Qa,e)&&!("flags"in Qa)?qa(e):a)},{unsafe:!0});var Ya=Function.prototype,Xa=Ya.apply,Ja=Ya.call,Ka="object"==typeof Reflect&&Reflect.apply||(Ya.bind?Ja.bind(Xa):function(){return Ja.apply(Xa,arguments)}),en=ge("match"),tn=function(e){var t;return A(e)&&(void 0!==(t=e[en])?!!t:"RegExp"==S(e))},an=l.TypeError,nn=ge("species"),rn=y([].slice),sn=Bt.UNSUPPORTED_Y,on=Math.min,cn=[].push,ln=y(/./.exec),dn=y(cn),pn=y("".slice);function hn(e,t){if(e instanceof SVGElement){var n=e.getAttribute("class")||"";n.match(t)||e.setAttribute("class","".concat(n," ").concat(t))}else void 0!==e.classList?a(t.split(" "),function(t){e.classList.add(t)}):e.className.match(t)||(e.className+=" ".concat(t))}function un(e,t){var a="";return e.currentStyle?a=e.currentStyle[t]:document.defaultView&&document.defaultView.getComputedStyle&&(a=document.defaultView.getComputedStyle(e,null).getPropertyValue(t)),a&&a.toLowerCase?a.toLowerCase():a}function bn(e){var t=e.element;if(this._options.scrollToElement){var a=function(e){var t=window.getComputedStyle(e),a="absolute"===t.position,n=/(auto|scroll)/;if("fixed"===t.position)return document.body;for(var i=e;i=i.parentElement;)if(t=window.getComputedStyle(i),(!a||"static"!==t.position)&&n.test(t.overflow+t.overflowY+t.overflowX))return i;return document.body}(t);a!==document.body&&(a.scrollTop=t.offsetTop-a.offsetTop)}}function gn(){if(void 0!==window.innerWidth)return{width:window.innerWidth,height:window.innerHeight};var e=document.documentElement;return{width:e.clientWidth,height:e.clientHeight}}function fn(e,t,a){var n,i=t.element;if("off"!==e&&this._options.scrollToElement&&(n="tooltip"===e?a.getBoundingClientRect():i.getBoundingClientRect(),!function(e){var t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom+80<=window.innerHeight&&t.right<=window.innerWidth}(i))){var r=gn().height;n.bottom-(n.bottom-n.top)<0||i.clientHeight>r?window.scrollBy(0,n.top-(r/2-n.height/2)-this._options.scrollPadding):window.scrollBy(0,n.top-(r/2-n.height/2)+this._options.scrollPadding)}}function vn(e){e.setAttribute("role","button"),e.tabIndex=0}va("split",function(e,t,a){var n;return n="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,a){var n=Zt(T(this)),i=void 0===a?4294967295:a>>>0;if(0===i)return[];if(void 0===e)return[n];if(!tn(e))return u(t,n,e,i);for(var r,s,o,c=[],l=0,d=new RegExp(e.source,(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":"")+"g");(r=u(ba,d,n))&&!((s=d.lastIndex)>l&&(dn(c,pn(n,l,r.index)),r.length>1&&r.index<n.length&&Ka(cn,c,rn(r,1)),o=r[0].length,l=s,c.length>=i));)d.lastIndex===r.index&&d.lastIndex++;return l===n.length?!o&&ln(d,"")||dn(c,""):dn(c,pn(n,l)),c.length>i?rn(c,0,i):c}:"0".split(void 0,0).length?function(e,a){return void 0===e&&0===a?[]:u(t,this,e,a)}:t,[function(t,a){var i=T(this),r=null==t?void 0:X(t,e);return r?u(r,t,i,a):u(n,Zt(i),t,a)},function(e,i){var r=Oe(this),s=Zt(e),o=a(n,r,s,i,n!==t);if(o.done)return o.value;var c=function(e,t){var a,n=Oe(e).constructor;return void 0===n||null==(a=Oe(n)[nn])?t:function(e){if(Da(e))return e;throw an($(e)+" is not a constructor")}(a)}(r,RegExp),l=r.unicode,d=new c(sn?"^(?:"+r.source+")":r,(r.ignoreCase?"i":"")+(r.multiline?"m":"")+(r.unicode?"u":"")+(sn?"g":"y")),p=void 0===i?4294967295:i>>>0;if(0===p)return[];if(0===s.length)return null===Sa(d,s)?[s]:[];for(var h=0,u=0,b=[];u<s.length;){d.lastIndex=sn?0:u;var g,f=Sa(d,sn?pn(s,u):s);if(null===f||(g=on(ot(d.lastIndex+(sn?u:0)),s.length))===h)u=xa(s,u,l);else{if(dn(b,pn(s,h,u)),b.length===p)return b;for(var v=1;v<=f.length-1;v++)if(dn(b,f[v]),b.length===p)return b;u=h=g}}return dn(b,pn(s,h)),b}]},!!d(function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var a="ab".split(e);return 2!==a.length||"a"!==a[0]||"b"!==a[1]}),sn);var mn=Object.assign,Cn=Object.defineProperty,wn=y([].concat),_n=!mn||d(function(){if(p&&1!==mn({b:1},mn(Cn({},"a",{enumerable:!0,get:function(){Cn(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},a=Symbol();return e[a]=7,"abcdefghijklmnopqrst".split("").forEach(function(e){t[e]=e}),7!=mn({},e)[a]||"abcdefghijklmnopqrst"!=Ut(mn({},t)).join("")})?function(e,t){for(var a=ie(e),n=arguments.length,i=1,r=vt.f,s=f.f;n>i;)for(var o,c=I(arguments[i++]),l=r?wn(Ut(c),r(c)):Ut(c),d=l.length,h=0;d>h;)o=l[h++],p&&!u(s,c,o)||(a[o]=c[o]);return a}:mn;function yn(e){var t=e.parentNode;return!(!t||"HTML"===t.nodeName)&&("fixed"===un(e,"position")||yn(t))}function xn(e,t){var a=document.body,n=document.documentElement,i=window.pageYOffset||n.scrollTop||a.scrollTop,r=window.pageXOffset||n.scrollLeft||a.scrollLeft;t=t||a;var s=e.getBoundingClientRect(),o=t.getBoundingClientRect(),c=un(t,"position"),l={width:s.width,height:s.height};return"body"!==t.tagName.toLowerCase()&&"relative"===c||"sticky"===c?Object.assign(l,{top:s.top-o.top,left:s.left-o.left}):yn(e)?Object.assign(l,{top:s.top,left:s.left}):Object.assign(l,{top:s.top+i,left:s.left+r})}Pt({target:"Object",stat:!0,forced:Object.assign!==_n},{assign:_n});var Hn=Math.floor,Sn=y("".charAt),kn=y("".replace),On=y("".slice),In=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,Pn=/\$([$&'`]|\d{1,2})/g,Tn=function(e,t,a,n,i,r){var s=a+e.length,o=n.length,c=Pn;return void 0!==i&&(i=ie(i),c=In),kn(r,c,function(r,c){var l;switch(Sn(c,0)){case"$":return"$";case"&":return e;case"`":return On(t,0,a);case"'":return On(t,s);case"<":l=i[On(c,1,-1)];break;default:var d=+c;if(0===d)return r;if(d>o){var p=Hn(d/10);return 0===p?r:p<=o?void 0===n[p-1]?Sn(c,1):n[p-1]+Sn(c,1):r}l=n[d-1]}return void 0===l?"":l})},En=ge("replace"),Fn=Math.max,An=Math.min,Mn=y([].concat),Dn=y([].push),jn=y("".indexOf),Ln=y("".slice),Zn="$0"==="a".replace(/./,"$0"),Rn=!!/./[En]&&""===/./[En]("a","$0");function zn(e,t){if(e instanceof SVGElement){var a=e.getAttribute("class")||"";e.setAttribute("class",a.replace(t,"").replace(/^\s+|\s+$/g,""))}else e.className=e.className.replace(t,"").replace(/^\s+|\s+$/g,"")}function Bn(e,t){var a="";if(e.style.cssText&&(a+=e.style.cssText),"string"==typeof t)a+=t;else for(var n in t)a+="".concat(n,":").concat(t[n],";");e.style.cssText=a}function Un(e){if(e){if(!this._introItems[this._currentStep])return;var t=this._introItems[this._currentStep],a=xn(t.element,this._targetElement),n=this._options.helperElementPadding;yn(t.element)?hn(e,"introjs-fixedTooltip"):zn(e,"introjs-fixedTooltip"),"floating"===t.position&&(n=0),Bn(e,{width:"".concat(a.width+n,"px"),height:"".concat(a.height+n,"px"),top:"".concat(a.top-n/2,"px"),left:"".concat(a.left-n/2,"px")})}}va("replace",function(e,t,a){var n=Rn?"$":"$0";return[function(e,a){var n=T(this),i=null==e?void 0:X(e,En);return i?u(i,e,n,a):u(t,Zt(n),e,a)},function(e,i){var r=Oe(this),s=Zt(e);if("string"==typeof i&&-1===jn(i,n)&&-1===jn(i,"$<")){var o=a(t,r,s,i);if(o.done)return o.value}var c=F(i);c||(i=Zt(i));var l=r.global;if(l){var d=r.unicode;r.lastIndex=0}for(var p=[];;){var h=Sa(r,s);if(null===h)break;if(Dn(p,h),!l)break;""===Zt(h[0])&&(r.lastIndex=xa(s,ot(r.lastIndex),d))}for(var u,b="",g=0,f=0;f<p.length;f++){for(var v=Zt((h=p[f])[0]),m=Fn(An(at(h.index),s.length),0),C=[],w=1;w<h.length;w++)Dn(C,void 0===(u=h[w])?u:String(u));var _=h.groups;if(c){var y=Mn([v],C,m,s);void 0!==_&&Dn(y,_);var x=Zt(Ka(i,void 0,y))}else x=Tn(v,s,m,C,_,i);m>=g&&(b+=Ln(s,g,m)+x,g=m+v.length)}return b+Ln(s,g)}]},!!d(function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})||!Zn||Rn);var Nn=ge("unscopables"),Vn=Array.prototype;null==Vn[Nn]&&Te.f(Vn,Nn,{configurable:!0,value:Jt(null)});var Wn=dt.includes;Pt({target:"Array",proto:!0},{includes:function(e){return Wn(this,e,arguments.length>1?arguments[1]:void 0)}}),Vn[Nn].includes=!0;var Gn=za("slice"),Qn=ge("species"),$n=l.Array,qn=Math.max;Pt({target:"Array",proto:!0,forced:!Gn},{slice:function(e,t){var a,n,i,r=E(this),s=ct(r),o=rt(e,s),c=rt(void 0===t?s:t,s);if(ka(r)&&((Da(a=r.constructor)&&(a===$n||ka(a.prototype))||A(a)&&null===(a=a[Qn]))&&(a=void 0),a===$n||void 0===a))return rn(r,o,c);for(n=new(void 0===a?$n:a)(qn(c-o,0)),i=0;o<c;o++,i++)o in r&&Oa(n,i,r[o]);return n.length=i,n}});var Yn=l.TypeError,Xn=function(e){if(tn(e))throw Yn("The method doesn't accept regular expressions");return e},Jn=ge("match"),Kn=y("".indexOf);Pt({target:"String",proto:!0,forced:!function(e){var t=/./;try{"/./".includes(t)}catch(a){try{return t[Jn]=!1,"/./".includes(t)}catch(n){}}return!1}()},{includes:function(e){return!!~Kn(Zt(T(this)),Zt(Xn(e)),arguments.length>1?arguments[1]:void 0)}});var ei=function(e,t){var a=[][e];return!!a&&d(function(){a.call(null,t||function(){throw 1},1)})},ti=y([].join),ai=I!=Object,ni=ei("join",",");Pt({target:"Array",proto:!0,forced:ai||!ni},{join:function(e){return ti(E(this),void 0===e?",":e)}});var ii=y(y.bind),ri=y([].push),si=function(e){var t=1==e,a=2==e,n=3==e,i=4==e,r=6==e,s=7==e,o=5==e||r;return function(c,l,d,p){for(var h,u,b=ie(c),g=I(b),f=function(e,t){return Y(e),void 0===t?e:ii?ii(e,t):function(){return e.apply(t,arguments)}}(l,d),v=ct(g),m=0,C=p||Za,w=t?C(c,v):a||s?C(c,0):void 0;v>m;m++)if((o||m in g)&&(u=f(h=g[m],m,b),e))if(t)w[m]=u;else if(u)switch(e){case 3:return!0;case 5:return h;case 6:return m;case 2:ri(w,h)}else switch(e){case 4:return!1;case 7:ri(w,h)}return r?-1:n||i?i:w}},oi=[si(0),si(1),si(2),si(3),si(4),si(5),si(6),si(7)][2];function ci(e,t,a,n,i){return e.left+t+a.width>n.width?(i.style.left="".concat(n.width-a.width-e.left,"px"),!1):(i.style.left="".concat(t,"px"),!0)}function li(e,t,a,n){return e.left+e.width-t-a.width<0?(n.style.left="".concat(-e.left,"px"),!1):(n.style.right="".concat(t,"px"),!0)}Pt({target:"Array",proto:!0,forced:!za("filter")},{filter:function(e){return oi(this,e,arguments.length>1?arguments[1]:void 0)}});var di=za("splice"),pi=l.TypeError,hi=Math.max,ui=Math.min;function bi(e,t){e.includes(t)&&e.splice(e.indexOf(t),1)}function gi(e,t,a){var n=this._options.positionPrecedence.slice(),i=gn(),r=xn(t).height+10,s=xn(t).width+20,o=e.getBoundingClientRect(),c="floating";o.bottom+r>i.height&&bi(n,"bottom"),o.top-r<0&&bi(n,"top"),o.right+s>i.width&&bi(n,"right"),o.left-s<0&&bi(n,"left");var l,d,p=-1!==(d=(l=a||"").indexOf("-"))?l.substr(d):"";return a&&(a=a.split("-")[0]),n.length&&(c=n.includes(a)?a:n[0]),["top","bottom"].includes(c)&&(c+=function(e,t,a,n){var i=t/2,r=Math.min(a.width,window.screen.width),s=["-left-aligned","-middle-aligned","-right-aligned"];return r-e<t&&bi(s,"-left-aligned"),(e<i||r-e<i)&&bi(s,"-middle-aligned"),e<t&&bi(s,"-right-aligned"),s.length?s.includes(n)?n:s[0]:"-middle-aligned"}(o.left,s,i,p)),c}function fi(e,t,a,n){var i,r,s,o,c;if(n=n||!1,t.style.top=null,t.style.right=null,t.style.bottom=null,t.style.left=null,t.style.marginLeft=null,t.style.marginTop=null,a.style.display="inherit",this._introItems[this._currentStep])switch(t.className=["introjs-tooltip","string"==typeof(i=this._introItems[this._currentStep]).tooltipClass?i.tooltipClass:this._options.tooltipClass].filter(Boolean).join(" "),t.setAttribute("role","dialog"),"floating"!==(c=this._introItems[this._currentStep].position)&&this._options.autoPosition&&(c=gi.call(this,e,t,c)),s=xn(e),r=xn(t),o=gn(),hn(t,"introjs-".concat(c)),c){case"top-right-aligned":a.className="introjs-arrow bottom-right";var l=0;li(s,l,r,t),t.style.bottom="".concat(s.height+20,"px");break;case"top-middle-aligned":a.className="introjs-arrow bottom-middle";var d=s.width/2-r.width/2;n&&(d+=5),li(s,d,r,t)&&(t.style.right=null,ci(s,d,r,o,t)),t.style.bottom="".concat(s.height+20,"px");break;case"top-left-aligned":case"top":a.className="introjs-arrow bottom",ci(s,n?0:15,r,o,t),t.style.bottom="".concat(s.height+20,"px");break;case"right":t.style.left="".concat(s.width+20,"px"),s.top+r.height>o.height?(a.className="introjs-arrow left-bottom",t.style.top="-".concat(r.height-s.height-20,"px")):a.className="introjs-arrow left";break;case"left":n||!0!==this._options.showStepNumbers||(t.style.top="15px"),s.top+r.height>o.height?(t.style.top="-".concat(r.height-s.height-20,"px"),a.className="introjs-arrow right-bottom"):a.className="introjs-arrow right",t.style.right="".concat(s.width+20,"px");break;case"floating":a.style.display="none",t.style.left="50%",t.style.top="50%",t.style.marginLeft="-".concat(r.width/2,"px"),t.style.marginTop="-".concat(r.height/2,"px");break;case"bottom-right-aligned":a.className="introjs-arrow top-right",li(s,l=0,r,t),t.style.top="".concat(s.height+20,"px");break;case"bottom-middle-aligned":a.className="introjs-arrow top-middle",d=s.width/2-r.width/2,n&&(d+=5),li(s,d,r,t)&&(t.style.right=null,ci(s,d,r,o,t)),t.style.top="".concat(s.height+20,"px");break;default:a.className="introjs-arrow top",ci(s,0,r,o,t),t.style.top="".concat(s.height+20,"px")}}function vi(){a(document.querySelectorAll(".introjs-showElement"),function(e){zn(e,/introjs-[a-zA-Z]+/g)})}function mi(e,t){var a=document.createElement(e);t=t||{};var n=/^(?:role|data-|aria-)/;for(var i in t){var r=t[i];"style"===i?Bn(a,r):i.match(n)?a.setAttribute(i,r):a[i]=r}return a}function Ci(e,t,a){if(a){var n=t.style.opacity||"1";Bn(t,{opacity:"0"}),window.setTimeout(function(){Bn(t,{opacity:n})},10)}e.appendChild(t)}function wi(){return parseInt(this._currentStep+1,10)/this._introItems.length*100}function _i(){var e=document.querySelector(".introjs-disableInteraction");null===e&&(e=mi("div",{className:"introjs-disableInteraction"}),this._targetElement.appendChild(e)),Un.call(this,e)}function yi(e){var t=this,n=mi("div",{className:"introjs-bullets"});!1===this._options.showBullets&&(n.style.display="none");var i=mi("ul");i.setAttribute("role","tablist");var r=function(){t.goToStep(this.getAttribute("data-stepnumber"))};return a(this._introItems,function(t,a){var n=t.step,s=mi("li"),o=mi("a");s.setAttribute("role","presentation"),o.setAttribute("role","tab"),o.onclick=r,a===e.step-1&&(o.className="active"),vn(o),o.innerHTML="&nbsp;",o.setAttribute("data-stepnumber",n),s.appendChild(o),i.appendChild(s)}),n.appendChild(i),n}function xi(e,t){if(this._options.showBullets){var a=document.querySelector(".introjs-bullets");a.parentNode.replaceChild(yi.call(this,t),a)}}function Hi(e,t){this._options.showBullets&&(e.querySelector(".introjs-bullets li > a.active").className="",e.querySelector('.introjs-bullets li > a[data-stepnumber="'.concat(t.step,'"]')).className="active")}function Si(){var e=mi("div");e.className="introjs-progress",!1===this._options.showProgress&&(e.style.display="none");var t=mi("div",{className:"introjs-progressbar"});return this._options.progressBarAdditionalClass&&(t.className+=" "+this._options.progressBarAdditionalClass),t.setAttribute("role","progress"),t.setAttribute("aria-valuemin",0),t.setAttribute("aria-valuemax",100),t.setAttribute("aria-valuenow",wi.call(this)),t.style.cssText="width:".concat(wi.call(this),"%;"),e.appendChild(t),e}function ki(e){e.querySelector(".introjs-progress .introjs-progressbar").style.cssText="width:".concat(wi.call(this),"%;"),e.querySelector(".introjs-progress .introjs-progressbar").setAttribute("aria-valuenow",wi.call(this))}function Oi(e){var t=this;void 0!==this._introChangeCallback&&this._introChangeCallback.call(this,e.element);var a,n,i,r=this,s=document.querySelector(".introjs-helperLayer"),o=document.querySelector(".introjs-tooltipReferenceLayer"),c="introjs-helperLayer";if("string"==typeof e.highlightClass&&(c+=" ".concat(e.highlightClass)),"string"==typeof this._options.highlightClass&&(c+=" ".concat(this._options.highlightClass)),null!==s&&null!==o){var l=o.querySelector(".introjs-helperNumberLayer"),d=o.querySelector(".introjs-tooltiptext"),p=o.querySelector(".introjs-tooltip-title"),h=o.querySelector(".introjs-arrow"),u=o.querySelector(".introjs-tooltip");i=o.querySelector(".introjs-skipbutton"),n=o.querySelector(".introjs-prevbutton"),a=o.querySelector(".introjs-nextbutton"),s.className=c,u.style.opacity=0,u.style.display="none",bn.call(r,e),Un.call(r,s),Un.call(r,o),vi(),r._lastShowElementTimer&&window.clearTimeout(r._lastShowElementTimer),r._lastShowElementTimer=window.setTimeout(function(){null!==l&&(l.innerHTML="".concat(e.step," of ").concat(t._introItems.length)),d.innerHTML=e.intro,p.innerHTML=e.title,u.style.display="block",fi.call(r,e.element,u,h),Hi.call(r,o,e),ki.call(r,o),u.style.opacity=1,(null!=a&&/introjs-donebutton/gi.test(a.className)||null!=a)&&a.focus(),fn.call(r,e.scrollTo,e,d)},350)}else{var b=mi("div",{className:c}),g=mi("div",{className:"introjs-tooltipReferenceLayer"}),f=mi("div",{className:"introjs-arrow"}),v=mi("div",{className:"introjs-tooltip"}),m=mi("div",{className:"introjs-tooltiptext"}),C=mi("div",{className:"introjs-tooltip-header"}),w=mi("h1",{className:"introjs-tooltip-title"}),_=mi("div");Bn(b,{"box-shadow":"0 0 1px 2px rgba(33, 33, 33, 0.8), rgba(33, 33, 33, ".concat(r._options.overlayOpacity.toString(),") 0 0 0 5000px")}),bn.call(r,e),Un.call(r,b),Un.call(r,g),Ci(this._targetElement,b,!0),Ci(this._targetElement,g),m.innerHTML=e.intro,w.innerHTML=e.title,_.className="introjs-tooltipbuttons",!1===this._options.showButtons&&(_.style.display="none"),C.appendChild(w),v.appendChild(C),v.appendChild(m),v.appendChild(yi.call(this,e)),v.appendChild(Si.call(this));var y=mi("div");!0===this._options.showStepNumbers&&(y.className="introjs-helperNumberLayer",y.innerHTML="".concat(e.step," of ").concat(this._introItems.length),v.appendChild(y)),v.appendChild(f),g.appendChild(v),(a=mi("a")).onclick=function(){r._introItems.length-1!==r._currentStep?Ti.call(r):/introjs-donebutton/gi.test(a.className)&&("function"==typeof r._introCompleteCallback&&r._introCompleteCallback.call(r,r._currentStep,"done"),gr.call(r,r._targetElement))},vn(a),a.innerHTML=this._options.nextLabel,(n=mi("a")).onclick=function(){0!==r._currentStep&&Ei.call(r)},vn(n),n.innerHTML=this._options.prevLabel,vn(i=mi("a",{className:"introjs-skipbutton"})),i.innerHTML=this._options.skipLabel,i.onclick=function(){r._introItems.length-1===r._currentStep&&"function"==typeof r._introCompleteCallback&&r._introCompleteCallback.call(r,r._currentStep,"skip"),"function"==typeof r._introSkipCallback&&r._introSkipCallback.call(r),gr.call(r,r._targetElement)},C.appendChild(i),this._introItems.length>1&&_.appendChild(n),_.appendChild(a),v.appendChild(_),fi.call(r,e.element,v,f),fn.call(this,e.scrollTo,e,v)}var x=r._targetElement.querySelector(".introjs-disableInteraction");x&&x.parentNode.removeChild(x),e.disableInteraction&&_i.call(r),0===this._currentStep&&this._introItems.length>1?(null!=a&&(a.className="".concat(this._options.buttonClass," introjs-nextbutton"),a.innerHTML=this._options.nextLabel),!0===this._options.hidePrev?(null!=n&&(n.className="".concat(this._options.buttonClass," introjs-prevbutton introjs-hidden")),null!=a&&hn(a,"introjs-fullbutton")):null!=n&&(n.className="".concat(this._options.buttonClass," introjs-prevbutton introjs-disabled"))):this._introItems.length-1===this._currentStep||1===this._introItems.length?(null!=n&&(n.className="".concat(this._options.buttonClass," introjs-prevbutton")),!0===this._options.hideNext?(null!=a&&(a.className="".concat(this._options.buttonClass," introjs-nextbutton introjs-hidden")),null!=n&&hn(n,"introjs-fullbutton")):null!=a&&(!0===this._options.nextToDone?(a.innerHTML=this._options.doneLabel,hn(a,"".concat(this._options.buttonClass," introjs-nextbutton introjs-donebutton"))):a.className="".concat(this._options.buttonClass," introjs-nextbutton introjs-disabled"))):(null!=n&&(n.className="".concat(this._options.buttonClass," introjs-prevbutton")),null!=a&&(a.className="".concat(this._options.buttonClass," introjs-nextbutton"),a.innerHTML=this._options.nextLabel)),null!=n&&n.setAttribute("role","button"),null!=a&&a.setAttribute("role","button"),null!=i&&i.setAttribute("role","button"),null!=a&&a.focus(),function(e){var t=e.element;hn(t,"introjs-showElement");var a=un(t,"position");"absolute"!==a&&"relative"!==a&&"sticky"!==a&&"fixed"!==a&&hn(t,"introjs-relativePosition")}(e),void 0!==this._introAfterChangeCallback&&this._introAfterChangeCallback.call(this,e.element)}function Ii(e){this._currentStep=e-2,void 0!==this._introItems&&Ti.call(this)}function Pi(e){this._currentStepNumber=e,void 0!==this._introItems&&Ti.call(this)}function Ti(){var e=this;this._direction="forward",void 0!==this._currentStepNumber&&a(this._introItems,function(t,a){t.step===e._currentStepNumber&&(e._currentStep=a-1,e._currentStepNumber=void 0)}),void 0===this._currentStep?this._currentStep=0:++this._currentStep;var t=this._introItems[this._currentStep],n=!0;return void 0!==this._introBeforeChangeCallback&&(n=this._introBeforeChangeCallback.call(this,t&&t.element)),!1===n?(--this._currentStep,!1):this._introItems.length<=this._currentStep?("function"==typeof this._introCompleteCallback&&this._introCompleteCallback.call(this,this._currentStep,"end"),void gr.call(this,this._targetElement)):void Oi.call(this,t)}function Ei(){if(this._direction="backward",0===this._currentStep)return!1;--this._currentStep;var e=this._introItems[this._currentStep],t=!0;if(void 0!==this._introBeforeChangeCallback&&(t=this._introBeforeChangeCallback.call(this,e&&e.element)),!1===t)return++this._currentStep,!1;Oi.call(this,e)}function Fi(){return this._currentStep}function Ai(e){var t=void 0===e.code?e.which:e.code;if(null===t&&(t=null===e.charCode?e.keyCode:e.charCode),"Escape"!==t&&27!==t||!0!==this._options.exitOnEsc){if("ArrowLeft"===t||37===t)Ei.call(this);else if("ArrowRight"===t||39===t)Ti.call(this);else if("Enter"===t||"NumpadEnter"===t||13===t){var a=e.target||e.srcElement;a&&a.className.match("introjs-prevbutton")?Ei.call(this):a&&a.className.match("introjs-skipbutton")?(this._introItems.length-1===this._currentStep&&"function"==typeof this._introCompleteCallback&&this._introCompleteCallback.call(this,this._currentStep,"skip"),gr.call(this,this._targetElement)):a&&a.getAttribute("data-stepnumber")?a.click():Ti.call(this),e.preventDefault?e.preventDefault():e.returnValue=!1}}else gr.call(this,this._targetElement)}function Mi(t){if(null===t||"object"!==e(t)||void 0!==t.nodeType)return t;var a={};for(var n in t)a[n]=void 0!==window.jQuery&&t[n]instanceof window.jQuery?t[n]:Mi(t[n]);return a}function Di(e){var t=document.querySelector(".introjs-hints");return t?t.querySelectorAll(e):[]}function ji(e){var t=Di('.introjs-hint[data-step="'.concat(e,'"]'))[0];Wi.call(this),t&&hn(t,"introjs-hidehint"),void 0!==this._hintCloseCallback&&this._hintCloseCallback.call(this,e)}function Li(){var e=this;a(Di(".introjs-hint"),function(t){ji.call(e,t.getAttribute("data-step"))})}function Zi(){var e=this,t=Di(".introjs-hint");t&&t.length?a(t,function(t){Ri.call(e,t.getAttribute("data-step"))}):Gi.call(this,this._targetElement)}function Ri(e){var t=Di('.introjs-hint[data-step="'.concat(e,'"]'))[0];t&&zn(t,/introjs-hidehint/g)}function zi(){var e=this;a(Di(".introjs-hint"),function(t){Bi.call(e,t.getAttribute("data-step"))}),n.off(document,"click",Wi,this,!1),n.off(window,"resize",Qi,this,!0),this._hintsAutoRefreshFunction&&n.off(window,"scroll",this._hintsAutoRefreshFunction,this,!0)}function Bi(e){var t=Di('.introjs-hint[data-step="'.concat(e,'"]'))[0];t&&t.parentNode.removeChild(t)}function Ui(){var e=this,t=this,i=document.querySelector(".introjs-hints");null===i&&(i=mi("div",{className:"introjs-hints"})),a(this._introItems,function(a,n){if(!document.querySelector('.introjs-hint[data-step="'.concat(n,'"]'))){var r=mi("a",{className:"introjs-hint"});vn(r),r.onclick=function(e){return function(a){var n=a||window.event;n.stopPropagation&&n.stopPropagation(),null!==n.cancelBubble&&(n.cancelBubble=!0),Vi.call(t,e)}}(n),a.hintAnimation||hn(r,"introjs-hint-no-anim"),yn(a.element)&&hn(r,"introjs-fixedhint");var s=mi("div",{className:"introjs-hint-dot"}),o=mi("div",{className:"introjs-hint-pulse"});r.appendChild(s),r.appendChild(o),r.setAttribute("data-step",n),a.targetElement=a.element,a.element=r,Ni.call(e,a.hintPosition,r,a.targetElement),i.appendChild(r)}}),document.body.appendChild(i),void 0!==this._hintsAddedCallback&&this._hintsAddedCallback.call(this),this._options.hintAutoRefreshInterval>=0&&(this._hintsAutoRefreshFunction=function(e,t){var a,n=this;return function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];clearTimeout(a),a=setTimeout(function(){e.apply(n,r)},t)}}(function(){return Qi.call(e)},this._options.hintAutoRefreshInterval),n.on(window,"scroll",this._hintsAutoRefreshFunction,this,!0))}function Ni(e,t,a){var n=t.style,i=xn.call(this,a);switch(e){default:case"top-left":n.left="".concat(i.left,"px"),n.top="".concat(i.top,"px");break;case"top-right":n.left="".concat(i.left+i.width-20,"px"),n.top="".concat(i.top,"px");break;case"bottom-left":n.left="".concat(i.left,"px"),n.top="".concat(i.top+i.height-20,"px");break;case"bottom-right":n.left="".concat(i.left+i.width-20,"px"),n.top="".concat(i.top+i.height-20,"px");break;case"middle-left":n.left="".concat(i.left,"px"),n.top="".concat(i.top+(i.height-20)/2,"px");break;case"middle-right":n.left="".concat(i.left+i.width-20,"px"),n.top="".concat(i.top+(i.height-20)/2,"px");break;case"middle-middle":n.left="".concat(i.left+(i.width-20)/2,"px"),n.top="".concat(i.top+(i.height-20)/2,"px");break;case"bottom-middle":n.left="".concat(i.left+(i.width-20)/2,"px"),n.top="".concat(i.top+i.height-20,"px");break;case"top-middle":n.left="".concat(i.left+(i.width-20)/2,"px"),n.top="".concat(i.top,"px")}}function Vi(e){var t=document.querySelector('.introjs-hint[data-step="'.concat(e,'"]')),a=this._introItems[e];void 0!==this._hintClickCallback&&this._hintClickCallback.call(this,t,a,e);var n=Wi.call(this);if(parseInt(n,10)!==e){var i=mi("div",{className:"introjs-tooltip"}),r=mi("div"),s=mi("div"),o=mi("div");i.onclick=function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},r.className="introjs-tooltiptext";var c=mi("p");if(c.innerHTML=a.hint,r.appendChild(c),this._options.hintShowButton){var l=mi("a");l.className=this._options.buttonClass,l.setAttribute("role","button"),l.innerHTML=this._options.hintButtonLabel,l.onclick=ji.bind(this,e),r.appendChild(l)}s.className="introjs-arrow",i.appendChild(s),i.appendChild(r),this._currentStep=t.getAttribute("data-step"),o.className="introjs-tooltipReferenceLayer introjs-hintReference",o.setAttribute("data-step",t.getAttribute("data-step")),Un.call(this,o),o.appendChild(i),document.body.appendChild(o),fi.call(this,t,i,s,!0)}}function Wi(){var e=document.querySelector(".introjs-hintReference");if(e){var t=e.getAttribute("data-step");return e.parentNode.removeChild(e),t}}function Gi(e){var t=this;if(this._introItems=[],this._options.hints)a(this._options.hints,function(e){var a=Mi(e);"string"==typeof a.element&&(a.element=document.querySelector(a.element)),a.hintPosition=a.hintPosition||t._options.hintPosition,a.hintAnimation=a.hintAnimation||t._options.hintAnimation,null!==a.element&&t._introItems.push(a)});else{var i=e.querySelectorAll("*[data-hint]");if(!i||!i.length)return!1;a(i,function(e){var a=e.getAttribute("data-hintanimation");a=a?"true"===a:t._options.hintAnimation,t._introItems.push({element:e,hint:e.getAttribute("data-hint"),hintPosition:e.getAttribute("data-hintposition")||t._options.hintPosition,hintAnimation:a,tooltipClass:e.getAttribute("data-tooltipclass"),position:e.getAttribute("data-position")||t._options.tooltipPosition})})}Ui.call(this),n.on(document,"click",Wi,this,!1),n.on(window,"resize",Qi,this,!0)}function Qi(){var e=this;a(this._introItems,function(t){var a=t.targetElement;void 0!==a&&Ni.call(e,t.hintPosition,t.element,a)})}Pt({target:"Array",proto:!0,forced:!di},{splice:function(e,t){var a,n,i,r,s,o,c=ie(this),l=ct(c),d=rt(e,l),p=arguments.length;if(0===p?a=n=0:1===p?(a=0,n=l-d):(a=p-2,n=ui(hi(at(t),0),l-d)),l+a-n>9007199254740991)throw pi("Maximum allowed length exceeded");for(i=Za(c,n),r=0;r<n;r++)(s=d+r)in c&&Oa(i,r,c[s]);if(i.length=n,a<n){for(r=d;r<l-n;r++)o=r+a,(s=r+n)in c?c[o]=c[s]:delete c[o];for(r=l;r>l-n+a;r--)delete c[r-1]}else if(a>n)for(r=l-n;r>d;r--)o=r+a-1,(s=r+n-1)in c?c[o]=c[s]:delete c[o];for(r=0;r<a;r++)c[r+d]=arguments[r+2];return c.length=l-n+a,i}});var $i=Math.floor,qi=function(e,t){var a=e.length,n=$i(a/2);return a<8?Yi(e,t):Xi(e,qi(rn(e,0,n),t),qi(rn(e,n),t),t)},Yi=function(e,t){for(var a,n,i=e.length,r=1;r<i;){for(n=r,a=e[r];n&&t(e[n-1],a)>0;)e[n]=e[--n];n!==r++&&(e[n]=a)}return e},Xi=function(e,t,a,n){for(var i=t.length,r=a.length,s=0,o=0;s<i||o<r;)e[s+o]=s<i&&o<r?n(t[s],a[o])<=0?t[s++]:a[o++]:s<i?t[s++]:a[o++];return e},Ji=qi,Ki=L.match(/firefox\/(\d+)/i),er=!!Ki&&+Ki[1],tr=/MSIE|Trident/.test(L),ar=L.match(/AppleWebKit\/(\d+)\./),nr=!!ar&&+ar[1],ir=[],rr=y(ir.sort),sr=y(ir.push),or=d(function(){ir.sort(void 0)}),cr=d(function(){ir.sort(null)}),lr=ei("sort"),dr=!d(function(){if(U)return U<70;if(!(er&&er>3)){if(tr)return!0;if(nr)return nr<603;var e,t,a,n,i="";for(e=65;e<76;e++){switch(t=String.fromCharCode(e),e){case 66:case 69:case 70:case 72:a=3;break;case 68:case 71:a=4;break;default:a=2}for(n=0;n<47;n++)ir.push({k:t+n,v:a})}for(ir.sort(function(e,t){return t.v-e.v}),n=0;n<ir.length;n++)t=ir[n].k.charAt(0),i.charAt(i.length-1)!==t&&(i+=t);return"DGBEFHACIJK"!==i}});function pr(e){var t=this,n=e.querySelectorAll("*[data-intro]"),i=[];if(this._options.steps)a(this._options.steps,function(e){var a=Mi(e);if(a.step=i.length+1,a.title=a.title||"","string"==typeof a.element&&(a.element=document.querySelector(a.element)),null==a.element){var n=document.querySelector(".introjsFloatingElement");null===n&&(n=mi("div",{className:"introjsFloatingElement"}),document.body.appendChild(n)),a.element=n,a.position="floating"}a.position=a.position||t._options.tooltipPosition,a.scrollTo=a.scrollTo||t._options.scrollTo,void 0===a.disableInteraction&&(a.disableInteraction=t._options.disableInteraction),null!==a.element&&i.push(a)});else{var r;if(n.length<1)return[];a(n,function(e){if((!t._options.group||e.getAttribute("data-intro-group")===t._options.group)&&"none"!==e.style.display){var a=parseInt(e.getAttribute("data-step"),10);r=e.hasAttribute("data-disable-interaction")?!!e.getAttribute("data-disable-interaction"):t._options.disableInteraction,a>0&&(i[a-1]={element:e,title:e.getAttribute("data-title")||"",intro:e.getAttribute("data-intro"),step:parseInt(e.getAttribute("data-step"),10),tooltipClass:e.getAttribute("data-tooltipclass"),highlightClass:e.getAttribute("data-highlightclass"),position:e.getAttribute("data-position")||t._options.tooltipPosition,scrollTo:e.getAttribute("data-scrollto")||t._options.scrollTo,disableInteraction:r})}});var s=0;a(n,function(e){if((!t._options.group||e.getAttribute("data-intro-group")===t._options.group)&&null===e.getAttribute("data-step")){for(;void 0!==i[s];)s++;r=e.hasAttribute("data-disable-interaction")?!!e.getAttribute("data-disable-interaction"):t._options.disableInteraction,i[s]={element:e,title:e.getAttribute("data-title")||"",intro:e.getAttribute("data-intro"),step:s+1,tooltipClass:e.getAttribute("data-tooltipclass"),highlightClass:e.getAttribute("data-highlightclass"),position:e.getAttribute("data-position")||t._options.tooltipPosition,scrollTo:e.getAttribute("data-scrollto")||t._options.scrollTo,disableInteraction:r}}})}for(var o=[],c=0;c<i.length;c++)i[c]&&o.push(i[c]);return(i=o).sort(function(e,t){return e.step-t.step}),i}function hr(e){var t=document.querySelector(".introjs-tooltipReferenceLayer"),a=document.querySelector(".introjs-helperLayer"),n=document.querySelector(".introjs-disableInteraction");if(Un.call(this,a),Un.call(this,t),Un.call(this,n),e&&(this._introItems=pr.call(this,this._targetElement),xi.call(this,t,this._introItems[this._currentStep]),ki.call(this,t)),null!=this._currentStep){var i=document.querySelector(".introjs-arrow"),r=document.querySelector(".introjs-tooltip");r&&i&&fi.call(this,this._introItems[this._currentStep].element,r,i)}return Qi.call(this),this}function ur(){hr.call(this)}function br(e,t){if(e&&e.parentElement){var a=e.parentElement;t?(Bn(e,{opacity:"0"}),window.setTimeout(function(){try{a.removeChild(e)}catch(t){}},500)):a.removeChild(e)}}function gr(e,t){var i=!0;if(void 0!==this._introBeforeExitCallback&&(i=this._introBeforeExitCallback.call(this)),t||!1!==i){var r=e.querySelectorAll(".introjs-overlay");r&&r.length&&a(r,function(e){return br(e)}),br(e.querySelector(".introjs-helperLayer"),!0),br(e.querySelector(".introjs-tooltipReferenceLayer")),br(e.querySelector(".introjs-disableInteraction")),br(document.querySelector(".introjsFloatingElement")),vi(),n.off(window,"keydown",Ai,this,!0),n.off(window,"resize",ur,this,!0),void 0!==this._introExitCallback&&this._introExitCallback.call(this),this._currentStep=void 0}}function fr(e){var t=this,a=mi("div",{className:"introjs-overlay"});return Bn(a,{top:0,bottom:0,left:0,right:0,position:"fixed"}),e.appendChild(a),!0===this._options.exitOnOverlayClick&&(Bn(a,{cursor:"pointer"}),a.onclick=function(){gr.call(t,e)}),!0}function vr(e){void 0!==this._introStartCallback&&this._introStartCallback.call(this,e);var t=pr.call(this,e);return 0===t.length||(this._introItems=t,fr.call(this,e)&&(Ti.call(this),this._options.keyboardNavigation&&n.on(window,"keydown",Ai,this,!0),n.on(window,"resize",ur,this,!0))),!1}function mr(e){this._targetElement=e,this._introItems=[],this._options={nextLabel:"Next",prevLabel:"Back",skipLabel:"\xd7",doneLabel:"Done",hidePrev:!1,hideNext:!1,nextToDone:!0,tooltipPosition:"bottom",tooltipClass:"",group:"",highlightClass:"",exitOnEsc:!0,exitOnOverlayClick:!0,showStepNumbers:!1,keyboardNavigation:!0,showButtons:!0,showBullets:!0,showProgress:!1,scrollToElement:!0,scrollTo:"element",scrollPadding:30,overlayOpacity:.5,autoPosition:!0,positionPrecedence:["bottom","top","right","left"],disableInteraction:!1,helperElementPadding:10,hintPosition:"top-middle",hintButtonLabel:"Got it",hintShowButton:!0,hintAutoRefreshInterval:10,hintAnimation:!0,buttonClass:"introjs-button",progressBarAdditionalClass:!1}}Pt({target:"Array",proto:!0,forced:or||!cr||!lr||!dr},{sort:function(e){void 0!==e&&Y(e);var t=ie(this);if(dr)return void 0===e?rr(t):rr(t,e);var a,n,i=[],r=ct(t);for(n=0;n<r;n++)n in t&&sr(i,t[n]);for(Ji(i,function(e){return function(t,a){return void 0===a?-1:void 0===t?1:void 0!==e?+e(t,a)||0:Zt(t)>Zt(a)?1:-1}}(e)),a=i.length,n=0;n<a;)t[n]=i[n++];for(;n<r;)delete t[n++];return t}});var Cr=function a(n){var i;if("object"===e(n))i=new mr(n);else if("string"==typeof n){var r=document.querySelector(n);if(!r)throw new Error("There is no element with given selector.");i=new mr(r)}else i=new mr(document.body);return a.instances[t(i,"introjs-instance")]=i,i};return Cr.version="4.3.0",Cr.instances={},Cr.fn=mr.prototype={clone:function(){return new mr(this)},setOption:function(e,t){return this._options[e]=t,this},setOptions:function(e){return this._options=function(e,t){var a,n={};for(a in e)n[a]=e[a];for(a in t)n[a]=t[a];return n}(this._options,e),this},start:function(){return vr.call(this,this._targetElement),this},goToStep:function(e){return Ii.call(this,e),this},addStep:function(e){return this._options.steps||(this._options.steps=[]),this._options.steps.push(e),this},addSteps:function(e){if(e.length){for(var t=0;t<e.length;t++)this.addStep(e[t]);return this}},goToStepNumber:function(e){return Pi.call(this,e),this},nextStep:function(){return Ti.call(this),this},previousStep:function(){return Ei.call(this),this},currentStep:function(){return Fi.call(this)},exit:function(e){return gr.call(this,this._targetElement,e),this},refresh:function(e){return hr.call(this,e),this},onbeforechange:function(e){if("function"!=typeof e)throw new Error("Provided callback for onbeforechange was not a function");return this._introBeforeChangeCallback=e,this},onchange:function(e){if("function"!=typeof e)throw new Error("Provided callback for onchange was not a function.");return this._introChangeCallback=e,this},onafterchange:function(e){if("function"!=typeof e)throw new Error("Provided callback for onafterchange was not a function");return this._introAfterChangeCallback=e,this},oncomplete:function(e){if("function"!=typeof e)throw new Error("Provided callback for oncomplete was not a function.");return this._introCompleteCallback=e,this},onhintsadded:function(e){if("function"!=typeof e)throw new Error("Provided callback for onhintsadded was not a function.");return this._hintsAddedCallback=e,this},onhintclick:function(e){if("function"!=typeof e)throw new Error("Provided callback for onhintclick was not a function.");return this._hintClickCallback=e,this},onhintclose:function(e){if("function"!=typeof e)throw new Error("Provided callback for onhintclose was not a function.");return this._hintCloseCallback=e,this},onstart:function(e){if("function"!=typeof e)throw new Error("Provided callback for onstart was not a function.");return this._introStartCallback=e,this},onexit:function(e){if("function"!=typeof e)throw new Error("Provided callback for onexit was not a function.");return this._introExitCallback=e,this},onskip:function(e){if("function"!=typeof e)throw new Error("Provided callback for onskip was not a function.");return this._introSkipCallback=e,this},onbeforeexit:function(e){if("function"!=typeof e)throw new Error("Provided callback for onbeforeexit was not a function.");return this._introBeforeExitCallback=e,this},addHints:function(){return Gi.call(this,this._targetElement),this},hideHint:function(e){return ji.call(this,e),this},hideHints:function(){return Li.call(this),this},showHint:function(e){return Ri.call(this,e),this},showHints:function(){return Zi.call(this),this},removeHints:function(){return zi.call(this),this},removeHint:function(e){return Bi().call(this,e),this},showHintDialog:function(e){return Vi.call(this,e),this}},Cr},e.exports=n()},SKAX:function(e,t,a){var n=a("JC6p"),i=a("lQqw")(n);e.exports=i},VOtZ:function(e,t,a){var n=a("juv8"),i=a("MvSz");e.exports=function(e,t){return n(e,i(e),t)}},WwFo:function(e,t,a){var n=a("juv8"),i=a("7GkX");e.exports=function(e,t){return e&&n(t,i(t),e)}},XGnz:function(e,t,a){var n=a("CH3K"),i=a("BiGR");e.exports=function e(t,a,r,s,o){var c=-1,l=t.length;for(r||(r=i),o||(o=[]);++c<l;){var d=t[c];a>0&&r(d)?a>1?e(d,a-1,r,s,o):n(o,d):s||(o[o.length]=d)}return o}},XYm9:function(e,t,a){var n=a("+K+b");e.exports=function(e,t){var a=t?n(e.buffer):e.buffer;return new e.constructor(a,e.byteOffset,e.byteLength)}},alwl:function(e,t,a){var n=a("eUgh"),i=a("ZWtO"),r=a("ut/Y"),s=a("l9OW"),o=a("1LK5"),c=a("sEf8"),l=a("IWTy"),d=a("zZ0H"),p=a("Z0cm");e.exports=function(e,t,a){t=t.length?n(t,function(e){return p(e)?function(t){return i(t,1===e.length?e[0]:e)}:e}):[d];var h=-1;t=n(t,c(r));var u=s(e,function(e,a,i){return{criteria:n(t,function(t){return t(e)}),index:++h,value:e}});return o(u,function(e,t){return l(e,t,a)})}},b2z7:function(e,t){var a=/\w*$/;e.exports=function(e){var t=new e.constructor(e.source,a.exec(e));return t.lastIndex=e.lastIndex,t}},"cq/+":function(e,t,a){var n=a("mc0g")();e.exports=n},cvCv:function(e,t){e.exports=function(e){return function(){return e}}},dTAl:function(e,t,a){var n=a("GoyQ"),i=Object.create,r=function(){function e(){}return function(t){if(!n(t))return{};if(i)return i(t);e.prototype=t;var a=new e;return e.prototype=void 0,a}}();e.exports=r},gFfm:function(e,t){e.exports=function(e,t){for(var a=-1,n=null==e?0:e.length;++a<n&&!1!==t(e[a],a,e););return e}},heNW:function(e,t){e.exports=function(e,t,a){switch(a.length){case 0:return e.call(t);case 1:return e.call(t,a[0]);case 2:return e.call(t,a[0],a[1]);case 3:return e.call(t,a[0],a[1],a[2])}return e.apply(t,a)}},hypo:function(e,t,a){var n=a("O0oS");e.exports=function(e,t,a){"__proto__"==t&&n?n(e,t,{configurable:!0,enumerable:!0,value:a,writable:!0}):e[t]=a}},juv8:function(e,t,a){var n=a("MrPd"),i=a("hypo");e.exports=function(e,t,a,r){var s=!a;a||(a={});for(var o=-1,c=t.length;++o<c;){var l=t[o],d=r?r(a[l],e[l],l,a,e):void 0;void 0===d&&(d=e[l]),s?i(a,l,d):n(a,l,d)}return a}},l9OW:function(e,t,a){var n=a("SKAX"),i=a("MMmD");e.exports=function(e,t){var a=-1,r=i(e)?Array(e.length):[];return n(e,function(e,n,i){r[++a]=t(e,n,i)}),r}},lQqw:function(e,t,a){var n=a("MMmD");e.exports=function(e,t){return function(a,i){if(null==a)return a;if(!n(a))return e(a,i);for(var r=a.length,s=t?r:-1,o=Object(a);(t?s--:++s<r)&&!1!==i(o[s],s,o););return a}}},mTTR:function(e,t,a){var n=a("b80T"),i=a("QcOe"),r=a("MMmD");e.exports=function(e){return r(e)?n(e,!0):i(e)}},mc0g:function(e,t){e.exports=function(e){return function(t,a,n){for(var i=-1,r=Object(t),s=n(t),o=s.length;o--;){var c=s[e?o:++i];if(!1===a(r[c],c,r))break}return t}}},"mv/X":function(e,t,a){var n=a("ljhN"),i=a("MMmD"),r=a("wJg7"),s=a("GoyQ");e.exports=function(e,t,a){if(!s(a))return!1;var o=typeof t;return!!("number"==o?i(a)&&r(t,a.length):"string"==o&&t in a)&&n(a[t],e)}},"oCl/":function(e,t,a){var n=a("CH3K"),i=a("LcsW"),r=a("MvSz"),s=a("0ycA");e.exports=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)n(t,r(e)),e=i(e);return t}:s},"otv/":function(e,t,a){var n=a("nmnc"),i=n?n.prototype:void 0,r=i?i.valueOf:void 0;e.exports=function(e){return r?Object(r.call(e)):{}}},pFRH:function(e,t,a){var n=a("cvCv"),i=a("O0oS"),r=a("zZ0H");e.exports=i?function(e,t){return i(e,"toString",{configurable:!0,enumerable:!1,value:n(t),writable:!0})}:r},sEfC:function(e,t,a){var n=a("GoyQ"),i=a("QIyF"),r=a("tLB3"),s=Math.max,o=Math.min;e.exports=function(e,t,a){var c,l,d,p,h,u,b=0,g=!1,f=!1,v=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function m(t){var a=c,n=l;return c=l=void 0,b=t,p=e.apply(n,a)}function C(e){return b=e,h=setTimeout(_,t),g?m(e):p}function w(e){var a=e-u;return void 0===u||a>=t||a<0||f&&e-b>=d}function _(){var e=i();if(w(e))return y(e);h=setTimeout(_,function(e){var a=t-(e-u);return f?o(a,d-(e-b)):a}(e))}function y(e){return h=void 0,v&&c?m(e):(c=l=void 0,p)}function x(){var e=i(),a=w(e);if(c=arguments,l=this,u=e,a){if(void 0===h)return C(u);if(f)return clearTimeout(h),h=setTimeout(_,t),m(u)}return void 0===h&&(h=setTimeout(_,t)),p}return t=r(t)||0,n(a)&&(g=!!a.leading,d=(f="maxWait"in a)?s(r(a.maxWait)||0,t):d,v="trailing"in a?!!a.trailing:v),x.cancel=function(){void 0!==h&&clearTimeout(h),b=0,c=u=l=h=void 0},x.flush=function(){return void 0===h?p:y(i())},x}},"w/wX":function(e,t,a){var n=a("QqLw"),i=a("ExA7");e.exports=function(e){return i(e)&&"[object Set]"==n(e)}},wclG:function(e,t,a){var n=a("pFRH"),i=a("88Gu")(n);e.exports=i},wrZu:function(e,t,a){var n=a("+K+b"),i=a("XYm9"),r=a("b2z7"),s=a("otv/"),o=a("yP5f");e.exports=function(e,t,a){var c=e.constructor;switch(t){case"[object ArrayBuffer]":return n(e);case"[object Boolean]":case"[object Date]":return new c(+e);case"[object DataView]":return i(e,a);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return o(e,a);case"[object Map]":return new c;case"[object Number]":case"[object String]":return new c(e);case"[object RegExp]":return r(e);case"[object Set]":return new c;case"[object Symbol]":return s(e)}}},xOOu:function(e,t,a){e.exports=function e(t,a,n){function i(s,o){if(!a[s]){if(!t[s]){if(r)return r(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var l=a[s]={exports:{}};t[s][0].call(l.exports,function(e){return i(t[s][1][e]||e)},l,l.exports,e,t,a,n)}return a[s].exports}for(var r=!1,s=0;s<n.length;s++)i(n[s]);return i}({1:[function(e,t,a){"use strict";var n=e("./utils"),i=e("./support"),r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";a.encode=function(e){for(var t,a,i,s,o,c,l=[],d=0,p=e.length,h=p,u="string"!==n.getTypeOf(e);d<e.length;)h=p-d,i=u?(t=e[d++],a=d<p?e[d++]:0,d<p?e[d++]:0):(t=e.charCodeAt(d++),a=d<p?e.charCodeAt(d++):0,d<p?e.charCodeAt(d++):0),s=(3&t)<<4|a>>4,o=1<h?(15&a)<<2|i>>6:64,c=2<h?63&i:64,l.push(r.charAt(t>>2)+r.charAt(s)+r.charAt(o)+r.charAt(c));return l.join("")},a.decode=function(e){var t,a,n,s,o,c,l=0,d=0,p="data:";if(e.substr(0,p.length)===p)throw new Error("Invalid base64 input, it looks like a data url.");var h,u=3*(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"")).length/4;if(e.charAt(e.length-1)===r.charAt(64)&&u--,e.charAt(e.length-2)===r.charAt(64)&&u--,u%1!=0)throw new Error("Invalid base64 input, bad content length.");for(h=i.uint8array?new Uint8Array(0|u):new Array(0|u);l<e.length;)t=r.indexOf(e.charAt(l++))<<2|(s=r.indexOf(e.charAt(l++)))>>4,a=(15&s)<<4|(o=r.indexOf(e.charAt(l++)))>>2,n=(3&o)<<6|(c=r.indexOf(e.charAt(l++))),h[d++]=t,64!==o&&(h[d++]=a),64!==c&&(h[d++]=n);return h}},{"./support":30,"./utils":32}],2:[function(e,t,a){"use strict";var n=e("./external"),i=e("./stream/DataWorker"),r=e("./stream/Crc32Probe"),s=e("./stream/DataLengthProbe");function o(e,t,a,n,i){this.compressedSize=e,this.uncompressedSize=t,this.crc32=a,this.compression=n,this.compressedContent=i}o.prototype={getContentWorker:function(){var e=new i(n.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new s("data_length")),t=this;return e.on("end",function(){if(this.streamInfo.data_length!==t.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),e},getCompressedWorker:function(){return new i(n.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},o.createWorkerFrom=function(e,t,a){return e.pipe(new r).pipe(new s("uncompressedSize")).pipe(t.compressWorker(a)).pipe(new s("compressedSize")).withStreamInfo("compression",t)},t.exports=o},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(e,t,a){"use strict";var n=e("./stream/GenericWorker");a.STORE={magic:"\0\0",compressWorker:function(e){return new n("STORE compression")},uncompressWorker:function(){return new n("STORE decompression")}},a.DEFLATE=e("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(e,t,a){"use strict";var n=e("./utils"),i=function(){for(var e,t=[],a=0;a<256;a++){e=a;for(var n=0;n<8;n++)e=1&e?3988292384^e>>>1:e>>>1;t[a]=e}return t}();t.exports=function(e,t){return void 0!==e&&e.length?"string"!==n.getTypeOf(e)?function(e,t,a,n){var r=i,s=0+a;e^=-1;for(var o=0;o<s;o++)e=e>>>8^r[255&(e^t[o])];return-1^e}(0|t,e,e.length):function(e,t,a,n){var r=i,s=0+a;e^=-1;for(var o=0;o<s;o++)e=e>>>8^r[255&(e^t.charCodeAt(o))];return-1^e}(0|t,e,e.length):0}},{"./utils":32}],5:[function(e,t,a){"use strict";a.base64=!1,a.binary=!1,a.dir=!1,a.createFolders=!0,a.date=null,a.compression=null,a.compressionOptions=null,a.comment=null,a.unixPermissions=null,a.dosPermissions=null},{}],6:[function(e,t,a){"use strict";var n;n="undefined"!=typeof Promise?Promise:e("lie"),t.exports={Promise:n}},{lie:37}],7:[function(e,t,a){"use strict";var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array,i=e("pako"),r=e("./utils"),s=e("./stream/GenericWorker"),o=n?"uint8array":"array";function c(e,t){s.call(this,"FlateWorker/"+e),this._pako=null,this._pakoAction=e,this._pakoOptions=t,this.meta={}}a.magic="\b\0",r.inherits(c,s),c.prototype.processChunk=function(e){this.meta=e.meta,null===this._pako&&this._createPako(),this._pako.push(r.transformTo(o,e.data),!1)},c.prototype.flush=function(){s.prototype.flush.call(this),null===this._pako&&this._createPako(),this._pako.push([],!0)},c.prototype.cleanUp=function(){s.prototype.cleanUp.call(this),this._pako=null},c.prototype._createPako=function(){this._pako=new i[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var e=this;this._pako.onData=function(t){e.push({data:t,meta:e.meta})}},a.compressWorker=function(e){return new c("Deflate",e)},a.uncompressWorker=function(){return new c("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(e,t,a){"use strict";function n(e,t){var a,n="";for(a=0;a<t;a++)n+=String.fromCharCode(255&e),e>>>=8;return n}function i(e,t,a,i,s,d){var p,h,u=e.file,b=e.compression,g=d!==o.utf8encode,f=r.transformTo("string",d(u.name)),v=r.transformTo("string",o.utf8encode(u.name)),m=u.comment,C=r.transformTo("string",d(m)),w=r.transformTo("string",o.utf8encode(m)),_=v.length!==u.name.length,y=w.length!==m.length,x="",H="",S="",k=u.dir,O=u.date,I={crc32:0,compressedSize:0,uncompressedSize:0};t&&!a||(I.crc32=e.crc32,I.compressedSize=e.compressedSize,I.uncompressedSize=e.uncompressedSize);var P=0;t&&(P|=8),g||!_&&!y||(P|=2048);var T=0,E=0;k&&(T|=16),"UNIX"===s?(E=798,T|=function(e,t){var a=e;return e||(a=t?16893:33204),(65535&a)<<16}(u.unixPermissions,k)):(E=20,T|=function(e){return 63&(e||0)}(u.dosPermissions)),p=O.getUTCHours(),p<<=6,p|=O.getUTCMinutes(),p<<=5,p|=O.getUTCSeconds()/2,h=O.getUTCFullYear()-1980,h<<=4,h|=O.getUTCMonth()+1,h<<=5,h|=O.getUTCDate(),_&&(H=n(1,1)+n(c(f),4)+v,x+="up"+n(H.length,2)+H),y&&(S=n(1,1)+n(c(C),4)+w,x+="uc"+n(S.length,2)+S);var F="";return F+="\n\0",F+=n(P,2),F+=b.magic,F+=n(p,2),F+=n(h,2),F+=n(I.crc32,4),F+=n(I.compressedSize,4),F+=n(I.uncompressedSize,4),F+=n(f.length,2),F+=n(x.length,2),{fileRecord:l.LOCAL_FILE_HEADER+F+f+x,dirRecord:l.CENTRAL_FILE_HEADER+n(E,2)+F+n(C.length,2)+"\0\0\0\0"+n(T,4)+n(i,4)+f+x+C}}var r=e("../utils"),s=e("../stream/GenericWorker"),o=e("../utf8"),c=e("../crc32"),l=e("../signature");function d(e,t,a,n){s.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=t,this.zipPlatform=a,this.encodeFileName=n,this.streamFiles=e,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}r.inherits(d,s),d.prototype.push=function(e){var t=e.meta.percent||0,a=this.entriesCount,n=this._sources.length;this.accumulate?this.contentBuffer.push(e):(this.bytesWritten+=e.data.length,s.prototype.push.call(this,{data:e.data,meta:{currentFile:this.currentFile,percent:a?(t+100*(a-n-1))/a:100}}))},d.prototype.openedSource=function(e){this.currentSourceOffset=this.bytesWritten,this.currentFile=e.file.name;var t=this.streamFiles&&!e.file.dir;if(t){var a=i(e,t,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:a.fileRecord,meta:{percent:0}})}else this.accumulate=!0},d.prototype.closedSource=function(e){this.accumulate=!1;var t=this.streamFiles&&!e.file.dir,a=i(e,t,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(a.dirRecord),t)this.push({data:function(e){return l.DATA_DESCRIPTOR+n(e.crc32,4)+n(e.compressedSize,4)+n(e.uncompressedSize,4)}(e),meta:{percent:100}});else for(this.push({data:a.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},d.prototype.flush=function(){for(var e=this.bytesWritten,t=0;t<this.dirRecords.length;t++)this.push({data:this.dirRecords[t],meta:{percent:100}});var a=function(e,t,a,i,s){var o=r.transformTo("string",s(i));return l.CENTRAL_DIRECTORY_END+"\0\0\0\0"+n(e,2)+n(e,2)+n(t,4)+n(a,4)+n(o.length,2)+o}(this.dirRecords.length,this.bytesWritten-e,e,this.zipComment,this.encodeFileName);this.push({data:a,meta:{percent:100}})},d.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},d.prototype.registerPrevious=function(e){this._sources.push(e);var t=this;return e.on("data",function(e){t.processChunk(e)}),e.on("end",function(){t.closedSource(t.previous.streamInfo),t._sources.length?t.prepareNextSource():t.end()}),e.on("error",function(e){t.error(e)}),this},d.prototype.resume=function(){return!!s.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},d.prototype.error=function(e){var t=this._sources;if(!s.prototype.error.call(this,e))return!1;for(var a=0;a<t.length;a++)try{t[a].error(e)}catch(e){}return!0},d.prototype.lock=function(){s.prototype.lock.call(this);for(var e=this._sources,t=0;t<e.length;t++)e[t].lock()},t.exports=d},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(e,t,a){"use strict";var n=e("../compressions"),i=e("./ZipFileWorker");a.generateWorker=function(e,t,a){var r=new i(t.streamFiles,a,t.platform,t.encodeFileName),s=0;try{e.forEach(function(e,a){s++;var i=function(e,t){var a=e||t,i=n[a];if(!i)throw new Error(a+" is not a valid compression method !");return i}(a.options.compression,t.compression),o=a.dir,c=a.date;a._compressWorker(i,a.options.compressionOptions||t.compressionOptions||{}).withStreamInfo("file",{name:e,dir:o,date:c,comment:a.comment||"",unixPermissions:a.unixPermissions,dosPermissions:a.dosPermissions}).pipe(r)}),r.entriesCount=s}catch(e){r.error(e)}return r}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(e,t,a){"use strict";function n(){if(!(this instanceof n))return new n;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var e=new n;for(var t in this)"function"!=typeof this[t]&&(e[t]=this[t]);return e}}(n.prototype=e("./object")).loadAsync=e("./load"),n.support=e("./support"),n.defaults=e("./defaults"),n.version="3.7.1",n.loadAsync=function(e,t){return(new n).loadAsync(e,t)},n.external=e("./external"),t.exports=n},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(e,t,a){"use strict";var n=e("./utils"),i=e("./external"),r=e("./utf8"),s=e("./zipEntries"),o=e("./stream/Crc32Probe"),c=e("./nodejsUtils");function l(e){return new i.Promise(function(t,a){var n=e.decompressed.getContentWorker().pipe(new o);n.on("error",function(e){a(e)}).on("end",function(){n.streamInfo.crc32!==e.decompressed.crc32?a(new Error("Corrupted zip : CRC32 mismatch")):t()}).resume()})}t.exports=function(e,t){var a=this;return t=n.extend(t||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:r.utf8decode}),c.isNode&&c.isStream(e)?i.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):n.prepareContent("the loaded zip file",e,!0,t.optimizedBinaryString,t.base64).then(function(e){var a=new s(t);return a.load(e),a}).then(function(e){var a=[i.Promise.resolve(e)],n=e.files;if(t.checkCRC32)for(var r=0;r<n.length;r++)a.push(l(n[r]));return i.Promise.all(a)}).then(function(e){for(var n=e.shift(),i=n.files,r=0;r<i.length;r++){var s=i[r];a.file(s.fileNameStr,s.decompressed,{binary:!0,optimizedBinaryString:!0,date:s.date,dir:s.dir,comment:s.fileCommentStr.length?s.fileCommentStr:null,unixPermissions:s.unixPermissions,dosPermissions:s.dosPermissions,createFolders:t.createFolders})}return n.zipComment.length&&(a.comment=n.zipComment),a})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(e,t,a){"use strict";var n=e("../utils"),i=e("../stream/GenericWorker");function r(e,t){i.call(this,"Nodejs stream input adapter for "+e),this._upstreamEnded=!1,this._bindStream(t)}n.inherits(r,i),r.prototype._bindStream=function(e){var t=this;(this._stream=e).pause(),e.on("data",function(e){t.push({data:e,meta:{percent:0}})}).on("error",function(e){t.isPaused?this.generatedError=e:t.error(e)}).on("end",function(){t.isPaused?t._upstreamEnded=!0:t.end()})},r.prototype.pause=function(){return!!i.prototype.pause.call(this)&&(this._stream.pause(),!0)},r.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},t.exports=r},{"../stream/GenericWorker":28,"../utils":32}],13:[function(e,t,a){"use strict";var n=e("readable-stream").Readable;function i(e,t,a){n.call(this,t),this._helper=e;var i=this;e.on("data",function(e,t){i.push(e)||i._helper.pause(),a&&a(t)}).on("error",function(e){i.emit("error",e)}).on("end",function(){i.push(null)})}e("../utils").inherits(i,n),i.prototype._read=function(){this._helper.resume()},t.exports=i},{"../utils":32,"readable-stream":16}],14:[function(e,t,a){"use strict";t.exports={isNode:"undefined"!=typeof Buffer,newBufferFrom:function(e,t){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(e,t);if("number"==typeof e)throw new Error('The "data" argument must not be a number');return new Buffer(e,t)},allocBuffer:function(e){if(Buffer.alloc)return Buffer.alloc(e);var t=new Buffer(e);return t.fill(0),t},isBuffer:function(e){return Buffer.isBuffer(e)},isStream:function(e){return e&&"function"==typeof e.on&&"function"==typeof e.pause&&"function"==typeof e.resume}}},{}],15:[function(e,t,a){"use strict";function n(e,t,a){var n,i,o=r.getTypeOf(t),p=r.extend(a||{},c);p.date=p.date||new Date,null!==p.compression&&(p.compression=p.compression.toUpperCase()),"string"==typeof p.unixPermissions&&(p.unixPermissions=parseInt(p.unixPermissions,8)),p.unixPermissions&&16384&p.unixPermissions&&(p.dir=!0),p.dosPermissions&&16&p.dosPermissions&&(p.dir=!0),p.dir&&(e=g(e)),p.createFolders&&(n=b(e))&&f.call(this,n,!0),a&&void 0!==a.binary||(p.binary=!("string"===o&&!1===p.binary&&!1===p.base64)),(t instanceof l&&0===t.uncompressedSize||p.dir||!t||0===t.length)&&(p.base64=!1,p.binary=!0,t="",p.compression="STORE",o="string"),i=t instanceof l||t instanceof s?t:h.isNode&&h.isStream(t)?new u(e,t):r.prepareContent(e,t,p.binary,p.optimizedBinaryString,p.base64);var v=new d(e,i,p);this.files[e]=v}var i=e("./utf8"),r=e("./utils"),s=e("./stream/GenericWorker"),o=e("./stream/StreamHelper"),c=e("./defaults"),l=e("./compressedObject"),d=e("./zipObject"),p=e("./generate"),h=e("./nodejsUtils"),u=e("./nodejs/NodejsStreamInputAdapter"),b=function(e){"/"===e.slice(-1)&&(e=e.substring(0,e.length-1));var t=e.lastIndexOf("/");return 0<t?e.substring(0,t):""},g=function(e){return"/"!==e.slice(-1)&&(e+="/"),e},f=function(e,t){return t=void 0!==t?t:c.createFolders,e=g(e),this.files[e]||n.call(this,e,null,{dir:!0,createFolders:t}),this.files[e]};function v(e){return"[object RegExp]"===Object.prototype.toString.call(e)}var m={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(e){var t,a,n;for(t in this.files)n=this.files[t],(a=t.slice(this.root.length,t.length))&&t.slice(0,this.root.length)===this.root&&e(a,n)},filter:function(e){var t=[];return this.forEach(function(a,n){e(a,n)&&t.push(n)}),t},file:function(e,t,a){if(1!==arguments.length)return n.call(this,e=this.root+e,t,a),this;if(v(e)){var i=e;return this.filter(function(e,t){return!t.dir&&i.test(e)})}var r=this.files[this.root+e];return r&&!r.dir?r:null},folder:function(e){if(!e)return this;if(v(e))return this.filter(function(t,a){return a.dir&&e.test(t)});var t=f.call(this,this.root+e),a=this.clone();return a.root=t.name,a},remove:function(e){var t=this.files[e=this.root+e];if(t||("/"!==e.slice(-1)&&(e+="/"),t=this.files[e]),t&&!t.dir)delete this.files[e];else for(var a=this.filter(function(t,a){return a.name.slice(0,e.length)===e}),n=0;n<a.length;n++)delete this.files[a[n].name];return this},generate:function(e){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(e){var t,a={};try{if((a=r.extend(e||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:i.utf8encode})).type=a.type.toLowerCase(),a.compression=a.compression.toUpperCase(),"binarystring"===a.type&&(a.type="string"),!a.type)throw new Error("No output type specified.");r.checkSupport(a.type),"darwin"!==a.platform&&"freebsd"!==a.platform&&"linux"!==a.platform&&"sunos"!==a.platform||(a.platform="UNIX"),"win32"===a.platform&&(a.platform="DOS"),t=p.generateWorker(this,a,a.comment||this.comment||"")}catch(e){(t=new s("error")).error(e)}return new o(t,a.type||"string",a.mimeType)},generateAsync:function(e,t){return this.generateInternalStream(e).accumulate(t)},generateNodeStream:function(e,t){return(e=e||{}).type||(e.type="nodebuffer"),this.generateInternalStream(e).toNodejsStream(t)}};t.exports=m},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(e,t,a){t.exports=e("stream")},{stream:void 0}],17:[function(e,t,a){"use strict";var n=e("./DataReader");function i(e){n.call(this,e);for(var t=0;t<this.data.length;t++)e[t]=255&e[t]}e("../utils").inherits(i,n),i.prototype.byteAt=function(e){return this.data[this.zero+e]},i.prototype.lastIndexOfSignature=function(e){for(var t=e.charCodeAt(0),a=e.charCodeAt(1),n=e.charCodeAt(2),i=e.charCodeAt(3),r=this.length-4;0<=r;--r)if(this.data[r]===t&&this.data[r+1]===a&&this.data[r+2]===n&&this.data[r+3]===i)return r-this.zero;return-1},i.prototype.readAndCheckSignature=function(e){var t=e.charCodeAt(0),a=e.charCodeAt(1),n=e.charCodeAt(2),i=e.charCodeAt(3),r=this.readData(4);return t===r[0]&&a===r[1]&&n===r[2]&&i===r[3]},i.prototype.readData=function(e){if(this.checkOffset(e),0===e)return[];var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=i},{"../utils":32,"./DataReader":18}],18:[function(e,t,a){"use strict";var n=e("../utils");function i(e){this.data=e,this.length=e.length,this.index=0,this.zero=0}i.prototype={checkOffset:function(e){this.checkIndex(this.index+e)},checkIndex:function(e){if(this.length<this.zero+e||e<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+e+"). Corrupted zip ?")},setIndex:function(e){this.checkIndex(e),this.index=e},skip:function(e){this.setIndex(this.index+e)},byteAt:function(e){},readInt:function(e){var t,a=0;for(this.checkOffset(e),t=this.index+e-1;t>=this.index;t--)a=(a<<8)+this.byteAt(t);return this.index+=e,a},readString:function(e){return n.transformTo("string",this.readData(e))},readData:function(e){},lastIndexOfSignature:function(e){},readAndCheckSignature:function(e){},readDate:function(){var e=this.readInt(4);return new Date(Date.UTC(1980+(e>>25&127),(e>>21&15)-1,e>>16&31,e>>11&31,e>>5&63,(31&e)<<1))}},t.exports=i},{"../utils":32}],19:[function(e,t,a){"use strict";var n=e("./Uint8ArrayReader");function i(e){n.call(this,e)}e("../utils").inherits(i,n),i.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=i},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(e,t,a){"use strict";var n=e("./DataReader");function i(e){n.call(this,e)}e("../utils").inherits(i,n),i.prototype.byteAt=function(e){return this.data.charCodeAt(this.zero+e)},i.prototype.lastIndexOfSignature=function(e){return this.data.lastIndexOf(e)-this.zero},i.prototype.readAndCheckSignature=function(e){return e===this.readData(4)},i.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=i},{"../utils":32,"./DataReader":18}],21:[function(e,t,a){"use strict";var n=e("./ArrayReader");function i(e){n.call(this,e)}e("../utils").inherits(i,n),i.prototype.readData=function(e){if(this.checkOffset(e),0===e)return new Uint8Array(0);var t=this.data.subarray(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=i},{"../utils":32,"./ArrayReader":17}],22:[function(e,t,a){"use strict";var n=e("../utils"),i=e("../support"),r=e("./ArrayReader"),s=e("./StringReader"),o=e("./NodeBufferReader"),c=e("./Uint8ArrayReader");t.exports=function(e){var t=n.getTypeOf(e);return n.checkSupport(t),"string"!==t||i.uint8array?"nodebuffer"===t?new o(e):i.uint8array?new c(n.transformTo("uint8array",e)):new r(n.transformTo("array",e)):new s(e)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(e,t,a){"use strict";a.LOCAL_FILE_HEADER="PK\x03\x04",a.CENTRAL_FILE_HEADER="PK\x01\x02",a.CENTRAL_DIRECTORY_END="PK\x05\x06",a.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x06\x07",a.ZIP64_CENTRAL_DIRECTORY_END="PK\x06\x06",a.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(e,t,a){"use strict";var n=e("./GenericWorker"),i=e("../utils");function r(e){n.call(this,"ConvertWorker to "+e),this.destType=e}i.inherits(r,n),r.prototype.processChunk=function(e){this.push({data:i.transformTo(this.destType,e.data),meta:e.meta})},t.exports=r},{"../utils":32,"./GenericWorker":28}],25:[function(e,t,a){"use strict";var n=e("./GenericWorker"),i=e("../crc32");function r(){n.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}e("../utils").inherits(r,n),r.prototype.processChunk=function(e){this.streamInfo.crc32=i(e.data,this.streamInfo.crc32||0),this.push(e)},t.exports=r},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(e,t,a){"use strict";var n=e("../utils"),i=e("./GenericWorker");function r(e){i.call(this,"DataLengthProbe for "+e),this.propName=e,this.withStreamInfo(e,0)}n.inherits(r,i),r.prototype.processChunk=function(e){e&&(this.streamInfo[this.propName]=(this.streamInfo[this.propName]||0)+e.data.length),i.prototype.processChunk.call(this,e)},t.exports=r},{"../utils":32,"./GenericWorker":28}],27:[function(e,t,a){"use strict";var n=e("../utils"),i=e("./GenericWorker");function r(e){i.call(this,"DataWorker");var t=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,e.then(function(e){t.dataIsReady=!0,t.data=e,t.max=e&&e.length||0,t.type=n.getTypeOf(e),t.isPaused||t._tickAndRepeat()},function(e){t.error(e)})}n.inherits(r,i),r.prototype.cleanUp=function(){i.prototype.cleanUp.call(this),this.data=null},r.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,n.delay(this._tickAndRepeat,[],this)),!0)},r.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(n.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},r.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var e=null,t=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":e=this.data.substring(this.index,t);break;case"uint8array":e=this.data.subarray(this.index,t);break;case"array":case"nodebuffer":e=this.data.slice(this.index,t)}return this.index=t,this.push({data:e,meta:{percent:this.max?this.index/this.max*100:0}})},t.exports=r},{"../utils":32,"./GenericWorker":28}],28:[function(e,t,a){"use strict";function n(e){this.name=e||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}n.prototype={push:function(e){this.emit("data",e)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(e){this.emit("error",e)}return!0},error:function(e){return!this.isFinished&&(this.isPaused?this.generatedError=e:(this.isFinished=!0,this.emit("error",e),this.previous&&this.previous.error(e),this.cleanUp()),!0)},on:function(e,t){return this._listeners[e].push(t),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(e,t){if(this._listeners[e])for(var a=0;a<this._listeners[e].length;a++)this._listeners[e][a].call(this,t)},pipe:function(e){return e.registerPrevious(this)},registerPrevious:function(e){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=e.streamInfo,this.mergeStreamInfo(),this.previous=e;var t=this;return e.on("data",function(e){t.processChunk(e)}),e.on("end",function(){t.end()}),e.on("error",function(e){t.error(e)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var e=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),e=!0),this.previous&&this.previous.resume(),!e},flush:function(){},processChunk:function(e){this.push(e)},withStreamInfo:function(e,t){return this.extraStreamInfo[e]=t,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var e in this.extraStreamInfo)this.extraStreamInfo.hasOwnProperty(e)&&(this.streamInfo[e]=this.extraStreamInfo[e])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var e="Worker "+this.name;return this.previous?this.previous+" -> "+e:e}},t.exports=n},{}],29:[function(e,t,a){"use strict";var n=e("../utils"),i=e("./ConvertWorker"),r=e("./GenericWorker"),s=e("../base64"),o=e("../support"),c=e("../external"),l=null;if(o.nodestream)try{l=e("../nodejs/NodejsStreamOutputAdapter")}catch(e){}function d(e,t,a){var s=t;switch(t){case"blob":case"arraybuffer":s="uint8array";break;case"base64":s="string"}try{this._internalType=s,this._outputType=t,this._mimeType=a,n.checkSupport(s),this._worker=e.pipe(new i(s)),e.lock()}catch(e){this._worker=new r("error"),this._worker.error(e)}}d.prototype={accumulate:function(e){return function(e,t){return new c.Promise(function(a,i){var r=[],o=e._internalType,c=e._outputType,l=e._mimeType;e.on("data",function(e,a){r.push(e),t&&t(a)}).on("error",function(e){r=[],i(e)}).on("end",function(){try{var e=function(e,t,a){switch(e){case"blob":return n.newBlob(n.transformTo("arraybuffer",t),a);case"base64":return s.encode(t);default:return n.transformTo(e,t)}}(c,function(e,t){var a,n=0,i=null,r=0;for(a=0;a<t.length;a++)r+=t[a].length;switch(e){case"string":return t.join("");case"array":return Array.prototype.concat.apply([],t);case"uint8array":for(i=new Uint8Array(r),a=0;a<t.length;a++)i.set(t[a],n),n+=t[a].length;return i;case"nodebuffer":return Buffer.concat(t);default:throw new Error("concat : unsupported type '"+e+"'")}}(o,r),l);a(e)}catch(e){i(e)}r=[]}).resume()})}(this,e)},on:function(e,t){var a=this;return this._worker.on(e,"data"===e?function(e){t.call(a,e.data,e.meta)}:function(){n.delay(t,arguments,a)}),this},resume:function(){return n.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(e){if(n.checkSupport("nodestream"),"nodebuffer"!==this._outputType)throw new Error(this._outputType+" is not supported by this method");return new l(this,{objectMode:"nodebuffer"!==this._outputType},e)}},t.exports=d},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(e,t,a){"use strict";if(a.base64=!0,a.array=!0,a.string=!0,a.arraybuffer="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,a.nodebuffer="undefined"!=typeof Buffer,a.uint8array="undefined"!=typeof Uint8Array,"undefined"==typeof ArrayBuffer)a.blob=!1;else{var n=new ArrayBuffer(0);try{a.blob=0===new Blob([n],{type:"application/zip"}).size}catch(e){try{var i=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);i.append(n),a.blob=0===i.getBlob("application/zip").size}catch(e){a.blob=!1}}}try{a.nodestream=!!e("readable-stream").Readable}catch(e){a.nodestream=!1}},{"readable-stream":16}],31:[function(e,t,a){"use strict";for(var n=e("./utils"),i=e("./support"),r=e("./nodejsUtils"),s=e("./stream/GenericWorker"),o=new Array(256),c=0;c<256;c++)o[c]=252<=c?6:248<=c?5:240<=c?4:224<=c?3:192<=c?2:1;function l(){s.call(this,"utf-8 decode"),this.leftOver=null}function d(){s.call(this,"utf-8 encode")}o[254]=o[254]=1,a.utf8encode=function(e){return i.nodebuffer?r.newBufferFrom(e,"utf-8"):function(e){var t,a,n,r,s,o=e.length,c=0;for(r=0;r<o;r++)55296==(64512&(a=e.charCodeAt(r)))&&r+1<o&&56320==(64512&(n=e.charCodeAt(r+1)))&&(a=65536+(a-55296<<10)+(n-56320),r++),c+=a<128?1:a<2048?2:a<65536?3:4;for(t=i.uint8array?new Uint8Array(c):new Array(c),r=s=0;s<c;r++)55296==(64512&(a=e.charCodeAt(r)))&&r+1<o&&56320==(64512&(n=e.charCodeAt(r+1)))&&(a=65536+(a-55296<<10)+(n-56320),r++),a<128?t[s++]=a:(a<2048?t[s++]=192|a>>>6:(a<65536?t[s++]=224|a>>>12:(t[s++]=240|a>>>18,t[s++]=128|a>>>12&63),t[s++]=128|a>>>6&63),t[s++]=128|63&a);return t}(e)},a.utf8decode=function(e){return i.nodebuffer?n.transformTo("nodebuffer",e).toString("utf-8"):function(e){var t,a,i,r,s=e.length,c=new Array(2*s);for(t=a=0;t<s;)if((i=e[t++])<128)c[a++]=i;else if(4<(r=o[i]))c[a++]=65533,t+=r-1;else{for(i&=2===r?31:3===r?15:7;1<r&&t<s;)i=i<<6|63&e[t++],r--;1<r?c[a++]=65533:i<65536?c[a++]=i:(c[a++]=55296|(i-=65536)>>10&1023,c[a++]=56320|1023&i)}return c.length!==a&&(c.subarray?c=c.subarray(0,a):c.length=a),n.applyFromCharCode(c)}(e=n.transformTo(i.uint8array?"uint8array":"array",e))},n.inherits(l,s),l.prototype.processChunk=function(e){var t=n.transformTo(i.uint8array?"uint8array":"array",e.data);if(this.leftOver&&this.leftOver.length){if(i.uint8array){var r=t;(t=new Uint8Array(r.length+this.leftOver.length)).set(this.leftOver,0),t.set(r,this.leftOver.length)}else t=this.leftOver.concat(t);this.leftOver=null}var s=function(e,t){var a;for((t=t||e.length)>e.length&&(t=e.length),a=t-1;0<=a&&128==(192&e[a]);)a--;return a<0||0===a?t:a+o[e[a]]>t?a:t}(t),c=t;s!==t.length&&(i.uint8array?(c=t.subarray(0,s),this.leftOver=t.subarray(s,t.length)):(c=t.slice(0,s),this.leftOver=t.slice(s,t.length))),this.push({data:a.utf8decode(c),meta:e.meta})},l.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:a.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},a.Utf8DecodeWorker=l,n.inherits(d,s),d.prototype.processChunk=function(e){this.push({data:a.utf8encode(e.data),meta:e.meta})},a.Utf8EncodeWorker=d},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(e,t,a){"use strict";var n=e("./support"),i=e("./base64"),r=e("./nodejsUtils"),s=e("set-immediate-shim"),o=e("./external");function c(e){return e}function l(e,t){for(var a=0;a<e.length;++a)t[a]=255&e.charCodeAt(a);return t}a.newBlob=function(t,n){a.checkSupport("blob");try{return new Blob([t],{type:n})}catch(e){try{var i=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return i.append(t),i.getBlob(n)}catch(e){throw new Error("Bug : can't construct the Blob.")}}};var d={stringifyByChunk:function(e,t,a){var n=[],i=0,r=e.length;if(r<=a)return String.fromCharCode.apply(null,e);for(;i<r;)n.push(String.fromCharCode.apply(null,"array"===t||"nodebuffer"===t?e.slice(i,Math.min(i+a,r)):e.subarray(i,Math.min(i+a,r)))),i+=a;return n.join("")},stringifyByChar:function(e){for(var t="",a=0;a<e.length;a++)t+=String.fromCharCode(e[a]);return t},applyCanBeUsed:{uint8array:function(){try{return n.uint8array&&1===String.fromCharCode.apply(null,new Uint8Array(1)).length}catch(e){return!1}}(),nodebuffer:function(){try{return n.nodebuffer&&1===String.fromCharCode.apply(null,r.allocBuffer(1)).length}catch(e){return!1}}()}};function p(e){var t=65536,n=a.getTypeOf(e),i=!0;if("uint8array"===n?i=d.applyCanBeUsed.uint8array:"nodebuffer"===n&&(i=d.applyCanBeUsed.nodebuffer),i)for(;1<t;)try{return d.stringifyByChunk(e,n,t)}catch(e){t=Math.floor(t/2)}return d.stringifyByChar(e)}function h(e,t){for(var a=0;a<e.length;a++)t[a]=e[a];return t}a.applyFromCharCode=p;var u={};u.string={string:c,array:function(e){return l(e,new Array(e.length))},arraybuffer:function(e){return u.string.uint8array(e).buffer},uint8array:function(e){return l(e,new Uint8Array(e.length))},nodebuffer:function(e){return l(e,r.allocBuffer(e.length))}},u.array={string:p,array:c,arraybuffer:function(e){return new Uint8Array(e).buffer},uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return r.newBufferFrom(e)}},u.arraybuffer={string:function(e){return p(new Uint8Array(e))},array:function(e){return h(new Uint8Array(e),new Array(e.byteLength))},arraybuffer:c,uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return r.newBufferFrom(new Uint8Array(e))}},u.uint8array={string:p,array:function(e){return h(e,new Array(e.length))},arraybuffer:function(e){return e.buffer},uint8array:c,nodebuffer:function(e){return r.newBufferFrom(e)}},u.nodebuffer={string:p,array:function(e){return h(e,new Array(e.length))},arraybuffer:function(e){return u.nodebuffer.uint8array(e).buffer},uint8array:function(e){return h(e,new Uint8Array(e.length))},nodebuffer:c},a.transformTo=function(e,t){if(t=t||"",!e)return t;a.checkSupport(e);var n=a.getTypeOf(t);return u[n][e](t)},a.getTypeOf=function(e){return"string"==typeof e?"string":"[object Array]"===Object.prototype.toString.call(e)?"array":n.nodebuffer&&r.isBuffer(e)?"nodebuffer":n.uint8array&&e instanceof Uint8Array?"uint8array":n.arraybuffer&&e instanceof ArrayBuffer?"arraybuffer":void 0},a.checkSupport=function(e){if(!n[e.toLowerCase()])throw new Error(e+" is not supported by this platform")},a.MAX_VALUE_16BITS=65535,a.MAX_VALUE_32BITS=-1,a.pretty=function(e){var t,a,n="";for(a=0;a<(e||"").length;a++)n+="\\x"+((t=e.charCodeAt(a))<16?"0":"")+t.toString(16).toUpperCase();return n},a.delay=function(e,t,a){s(function(){e.apply(a||null,t||[])})},a.inherits=function(e,t){function a(){}a.prototype=t.prototype,e.prototype=new a},a.extend=function(){var e,t,a={};for(e=0;e<arguments.length;e++)for(t in arguments[e])arguments[e].hasOwnProperty(t)&&void 0===a[t]&&(a[t]=arguments[e][t]);return a},a.prepareContent=function(e,t,r,s,c){return o.Promise.resolve(t).then(function(e){return n.blob&&(e instanceof Blob||-1!==["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(e)))&&"undefined"!=typeof FileReader?new o.Promise(function(t,a){var n=new FileReader;n.onload=function(e){t(e.target.result)},n.onerror=function(e){a(e.target.error)},n.readAsArrayBuffer(e)}):e}).then(function(t){var d=a.getTypeOf(t);return d?("arraybuffer"===d?t=a.transformTo("uint8array",t):"string"===d&&(c?t=i.decode(t):r&&!0!==s&&(t=function(e){return l(e,n.uint8array?new Uint8Array(e.length):new Array(e.length))}(t))),t):o.Promise.reject(new Error("Can't read the data of '"+e+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,"set-immediate-shim":54}],33:[function(e,t,a){"use strict";var n=e("./reader/readerFor"),i=e("./utils"),r=e("./signature"),s=e("./zipEntry"),o=(e("./utf8"),e("./support"));function c(e){this.files=[],this.loadOptions=e}c.prototype={checkSignature:function(e){if(!this.reader.readAndCheckSignature(e)){this.reader.index-=4;var t=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+i.pretty(t)+", expected "+i.pretty(e)+")")}},isSignature:function(e,t){var a=this.reader.index;this.reader.setIndex(e);var n=this.reader.readString(4)===t;return this.reader.setIndex(a),n},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var e=this.reader.readData(this.zipCommentLength),t=i.transformTo(o.uint8array?"uint8array":"array",e);this.zipComment=this.loadOptions.decodeFileName(t)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var e,t,a,n=this.zip64EndOfCentralSize-44;0<n;)e=this.reader.readInt(2),t=this.reader.readInt(4),a=this.reader.readData(t),this.zip64ExtensibleData[e]={id:e,length:t,value:a}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var e,t;for(e=0;e<this.files.length;e++)this.reader.setIndex((t=this.files[e]).localHeaderOffset),this.checkSignature(r.LOCAL_FILE_HEADER),t.readLocalPart(this.reader),t.handleUTF8(),t.processAttributes()},readCentralDir:function(){var e;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(r.CENTRAL_FILE_HEADER);)(e=new s({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(e);if(this.centralDirRecords!==this.files.length&&0!==this.centralDirRecords&&0===this.files.length)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var e=this.reader.lastIndexOfSignature(r.CENTRAL_DIRECTORY_END);if(e<0)throw this.isSignature(0,r.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(e);var t=e;if(this.checkSignature(r.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===i.MAX_VALUE_16BITS||this.diskWithCentralDirStart===i.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===i.MAX_VALUE_16BITS||this.centralDirRecords===i.MAX_VALUE_16BITS||this.centralDirSize===i.MAX_VALUE_32BITS||this.centralDirOffset===i.MAX_VALUE_32BITS){if(this.zip64=!0,(e=this.reader.lastIndexOfSignature(r.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(e),this.checkSignature(r.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,r.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(r.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(r.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var a=this.centralDirOffset+this.centralDirSize;this.zip64&&(a+=20,a+=12+this.zip64EndOfCentralSize);var n=t-a;if(0<n)this.isSignature(t,r.CENTRAL_FILE_HEADER)||(this.reader.zero=n);else if(n<0)throw new Error("Corrupted zip: missing "+Math.abs(n)+" bytes.")},prepareReader:function(e){this.reader=n(e)},load:function(e){this.prepareReader(e),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},t.exports=c},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utf8":31,"./utils":32,"./zipEntry":34}],34:[function(e,t,a){"use strict";var n=e("./reader/readerFor"),i=e("./utils"),r=e("./compressedObject"),s=e("./crc32"),o=e("./utf8"),c=e("./compressions"),l=e("./support");function d(e,t){this.options=e,this.loadOptions=t}d.prototype={isEncrypted:function(){return 1==(1&this.bitFlag)},useUTF8:function(){return 2048==(2048&this.bitFlag)},readLocalPart:function(e){var t,a;if(e.skip(22),this.fileNameLength=e.readInt(2),a=e.readInt(2),this.fileName=e.readData(this.fileNameLength),e.skip(a),-1===this.compressedSize||-1===this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(null===(t=function(e){for(var t in c)if(c.hasOwnProperty(t)&&c[t].magic===e)return c[t];return null}(this.compressionMethod)))throw new Error("Corrupted zip : compression "+i.pretty(this.compressionMethod)+" unknown (inner file : "+i.transformTo("string",this.fileName)+")");this.decompressed=new r(this.compressedSize,this.uncompressedSize,this.crc32,t,e.readData(this.compressedSize))},readCentralPart:function(e){this.versionMadeBy=e.readInt(2),e.skip(2),this.bitFlag=e.readInt(2),this.compressionMethod=e.readString(2),this.date=e.readDate(),this.crc32=e.readInt(4),this.compressedSize=e.readInt(4),this.uncompressedSize=e.readInt(4);var t=e.readInt(2);if(this.extraFieldsLength=e.readInt(2),this.fileCommentLength=e.readInt(2),this.diskNumberStart=e.readInt(2),this.internalFileAttributes=e.readInt(2),this.externalFileAttributes=e.readInt(4),this.localHeaderOffset=e.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");e.skip(t),this.readExtraFields(e),this.parseZIP64ExtraField(e),this.fileComment=e.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var e=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),0==e&&(this.dosPermissions=63&this.externalFileAttributes),3==e&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(e){if(this.extraFields[1]){var t=n(this.extraFields[1].value);this.uncompressedSize===i.MAX_VALUE_32BITS&&(this.uncompressedSize=t.readInt(8)),this.compressedSize===i.MAX_VALUE_32BITS&&(this.compressedSize=t.readInt(8)),this.localHeaderOffset===i.MAX_VALUE_32BITS&&(this.localHeaderOffset=t.readInt(8)),this.diskNumberStart===i.MAX_VALUE_32BITS&&(this.diskNumberStart=t.readInt(4))}},readExtraFields:function(e){var t,a,n,i=e.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});e.index+4<i;)t=e.readInt(2),a=e.readInt(2),n=e.readData(a),this.extraFields[t]={id:t,length:a,value:n};e.setIndex(i)},handleUTF8:function(){var e=l.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=o.utf8decode(this.fileName),this.fileCommentStr=o.utf8decode(this.fileComment);else{var t=this.findExtraFieldUnicodePath();if(null!==t)this.fileNameStr=t;else{var a=i.transformTo(e,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(a)}var n=this.findExtraFieldUnicodeComment();if(null!==n)this.fileCommentStr=n;else{var r=i.transformTo(e,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(r)}}},findExtraFieldUnicodePath:function(){var e=this.extraFields[28789];if(e){var t=n(e.value);return 1!==t.readInt(1)||s(this.fileName)!==t.readInt(4)?null:o.utf8decode(t.readData(e.length-5))}return null},findExtraFieldUnicodeComment:function(){var e=this.extraFields[25461];if(e){var t=n(e.value);return 1!==t.readInt(1)||s(this.fileComment)!==t.readInt(4)?null:o.utf8decode(t.readData(e.length-5))}return null}},t.exports=d},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(e,t,a){"use strict";function n(e,t,a){this.name=e,this.dir=a.dir,this.date=a.date,this.comment=a.comment,this.unixPermissions=a.unixPermissions,this.dosPermissions=a.dosPermissions,this._data=t,this._dataBinary=a.binary,this.options={compression:a.compression,compressionOptions:a.compressionOptions}}var i=e("./stream/StreamHelper"),r=e("./stream/DataWorker"),s=e("./utf8"),o=e("./compressedObject"),c=e("./stream/GenericWorker");n.prototype={internalStream:function(e){var t=null,a="string";try{if(!e)throw new Error("No output type specified.");var n="string"===(a=e.toLowerCase())||"text"===a;"binarystring"!==a&&"text"!==a||(a="string"),t=this._decompressWorker();var r=!this._dataBinary;r&&!n&&(t=t.pipe(new s.Utf8EncodeWorker)),!r&&n&&(t=t.pipe(new s.Utf8DecodeWorker))}catch(e){(t=new c("error")).error(e)}return new i(t,a,"")},async:function(e,t){return this.internalStream(e).accumulate(t)},nodeStream:function(e,t){return this.internalStream(e||"nodebuffer").toNodejsStream(t)},_compressWorker:function(e,t){if(this._data instanceof o&&this._data.compression.magic===e.magic)return this._data.getCompressedWorker();var a=this._decompressWorker();return this._dataBinary||(a=a.pipe(new s.Utf8EncodeWorker)),o.createWorkerFrom(a,e,t)},_decompressWorker:function(){return this._data instanceof o?this._data.getContentWorker():this._data instanceof c?this._data:new r(this._data)}};for(var l=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],d=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},p=0;p<l.length;p++)n.prototype[l[p]]=d;t.exports=n},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(e,t,a){(function(e){"use strict";var a,n,i=e.MutationObserver||e.WebKitMutationObserver;if(i){var r=0,s=new i(d),o=e.document.createTextNode("");s.observe(o,{characterData:!0}),a=function(){o.data=r=++r%2}}else if(e.setImmediate||void 0===e.MessageChannel)a="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var t=e.document.createElement("script");t.onreadystatechange=function(){d(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},e.document.documentElement.appendChild(t)}:function(){setTimeout(d,0)};else{var c=new e.MessageChannel;c.port1.onmessage=d,a=function(){c.port2.postMessage(0)}}var l=[];function d(){var e,t;n=!0;for(var a=l.length;a;){for(t=l,l=[],e=-1;++e<a;)t[e]();a=l.length}n=!1}t.exports=function(e){1!==l.push(e)||n||a()}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],37:[function(e,t,a){"use strict";var n=e("immediate");function i(){}var r={},s=["REJECTED"],o=["FULFILLED"],c=["PENDING"];function l(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=c,this.queue=[],this.outcome=void 0,e!==i&&u(this,e)}function d(e,t,a){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof a&&(this.onRejected=a,this.callRejected=this.otherCallRejected)}function p(e,t,a){n(function(){var n;try{n=t(a)}catch(n){return r.reject(e,n)}n===e?r.reject(e,new TypeError("Cannot resolve promise with itself")):r.resolve(e,n)})}function h(e){var t=e&&e.then;if(e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof t)return function(){t.apply(e,arguments)}}function u(e,t){var a=!1;function n(t){a||(a=!0,r.reject(e,t))}function i(t){a||(a=!0,r.resolve(e,t))}var s=b(function(){t(i,n)});"error"===s.status&&n(s.value)}function b(e,t){var a={};try{a.value=e(t),a.status="success"}catch(e){a.status="error",a.value=e}return a}(t.exports=l).prototype.finally=function(e){if("function"!=typeof e)return this;var t=this.constructor;return this.then(function(a){return t.resolve(e()).then(function(){return a})},function(a){return t.resolve(e()).then(function(){throw a})})},l.prototype.catch=function(e){return this.then(null,e)},l.prototype.then=function(e,t){if("function"!=typeof e&&this.state===o||"function"!=typeof t&&this.state===s)return this;var a=new this.constructor(i);return this.state!==c?p(a,this.state===o?e:t,this.outcome):this.queue.push(new d(a,e,t)),a},d.prototype.callFulfilled=function(e){r.resolve(this.promise,e)},d.prototype.otherCallFulfilled=function(e){p(this.promise,this.onFulfilled,e)},d.prototype.callRejected=function(e){r.reject(this.promise,e)},d.prototype.otherCallRejected=function(e){p(this.promise,this.onRejected,e)},r.resolve=function(e,t){var a=b(h,t);if("error"===a.status)return r.reject(e,a.value);var n=a.value;if(n)u(e,n);else{e.state=o,e.outcome=t;for(var i=-1,s=e.queue.length;++i<s;)e.queue[i].callFulfilled(t)}return e},r.reject=function(e,t){e.state=s,e.outcome=t;for(var a=-1,n=e.queue.length;++a<n;)e.queue[a].callRejected(t);return e},l.resolve=function(e){return e instanceof this?e:r.resolve(new this(i),e)},l.reject=function(e){var t=new this(i);return r.reject(t,e)},l.all=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var a=e.length,n=!1;if(!a)return this.resolve([]);for(var s=new Array(a),o=0,c=-1,l=new this(i);++c<a;)d(e[c],c);return l;function d(e,i){t.resolve(e).then(function(e){s[i]=e,++o!==a||n||(n=!0,r.resolve(l,s))},function(e){n||(n=!0,r.reject(l,e))})}},l.race=function(e){if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var t=e.length,a=!1;if(!t)return this.resolve([]);for(var n=-1,s=new this(i);++n<t;)this.resolve(e[n]).then(function(e){a||(a=!0,r.resolve(s,e))},function(e){a||(a=!0,r.reject(s,e))});return s}},{immediate:36}],38:[function(e,t,a){"use strict";var n={};(0,e("./lib/utils/common").assign)(n,e("./lib/deflate"),e("./lib/inflate"),e("./lib/zlib/constants")),t.exports=n},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(e,t,a){"use strict";var n=e("./zlib/deflate"),i=e("./utils/common"),r=e("./utils/strings"),s=e("./zlib/messages"),o=e("./zlib/zstream"),c=Object.prototype.toString;function l(e){if(!(this instanceof l))return new l(e);this.options=i.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},e||{});var t=this.options;t.raw&&0<t.windowBits?t.windowBits=-t.windowBits:t.gzip&&0<t.windowBits&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new o,this.strm.avail_out=0;var a=n.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(0!==a)throw new Error(s[a]);if(t.header&&n.deflateSetHeader(this.strm,t.header),t.dictionary){var d;if(d="string"==typeof t.dictionary?r.string2buf(t.dictionary):"[object ArrayBuffer]"===c.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,0!==(a=n.deflateSetDictionary(this.strm,d)))throw new Error(s[a]);this._dict_set=!0}}function d(e,t){var a=new l(t);if(a.push(e,!0),a.err)throw a.msg||s[a.err];return a.result}l.prototype.push=function(e,t){var a,s,o=this.strm,l=this.options.chunkSize;if(this.ended)return!1;s=t===~~t?t:!0===t?4:0,o.input="string"==typeof e?r.string2buf(e):"[object ArrayBuffer]"===c.call(e)?new Uint8Array(e):e,o.next_in=0,o.avail_in=o.input.length;do{if(0===o.avail_out&&(o.output=new i.Buf8(l),o.next_out=0,o.avail_out=l),1!==(a=n.deflate(o,s))&&0!==a)return this.onEnd(a),!(this.ended=!0);0!==o.avail_out&&(0!==o.avail_in||4!==s&&2!==s)||this.onData("string"===this.options.to?r.buf2binstring(i.shrinkBuf(o.output,o.next_out)):i.shrinkBuf(o.output,o.next_out))}while((0<o.avail_in||0===o.avail_out)&&1!==a);return 4===s?(a=n.deflateEnd(this.strm),this.onEnd(a),this.ended=!0,0===a):2!==s||(this.onEnd(0),!(o.avail_out=0))},l.prototype.onData=function(e){this.chunks.push(e)},l.prototype.onEnd=function(e){0===e&&(this.result="string"===this.options.to?this.chunks.join(""):i.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},a.Deflate=l,a.deflate=d,a.deflateRaw=function(e,t){return(t=t||{}).raw=!0,d(e,t)},a.gzip=function(e,t){return(t=t||{}).gzip=!0,d(e,t)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(e,t,a){"use strict";var n=e("./zlib/inflate"),i=e("./utils/common"),r=e("./utils/strings"),s=e("./zlib/constants"),o=e("./zlib/messages"),c=e("./zlib/zstream"),l=e("./zlib/gzheader"),d=Object.prototype.toString;function p(e){if(!(this instanceof p))return new p(e);this.options=i.assign({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;t.raw&&0<=t.windowBits&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(0<=t.windowBits&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),15<t.windowBits&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var a=n.inflateInit2(this.strm,t.windowBits);if(a!==s.Z_OK)throw new Error(o[a]);this.header=new l,n.inflateGetHeader(this.strm,this.header)}function h(e,t){var a=new p(t);if(a.push(e,!0),a.err)throw a.msg||o[a.err];return a.result}p.prototype.push=function(e,t){var a,o,c,l,p,h,u=this.strm,b=this.options.chunkSize,g=this.options.dictionary,f=!1;if(this.ended)return!1;o=t===~~t?t:!0===t?s.Z_FINISH:s.Z_NO_FLUSH,u.input="string"==typeof e?r.binstring2buf(e):"[object ArrayBuffer]"===d.call(e)?new Uint8Array(e):e,u.next_in=0,u.avail_in=u.input.length;do{if(0===u.avail_out&&(u.output=new i.Buf8(b),u.next_out=0,u.avail_out=b),(a=n.inflate(u,s.Z_NO_FLUSH))===s.Z_NEED_DICT&&g&&(h="string"==typeof g?r.string2buf(g):"[object ArrayBuffer]"===d.call(g)?new Uint8Array(g):g,a=n.inflateSetDictionary(this.strm,h)),a===s.Z_BUF_ERROR&&!0===f&&(a=s.Z_OK,f=!1),a!==s.Z_STREAM_END&&a!==s.Z_OK)return this.onEnd(a),!(this.ended=!0);u.next_out&&(0!==u.avail_out&&a!==s.Z_STREAM_END&&(0!==u.avail_in||o!==s.Z_FINISH&&o!==s.Z_SYNC_FLUSH)||("string"===this.options.to?(c=r.utf8border(u.output,u.next_out),l=u.next_out-c,p=r.buf2string(u.output,c),u.next_out=l,u.avail_out=b-l,l&&i.arraySet(u.output,u.output,c,l,0),this.onData(p)):this.onData(i.shrinkBuf(u.output,u.next_out)))),0===u.avail_in&&0===u.avail_out&&(f=!0)}while((0<u.avail_in||0===u.avail_out)&&a!==s.Z_STREAM_END);return a===s.Z_STREAM_END&&(o=s.Z_FINISH),o===s.Z_FINISH?(a=n.inflateEnd(this.strm),this.onEnd(a),this.ended=!0,a===s.Z_OK):o!==s.Z_SYNC_FLUSH||(this.onEnd(s.Z_OK),!(u.avail_out=0))},p.prototype.onData=function(e){this.chunks.push(e)},p.prototype.onEnd=function(e){e===s.Z_OK&&(this.result="string"===this.options.to?this.chunks.join(""):i.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},a.Inflate=p,a.inflate=h,a.inflateRaw=function(e,t){return(t=t||{}).raw=!0,h(e,t)},a.ungzip=h},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(e,t,a){"use strict";var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;a.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var a=t.shift();if(a){if("object"!=typeof a)throw new TypeError(a+"must be non-object");for(var n in a)a.hasOwnProperty(n)&&(e[n]=a[n])}}return e},a.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var i={arraySet:function(e,t,a,n,i){if(t.subarray&&e.subarray)e.set(t.subarray(a,a+n),i);else for(var r=0;r<n;r++)e[i+r]=t[a+r]},flattenChunks:function(e){var t,a,n,i,r,s;for(t=n=0,a=e.length;t<a;t++)n+=e[t].length;for(s=new Uint8Array(n),t=i=0,a=e.length;t<a;t++)s.set(r=e[t],i),i+=r.length;return s}},r={arraySet:function(e,t,a,n,i){for(var r=0;r<n;r++)e[i+r]=t[a+r]},flattenChunks:function(e){return[].concat.apply([],e)}};a.setTyped=function(e){e?(a.Buf8=Uint8Array,a.Buf16=Uint16Array,a.Buf32=Int32Array,a.assign(a,i)):(a.Buf8=Array,a.Buf16=Array,a.Buf32=Array,a.assign(a,r))},a.setTyped(n)},{}],42:[function(e,t,a){"use strict";var n=e("./common"),i=!0,r=!0;try{String.fromCharCode.apply(null,[0])}catch(e){i=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){r=!1}for(var s=new n.Buf8(256),o=0;o<256;o++)s[o]=252<=o?6:248<=o?5:240<=o?4:224<=o?3:192<=o?2:1;function c(e,t){if(t<65537&&(e.subarray&&r||!e.subarray&&i))return String.fromCharCode.apply(null,n.shrinkBuf(e,t));for(var a="",s=0;s<t;s++)a+=String.fromCharCode(e[s]);return a}s[254]=s[254]=1,a.string2buf=function(e){var t,a,i,r,s,o=e.length,c=0;for(r=0;r<o;r++)55296==(64512&(a=e.charCodeAt(r)))&&r+1<o&&56320==(64512&(i=e.charCodeAt(r+1)))&&(a=65536+(a-55296<<10)+(i-56320),r++),c+=a<128?1:a<2048?2:a<65536?3:4;for(t=new n.Buf8(c),r=s=0;s<c;r++)55296==(64512&(a=e.charCodeAt(r)))&&r+1<o&&56320==(64512&(i=e.charCodeAt(r+1)))&&(a=65536+(a-55296<<10)+(i-56320),r++),a<128?t[s++]=a:(a<2048?t[s++]=192|a>>>6:(a<65536?t[s++]=224|a>>>12:(t[s++]=240|a>>>18,t[s++]=128|a>>>12&63),t[s++]=128|a>>>6&63),t[s++]=128|63&a);return t},a.buf2binstring=function(e){return c(e,e.length)},a.binstring2buf=function(e){for(var t=new n.Buf8(e.length),a=0,i=t.length;a<i;a++)t[a]=e.charCodeAt(a);return t},a.buf2string=function(e,t){var a,n,i,r,o=t||e.length,l=new Array(2*o);for(a=n=0;a<o;)if((i=e[a++])<128)l[n++]=i;else if(4<(r=s[i]))l[n++]=65533,a+=r-1;else{for(i&=2===r?31:3===r?15:7;1<r&&a<o;)i=i<<6|63&e[a++],r--;1<r?l[n++]=65533:i<65536?l[n++]=i:(l[n++]=55296|(i-=65536)>>10&1023,l[n++]=56320|1023&i)}return c(l,n)},a.utf8border=function(e,t){var a;for((t=t||e.length)>e.length&&(t=e.length),a=t-1;0<=a&&128==(192&e[a]);)a--;return a<0||0===a?t:a+s[e[a]]>t?a:t}},{"./common":41}],43:[function(e,t,a){"use strict";t.exports=function(e,t,a,n){for(var i=65535&e|0,r=e>>>16&65535|0,s=0;0!==a;){for(a-=s=2e3<a?2e3:a;r=r+(i=i+t[n++]|0)|0,--s;);i%=65521,r%=65521}return i|r<<16|0}},{}],44:[function(e,t,a){"use strict";t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(e,t,a){"use strict";var n=function(){for(var e,t=[],a=0;a<256;a++){e=a;for(var n=0;n<8;n++)e=1&e?3988292384^e>>>1:e>>>1;t[a]=e}return t}();t.exports=function(e,t,a,i){var r=n,s=i+a;e^=-1;for(var o=i;o<s;o++)e=e>>>8^r[255&(e^t[o])];return-1^e}},{}],46:[function(e,t,a){"use strict";var n,i=e("../utils/common"),r=e("./trees"),s=e("./adler32"),o=e("./crc32"),c=e("./messages"),l=-2,d=258,p=262,h=113;function u(e,t){return e.msg=c[t],t}function b(e){return(e<<1)-(4<e?9:0)}function g(e){for(var t=e.length;0<=--t;)e[t]=0}function f(e){var t=e.state,a=t.pending;a>e.avail_out&&(a=e.avail_out),0!==a&&(i.arraySet(e.output,t.pending_buf,t.pending_out,a,e.next_out),e.next_out+=a,t.pending_out+=a,e.total_out+=a,e.avail_out-=a,t.pending-=a,0===t.pending&&(t.pending_out=0))}function v(e,t){r._tr_flush_block(e,0<=e.block_start?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,f(e.strm)}function m(e,t){e.pending_buf[e.pending++]=t}function C(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function w(e,t){var a,n,i=e.max_chain_length,r=e.strstart,s=e.prev_length,o=e.nice_match,c=e.strstart>e.w_size-p?e.strstart-(e.w_size-p):0,l=e.window,h=e.w_mask,u=e.prev,b=e.strstart+d,g=l[r+s-1],f=l[r+s];e.prev_length>=e.good_match&&(i>>=2),o>e.lookahead&&(o=e.lookahead);do{if(l[(a=t)+s]===f&&l[a+s-1]===g&&l[a]===l[r]&&l[++a]===l[r+1]){r+=2,a++;do{}while(l[++r]===l[++a]&&l[++r]===l[++a]&&l[++r]===l[++a]&&l[++r]===l[++a]&&l[++r]===l[++a]&&l[++r]===l[++a]&&l[++r]===l[++a]&&l[++r]===l[++a]&&r<b);if(n=d-(b-r),r=b-d,s<n){if(e.match_start=t,o<=(s=n))break;g=l[r+s-1],f=l[r+s]}}}while((t=u[t&h])>c&&0!=--i);return s<=e.lookahead?s:e.lookahead}function _(e){var t,a,n,r,c,l,d,h,u,b,g=e.w_size;do{if(r=e.window_size-e.lookahead-e.strstart,e.strstart>=g+(g-p)){for(i.arraySet(e.window,e.window,g,g,0),e.match_start-=g,e.strstart-=g,e.block_start-=g,t=a=e.hash_size;n=e.head[--t],e.head[t]=g<=n?n-g:0,--a;);for(t=a=g;n=e.prev[--t],e.prev[t]=g<=n?n-g:0,--a;);r+=g}if(0===e.strm.avail_in)break;if(d=e.window,h=e.strstart+e.lookahead,b=void 0,(u=r)<(b=(l=e.strm).avail_in)&&(b=u),a=0===b?0:(l.avail_in-=b,i.arraySet(d,l.input,l.next_in,b,h),1===l.state.wrap?l.adler=s(l.adler,d,b,h):2===l.state.wrap&&(l.adler=o(l.adler,d,b,h)),l.next_in+=b,l.total_in+=b,b),e.lookahead+=a,e.lookahead+e.insert>=3)for(e.ins_h=e.window[c=e.strstart-e.insert],e.ins_h=(e.ins_h<<e.hash_shift^e.window[c+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[c+3-1])&e.hash_mask,e.prev[c&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=c,c++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<p&&0!==e.strm.avail_in)}function y(e,t){for(var a,n;;){if(e.lookahead<p){if(_(e),e.lookahead<p&&0===t)return 1;if(0===e.lookahead)break}if(a=0,e.lookahead>=3&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,a=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==a&&e.strstart-a<=e.w_size-p&&(e.match_length=w(e,a)),e.match_length>=3)if(n=r._tr_tally(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){for(e.match_length--;e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,a=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart,0!=--e.match_length;);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else n=r._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(n&&(v(e,!1),0===e.strm.avail_out))return 1}return e.insert=e.strstart<2?e.strstart:2,4===t?(v(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(v(e,!1),0===e.strm.avail_out)?1:2}function x(e,t){for(var a,n,i;;){if(e.lookahead<p){if(_(e),e.lookahead<p&&0===t)return 1;if(0===e.lookahead)break}if(a=0,e.lookahead>=3&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,a=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==a&&e.prev_length<e.max_lazy_match&&e.strstart-a<=e.w_size-p&&(e.match_length=w(e,a),e.match_length<=5&&(1===e.strategy||3===e.match_length&&4096<e.strstart-e.match_start)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){for(i=e.strstart+e.lookahead-3,n=r._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;++e.strstart<=i&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,a=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!=--e.prev_length;);if(e.match_available=0,e.match_length=2,e.strstart++,n&&(v(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if((n=r._tr_tally(e,0,e.window[e.strstart-1]))&&v(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(n=r._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,4===t?(v(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(v(e,!1),0===e.strm.avail_out)?1:2}function H(e,t,a,n,i){this.good_length=e,this.max_lazy=t,this.nice_length=a,this.max_chain=n,this.func=i}function S(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new i.Buf16(1146),this.dyn_dtree=new i.Buf16(122),this.bl_tree=new i.Buf16(78),g(this.dyn_ltree),g(this.dyn_dtree),g(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new i.Buf16(16),this.heap=new i.Buf16(573),g(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new i.Buf16(573),g(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function k(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=2,(t=e.state).pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?42:h,e.adler=2===t.wrap?0:1,t.last_flush=0,r._tr_init(t),0):u(e,l)}function O(e){var t=k(e);return 0===t&&function(e){e.window_size=2*e.w_size,g(e.head),e.max_lazy_match=n[e.level].max_lazy,e.good_match=n[e.level].good_length,e.nice_match=n[e.level].nice_length,e.max_chain_length=n[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=2,e.match_available=0,e.ins_h=0}(e.state),t}function I(e,t,a,n,r,s){if(!e)return l;var o=1;if(-1===t&&(t=6),n<0?(o=0,n=-n):15<n&&(o=2,n-=16),r<1||9<r||8!==a||n<8||15<n||t<0||9<t||s<0||4<s)return u(e,l);8===n&&(n=9);var c=new S;return(e.state=c).strm=e,c.wrap=o,c.gzhead=null,c.w_bits=n,c.w_size=1<<c.w_bits,c.w_mask=c.w_size-1,c.hash_bits=r+7,c.hash_size=1<<c.hash_bits,c.hash_mask=c.hash_size-1,c.hash_shift=~~((c.hash_bits+3-1)/3),c.window=new i.Buf8(2*c.w_size),c.head=new i.Buf16(c.hash_size),c.prev=new i.Buf16(c.w_size),c.lit_bufsize=1<<r+6,c.pending_buf_size=4*c.lit_bufsize,c.pending_buf=new i.Buf8(c.pending_buf_size),c.d_buf=1*c.lit_bufsize,c.l_buf=3*c.lit_bufsize,c.level=t,c.strategy=s,c.method=a,O(e)}n=[new H(0,0,0,0,function(e,t){var a=65535;for(a>e.pending_buf_size-5&&(a=e.pending_buf_size-5);;){if(e.lookahead<=1){if(_(e),0===e.lookahead&&0===t)return 1;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var n=e.block_start+a;if((0===e.strstart||e.strstart>=n)&&(e.lookahead=e.strstart-n,e.strstart=n,v(e,!1),0===e.strm.avail_out))return 1;if(e.strstart-e.block_start>=e.w_size-p&&(v(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(v(e,!0),0===e.strm.avail_out?3:4):(e.strstart>e.block_start&&v(e,!1),1)}),new H(4,4,8,4,y),new H(4,5,16,8,y),new H(4,6,32,32,y),new H(4,4,16,16,x),new H(8,16,32,32,x),new H(8,16,128,128,x),new H(8,32,128,256,x),new H(32,128,258,1024,x),new H(32,258,258,4096,x)],a.deflateInit=function(e,t){return I(e,t,8,15,8,0)},a.deflateInit2=I,a.deflateReset=O,a.deflateResetKeep=k,a.deflateSetHeader=function(e,t){return e&&e.state?2!==e.state.wrap?l:(e.state.gzhead=t,0):l},a.deflate=function(e,t){var a,i,s,c;if(!e||!e.state||5<t||t<0)return e?u(e,l):l;if(i=e.state,!e.output||!e.input&&0!==e.avail_in||666===i.status&&4!==t)return u(e,0===e.avail_out?-5:l);if(i.strm=e,a=i.last_flush,i.last_flush=t,42===i.status)if(2===i.wrap)e.adler=0,m(i,31),m(i,139),m(i,8),i.gzhead?(m(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),m(i,255&i.gzhead.time),m(i,i.gzhead.time>>8&255),m(i,i.gzhead.time>>16&255),m(i,i.gzhead.time>>24&255),m(i,9===i.level?2:2<=i.strategy||i.level<2?4:0),m(i,255&i.gzhead.os),i.gzhead.extra&&i.gzhead.extra.length&&(m(i,255&i.gzhead.extra.length),m(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(e.adler=o(e.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=69):(m(i,0),m(i,0),m(i,0),m(i,0),m(i,0),m(i,9===i.level?2:2<=i.strategy||i.level<2?4:0),m(i,3),i.status=h);else{var p=8+(i.w_bits-8<<4)<<8;p|=(2<=i.strategy||i.level<2?0:i.level<6?1:6===i.level?2:3)<<6,0!==i.strstart&&(p|=32),p+=31-p%31,i.status=h,C(i,p),0!==i.strstart&&(C(i,e.adler>>>16),C(i,65535&e.adler)),e.adler=1}if(69===i.status)if(i.gzhead.extra){for(s=i.pending;i.gzindex<(65535&i.gzhead.extra.length)&&(i.pending!==i.pending_buf_size||(i.gzhead.hcrc&&i.pending>s&&(e.adler=o(e.adler,i.pending_buf,i.pending-s,s)),f(e),s=i.pending,i.pending!==i.pending_buf_size));)m(i,255&i.gzhead.extra[i.gzindex]),i.gzindex++;i.gzhead.hcrc&&i.pending>s&&(e.adler=o(e.adler,i.pending_buf,i.pending-s,s)),i.gzindex===i.gzhead.extra.length&&(i.gzindex=0,i.status=73)}else i.status=73;if(73===i.status)if(i.gzhead.name){s=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>s&&(e.adler=o(e.adler,i.pending_buf,i.pending-s,s)),f(e),s=i.pending,i.pending===i.pending_buf_size)){c=1;break}c=i.gzindex<i.gzhead.name.length?255&i.gzhead.name.charCodeAt(i.gzindex++):0,m(i,c)}while(0!==c);i.gzhead.hcrc&&i.pending>s&&(e.adler=o(e.adler,i.pending_buf,i.pending-s,s)),0===c&&(i.gzindex=0,i.status=91)}else i.status=91;if(91===i.status)if(i.gzhead.comment){s=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>s&&(e.adler=o(e.adler,i.pending_buf,i.pending-s,s)),f(e),s=i.pending,i.pending===i.pending_buf_size)){c=1;break}c=i.gzindex<i.gzhead.comment.length?255&i.gzhead.comment.charCodeAt(i.gzindex++):0,m(i,c)}while(0!==c);i.gzhead.hcrc&&i.pending>s&&(e.adler=o(e.adler,i.pending_buf,i.pending-s,s)),0===c&&(i.status=103)}else i.status=103;if(103===i.status&&(i.gzhead.hcrc?(i.pending+2>i.pending_buf_size&&f(e),i.pending+2<=i.pending_buf_size&&(m(i,255&e.adler),m(i,e.adler>>8&255),e.adler=0,i.status=h)):i.status=h),0!==i.pending){if(f(e),0===e.avail_out)return i.last_flush=-1,0}else if(0===e.avail_in&&b(t)<=b(a)&&4!==t)return u(e,-5);if(666===i.status&&0!==e.avail_in)return u(e,-5);if(0!==e.avail_in||0!==i.lookahead||0!==t&&666!==i.status){var w=2===i.strategy?function(e,t){for(var a;;){if(0===e.lookahead&&(_(e),0===e.lookahead)){if(0===t)return 1;break}if(e.match_length=0,a=r._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,a&&(v(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(v(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(v(e,!1),0===e.strm.avail_out)?1:2}(i,t):3===i.strategy?function(e,t){for(var a,n,i,s,o=e.window;;){if(e.lookahead<=d){if(_(e),e.lookahead<=d&&0===t)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=3&&0<e.strstart&&(n=o[i=e.strstart-1])===o[++i]&&n===o[++i]&&n===o[++i]){s=e.strstart+d;do{}while(n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&i<s);e.match_length=d-(s-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=3?(a=r._tr_tally(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(a=r._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),a&&(v(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(v(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(v(e,!1),0===e.strm.avail_out)?1:2}(i,t):n[i.level].func(i,t);if(3!==w&&4!==w||(i.status=666),1===w||3===w)return 0===e.avail_out&&(i.last_flush=-1),0;if(2===w&&(1===t?r._tr_align(i):5!==t&&(r._tr_stored_block(i,0,0,!1),3===t&&(g(i.head),0===i.lookahead&&(i.strstart=0,i.block_start=0,i.insert=0))),f(e),0===e.avail_out))return i.last_flush=-1,0}return 4!==t?0:i.wrap<=0?1:(2===i.wrap?(m(i,255&e.adler),m(i,e.adler>>8&255),m(i,e.adler>>16&255),m(i,e.adler>>24&255),m(i,255&e.total_in),m(i,e.total_in>>8&255),m(i,e.total_in>>16&255),m(i,e.total_in>>24&255)):(C(i,e.adler>>>16),C(i,65535&e.adler)),f(e),0<i.wrap&&(i.wrap=-i.wrap),0!==i.pending?0:1)},a.deflateEnd=function(e){var t;return e&&e.state?42!==(t=e.state.status)&&69!==t&&73!==t&&91!==t&&103!==t&&t!==h&&666!==t?u(e,l):(e.state=null,t===h?u(e,-3):0):l},a.deflateSetDictionary=function(e,t){var a,n,r,o,c,d,p,h,u=t.length;if(!e||!e.state)return l;if(2===(o=(a=e.state).wrap)||1===o&&42!==a.status||a.lookahead)return l;for(1===o&&(e.adler=s(e.adler,t,u,0)),a.wrap=0,u>=a.w_size&&(0===o&&(g(a.head),a.strstart=0,a.block_start=0,a.insert=0),h=new i.Buf8(a.w_size),i.arraySet(h,t,u-a.w_size,a.w_size,0),t=h,u=a.w_size),c=e.avail_in,d=e.next_in,p=e.input,e.avail_in=u,e.next_in=0,e.input=t,_(a);a.lookahead>=3;){for(n=a.strstart,r=a.lookahead-2;a.ins_h=(a.ins_h<<a.hash_shift^a.window[n+3-1])&a.hash_mask,a.prev[n&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=n,n++,--r;);a.strstart=n,a.lookahead=2,_(a)}return a.strstart+=a.lookahead,a.block_start=a.strstart,a.insert=a.lookahead,a.lookahead=0,a.match_length=a.prev_length=2,a.match_available=0,e.next_in=d,e.input=p,e.avail_in=c,a.wrap=o,0},a.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(e,t,a){"use strict";t.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(e,t,a){"use strict";t.exports=function(e,t){var a,n,i,r,s,o,c,l,d,p,h,u,b,g,f,v,m,C,w,_,y,x,H,S,k;S=e.input,i=(n=e.next_in)+(e.avail_in-5),k=e.output,s=(r=e.next_out)-(t-e.avail_out),o=r+(e.avail_out-257),c=(a=e.state).dmax,l=a.wsize,d=a.whave,p=a.wnext,h=a.window,u=a.hold,b=a.bits,g=a.lencode,f=a.distcode,v=(1<<a.lenbits)-1,m=(1<<a.distbits)-1;e:do{b<15&&(u+=S[n++]<<b,u+=S[n++]<<(b+=8),b+=8),C=g[u&v];t:for(;;){if(u>>>=w=C>>>24,b-=w,0==(w=C>>>16&255))k[r++]=65535&C;else{if(!(16&w)){if(0==(64&w)){C=g[(65535&C)+(u&(1<<w)-1)];continue t}if(32&w){a.mode=12;break e}e.msg="invalid literal/length code",a.mode=30;break e}_=65535&C,(w&=15)&&(b<w&&(u+=S[n++]<<b,b+=8),_+=u&(1<<w)-1,u>>>=w,b-=w),b<15&&(u+=S[n++]<<b,u+=S[n++]<<(b+=8),b+=8),C=f[u&m];a:for(;;){if(u>>>=w=C>>>24,b-=w,!(16&(w=C>>>16&255))){if(0==(64&w)){C=f[(65535&C)+(u&(1<<w)-1)];continue a}e.msg="invalid distance code",a.mode=30;break e}if(y=65535&C,b<(w&=15)&&(u+=S[n++]<<b,(b+=8)<w&&(u+=S[n++]<<b,b+=8)),c<(y+=u&(1<<w)-1)){e.msg="invalid distance too far back",a.mode=30;break e}if(u>>>=w,b-=w,(w=r-s)<y){if(d<(w=y-w)&&a.sane){e.msg="invalid distance too far back",a.mode=30;break e}if(H=h,(x=0)===p){if(x+=l-w,w<_){for(_-=w;k[r++]=h[x++],--w;);x=r-y,H=k}}else if(p<w){if(x+=l+p-w,(w-=p)<_){for(_-=w;k[r++]=h[x++],--w;);if(x=0,p<_){for(_-=w=p;k[r++]=h[x++],--w;);x=r-y,H=k}}}else if(x+=p-w,w<_){for(_-=w;k[r++]=h[x++],--w;);x=r-y,H=k}for(;2<_;)k[r++]=H[x++],k[r++]=H[x++],k[r++]=H[x++],_-=3;_&&(k[r++]=H[x++],1<_&&(k[r++]=H[x++]))}else{for(x=r-y;k[r++]=k[x++],k[r++]=k[x++],k[r++]=k[x++],2<(_-=3););_&&(k[r++]=k[x++],1<_&&(k[r++]=k[x++]))}break}}break}}while(n<i&&r<o);n-=_=b>>3,u&=(1<<(b-=_<<3))-1,e.next_in=n,e.next_out=r,e.avail_in=n<i?i-n+5:5-(n-i),e.avail_out=r<o?o-r+257:257-(r-o),a.hold=u,a.bits=b}},{}],49:[function(e,t,a){"use strict";var n=e("../utils/common"),i=e("./adler32"),r=e("./crc32"),s=e("./inffast"),o=e("./inftrees"),c=-2;function l(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function d(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new n.Buf16(320),this.work=new n.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function p(e){var t;return e&&e.state?(e.total_in=e.total_out=(t=e.state).total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=1,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new n.Buf32(852),t.distcode=t.distdyn=new n.Buf32(592),t.sane=1,t.back=-1,0):c}function h(e){var t;return e&&e.state?((t=e.state).wsize=0,t.whave=0,t.wnext=0,p(e)):c}function u(e,t){var a,n;return e&&e.state?(n=e.state,t<0?(a=0,t=-t):(a=1+(t>>4),t<48&&(t&=15)),t&&(t<8||15<t)?c:(null!==n.window&&n.wbits!==t&&(n.window=null),n.wrap=a,n.wbits=t,h(e))):c}function b(e,t){var a,n;return e?(n=new d,(e.state=n).window=null,0!==(a=u(e,t))&&(e.state=null),a):c}var g,f,v=!0;function m(e){if(v){var t;for(g=new n.Buf32(512),f=new n.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(o(1,e.lens,0,288,g,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;o(2,e.lens,0,32,f,0,e.work,{bits:5}),v=!1}e.lencode=g,e.lenbits=9,e.distcode=f,e.distbits=5}function C(e,t,a,i){var r,s=e.state;return null===s.window&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new n.Buf8(s.wsize)),i>=s.wsize?(n.arraySet(s.window,t,a-s.wsize,s.wsize,0),s.wnext=0,s.whave=s.wsize):(i<(r=s.wsize-s.wnext)&&(r=i),n.arraySet(s.window,t,a-i,r,s.wnext),(i-=r)?(n.arraySet(s.window,t,a-i,i,0),s.wnext=i,s.whave=s.wsize):(s.wnext+=r,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=r))),0}a.inflateReset=h,a.inflateReset2=u,a.inflateResetKeep=p,a.inflateInit=function(e){return b(e,15)},a.inflateInit2=b,a.inflate=function(e,t){var a,d,p,h,u,b,g,f,v,w,_,y,x,H,S,k,O,I,P,T,E,F,A,M,D=0,j=new n.Buf8(4),L=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return c;12===(a=e.state).mode&&(a.mode=13),u=e.next_out,p=e.output,h=e.next_in,d=e.input,f=a.hold,v=a.bits,w=b=e.avail_in,_=g=e.avail_out,F=0;e:for(;;)switch(a.mode){case 1:if(0===a.wrap){a.mode=13;break}for(;v<16;){if(0===b)break e;b--,f+=d[h++]<<v,v+=8}if(2&a.wrap&&35615===f){j[a.check=0]=255&f,j[1]=f>>>8&255,a.check=r(a.check,j,2,0),v=f=0,a.mode=2;break}if(a.flags=0,a.head&&(a.head.done=!1),!(1&a.wrap)||(((255&f)<<8)+(f>>8))%31){e.msg="incorrect header check",a.mode=30;break}if(8!=(15&f)){e.msg="unknown compression method",a.mode=30;break}if(v-=4,E=8+(15&(f>>>=4)),0===a.wbits)a.wbits=E;else if(E>a.wbits){e.msg="invalid window size",a.mode=30;break}a.dmax=1<<E,e.adler=a.check=1,a.mode=512&f?10:12,v=f=0;break;case 2:for(;v<16;){if(0===b)break e;b--,f+=d[h++]<<v,v+=8}if(a.flags=f,8!=(255&a.flags)){e.msg="unknown compression method",a.mode=30;break}if(57344&a.flags){e.msg="unknown header flags set",a.mode=30;break}a.head&&(a.head.text=f>>8&1),512&a.flags&&(j[0]=255&f,j[1]=f>>>8&255,a.check=r(a.check,j,2,0)),v=f=0,a.mode=3;case 3:for(;v<32;){if(0===b)break e;b--,f+=d[h++]<<v,v+=8}a.head&&(a.head.time=f),512&a.flags&&(j[0]=255&f,j[1]=f>>>8&255,j[2]=f>>>16&255,j[3]=f>>>24&255,a.check=r(a.check,j,4,0)),v=f=0,a.mode=4;case 4:for(;v<16;){if(0===b)break e;b--,f+=d[h++]<<v,v+=8}a.head&&(a.head.xflags=255&f,a.head.os=f>>8),512&a.flags&&(j[0]=255&f,j[1]=f>>>8&255,a.check=r(a.check,j,2,0)),v=f=0,a.mode=5;case 5:if(1024&a.flags){for(;v<16;){if(0===b)break e;b--,f+=d[h++]<<v,v+=8}a.length=f,a.head&&(a.head.extra_len=f),512&a.flags&&(j[0]=255&f,j[1]=f>>>8&255,a.check=r(a.check,j,2,0)),v=f=0}else a.head&&(a.head.extra=null);a.mode=6;case 6:if(1024&a.flags&&(b<(y=a.length)&&(y=b),y&&(a.head&&(E=a.head.extra_len-a.length,a.head.extra||(a.head.extra=new Array(a.head.extra_len)),n.arraySet(a.head.extra,d,h,y,E)),512&a.flags&&(a.check=r(a.check,d,y,h)),b-=y,h+=y,a.length-=y),a.length))break e;a.length=0,a.mode=7;case 7:if(2048&a.flags){if(0===b)break e;for(y=0;E=d[h+y++],a.head&&E&&a.length<65536&&(a.head.name+=String.fromCharCode(E)),E&&y<b;);if(512&a.flags&&(a.check=r(a.check,d,y,h)),b-=y,h+=y,E)break e}else a.head&&(a.head.name=null);a.length=0,a.mode=8;case 8:if(4096&a.flags){if(0===b)break e;for(y=0;E=d[h+y++],a.head&&E&&a.length<65536&&(a.head.comment+=String.fromCharCode(E)),E&&y<b;);if(512&a.flags&&(a.check=r(a.check,d,y,h)),b-=y,h+=y,E)break e}else a.head&&(a.head.comment=null);a.mode=9;case 9:if(512&a.flags){for(;v<16;){if(0===b)break e;b--,f+=d[h++]<<v,v+=8}if(f!==(65535&a.check)){e.msg="header crc mismatch",a.mode=30;break}v=f=0}a.head&&(a.head.hcrc=a.flags>>9&1,a.head.done=!0),e.adler=a.check=0,a.mode=12;break;case 10:for(;v<32;){if(0===b)break e;b--,f+=d[h++]<<v,v+=8}e.adler=a.check=l(f),v=f=0,a.mode=11;case 11:if(0===a.havedict)return e.next_out=u,e.avail_out=g,e.next_in=h,e.avail_in=b,a.hold=f,a.bits=v,2;e.adler=a.check=1,a.mode=12;case 12:if(5===t||6===t)break e;case 13:if(a.last){f>>>=7&v,v-=7&v,a.mode=27;break}for(;v<3;){if(0===b)break e;b--,f+=d[h++]<<v,v+=8}switch(a.last=1&f,v-=1,3&(f>>>=1)){case 0:a.mode=14;break;case 1:if(m(a),a.mode=20,6!==t)break;f>>>=2,v-=2;break e;case 2:a.mode=17;break;case 3:e.msg="invalid block type",a.mode=30}f>>>=2,v-=2;break;case 14:for(f>>>=7&v,v-=7&v;v<32;){if(0===b)break e;b--,f+=d[h++]<<v,v+=8}if((65535&f)!=(f>>>16^65535)){e.msg="invalid stored block lengths",a.mode=30;break}if(a.length=65535&f,v=f=0,a.mode=15,6===t)break e;case 15:a.mode=16;case 16:if(y=a.length){if(b<y&&(y=b),g<y&&(y=g),0===y)break e;n.arraySet(p,d,h,y,u),b-=y,h+=y,g-=y,u+=y,a.length-=y;break}a.mode=12;break;case 17:for(;v<14;){if(0===b)break e;b--,f+=d[h++]<<v,v+=8}if(a.nlen=257+(31&f),v-=5,a.ndist=1+(31&(f>>>=5)),v-=5,a.ncode=4+(15&(f>>>=5)),f>>>=4,v-=4,286<a.nlen||30<a.ndist){e.msg="too many length or distance symbols",a.mode=30;break}a.have=0,a.mode=18;case 18:for(;a.have<a.ncode;){for(;v<3;){if(0===b)break e;b--,f+=d[h++]<<v,v+=8}a.lens[L[a.have++]]=7&f,f>>>=3,v-=3}for(;a.have<19;)a.lens[L[a.have++]]=0;if(a.lencode=a.lendyn,a.lenbits=7,F=o(0,a.lens,0,19,a.lencode,0,a.work,A={bits:a.lenbits}),a.lenbits=A.bits,F){e.msg="invalid code lengths set",a.mode=30;break}a.have=0,a.mode=19;case 19:for(;a.have<a.nlen+a.ndist;){for(;k=(D=a.lencode[f&(1<<a.lenbits)-1])>>>16&255,O=65535&D,!((S=D>>>24)<=v);){if(0===b)break e;b--,f+=d[h++]<<v,v+=8}if(O<16)f>>>=S,v-=S,a.lens[a.have++]=O;else{if(16===O){for(M=S+2;v<M;){if(0===b)break e;b--,f+=d[h++]<<v,v+=8}if(f>>>=S,v-=S,0===a.have){e.msg="invalid bit length repeat",a.mode=30;break}E=a.lens[a.have-1],y=3+(3&f),f>>>=2,v-=2}else if(17===O){for(M=S+3;v<M;){if(0===b)break e;b--,f+=d[h++]<<v,v+=8}v-=S,E=0,y=3+(7&(f>>>=S)),f>>>=3,v-=3}else{for(M=S+7;v<M;){if(0===b)break e;b--,f+=d[h++]<<v,v+=8}v-=S,E=0,y=11+(127&(f>>>=S)),f>>>=7,v-=7}if(a.have+y>a.nlen+a.ndist){e.msg="invalid bit length repeat",a.mode=30;break}for(;y--;)a.lens[a.have++]=E}}if(30===a.mode)break;if(0===a.lens[256]){e.msg="invalid code -- missing end-of-block",a.mode=30;break}if(a.lenbits=9,F=o(1,a.lens,0,a.nlen,a.lencode,0,a.work,A={bits:a.lenbits}),a.lenbits=A.bits,F){e.msg="invalid literal/lengths set",a.mode=30;break}if(a.distbits=6,a.distcode=a.distdyn,F=o(2,a.lens,a.nlen,a.ndist,a.distcode,0,a.work,A={bits:a.distbits}),a.distbits=A.bits,F){e.msg="invalid distances set",a.mode=30;break}if(a.mode=20,6===t)break e;case 20:a.mode=21;case 21:if(6<=b&&258<=g){e.next_out=u,e.avail_out=g,e.next_in=h,e.avail_in=b,a.hold=f,a.bits=v,s(e,_),u=e.next_out,p=e.output,g=e.avail_out,h=e.next_in,d=e.input,b=e.avail_in,f=a.hold,v=a.bits,12===a.mode&&(a.back=-1);break}for(a.back=0;k=(D=a.lencode[f&(1<<a.lenbits)-1])>>>16&255,O=65535&D,!((S=D>>>24)<=v);){if(0===b)break e;b--,f+=d[h++]<<v,v+=8}if(k&&0==(240&k)){for(I=S,P=k,T=O;k=(D=a.lencode[T+((f&(1<<I+P)-1)>>I)])>>>16&255,O=65535&D,!(I+(S=D>>>24)<=v);){if(0===b)break e;b--,f+=d[h++]<<v,v+=8}f>>>=I,v-=I,a.back+=I}if(f>>>=S,v-=S,a.back+=S,a.length=O,0===k){a.mode=26;break}if(32&k){a.back=-1,a.mode=12;break}if(64&k){e.msg="invalid literal/length code",a.mode=30;break}a.extra=15&k,a.mode=22;case 22:if(a.extra){for(M=a.extra;v<M;){if(0===b)break e;b--,f+=d[h++]<<v,v+=8}a.length+=f&(1<<a.extra)-1,f>>>=a.extra,v-=a.extra,a.back+=a.extra}a.was=a.length,a.mode=23;case 23:for(;k=(D=a.distcode[f&(1<<a.distbits)-1])>>>16&255,O=65535&D,!((S=D>>>24)<=v);){if(0===b)break e;b--,f+=d[h++]<<v,v+=8}if(0==(240&k)){for(I=S,P=k,T=O;k=(D=a.distcode[T+((f&(1<<I+P)-1)>>I)])>>>16&255,O=65535&D,!(I+(S=D>>>24)<=v);){if(0===b)break e;b--,f+=d[h++]<<v,v+=8}f>>>=I,v-=I,a.back+=I}if(f>>>=S,v-=S,a.back+=S,64&k){e.msg="invalid distance code",a.mode=30;break}a.offset=O,a.extra=15&k,a.mode=24;case 24:if(a.extra){for(M=a.extra;v<M;){if(0===b)break e;b--,f+=d[h++]<<v,v+=8}a.offset+=f&(1<<a.extra)-1,f>>>=a.extra,v-=a.extra,a.back+=a.extra}if(a.offset>a.dmax){e.msg="invalid distance too far back",a.mode=30;break}a.mode=25;case 25:if(0===g)break e;if(a.offset>(y=_-g)){if((y=a.offset-y)>a.whave&&a.sane){e.msg="invalid distance too far back",a.mode=30;break}x=y>a.wnext?a.wsize-(y-=a.wnext):a.wnext-y,y>a.length&&(y=a.length),H=a.window}else H=p,x=u-a.offset,y=a.length;for(g<y&&(y=g),g-=y,a.length-=y;p[u++]=H[x++],--y;);0===a.length&&(a.mode=21);break;case 26:if(0===g)break e;p[u++]=a.length,g--,a.mode=21;break;case 27:if(a.wrap){for(;v<32;){if(0===b)break e;b--,f|=d[h++]<<v,v+=8}if(e.total_out+=_-=g,a.total+=_,_&&(e.adler=a.check=a.flags?r(a.check,p,_,u-_):i(a.check,p,_,u-_)),_=g,(a.flags?f:l(f))!==a.check){e.msg="incorrect data check",a.mode=30;break}v=f=0}a.mode=28;case 28:if(a.wrap&&a.flags){for(;v<32;){if(0===b)break e;b--,f+=d[h++]<<v,v+=8}if(f!==(4294967295&a.total)){e.msg="incorrect length check",a.mode=30;break}v=f=0}a.mode=29;case 29:F=1;break e;case 30:F=-3;break e;case 31:return-4;case 32:default:return c}return e.next_out=u,e.avail_out=g,e.next_in=h,e.avail_in=b,a.hold=f,a.bits=v,(a.wsize||_!==e.avail_out&&a.mode<30&&(a.mode<27||4!==t))&&C(e,e.output,e.next_out,_-e.avail_out)?(a.mode=31,-4):(_-=e.avail_out,e.total_in+=w-=e.avail_in,e.total_out+=_,a.total+=_,a.wrap&&_&&(e.adler=a.check=a.flags?r(a.check,p,_,e.next_out-_):i(a.check,p,_,e.next_out-_)),e.data_type=a.bits+(a.last?64:0)+(12===a.mode?128:0)+(20===a.mode||15===a.mode?256:0),(0==w&&0===_||4===t)&&0===F&&(F=-5),F)},a.inflateEnd=function(e){if(!e||!e.state)return c;var t=e.state;return t.window&&(t.window=null),e.state=null,0},a.inflateGetHeader=function(e,t){var a;return e&&e.state?0==(2&(a=e.state).wrap)?c:((a.head=t).done=!1,0):c},a.inflateSetDictionary=function(e,t){var a,n=t.length;return e&&e.state?0!==(a=e.state).wrap&&11!==a.mode?c:11===a.mode&&i(1,t,n,0)!==a.check?-3:C(e,t,n,n)?(a.mode=31,-4):(a.havedict=1,0):c},a.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(e,t,a){"use strict";var n=e("../utils/common"),i=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],r=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],s=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],o=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(e,t,a,c,l,d,p,h){var u,b,g,f,v,m,C,w,_,y=h.bits,x=0,H=0,S=0,k=0,O=0,I=0,P=0,T=0,E=0,F=0,A=null,M=0,D=new n.Buf16(16),j=new n.Buf16(16),L=null,Z=0;for(x=0;x<=15;x++)D[x]=0;for(H=0;H<c;H++)D[t[a+H]]++;for(O=y,k=15;1<=k&&0===D[k];k--);if(k<O&&(O=k),0===k)return l[d++]=20971520,l[d++]=20971520,h.bits=1,0;for(S=1;S<k&&0===D[S];S++);for(O<S&&(O=S),x=T=1;x<=15;x++)if(T<<=1,(T-=D[x])<0)return-1;if(0<T&&(0===e||1!==k))return-1;for(j[1]=0,x=1;x<15;x++)j[x+1]=j[x]+D[x];for(H=0;H<c;H++)0!==t[a+H]&&(p[j[t[a+H]]++]=H);if(m=0===e?(A=L=p,19):1===e?(A=i,M-=257,L=r,Z-=257,256):(A=s,L=o,-1),x=S,v=d,P=H=F=0,g=-1,f=(E=1<<(I=O))-1,1===e&&852<E||2===e&&592<E)return 1;for(;;){for(C=x-P,_=p[H]<m?(w=0,p[H]):p[H]>m?(w=L[Z+p[H]],A[M+p[H]]):(w=96,0),u=1<<x-P,S=b=1<<I;l[v+(F>>P)+(b-=u)]=C<<24|w<<16|_|0,0!==b;);for(u=1<<x-1;F&u;)u>>=1;if(0!==u?(F&=u-1,F+=u):F=0,H++,0==--D[x]){if(x===k)break;x=t[a+p[H]]}if(O<x&&(F&f)!==g){for(0===P&&(P=O),v+=S,T=1<<(I=x-P);I+P<k&&!((T-=D[I+P])<=0);)I++,T<<=1;if(E+=1<<I,1===e&&852<E||2===e&&592<E)return 1;l[g=F&f]=O<<24|I<<16|v-d|0}}return 0!==F&&(l[v+F]=x-P<<24|64<<16|0),h.bits=O,0}},{"../utils/common":41}],51:[function(e,t,a){"use strict";t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(e,t,a){"use strict";var n=e("../utils/common");function i(e){for(var t=e.length;0<=--t;)e[t]=0}var r=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],s=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],c=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],l=new Array(576);i(l);var d=new Array(60);i(d);var p=new Array(512);i(p);var h=new Array(256);i(h);var u=new Array(29);i(u);var b,g,f,v=new Array(30);function m(e,t,a,n,i){this.static_tree=e,this.extra_bits=t,this.extra_base=a,this.elems=n,this.max_length=i,this.has_stree=e&&e.length}function C(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function w(e){return e<256?p[e]:p[256+(e>>>7)]}function _(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function y(e,t,a){e.bi_valid>16-a?(e.bi_buf|=t<<e.bi_valid&65535,_(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=a-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=a)}function x(e,t,a){y(e,a[2*t],a[2*t+1])}function H(e,t){for(var a=0;a|=1&e,e>>>=1,a<<=1,0<--t;);return a>>>1}function S(e,t,a){var n,i,r=new Array(16),s=0;for(n=1;n<=15;n++)r[n]=s=s+a[n-1]<<1;for(i=0;i<=t;i++){var o=e[2*i+1];0!==o&&(e[2*i]=H(r[o]++,o))}}function k(e){var t;for(t=0;t<286;t++)e.dyn_ltree[2*t]=0;for(t=0;t<30;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function O(e){8<e.bi_valid?_(e,e.bi_buf):0<e.bi_valid&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function I(e,t,a,n){var i=2*t,r=2*a;return e[i]<e[r]||e[i]===e[r]&&n[t]<=n[a]}function P(e,t,a){for(var n=e.heap[a],i=a<<1;i<=e.heap_len&&(i<e.heap_len&&I(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!I(t,n,e.heap[i],e.depth));)e.heap[a]=e.heap[i],a=i,i<<=1;e.heap[a]=n}function T(e,t,a){var n,i,o,c,l=0;if(0!==e.last_lit)for(;n=e.pending_buf[e.d_buf+2*l]<<8|e.pending_buf[e.d_buf+2*l+1],i=e.pending_buf[e.l_buf+l],l++,0===n?x(e,i,t):(x(e,(o=h[i])+256+1,t),0!==(c=r[o])&&y(e,i-=u[o],c),x(e,o=w(--n),a),0!==(c=s[o])&&y(e,n-=v[o],c)),l<e.last_lit;);x(e,256,t)}function E(e,t){var a,n,i,r=t.dyn_tree,s=t.stat_desc.static_tree,o=t.stat_desc.has_stree,c=t.stat_desc.elems,l=-1;for(e.heap_len=0,e.heap_max=573,a=0;a<c;a++)0!==r[2*a]?(e.heap[++e.heap_len]=l=a,e.depth[a]=0):r[2*a+1]=0;for(;e.heap_len<2;)r[2*(i=e.heap[++e.heap_len]=l<2?++l:0)]=1,e.depth[i]=0,e.opt_len--,o&&(e.static_len-=s[2*i+1]);for(t.max_code=l,a=e.heap_len>>1;1<=a;a--)P(e,r,a);for(i=c;a=e.heap[1],e.heap[1]=e.heap[e.heap_len--],P(e,r,1),n=e.heap[1],e.heap[--e.heap_max]=a,e.heap[--e.heap_max]=n,r[2*i]=r[2*a]+r[2*n],e.depth[i]=(e.depth[a]>=e.depth[n]?e.depth[a]:e.depth[n])+1,r[2*a+1]=r[2*n+1]=i,e.heap[1]=i++,P(e,r,1),2<=e.heap_len;);e.heap[--e.heap_max]=e.heap[1],function(e,t){var a,n,i,r,s,o,c=t.dyn_tree,l=t.max_code,d=t.stat_desc.static_tree,p=t.stat_desc.has_stree,h=t.stat_desc.extra_bits,u=t.stat_desc.extra_base,b=t.stat_desc.max_length,g=0;for(r=0;r<=15;r++)e.bl_count[r]=0;for(c[2*e.heap[e.heap_max]+1]=0,a=e.heap_max+1;a<573;a++)b<(r=c[2*c[2*(n=e.heap[a])+1]+1]+1)&&(r=b,g++),c[2*n+1]=r,l<n||(e.bl_count[r]++,s=0,u<=n&&(s=h[n-u]),e.opt_len+=(o=c[2*n])*(r+s),p&&(e.static_len+=o*(d[2*n+1]+s)));if(0!==g){do{for(r=b-1;0===e.bl_count[r];)r--;e.bl_count[r]--,e.bl_count[r+1]+=2,e.bl_count[b]--,g-=2}while(0<g);for(r=b;0!==r;r--)for(n=e.bl_count[r];0!==n;)l<(i=e.heap[--a])||(c[2*i+1]!==r&&(e.opt_len+=(r-c[2*i+1])*c[2*i],c[2*i+1]=r),n--)}}(e,t),S(r,l,e.bl_count)}function F(e,t,a){var n,i,r=-1,s=t[1],o=0,c=7,l=4;for(0===s&&(c=138,l=3),t[2*(a+1)+1]=65535,n=0;n<=a;n++)i=s,s=t[2*(n+1)+1],++o<c&&i===s||(o<l?e.bl_tree[2*i]+=o:0!==i?(i!==r&&e.bl_tree[2*i]++,e.bl_tree[32]++):o<=10?e.bl_tree[34]++:e.bl_tree[36]++,r=i,l=(o=0)===s?(c=138,3):i===s?(c=6,3):(c=7,4))}function A(e,t,a){var n,i,r=-1,s=t[1],o=0,c=7,l=4;for(0===s&&(c=138,l=3),n=0;n<=a;n++)if(i=s,s=t[2*(n+1)+1],!(++o<c&&i===s)){if(o<l)for(;x(e,i,e.bl_tree),0!=--o;);else 0!==i?(i!==r&&(x(e,i,e.bl_tree),o--),x(e,16,e.bl_tree),y(e,o-3,2)):o<=10?(x(e,17,e.bl_tree),y(e,o-3,3)):(x(e,18,e.bl_tree),y(e,o-11,7));r=i,l=(o=0)===s?(c=138,3):i===s?(c=6,3):(c=7,4)}}i(v);var M=!1;function D(e,t,a,i){y(e,0+(i?1:0),3),function(e,t,a,i){O(e),_(e,a),_(e,~a),n.arraySet(e.pending_buf,e.window,t,a,e.pending),e.pending+=a}(e,t,a)}a._tr_init=function(e){M||(function(){var e,t,a,n,i,c=new Array(16);for(n=a=0;n<28;n++)for(u[n]=a,e=0;e<1<<r[n];e++)h[a++]=n;for(h[a-1]=n,n=i=0;n<16;n++)for(v[n]=i,e=0;e<1<<s[n];e++)p[i++]=n;for(i>>=7;n<30;n++)for(v[n]=i<<7,e=0;e<1<<s[n]-7;e++)p[256+i++]=n;for(t=0;t<=15;t++)c[t]=0;for(e=0;e<=143;)l[2*e+1]=8,e++,c[8]++;for(;e<=255;)l[2*e+1]=9,e++,c[9]++;for(;e<=279;)l[2*e+1]=7,e++,c[7]++;for(;e<=287;)l[2*e+1]=8,e++,c[8]++;for(S(l,287,c),e=0;e<30;e++)d[2*e+1]=5,d[2*e]=H(e,5);b=new m(l,r,257,286,15),g=new m(d,s,0,30,15),f=new m(new Array(0),o,0,19,7)}(),M=!0),e.l_desc=new C(e.dyn_ltree,b),e.d_desc=new C(e.dyn_dtree,g),e.bl_desc=new C(e.bl_tree,f),e.bi_buf=0,e.bi_valid=0,k(e)},a._tr_stored_block=D,a._tr_flush_block=function(e,t,a,n){var i,r,s=0;0<e.level?(2===e.strm.data_type&&(e.strm.data_type=function(e){var t,a=4093624447;for(t=0;t<=31;t++,a>>>=1)if(1&a&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<256;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0}(e)),E(e,e.l_desc),E(e,e.d_desc),s=function(e){var t;for(F(e,e.dyn_ltree,e.l_desc.max_code),F(e,e.dyn_dtree,e.d_desc.max_code),E(e,e.bl_desc),t=18;3<=t&&0===e.bl_tree[2*c[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}(e),(r=e.static_len+3+7>>>3)<=(i=e.opt_len+3+7>>>3)&&(i=r)):i=r=a+5,a+4<=i&&-1!==t?D(e,t,a,n):4===e.strategy||r===i?(y(e,2+(n?1:0),3),T(e,l,d)):(y(e,4+(n?1:0),3),function(e,t,a,n){var i;for(y(e,t-257,5),y(e,a-1,5),y(e,n-4,4),i=0;i<n;i++)y(e,e.bl_tree[2*c[i]+1],3);A(e,e.dyn_ltree,t-1),A(e,e.dyn_dtree,a-1)}(e,e.l_desc.max_code+1,e.d_desc.max_code+1,s+1),T(e,e.dyn_ltree,e.dyn_dtree)),k(e),n&&O(e)},a._tr_tally=function(e,t,a){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&a,e.last_lit++,0===t?e.dyn_ltree[2*a]++:(e.matches++,t--,e.dyn_ltree[2*(h[a]+256+1)]++,e.dyn_dtree[2*w(t)]++),e.last_lit===e.lit_bufsize-1},a._tr_align=function(e){y(e,2,3),x(e,256,l),function(e){16===e.bi_valid?(_(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):8<=e.bi_valid&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}(e)}},{"../utils/common":41}],53:[function(e,t,a){"use strict";t.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(e,t,a){"use strict";t.exports="function"==typeof setImmediate?setImmediate:function(){var e=[].slice.apply(arguments);e.splice(1,0,0),setTimeout.apply(null,e)}},{}]},{},[10])(10)},xweI:function(e,t,a){var n=a("XGnz"),i=a("alwl"),r=a("EA7m"),s=a("mv/X"),o=r(function(e,t){if(null==e)return[];var a=t.length;return a>1&&s(e,t[0],t[1])?t=[]:a>2&&s(t[0],t[1],t[2])&&(t=[t[0]]),i(e,n(t,1),[])});e.exports=o},yHx3:function(e,t){var a=Object.prototype.hasOwnProperty;e.exports=function(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&a.call(e,"index")&&(n.index=e.index,n.input=e.input),n}},yP5f:function(e,t,a){var n=a("+K+b");e.exports=function(e,t){var a=t?n(e.buffer):e.buffer;return new e.constructor(a,e.byteOffset,e.length)}},yue5:function(e,t,a){var n=a("/9aa");e.exports=function(e,t){if(e!==t){var a=void 0!==e,i=null===e,r=e==e,s=n(e),o=void 0!==t,c=null===t,l=t==t,d=n(t);if(!c&&!d&&!s&&e>t||s&&o&&l&&!c&&!d||i&&o&&l||!a&&l||!r)return 1;if(!i&&!s&&!d&&e<t||d&&a&&r&&!i&&!s||c&&a&&r||!o&&r||!l)return-1}return 0}},zEVN:function(e,t,a){var n=a("Gi0A"),i=a("sEf8"),r=a("mdPL"),s=r&&r.isMap,o=s?i(s):n;e.exports=o}}]);
//# sourceMappingURL=modules-editor-editor-module-es2015.ff9dbddd6bdfd219cfdb.js.map